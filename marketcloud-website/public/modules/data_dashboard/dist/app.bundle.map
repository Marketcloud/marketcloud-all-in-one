{"version":3,"sources":["webpack:///app.bundle.js","webpack:///webpack/bootstrap f9bc2424be2481880b14","webpack:///./public/modules/data_dashboard/main.js","webpack:///./public/modules/data_dashboard/src \\.js","webpack:///./public/modules/data_dashboard/src/app.js","webpack:///./public/modules/data_dashboard/src/components/activeFilters/activeFilters.component.js","webpack:///./public/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.js","webpack:///./public/modules/data_dashboard/src/components/addressForm/addressForm.component.js","webpack:///./public/modules/data_dashboard/src/components/application/application.component.js","webpack:///./public/modules/data_dashboard/src/components/autocomplete/autocomplete.component.js","webpack:///./public/modules/data_dashboard/src/components/backButton/backButton.component.js","webpack:///./public/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/customAttributes/customAttributes.component.js","webpack:///./public/modules/data_dashboard/src/components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","webpack:///./public/modules/data_dashboard/src/components/dataTable/dataTable.component.js","webpack:///./public/modules/data_dashboard/src/components/errorMessages/errorMessages.component.js","webpack:///./public/modules/data_dashboard/src/components/flagIcon/flagIcon.component.js","webpack:///./public/modules/data_dashboard/src/components/imageSelector/imageSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.js","webpack:///./public/modules/data_dashboard/src/components/imagesCard/imagesCard.component.js","webpack:///./public/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.js","webpack:///./public/modules/data_dashboard/src/components/navbar/navbar.component.js","webpack:///./public/modules/data_dashboard/src/components/paginationNav/paginationNav.component.js","webpack:///./public/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/seoForm/seoForm.component.js","webpack:///./public/modules/data_dashboard/src/components/sidebar/sidebar.component.js","webpack:///./public/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/switch/switch.component.js","webpack:///./public/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.js","webpack:///./public/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.js","webpack:///./public/modules/data_dashboard/src/controllers/PaymentMethods.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/analytics.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/acl.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/application.new.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/applications.list.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/billing.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/collaborators.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/deploy.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/integrations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/navigation.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/overview.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/settings.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/application/webhooks.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/brandTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.list.js","webpack:///./public/modules/data_dashboard/src/controllers/brands/brands.new.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.list.js","webpack:///./public/modules/data_dashboard/src/controllers/categories/categories.new.js","webpack:///./public/modules/data_dashboard/src/controllers/categoryTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collectionTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.create.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/collections/collections.new.js","webpack:///./public/modules/data_dashboard/src/controllers/contentTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/content.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/content.new.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/contents.list.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/groupedProducts.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/contents/groupedProducts.new.js","webpack:///./public/modules/data_dashboard/src/controllers/coupons/coupon.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/coupons/coupons.new.js","webpack:///./public/modules/data_dashboard/src/controllers/deploy.js","webpack:///./public/modules/data_dashboard/src/controllers/home.js","webpack:///./public/modules/data_dashboard/src/controllers/integrations.js","webpack:///./public/modules/data_dashboard/src/controllers/invoices/invoice.new.js","webpack:///./public/modules/data_dashboard/src/controllers/invoices/invoices.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/localization.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/media.list.js","webpack:///./public/modules/data_dashboard/src/controllers/media_manager.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.new.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.preview.js","webpack:///./public/modules/data_dashboard/src/controllers/notifications/notifications.translations.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.list.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.new.js","webpack:///./public/modules/data_dashboard/src/controllers/orders/orders.view.js","webpack:///./public/modules/data_dashboard/src/controllers/productTranslations.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/products/bundledProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/bundledProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/configurableProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/configurableProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/products.list.js","webpack:///./public/modules/data_dashboard/src/controllers/products/productsWithVariants.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/productsWithVariants.new.js","webpack:///./public/modules/data_dashboard/src/controllers/products/simpleProduct.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/products/simpleProduct.new.js","webpack:///./public/modules/data_dashboard/src/controllers/promotions/promotions.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/promotions/promotions.new.js","webpack:///./public/modules/data_dashboard/src/controllers/resource.list.js","webpack:///./public/modules/data_dashboard/src/controllers/settings.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shipping.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.list.js","webpack:///./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.new.js","webpack:///./public/modules/data_dashboard/src/controllers/sidebar.js","webpack:///./public/modules/data_dashboard/src/controllers/staticContents/staticContent.new.js","webpack:///./public/modules/data_dashboard/src/controllers/staticContents/staticContents.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/taxes/taxes.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/taxes/taxes.new.js","webpack:///./public/modules/data_dashboard/src/controllers/translations.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.list.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.new.js","webpack:///./public/modules/data_dashboard/src/controllers/users/users.view.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.list.js","webpack:///./public/modules/data_dashboard/src/controllers/variables/variables.new.js","webpack:///./public/modules/data_dashboard/src/controllers/variants.edit.js","webpack:///./public/modules/data_dashboard/src/controllers/variants/variants.list.controller.js","webpack:///./public/modules/data_dashboard/src/controllers/webhooks.js","webpack:///./public/modules/data_dashboard/src/directives/avatar.directive.js","webpack:///./public/modules/data_dashboard/src/directives/contenteditable.directive.js","webpack:///./public/modules/data_dashboard/src/directives/dropdown.directive.js","webpack:///./public/modules/data_dashboard/src/directives/fallback_src.js","webpack:///./public/modules/data_dashboard/src/directives/fileModel.directive.js","webpack:///./public/modules/data_dashboard/src/directives/focusOnShow.directive.js","webpack:///./public/modules/data_dashboard/src/directives/money.directive.js","webpack:///./public/modules/data_dashboard/src/directives/ng-thumb.directive.js","webpack:///./public/modules/data_dashboard/src/directives/ng_enter.js","webpack:///./public/modules/data_dashboard/src/directives/onChangeAsync.directive.js","webpack:///./public/modules/data_dashboard/src/directives/onFileChange.directive.js","webpack:///./public/modules/data_dashboard/src/factories/account.factory.js","webpack:///./public/modules/data_dashboard/src/factories/application.factory.js","webpack:///./public/modules/data_dashboard/src/factories/cache.factory.js","webpack:///./public/modules/data_dashboard/src/factories/locales.factory.js","webpack:///./public/modules/data_dashboard/src/factories/marketcloud.factory.js","webpack:///./public/modules/data_dashboard/src/factories/models.factory.js","webpack:///./public/modules/data_dashboard/src/factories/notificationsPresets.factory.js","webpack:///./public/modules/data_dashboard/src/factories/pagination.factory.js","webpack:///./public/modules/data_dashboard/src/factories/rolesPresets.factory.js","webpack:///./public/modules/data_dashboard/src/factories/stormConfiguration.factory.js","webpack:///./public/modules/data_dashboard/src/factories/tableManager.factory.js","webpack:///./public/modules/data_dashboard/src/factories/taxrates.factory.js","webpack:///./public/modules/data_dashboard/src/factories/utils.factory.js","webpack:///./public/modules/data_dashboard/src/factories/validation.service.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","i","Object","prototype","hasOwnProperty","_m","args","slice","fn","a","b","apply","this","concat","requireAll","requireContext","keys","map","webpackContext","req","webpackContextResolve","Error","./app.js","./components/activeFilters/activeFilters.component.js","./components/addProductsCard/addProductsCard.component.js","./components/addressForm/addressForm.component.js","./components/application/application.component.js","./components/autocomplete/autocomplete.component.js","./components/backButton/backButton.component.js","./components/brandsSelector/brandsSelector.component.js","./components/categoriesSelector/categoriesSelector.component.js","./components/customAttributes/customAttributes.component.js","./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js","./components/dataTable/dataTable.component.js","./components/errorMessages/errorMessages.component.js","./components/flagIcon/flagIcon.component.js","./components/imageSelector/imageSelector.component.js","./components/imageThumbnail/imageThumbnail.component.js","./components/imagesCard/imagesCard.component.js","./components/linkHelpText/linkHelpText.component.js","./components/navbar/navbar.component.js","./components/paginationNav/paginationNav.component.js","./components/paginationSelector/paginationSelector.component.js","./components/resourcePicker/resourcePicker.component.js","./components/seoForm/seoForm.component.js","./components/sidebar/sidebar.component.js","./components/sortingSelector/sortingSelector.component.js","./components/switch/switch.component.js","./components/taxesSelector/taxesSelector.component.js","./components/toolbarSearch/toolbarSearch.component.js","./controllers/PaymentMethods.controller.js","./controllers/analytics.controller.js","./controllers/application/acl.controller.js","./controllers/application/application.new.controller.js","./controllers/application/applications.list.controller.js","./controllers/application/billing.controller.js","./controllers/application/collaborators.controller.js","./controllers/application/deploy.controller.js","./controllers/application/integrations.controller.js","./controllers/application/navigation.controller.js","./controllers/application/overview.controller.js","./controllers/application/settings.controller.js","./controllers/application/webhooks.controller.js","./controllers/brandTranslations.controller.js","./controllers/brands/brands.edit.js","./controllers/brands/brands.list.js","./controllers/brands/brands.new.js","./controllers/categories/categories.edit.js","./controllers/categories/categories.list.js","./controllers/categories/categories.new.js","./controllers/categoryTranslations.controller.js","./controllers/collectionTranslations.controller.js","./controllers/collections/collections.controller.js","./controllers/collections/collections.create.js","./controllers/collections/collections.edit.js","./controllers/collections/collections.new.js","./controllers/contentTranslations.controller.js","./controllers/contents/content.edit.js","./controllers/contents/content.new.js","./controllers/contents/contents.list.js","./controllers/contents/groupedProducts.edit.js","./controllers/contents/groupedProducts.new.js","./controllers/coupons/coupon.edit.js","./controllers/coupons/coupons.new.js","./controllers/deploy.js","./controllers/home.js","./controllers/integrations.js","./controllers/invoices/invoice.new.js","./controllers/invoices/invoices.edit.js","./controllers/localization.controller.js","./controllers/media.list.js","./controllers/media_manager.controller.js","./controllers/notifications/notifications.edit.js","./controllers/notifications/notifications.js","./controllers/notifications/notifications.new.js","./controllers/notifications/notifications.preview.js","./controllers/notifications/notifications.translations.js","./controllers/orders/orders.list.js","./controllers/orders/orders.new.js","./controllers/orders/orders.view.js","./controllers/productTranslations.controller.js","./controllers/products/bundledProduct.edit.js","./controllers/products/bundledProduct.new.js","./controllers/products/configurableProduct.edit.js","./controllers/products/configurableProduct.new.js","./controllers/products/products.list.js","./controllers/products/productsWithVariants.edit.js","./controllers/products/productsWithVariants.new.js","./controllers/products/simpleProduct.edit.js","./controllers/products/simpleProduct.new.js","./controllers/promotions/promotions.edit.js","./controllers/promotions/promotions.new.js","./controllers/resource.list.js","./controllers/settings.controller.js","./controllers/shippingMethods/shipping.edit.js","./controllers/shippingMethods/shippings.list.js","./controllers/shippingMethods/shippings.new.js","./controllers/sidebar.js","./controllers/staticContents/staticContent.new.js","./controllers/staticContents/staticContents.edit.js","./controllers/taxes/taxes.edit.js","./controllers/taxes/taxes.new.js","./controllers/translations.js","./controllers/users/users.list.js","./controllers/users/users.new.js","./controllers/users/users.view.js","./controllers/variables/variables.edit.js","./controllers/variables/variables.list.js","./controllers/variables/variables.new.js","./controllers/variants.edit.js","./controllers/variants/variants.list.controller.js","./controllers/webhooks.js","./directives/avatar.directive.js","./directives/contenteditable.directive.js","./directives/dropdown.directive.js","./directives/fallback_src.js","./directives/fileModel.directive.js","./directives/focusOnShow.directive.js","./directives/money.directive.js","./directives/ng-thumb.directive.js","./directives/ng_enter.js","./directives/onChangeAsync.directive.js","./directives/onFileChange.directive.js","./factories/account.factory.js","./factories/application.factory.js","./factories/cache.factory.js","./factories/locales.factory.js","./factories/marketcloud.factory.js","./factories/models.factory.js","./factories/notificationsPresets.factory.js","./factories/pagination.factory.js","./factories/rolesPresets.factory.js","./factories/stormConfiguration.factory.js","./factories/tableManager.factory.js","./factories/taxrates.factory.js","./factories/utils.factory.js","./factories/validation.service.js","resolve","window","VERSION","API_BASE_URL","LAST_ERROR","app","angular","config","$locationProvider","hashPrefix","$compileProvider","debugInfoEnabled","run","notie","setOptions","colorSuccess","colorWarning","colorError","colorInfo","colorNeutral","colorText","dateMonths","animationDelay","backgroundClickDismiss","Configuration","$http","theme","get","applyTheme","$httpProvider","defaults","paramSerializer","factory","$injector","exception","cause","$log","$getBrowser","error","toString","console","info","method","url","data","type","source","browser","location","href","stack","then","response","warn","catch","$rootScope","$route","$application","$account","$location","application","current_application","user","set","$on","event","next","current","nextRouteName","$$route","name","currentUserRole","acl","deniedRoles","deny","indexOf","alert","$evalAsync","showLoadingAnimation","path","preventDefault","log","_route","copy","routeName","$broadcast","section","$window","online","navigator","onLine","addEventListener","$apply","alertHide","service","$q","responseError","status","reload","reject","interceptors","push","$root","route","$routeProvider","when","templateUrl","controller","analytics","$marketcloud","range","search","_from","_to","Date","setHours","setDate","getDate","setMonth","getMonth","orders","list","$created_at_gt","getTime","$created_at_lt","per_page","customers","users","toISOString","carts","one_month_ago","params","headers","Authorization","public_key","token","product","products","getById","productId","reloadOnSearch","configuration","filters","query","page","forEach","filter","value","urlQuery","JSON","parse","e","k","resolvedProduct","resources","resourceName","dependencies","category","categories","brand","brands","collection","collections","content","contents","parentOrder","orderId","invoice","invoices","invoiceId","payments","all","events","request.path","Content-Type","ordersResponse","order","shippingMethods","shippings","paymentMethods","expand","userId","categoryId","brandId","collectionId","BraintreeIntegration","Promise","StripeIntegration","contentId","staticContents","variables","variable","variableId","media","promotions","promotion","coupons","coupon","redirectTo","taxes","tax","shipping","shippingId","notifications","notification","notificationId","atob","account","http","webhooks","collaborators","roles","role","roleId","otherwise","_typeof","Symbol","iterator","obj","constructor","scope","StormConfiguration","ctrl","newFilter","notFilters","$onInit","filterAttributes","persistFilters","Boolean","persistFilter","inferFilterType","key","_resource","find","item","isFilterSet","length","filterIsNotEmpty","index","array","getControlForFilter","addFilter","saveNewFilterAndApply","applyFilters","$","modal","humanReadableFilterValue","$regex","replace","removeFilter","applyToQuery","filterToRemove","splice","onUpdate","component","bindings","$element","$attrs","additionalFields","swapArrayItemPosition","sourceIndex","destinationIndex","arr","temp","showTheList","prepareRegex","$options","showList","hideList","setTimeout","addProduct","items","removeProduct","loadProducts","overrides","title","$scope","Countries","countries","address","ApplicationController","applicationData","percentage","v","api_calls_quota_left","t","api_calls_quota_max","suggestionList","initiallySelected","myModel","selectItem","toMatch","selectedLabel","toLowerCase","handleNewItems","allowNewElements","label","onSelected","inputClasses","goBack","history","back","template","BrandsSelectorController","$elem","initializeData","currentBrand","onError","newBrand","enableCreateBrand","showModal","saveBrand","save","hide","setSelectedBrand","onChange","filterBrands","$inject","CategoriesSelectorController","currentCategory","newCategory","enableCreateCategory","setSelectedCategory","filterCategories","saveCategory","$moment","computePropertiesTypes","properties","propertiesTypes","isNull","isRichText","isURL","containersForExistingMediaAttributes","$watchCollection","resource","rootObject","newAttribute","resetNewAttributeValue","availableTypes","containerForNewMediaAttribute","isBoolean","d","isString","str","doc","DOMParser","parseFromString","body","childNodes","some","node","nodeType","isNumber","isObject","typeof","o","hasCustomProperties","addCustomProperty","errorMessage","deleteCustomProperty","propertyName","propertiesStack","showRecursiveObjectEditor","goToNestedStep","disableAdd","removeCardFrame","columns","ErrorMessagesController","Models","modelName","schema","$onChanges","changes","validation","currentValue","invalidPropertyName","animate","scrollTop","offset","top","messageMin","messageMax","messageRequired","messageType","countryObject","country","countryCode","code","getFlagClassName","ImageSelectorControllerDependencies","ImageSelectorController","FileUploader","$exceptionHandler","images","closeOnUploadComplete","buttonClass","buttonText","buttonIcon","tabs","split","uploader","arrayKey","closeDialog","onCloseDialog","openDialog","onOpenDialog","uploadImages","onUploadImages","image","media_files","loadingMediaFiles","pagination","loadMedias","currentPage","numberOfPages","pages","nextPage","_links","previousPage","prev","count","loadPage","page_number","loadData","loadMore","pageToFetch","showProgressBar","uploadingImages","howManySelectedMedia","addSelectedFromLibrary","isImageSelected","selectImage","onCompleteAll","clearQueue","onUploadComplete","onProgressAll","progress","onErrorItem","err","chooseFileFromStorage","trigger","uploadSelectedImages","uploadAll","addImageFromUrl","showImageSelectorModal","showOverlay","edit","onEdit","delete","onDelete","zoom","hideOverlay","toggleEditImageModal","imageSrc","ImagesCardController","fromIndex","toIndex","target","toMove","stringify","removeImage","removed","onRemove","text","showHelpText","toggleHelpText","onChangePage","getListOfPages","np","cp","initialPage","lastPage","perPage","defaultPageSize","defaultPageNumber","updatePageCounters","first","last","availablePageSizes","setPageSize","pageSize","newSize","onChangePageSize","setPageNumber","pageNumber","onChangePageNumber","seo","activeSeoTab","showSeoTab","tabname","$params","showingSubSidebar","currentSidebarSection","currentSection","sidebarIsExpanded","subEntriesGroupToShow","subSideBars","inventory","system","$event","currentSubsection","hideSubSidebar","switchToApp","app_id","showSubEntries","hideAllSubEntries","subEntriesGroupShown","mql","matchMedia","addListener","mq","matches","toggleSidebar","movement","duration","margin-left","queue","left","not","done","addClass","removeClass","element","toggleSubEntries","group_id","saveStormConfiguration","showSubSidebar","sidebars","sort_by","sort_order","resourceAttributes","applySorting","align","on","readOnly","class","TaxesSelectorController","searchWord","onQueryChange","modalMode","paymentMethod","description","active","loadPaymentMethods","availableChargeOptions","payment","createPayment","editPayment","update","updates","payload","togglePaymentMethod","moment","getDateKeyFromDate","month","String","day","getFullYear","currentRange","today","yesterday","oneWeekAgo","salesVolumePerDay","numberOfOrdersPerDay","x","invalid_orders","created_at","total","goodOrders","ordersPerDay","dateLabels","formattedDateLabels","format","ordersVolumePerDay","ordersCountPerDay","date","numberOfOrdersThisDate","salesThisDate","reduce","totalOrdersValue","toFixed","totalOrdersCount","chartOptions","scaleLabel","currency_code","scales","xAxes","gridLines","display","yAxes","labelString","totalCustomersCount","totalCartsCount","abandonedCarts","cart","abandonedCartsCount","emptyCartsCount","convertedCartsCount","abandonedCartsTotalValue","CartsDatasets","CartsLabels","CartsChartOptions","legend","position","setCurrentTimeRange","totalCartValue","averageCartValue","averageOrderValue","rootScope","rolePresets","preset_name","errors","presets","applyPreset","endpoints","clearErrors","formHasErrors","validateRole","updateRole","newRole","public","saveRole","load","create","_invalid","Application","validate","valid","applications","step","selected_plan","card","creditCardFormState","showYearlyPlans","goToStep","selectPlan","plan_id","plans","plan","updateApplicationSubscription","message","filterByInterval","interval","mode","showCreateModal","saveCollaborator","newCollaborator","updateCollaborator","collaborator","email","selectedTemplate","getHerokuURL","encodeURIComponent","secret_key","integrations","tags","links","view","$routeParams","isIntegrationInstalled","currentApplication","toggleIntegration","isActive","displayCredentialsForm","braintreeConfiguration","braintreeUpdate","toggleCredentialsForm","saveBraintreeConfiguration","environment","merchantId","publicKey","privateKey","showNavigation","activities","kilobytesToGigabytes","kb","renew_date","getMethodCSSClass","cls","BILLING_PLANS","free","price_monthly","price_yearly","storage","month-19","month-49","month-99","BillingPlans","currentPlan","plan_name","updateApplication","put","deleteApplication","confirm","regenerateKeys","newWebhook","webhookMethods","webhookResources","hook","showUpdateModal","validateWebhook","validateUrl","saveWebhook","regex","test","updateWebhook","EditBrandTranslationsController","locales","getSlugFromString","join","getAvailableLocaleCodes","availableLocales","unsafeSlug","updateSlug","currentLocale","slug","locale","toLocaleLowerCase","updateTranslations","filterNotNullProperties","result","y","brandResponse","$utils","$validation","$models","coreProperties","Brand","getPropertyNames","customPropertiesData","updateBrand","image_url","toSave","showErrorMessage","deleteBrand","brand_id","loadingData","updateCategory","Category","toggleAll","selected","selectAll","getSelectedItems","bulkDelete","defer","promises","promise","deleteCategory","category_id","validationObject","EditCategoryTranslationsController","localeCode","EditCollectionTranslationsController","itemsToAdd","addProductToCollection","removeProductFromCollection","saveCollection","product_id","Collection","EditContentTranslationsController","$model","Content","getImagesContainer","author","updateContent","selector","published","meta","twitter","facebook","computeSeoTags","saveContent","hideErrors","setPublishing","deleteContent","content_id","product_ids","p_map","prod","quantity","Product","success","filterVariantProps","variantsDefinition","getVariantStyle","r","color","updateProduct","loadCategories","loadBrands","price","stock_type","stock_status","has_variants","productError","newCustomProperty","Forms","customPropertiesNames","errorField","saveProduct","props_to_validate","known_props","GroupedProduct","Coupon","hasExpirationDate","limitedUsage","toggleCouponExpiration","expiration_date","toggleCouponUsage","usages_left","clearTargetId","target_id","addCondition","conditions","newCondition","addEffect","effects","newEffect","targetProduct","target_type","selectProductAsTarget","resetTargetProduct","handleCategoryChange","discount_type","randomizeCode","Math","random","substr","toUpperCase","updateCouponExpiration","updateCouponUsage","alerts","this_week","this_month","ordersToManage","orders_data","orders_labels","last_30_days","last_30_days_labels","round","orders_volume_data","orders_count_data","orders_volume_labels","unshift","parseFloat","Number","datasets","setNextInvoiceNumber","applicationSettings","lastNumber","number","invoices_prefix","isNaN","sort","pop","fillDataFromOrder","order_id","company","city","state","postal_code","vat","customer","date_created","date_due","lineItems","shipping_total","payment_method","payment_method_total","coupon_total","promotion_total","billing_address","ordersQuery","loadNextOrders","loadPreviousOrders","selectOrder","customerStates","companyStates","getInvoiceTotal","updateCompanyStates","updateCustomerStates","saveInvoice","goToOrder","Invoice","addLineItem","debug","toDate","currencies","timezones","buildURL","from_currency_code","to_currency_code","compare","activeLocalesToString","activeLocales","activeCurrenciesToString","activeCurrencies","rate","name_plus_code","saved_currencies","currency","saved_currency","new_currency_obj","addCurrency","updateSettings","removeCurrency","applyExchangeRate","currencyToApply","rates","applyAllExchangeRates","exchangeRates","addLocale","l","removeLocale","inspectFile","file","inspectedFile","formatFileSize","size","mb","gb","updateInspectedFile","deleteMedia","media_id","MediaManagerControllerDependencies","MediaManagerController","pos","showMediaManagerModal","NotificationsPresets","invoices.create","orders.create","users.create","users.recoverPassword","orders.update.processing","orders.update.completed","templateVariablesLabels","introduction","productLabel","priceLabel","customerInformationLabel","shippingAddressLabel","billingAddressLabel","tracking_code_introduction","redirect_url","buttonLabel","eventKeys","updateNotificationPreset","tplKey","toggleNotification","subject","sendCopyToOwner","sampleData","setPaidFlag","paid","successful","jsonToCsv","json","order_fields","fields","csv","row","fieldName","buildDownload","encodedUri","encodeURI","link","document","createElement","setAttribute","appendChild","click","isOperator","timestampToDate","months","bulkExport","downloadCSV","bulkJSONExport","exportAsJSON","bulkUpdateStatus","bulkStatusChange","Alert","onConfirm","array_to_download","to_transform","order_data","items_total","taxes_total","ks","shipping_address","product_props","prod_data","prop","variant","variants_counter","variant_name","nullOrUndefined","pushState","$$encodeUriSegment","deleteOrder","removeFilterByName","removeFilterByPosition","setQueryParam","deleteQueryParam","sortingAttributes","marketcloud","saveOrder","toggleProductsModal","loadInventory","addItemToOrder","loadAddresses","assignDataToShipments","Array","isArray","shipments","shipment","delivery_date","getLineItemPrice","lineItem","price_discount","getLineItemTaxes","tax_rate","applied_tax_rate","syntaxHighlight","RegExp","match","addressToEdit","newShipment","tracking_code","tracking_link","saveShipmentAndFullfill","newPayment","amount","savePaymentAndSetToProcessing","showEditAddressDialog","saveAddress","refundedProducts","refunds","refund","line_items","showRefundModal","newRefund","reason","restock_refunded_items","quantityInOrder","variant_id","updateNewRefund","saveRefund","refundErrorMessage","getVariantClass","classes","getSelectedVariantValues","getSelectedVariantKeysAndValues","updateStatus","showHours","the_date","getHours","getMinutes","inspectObject","numb","fullfill","setToProcessing","saveShipment","remove","parent","append","shipmentToSave","updateShipment","shipmentToEdit","shipmentToEditIndex","showShipmentModal","showEditShipmentModal","showPaymentModal","orderToCSV","createPDFInvoice","invoice_id","invoiceUrl","assign","createPDFCreditNote","refundUrl","savePayment","EditProductTranslationsController","localeName","variants","v_name","variant_values_translations","variant_values","values","customPropertiesDataLocales","getTranslatedValueForCustomProperty","customPropertiesForSingleLocale","lists","this_list_ids","addProductsCardConfig","addNewList","required","removeList","showAddProductsToListModal","currentList","opt","catchField","skipSaving","to_save","options","option","this_option_ids","addNewOption","removeOption","showAddProductsToOptionModal","currentOption","importData","failures","productWithoutVariants","newPromise","msg","warning","showBulkControls","selections","showing_attributes","reserved_attributes","available_attributes","new_attributes","types","toggleColumn","filterColumnNamesPattern","filterColumnNames","sortByColumn","columnName","isItemSelected","toggleItemSelection","$watch","newValue","oldValue","tmp","bulkSetPublishing","flag","bulkCSVExport","_data","bucket","flatten","_csv","JSONToCSV","exportAsCSV","importProducts","chooseJSONFile","importMode","querySelector","chooseCSVFile","JSONFileChanged","getElementById","files","reader","FileReader","readAsText","onload","evt","jsonLines","importJSON","onerror","CSVFileChanged","csvFileContent","productsToImport","CSVToJSON","unflatten","uploadJSON","fileContent","uploadCSV","lines","invalidItems","line","ProductWithVariants","Variant","cloneProduct","product_to_duplicate","product_to_save","_id","alterColumnNames","q","TypeError","deleteProduct","prod_id","newVariant","saveNewVariant","variantToSave","deleteVariant","stock_level","attachInheritedProperties","properties_to_inherit","getArrayOfVariants2","combine","v1","v2","output","_out","val1","val2","counter","out","addedVariants","applyTemplate","tpl","addedVariants2","newAddedVariant","computedVariants","inspect","updateStockManagementForVariants","variantNames","variantName","$index","updateVariantsConfiguration","addEmptyVariant","temp_ComputedVariants","overwrites","failedValidator","min","max","variantsToSave","savedProduct","EditSimpleProductController","kk","$promotionValidation","Promotion","$newConditionValidation","PromotionCondition","removeCondition","removeEffect","$newEffectValidation","PromotionEffect","priority","resource_name","$dependencies","getPaginationFromHTTPResponse","bulkUpdate","toggle","resetQuery","queryOverrides","resource_id","clone","instance","apply_discounts_before_taxes","symbol","tax_options","refreshApplicationData","timezone","tax_type","email_address","company_name","company_taxid","company_country","company_state","company_city","company_address","company_postalcode","logo","shippingRequest","availableRules","getShippingRules","howManyRules","availability","base_cost","per_item_cost","zones","newRule","addRule","removeRule","ruleNameToDescription","newZone","addZone","removeZone","updateShipping","Shipping","deleteShipping","shippingRule","filterCountries","saveShipping","StaticContent","tax_rates","countriesWithTaxRates","self","states","addRate","postcode","deleteRate","updateCity","updatePostcode","updateStates","saveTax","Tax","csvToJson","currentline","j","validateTaxRates","testFunction","every","Rate","directive","restrict","attrs","onChangeHandler","$eval","customOnChange","bind","importCSV","handleFileSelect","f","theFile","csv_file","new_rates","loadRatesFromCountry","recurse","cur","isEmpty","getTranslatableProperties","translatables","NewUserController","password","registered_with","copyShippingAddressToBillingAddress","saveUser","newAttributeName","userError","newAttributeValue","property_name","addresses","newAddress","user_id","errpr","toggleAddressVisibility","expanded","User","user.id","s","validationMessage","deleteVariable","variable_id","originalVariantData","product_merge_variant","variantDefiningProperties","currentVariantId","updateVariant","variantProperties","toSend","setCurrentVariant","variantId","transclude","initials","width","bgcolor","textColor","wrapper","pictureResolution","pixelated","roundShape","imgClass","style","string","cornerRadius","pictureFormat","colorsPalette","autoColor","fontWeight","fontScale","textShadow","maxLength","upperCase","checkValues","undefined","_bind","_textcolor","_picture_resolution","_long","_wrapper","_img_width","_pixelated","_img_styling","_roundShape","_wrapper_styling","_corner_radius","_extra_classes","_extra_img_classes","_extra_styles","_str","getInitialsFromString","_picture_format","_colors_palette","_bgcolor","_autoColor","colorIndex","lon","charIndex","charCodeAt","_font_weight","_font_scale","_text_shadow","generateAvatar","w","h","textcolor","bgImage","canvas","ctx","_font_size","WIDTH","HEIGHT","now","height","getContext","fillStyle","fillRect","font","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","textAlign","fillText","toDataURL","len","render","imgData","html","replacementElement","currentElement","replaceWith","mc_palette","dict","chosenColorPosition","chosenColor","require","ngModel","read","stripBr","$setViewValue","$render","$viewValue","$document","elem","attr","submenu","stopImmediatePropagation","stopPropagation","src","fallbackSrc","$set","$parse","model","fileModel","modelSetter","multiple","$timeout","$attr","ngShow","focus","ngHide","NUMBER_REGEXP","DEFAULT_PRECISION","el","ngModelCtrl","num","pow","precision","formatPrecision","isPrecisionValid","isValueValid","updateValuePrecision","modelValue","$modelValue","changeViewValue","lastValidViewValue","$commitViewValue","minVal","maxVal","isDefined","isUndefined","$parsers","$isEmpty","$validators","ngMin","$observe","val","$validate","ngMax","parseInt","$formatters","helper","support","CanvasRenderingContext2D","isFile","File","isImage","lastIndexOf","attributes","onLoadFile","img","Image","onLoadImage","drawImage","ngThumb","readAsDataURL","which","ngEnter","$viewChangeListeners","onChangeAsync","onFileChange","AccountFactory","Factory","ApplicationFactory","CacheFactory","del","delByPattern","pattern","has","LocalesFactory","af-ZA","original","ar","bg-BG","ca-AD","cs-CZ","cy-GB","da-DK","de-AT","de-CH","de-DE","el-GR","en-GB","alpha2","en-US","es-CL","es-ES","es-MX","et-EE","eu","fa-IR","fi-FI","fr-CA","fr-FR","he-IL","hr-HR","hu-HU","id-ID","is-IS","it-IT","ja-JP","km-KH","ko-KR","lt-LT","lv-LV","mn-MN","nb-NO","nl-NL","nn-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sl-SI","sr-RS","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW","jsonToQueryString","MarketcloudFactory","$cache","request","endpoint","cacheKey","deletionPattern","resourceFactory","subResourceFactory","sub_resource_name","parent_id","ModelsFactory","Schematic","Types","Notifications","Schema","Bundle","elements","Payment","payment_method_id","PaymentMethod","cost_type","whitelist","fixed_fee","percentage_fee","BundleEntry","bundle_price","pricing_rule","CategoryNew","CollectionEntry","ContentAuthor","CartEntry","CartUpdateEntry","Cart","CartUpdate","op","discount_value","filename","Notification","from_name","from_email","TaxRate","Currency","formatting","sku","weigth","depth","store_id","InvoiceLineItem","GroupedProductEntry","pricing_method","Order","shipping_address_id","billing_address_id","display_items_total","display_total","notes","shipping_fee","Address","full_name","address1","address2","phone_number","alternate_phone_number","ShippingZone","min_price","max_price","min_weight","max_weight","Store","owner_email","custom_attributes","Customer","Variable","Shipment","NotificationsPresetsFactory","PaginationFactory","fromHTTPResponse","httpResponse","getCommonPublicProfile","findOne","getAllFalseProfile","getCommonUserProfile","getCommonAdminProfile","publicAccessMap","patch","checkout","stores","authenticate","userAccessMap","adminAccessMap","admin","StormConfigurationFactory","loadFromStorage","storedJson","localStorage","getItem","LOCALSTORAGE_KEY","persistToStorage","setItem","persist","appendTo","TableManagerFactory","country_code","state_code","UtilsFactory","JSONExport","CSVExport","strhash","hash","bytes","ch","chunk_len","ceil","floor","resultholder","exec","rows","header","header_fields","objects","row_fields","firstRow","buf","field","ValidationService","Service","getErrorMessage","hasClass"],"mappings":"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","file":"app.bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ((function(modules) {\n\t// Check all modules for deduplicated modules\n\tfor(var i in modules) {\n\t\tif(Object.prototype.hasOwnProperty.call(modules, i)) {\n\t\t\tswitch(typeof modules[i]) {\n\t\t\tcase \"function\": break;\n\t\t\tcase \"object\":\n\t\t\t\t// Module can be created from a template\n\t\t\t\tmodules[i] = (function(_m) {\n\t\t\t\t\tvar args = _m.slice(1), fn = modules[_m[0]];\n\t\t\t\t\treturn function (a,b,c) {\n\t\t\t\t\t\tfn.apply(this, [a,b,c].concat(args));\n\t\t\t\t\t};\n\t\t\t\t}(modules[i]));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// Module is a copy of another module\n\t\t\t\tmodules[i] = modules[modules[i]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn modules;\n}([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t//require('./src/app.js');\n\t\n\tfunction requireAll(requireContext) {\n\t  return requireContext.keys().map(requireContext);\n\t}\n\t\n\t// Require all JS files, including subdirectories\n\t// This will require every controller/factory/service/component\n\tvar modules = requireAll(__webpack_require__(1));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./app.js\": 2,\n\t\t\"./components/activeFilters/activeFilters.component.js\": 3,\n\t\t\"./components/addProductsCard/addProductsCard.component.js\": 4,\n\t\t\"./components/addressForm/addressForm.component.js\": 5,\n\t\t\"./components/application/application.component.js\": 6,\n\t\t\"./components/autocomplete/autocomplete.component.js\": 7,\n\t\t\"./components/backButton/backButton.component.js\": 8,\n\t\t\"./components/brandsSelector/brandsSelector.component.js\": 9,\n\t\t\"./components/categoriesSelector/categoriesSelector.component.js\": 10,\n\t\t\"./components/customAttributes/customAttributes.component.js\": 11,\n\t\t\"./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js\": 12,\n\t\t\"./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js\": 13,\n\t\t\"./components/dataTable/dataTable.component.js\": 14,\n\t\t\"./components/errorMessages/errorMessages.component.js\": 15,\n\t\t\"./components/flagIcon/flagIcon.component.js\": 16,\n\t\t\"./components/imageSelector/imageSelector.component.js\": 17,\n\t\t\"./components/imageThumbnail/imageThumbnail.component.js\": 18,\n\t\t\"./components/imagesCard/imagesCard.component.js\": 19,\n\t\t\"./components/linkHelpText/linkHelpText.component.js\": 20,\n\t\t\"./components/navbar/navbar.component.js\": 21,\n\t\t\"./components/paginationNav/paginationNav.component.js\": 22,\n\t\t\"./components/paginationSelector/paginationSelector.component.js\": 23,\n\t\t\"./components/resourcePicker/resourcePicker.component.js\": 24,\n\t\t\"./components/seoForm/seoForm.component.js\": 25,\n\t\t\"./components/sidebar/sidebar.component.js\": 26,\n\t\t\"./components/sortingSelector/sortingSelector.component.js\": 27,\n\t\t\"./components/switch/switch.component.js\": 28,\n\t\t\"./components/taxesSelector/taxesSelector.component.js\": 29,\n\t\t\"./components/toolbarSearch/toolbarSearch.component.js\": 30,\n\t\t\"./controllers/PaymentMethods.controller.js\": 31,\n\t\t\"./controllers/analytics.controller.js\": 32,\n\t\t\"./controllers/application/acl.controller.js\": 33,\n\t\t\"./controllers/application/application.new.controller.js\": 34,\n\t\t\"./controllers/application/applications.list.controller.js\": 35,\n\t\t\"./controllers/application/billing.controller.js\": 36,\n\t\t\"./controllers/application/collaborators.controller.js\": 37,\n\t\t\"./controllers/application/deploy.controller.js\": 38,\n\t\t\"./controllers/application/integrations.controller.js\": 39,\n\t\t\"./controllers/application/navigation.controller.js\": 40,\n\t\t\"./controllers/application/overview.controller.js\": 41,\n\t\t\"./controllers/application/settings.controller.js\": 42,\n\t\t\"./controllers/application/webhooks.controller.js\": 43,\n\t\t\"./controllers/brandTranslations.controller.js\": 44,\n\t\t\"./controllers/brands/brands.edit.js\": 45,\n\t\t\"./controllers/brands/brands.list.js\": 46,\n\t\t\"./controllers/brands/brands.new.js\": 47,\n\t\t\"./controllers/categories/categories.edit.js\": 48,\n\t\t\"./controllers/categories/categories.list.js\": 49,\n\t\t\"./controllers/categories/categories.new.js\": 50,\n\t\t\"./controllers/categoryTranslations.controller.js\": 51,\n\t\t\"./controllers/collectionTranslations.controller.js\": 52,\n\t\t\"./controllers/collections/collections.controller.js\": 53,\n\t\t\"./controllers/collections/collections.create.js\": 54,\n\t\t\"./controllers/collections/collections.edit.js\": 55,\n\t\t\"./controllers/collections/collections.new.js\": 56,\n\t\t\"./controllers/contentTranslations.controller.js\": 57,\n\t\t\"./controllers/contents/content.edit.js\": 58,\n\t\t\"./controllers/contents/content.new.js\": 59,\n\t\t\"./controllers/contents/contents.list.js\": 60,\n\t\t\"./controllers/contents/groupedProducts.edit.js\": 61,\n\t\t\"./controllers/contents/groupedProducts.new.js\": 62,\n\t\t\"./controllers/coupons/coupon.edit.js\": 63,\n\t\t\"./controllers/coupons/coupons.new.js\": 64,\n\t\t\"./controllers/deploy.js\": 65,\n\t\t\"./controllers/home.js\": 66,\n\t\t\"./controllers/integrations.js\": 67,\n\t\t\"./controllers/invoices/invoice.new.js\": 68,\n\t\t\"./controllers/invoices/invoices.edit.js\": 69,\n\t\t\"./controllers/localization.controller.js\": 70,\n\t\t\"./controllers/media.list.js\": 71,\n\t\t\"./controllers/media_manager.controller.js\": 72,\n\t\t\"./controllers/notifications/notifications.edit.js\": 73,\n\t\t\"./controllers/notifications/notifications.js\": 74,\n\t\t\"./controllers/notifications/notifications.new.js\": 75,\n\t\t\"./controllers/notifications/notifications.preview.js\": 76,\n\t\t\"./controllers/notifications/notifications.translations.js\": 77,\n\t\t\"./controllers/orders/orders.list.js\": 78,\n\t\t\"./controllers/orders/orders.new.js\": 79,\n\t\t\"./controllers/orders/orders.view.js\": 80,\n\t\t\"./controllers/productTranslations.controller.js\": 81,\n\t\t\"./controllers/products/bundledProduct.edit.js\": 82,\n\t\t\"./controllers/products/bundledProduct.new.js\": 83,\n\t\t\"./controllers/products/configurableProduct.edit.js\": 84,\n\t\t\"./controllers/products/configurableProduct.new.js\": 85,\n\t\t\"./controllers/products/products.list.js\": 86,\n\t\t\"./controllers/products/productsWithVariants.edit.js\": 87,\n\t\t\"./controllers/products/productsWithVariants.new.js\": 88,\n\t\t\"./controllers/products/simpleProduct.edit.js\": 89,\n\t\t\"./controllers/products/simpleProduct.new.js\": 90,\n\t\t\"./controllers/promotions/promotions.edit.js\": 91,\n\t\t\"./controllers/promotions/promotions.new.js\": 92,\n\t\t\"./controllers/resource.list.js\": 93,\n\t\t\"./controllers/settings.controller.js\": 94,\n\t\t\"./controllers/shippingMethods/shipping.edit.js\": 95,\n\t\t\"./controllers/shippingMethods/shippings.list.js\": 96,\n\t\t\"./controllers/shippingMethods/shippings.new.js\": 97,\n\t\t\"./controllers/sidebar.js\": 98,\n\t\t\"./controllers/staticContents/staticContent.new.js\": 99,\n\t\t\"./controllers/staticContents/staticContents.edit.js\": 100,\n\t\t\"./controllers/taxes/taxes.edit.js\": 101,\n\t\t\"./controllers/taxes/taxes.new.js\": 102,\n\t\t\"./controllers/translations.js\": 103,\n\t\t\"./controllers/users/users.list.js\": 104,\n\t\t\"./controllers/users/users.new.js\": 105,\n\t\t\"./controllers/users/users.view.js\": 106,\n\t\t\"./controllers/variables/variables.edit.js\": 107,\n\t\t\"./controllers/variables/variables.list.js\": 108,\n\t\t\"./controllers/variables/variables.new.js\": 109,\n\t\t\"./controllers/variants.edit.js\": 110,\n\t\t\"./controllers/variants/variants.list.controller.js\": 111,\n\t\t\"./controllers/webhooks.js\": 112,\n\t\t\"./directives/avatar.directive.js\": 113,\n\t\t\"./directives/contenteditable.directive.js\": 114,\n\t\t\"./directives/dropdown.directive.js\": 115,\n\t\t\"./directives/fallback_src.js\": 116,\n\t\t\"./directives/fileModel.directive.js\": 117,\n\t\t\"./directives/focusOnShow.directive.js\": 118,\n\t\t\"./directives/money.directive.js\": 119,\n\t\t\"./directives/ng-thumb.directive.js\": 120,\n\t\t\"./directives/ng_enter.js\": 121,\n\t\t\"./directives/onChangeAsync.directive.js\": 122,\n\t\t\"./directives/onFileChange.directive.js\": 123,\n\t\t\"./factories/account.factory.js\": 124,\n\t\t\"./factories/application.factory.js\": 125,\n\t\t\"./factories/cache.factory.js\": 126,\n\t\t\"./factories/locales.factory.js\": 127,\n\t\t\"./factories/marketcloud.factory.js\": 128,\n\t\t\"./factories/models.factory.js\": 129,\n\t\t\"./factories/notificationsPresets.factory.js\": 130,\n\t\t\"./factories/pagination.factory.js\": 131,\n\t\t\"./factories/rolesPresets.factory.js\": 132,\n\t\t\"./factories/stormConfiguration.factory.js\": 133,\n\t\t\"./factories/tableManager.factory.js\": 134,\n\t\t\"./factories/taxrates.factory.js\": 135,\n\t\t\"./factories/utils.factory.js\": 136,\n\t\t\"./factories/validation.service.js\": 137\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 1;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t  /* globals angular, marketcloud, notie, API_BASE_URL */\n\t\n\t  /**\n\t   * The dashboard version, this is used for reporting\n\t   * @type {String}\n\t   */\n\t\n\t  window.VERSION = '1.9.1';\n\t\n\t  /**\n\t   * [The base url for api calls]\n\t   * @type {String}\n\t   */\n\t  window.API_BASE_URL = '/api/v0';\n\t\n\t  /**\n\t   *  Error reporting facility\n\t   **/\n\t  window.LAST_ERROR = null;\n\t\n\t  /**\n\t   * Angular Selectize2\n\t   * https://github.com/machineboy2045/angular-selectize\n\t   **/\n\t\n\t  var app = angular.module('DataDashboard', ['ngRoute', 'ngMessages', 'ngTagsInput', 'angular-loading-bar', 'frapontillo.bootstrap-switch', 'ngSanitize', 'angularFileUpload', 'Marketcloud.Shared', 'angularMoment', 'chart.js', 'trumbowyg-ng', 'moment-picker', 'dndLists']);\n\t\n\t  /*\n\t   *  Since angular 1.6.0 The default location hashPrefix is the hashBang\n\t   *  In order to keep our links we set it to '' empty string.\n\t   */\n\t  app.config(['$locationProvider', function ($locationProvider) {\n\t    $locationProvider.hashPrefix('');\n\t  }]);\n\t\n\t  app.config(['$compileProvider', function ($compileProvider) {\n\t    $compileProvider.debugInfoEnabled(false);\n\t  }]);\n\t\n\t  app.run(function () {\n\t    notie.setOptions({\n\t\n\t      colorSuccess: '#27ae60',\n\t      colorWarning: '#f39c12',\n\t      colorError: '#c0392b',\n\t      colorInfo: '#2980b9',\n\t      colorNeutral: '#95a5a6',\n\t      colorText: '#FFFFFF',\n\t      dateMonths: ['Januar', 'Februar', 'Mrz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'], // For other languages\n\t      animationDelay: 300, // Be sure to also change \"transition: all 0.3s ease\" variable in .scss file\n\t      backgroundClickDismiss: true\n\t    });\n\t  });\n\t\n\t  app.run(['StormConfiguration', '$http', function (Configuration, $http) {\n\t    var theme = Configuration.get('theme');\n\t    Configuration.applyTheme(theme);\n\t    return;\n\t  }]);\n\t\n\t  /*\n\t    This is for sending complex JSON params\n\t  */\n\t  app.config(['$httpProvider', function ($httpProvider) {\n\t    $httpProvider.defaults.paramSerializer = '$httpParamSerializerJQLike';\n\t  }]);\n\t\n\t  /*\n\t    Catching angular errors and sending them to the server\n\t   */\n\t  app.factory('$exceptionHandler', ['$injector', function ($injector) {\n\t\n\t    return function myExceptionHandler(exception, cause) {\n\t\n\t      var $http = $injector.get('$http');\n\t      var $log = $injector.get('$log');\n\t      var $getBrowser = $injector.get('GetBrowser');\n\t\n\t      $log.error(exception);\n\t\n\t      // Not logging the same error over and over for each session\n\t      if (window.LAST_ERROR === exception.toString()) {\n\t        console.info('Not logging this error instance, because it was already logged.');\n\t        return;\n\t      }\n\t\n\t      window.LAST_ERROR = exception.toString();\n\t      $http({\n\t        method: 'POST',\n\t        url: '/logs',\n\t        data: {\n\t          type: 'frontend-error',\n\t          source: 'data-dashboard',\n\t          browser: $getBrowser(),\n\t          url: window.location.href,\n\t          error: {\n\t            error: exception.toString(),\n\t            stack: exception.stack || null,\n\t            cause: cause || null\n\t          }\n\t        }\n\t      }).then(function (response) {\n\t        $log.warn('An error was logged.');\n\t      }).catch(function (response) {\n\t        $log.warn('Unable to log errors, if you see this message, please contact us at info@marketcloud.it .Thank you.');\n\t      });\n\t      return true;\n\t    };\n\t  }]);\n\t\n\t  app.run(['$rootScope', '$route', '$application', '$account', '$location', function ($rootScope, $route, $application, $account, $location) {\n\t\n\t    $rootScope.application = window.current_application;\n\t    $rootScope.user = window.user;\n\t\n\t    $application.set(window.current_application);\n\t    $account.set(window.user);\n\t\n\t    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n\t\n\t      var nextRouteName = next.$$route.name;\n\t      var currentUserRole = $application.get(\"role\");\n\t\n\t      // Admins and owners have all powers\n\t      if (currentUserRole == 'admin' || currentUserRole === 'owner') return;\n\t\n\t      // Checking for explicit denyrules\n\t      if (next.$$route.acl) {\n\t        var deniedRoles = next.$$route.acl.deny || [];\n\t\n\t        if (deniedRoles.indexOf(currentUserRole) > -1) {\n\t          notie.alert(2, \"Access restricted for users with role \" + currentUserRole, 2);\n\t\n\t          // We also hide the loading animation to prevent the view from\n\t          // being hidden\n\t          $rootScope.$evalAsync(function () {\n\t            $rootScope.showLoadingAnimation = false;\n\t\n\t            // If the entry point is an invalid route, we must\n\t            // send them to home, otherwise they will not see any route.\n\t            if (!current) $location.path('/');\n\t          });\n\t\n\t          // Cancel the route change event\n\t          event.preventDefault();\n\t        }\n\t      }\n\t\n\t      console.log(\"Next route is \" + nextRouteName + \" and your role is \" + currentUserRole);\n\t    });\n\t\n\t    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n\t      $rootScope.showLoadingAnimation = true;\n\t    });\n\t    $rootScope.$on('$routeChangeError', function () {\n\t      $rootScope.showLoadingAnimation = false;\n\t    });\n\t    $rootScope.$on('$routeChangeSuccess', function () {\n\t\n\t      // if ($application.announcementWasSeenInThisSession !== true) {\n\t      //   notie.alert(4,'Please take time to review our <a href=\"/announcement\" target=\"_blank\" style=\"color:white;text-decoration:underline\">important announcement</a>')\n\t      // }\n\t      // $application.announcementWasSeenInThisSession = true\n\t      var _route = angular.copy($route.current.$$route);\n\t\n\t      // Fallback route name\n\t      var routeName = 'unknown';\n\t\n\t      if (_route && _route.name) routeName = _route.name;\n\t\n\t      $rootScope.showLoadingAnimation = false;\n\t\n\t      // Sidebar controller listens for this event (sidebar.js)\n\t      $rootScope.$broadcast('$dashboardSectionChange', {\n\t        section: routeName\n\t      });\n\t    });\n\t  }]);\n\t\n\t  app.run(['$window', '$rootScope', function ($window, $rootScope) {\n\t\n\t    $rootScope.online = navigator.onLine;\n\t\n\t    $window.addEventListener('offline', function () {\n\t      notie.alert(2, 'You are currently offline. Waiting for connection..');\n\t      $rootScope.$apply(function () {\n\t        $rootScope.online = false;\n\t      });\n\t    }, false);\n\t\n\t    $window.addEventListener('online', function () {\n\t      notie.alertHide();\n\t      $rootScope.$apply(function () {\n\t        $rootScope.online = true;\n\t      });\n\t    }, false);\n\t  }]);\n\t\n\t  /*\n\t    This interceptor makes sure that if the token expires,\n\t    the browser reloads to get a new one.\n\t     We  might consider to expose a \"refresh token\" endpoint\n\t    but for now... we keep it simple\n\t   */\n\t  app.service('authInterceptor', ['$q', function ($q) {\n\t    var service = this;\n\t\n\t    service.responseError = function (response) {\n\t      if (response.status === 401) {\n\t        notie.alert(4, 'Session expired, reloading page...');\n\t        window.location.reload();\n\t      }\n\t      return $q.reject(response);\n\t    };\n\t  }]).config(['$httpProvider', function ($httpProvider) {\n\t    $httpProvider.interceptors.push('authInterceptor');\n\t  }]);\n\t\n\t  app.run(['$rootScope', '$location', function ($root, $location) {\n\t    $root.$on('$routeChangeError', function (event, route, args, response) {\n\t\n\t      if (response.status >= 500) $location.path('/error');else if (response.status === 400) {\n\t        notie.alert(2, 'An error has occurred. Please check the data you entered', 1);\n\t      } else {\n\t        console.log(\"$routeChangeError\", response);\n\t        notie.alert(2, 'An error has occurred.', 1);\n\t      }\n\t    });\n\t  }]);\n\t\n\t  app.config(['$routeProvider', function ($routeProvider) {\n\t    $routeProvider.when('/applications/list', {\n\t      name: 'applications',\n\t      templateUrl: '/modules/data_dashboard/templates/list_applications.html',\n\t      controller: 'ListApplicationsController'\n\t    }).when('/applications/new', {\n\t      name: 'applications.new',\n\t      templateUrl: '/modules/data_dashboard/templates/new_application.html',\n\t      controller: 'CreateApplicationController'\n\t    }).when('/analytics', {\n\t      name: 'analytics',\n\t      templateUrl: '/modules/data_dashboard/templates/analytics.html',\n\t      controller: 'AnalyticsController',\n\t      resolve: {\n\t        analytics: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.orders.list({\n\t            $created_at_gt: _from.getTime(),\n\t            $created_at_lt: _to.getTime(),\n\t            per_page: 9999\n\t          });\n\t        }],\n\t\n\t        customers: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.users.list({\n\t            $created_at_gt: _from.toISOString(),\n\t            $created_at_lt: _to.toISOString(),\n\t            per_page: 9999\n\t          });\n\t        }],\n\t        carts: ['$marketcloud', '$location', function ($marketcloud, $location) {\n\t\n\t          var range = $location.search().range || \"this month\";\n\t\n\t          var _from = null;\n\t          var _to = null;\n\t\n\t          switch (range) {\n\t            case \"today\":\n\t              var _from = new Date();\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"yesterday\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              var _to = new Date();\n\t              _to.setHours(0, 0, 0, 0);\n\t              break;\n\t            case \"this week\":\n\t              var _from = new Date();\n\t              _from.setDate(_from.getDate() - 7);\n\t              _from.setHours(0, 0, 0, 0);\n\t              break;\n\t            default:\n\t              var _from = new Date();\n\t              _from.setMonth(_from.getMonth() - 1);\n\t              _from.setHours(0, 0, 0, 0);\n\t\n\t              break;\n\t          }\n\t\n\t          if (!_to) _to = new Date();\n\t\n\t          return $marketcloud.carts.list({\n\t            $created_at_gt: _from.toISOString(),\n\t            $created_at_lt: _to.toISOString(),\n\t            per_page: 9999\n\t          });\n\t        }]\n\t      }\n\t    }).when('/', {\n\t      name: 'home',\n\t      templateUrl: '/modules/data_dashboard/templates/home.html',\n\t      controller: 'HomeController',\n\t      resolve: {\n\t        analytics: ['$http', function ($http) {\n\t\n\t          var one_month_ago = new Date();\n\t          one_month_ago.setMonth(one_month_ago.getMonth() - 1);\n\t          one_month_ago.setHours(0, 0, 0, 0);\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/orders',\n\t\n\t            params: {\n\t              $created_at_gt: one_month_ago.getTime(),\n\t              per_page: 99999\n\t            },\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          });\n\t        }]\n\t      }\n\t    }).when('/error', {\n\t      templateUrl: '/modules/data_dashboard/templates/error.html'\n\t    }).when('/bundled_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\n\t      controller: 'NewBundledProductController'\n\t    }).when('/bundled_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\n\t      controller: 'EditBundledProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    })\n\t    /*\n\t    .when('/groupedProducts/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_grouped_product.html',\n\t      controller: 'NewGroupedProductController'\n\t    })\n\t    .when('/groupedProducts/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_grouped_product.html',\n\t      controller: 'EditGroupedProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    })\n\t    .when('/bundled_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\n\t      controller: 'NewBundledProductController'\n\t    })\n\t    .when('/bundled_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\n\t      controller: 'EditBundledProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    })\n\t    .when('/configurable_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_configurable_product.html',\n\t      controller: 'NewConfigurableProductController'\n\t    })\n\t    .when('/configurable_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_configurable_product.html',\n\t      controller: 'EditConfigurableProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }))*/\n\t    .when('/products', {\n\t      name: 'products.list',\n\t      templateUrl: '/modules/data_dashboard/templates/products.html',\n\t      controller: 'ListProductsController',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        products: ['$marketcloud', 'StormConfiguration', '$route', '$location', function ($marketcloud, configuration, $route, $location) {\n\t\n\t          // Fetching filters from storage\n\t          var filters = configuration.get(\"products_list_active_filters\") || [];\n\t\n\t          // Default query to products endpoint\n\t          var query = {\n\t            page: 1\n\t          };\n\t\n\t          // Adding filters to query\n\t          filters.forEach(function (filter) {\n\t            query[filter.name] = filter.value;\n\t          });\n\t\n\t          // Applying Url query\n\t          var urlQuery = {};\n\t          try {\n\t            urlQuery = JSON.parse($location.search().query);\n\t          } catch (e) {\n\t            urlQuery = {};\n\t          }\n\t\n\t          for (var k in urlQuery) {\n\t            query[k] = urlQuery[k];\n\t          }\n\t\n\t          // Executing the query\n\t          return $marketcloud.products.list(query);\n\t        }]\n\t      }\n\t    }).when('/product_with_variants/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_productWithVariants.html',\n\t      controller: 'NewProductWithVariantsController'\n\t    }).when('/product_with_variants/create2', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_productWithVariants2.html',\n\t      controller: 'NewProductWithVariantsController'\n\t    }).when('/simple_product/create', {\n\t      name: 'products.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_simple_product.html',\n\t      controller: 'NewSimpleProductController'\n\t    }).when('/simple_product/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_simple_product.html',\n\t      controller: 'EditSimpleProductController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/product_with_variants/:productId/edit', {\n\t      name: 'products.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_productWithVariants.html',\n\t      controller: 'EditProductWithVariantsController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/products/:productId/variants', {\n\t      name: 'products.variants.list',\n\t      templateUrl: '/modules/data_dashboard/templates/list_variants.html',\n\t      controller: 'ListVariantsController',\n\t      resolve: {\n\t        resolvedProduct: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/products/:productId/variants/:variantId', {\n\t      name: 'products.variants.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n\t      controller: 'EditVariantController',\n\t      resolve: {\n\t        resolvedProduct: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/resource/:resourceName', {\n\t      name: '',\n\t      templateUrl: function templateUrl(params) {\n\t        return '/modules/data_dashboard/templates/resources.html';\n\t      },\n\t      //templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud[$route.current.params.resourceName].list();\n\t        }],\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/products/:productId/translations', {\n\t      name: 'products.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/product_translations.html',\n\t      controller: 'EditProductTranslationsController',\n\t      resolve: {\n\t        product: ['$marketcloud', '$route', '$q', '$location', function ($marketcloud, $route, $q, $location) {\n\t          return $marketcloud.products.getById($route.current.params.productId);\n\t        }]\n\t      }\n\t    }).when('/categories/:id/translations', {\n\t      name: 'categories.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/category_translations.html',\n\t      controller: 'EditCategoryTranslationsController',\n\t      resolve: {\n\t        category: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.categories.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/brands/:id/translations', {\n\t      name: 'brands.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/brand_translations.html',\n\t      controller: 'EditBrandTranslationsController',\n\t      resolve: {\n\t        brand: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.brands.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/collections/:id/translations', {\n\t      name: 'collections.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/collection_translations.html',\n\t      controller: 'EditCollectionTranslationsController',\n\t      resolve: {\n\t        collection: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.collections.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/contents/:id/translations', {\n\t      name: 'contents.translation.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/content_translations.html',\n\t      controller: 'EditContentTranslationsController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.contents.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/invoices/create/:orderId?', {\n\t      name: 'invoices.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_invoice.html',\n\t      controller: 'NewInvoiceController',\n\t      resolve: {\n\t        parentOrder: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          if ($route.current.params.orderId) return $marketcloud.orders.getById($route.current.params.orderId);else return {};\n\t        }],\n\t        orders: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.orders.list({ per_page: 5 });\n\t        }]\n\t      }\n\t    }).when('/invoices/:invoiceId/edit', {\n\t      name: 'invoices.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_invoice.html',\n\t      controller: 'EditInvoiceController',\n\t      resolve: {\n\t        invoice: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.invoices.getById($route.current.params.invoiceId);\n\t        }]\n\t      }\n\t    }).when('/invoices/', {\n\t      name: 'invoices.list',\n\t      templateUrl: '/modules/data_dashboard/templates/invoices.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.invoices.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'invoices';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/payments/', {\n\t      name: 'payments.list',\n\t      templateUrl: '/modules/data_dashboard/templates/payments.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.payments.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'payments';\n\t        },\n\t        dependencies: ['$q', '$marketcloud', function ($q, $marketcloud) {\n\t          return $q.all({\n\t            events: $marketcloud.events.list({\n\t              \"request.path\": \"/v0/payments\"\n\t            })\n\t          });\n\t        }]\n\t      }\n\t    }).when('/payments/alerts', {\n\t      name: 'payments.alerts.list',\n\t      templateUrl: '/modules/data_dashboard/templates/payments_alerts.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$http', function ($http) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: window.API_BASE_URL + '/payments/alerts',\n\t            headers: {\n\t              'Content-Type': 'application/json',\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'events';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/orders', {\n\t      name: 'orders.list',\n\t      templateUrl: '/modules/data_dashboard/templates/orders.html',\n\t      controller: 'OrdersController',\n\t      reloadOnSearch: false,\n\t      resolve: {\n\t        ordersResponse: ['$marketcloud', '$route', '$location', 'StormConfiguration', function ($marketcloud, $route, $location, configuration) {\n\t\n\t          // Fetching filters from storage\n\t          var filters = configuration.get(\"orders_list_active_filters\") || [];\n\t\n\t          // Default query to products endpoint\n\t          var query = {\n\t            page: 1\n\t          };\n\t\n\t          // Adding filters to query\n\t          filters.forEach(function (filter) {\n\t            query[filter.name] = filter.value;\n\t          });\n\t\n\t          // Applying Url query\n\t          var urlQuery = {};\n\t          try {\n\t            urlQuery = JSON.parse($location.search().query);\n\t          } catch (e) {\n\t            urlQuery = {};\n\t          }\n\t\n\t          for (var k in urlQuery) {\n\t            query[k] = urlQuery[k];\n\t          }\n\t\n\t          return $marketcloud.orders.list(query);\n\t        }]\n\t      }\n\t    }).when('/orders/create', {\n\t      name: 'orders.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_order.html',\n\t      controller: 'NewOrderController'\n\t    }).when('/orders/:orderId/view', {\n\t      name: 'orders.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/order.html',\n\t      controller: 'OrderController',\n\t      resolve: {\n\t        order: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.orders.getById($route.current.params.orderId);\n\t        }],\n\t        shippingMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.shippings.list();\n\t        }],\n\t        paymentMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.paymentMethods.list();\n\t        }]\n\t      }\n\t    }).when('/users', {\n\t      name: 'users.list',\n\t      templateUrl: '/modules/data_dashboard/templates/users.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.users.list({\n\t            page: 1,\n\t            per_page: 20,\n\t            expand: 'orders'\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'users';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/users/create', {\n\t      name: 'users.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_user.html',\n\t      controller: 'NewUserController'\n\t    }).when('/users/:userId/view', {\n\t      name: 'users.view',\n\t      templateUrl: '/modules/data_dashboard/templates/user.html',\n\t      controller: 'UserController',\n\t      resolve: {\n\t        user: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.users.getById($route.current.params.userId);\n\t        }]\n\t      }\n\t    }).when('/categories', {\n\t      name: 'categories.list',\n\t      templateUrl: '/modules/data_dashboard/templates/categories.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.categories.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'categories';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/categories/:categoryId/edit', {\n\t      name: 'categories.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_category.html',\n\t      controller: 'EditCategoryController',\n\t      resolve: {\n\t        category: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.categories.getById($route.current.params.categoryId);\n\t        }]\n\t      }\n\t    }).when('/categories/create', {\n\t      name: 'categories.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_category.html',\n\t      controller: 'CategoryController'\n\t    }).when('/brands', {\n\t      name: 'brands.list',\n\t      templateUrl: '/modules/data_dashboard/templates/brands.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.brands.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'brands';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/brands/:brandId/edit', {\n\t      name: 'brands.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_brand.html',\n\t      controller: 'EditBrandController',\n\t      resolve: {\n\t        brand: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.brands.getById($route.current.params.brandId);\n\t        }]\n\t      }\n\t    }).when('/brands/create', {\n\t      name: 'brands.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_brand.html',\n\t      controller: 'BrandController'\n\t    }).when('/collections', {\n\t      name: 'collections.list',\n\t      templateUrl: '/modules/data_dashboard/templates/collections.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.collections.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'collections';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/collections/:collectionId/edit', {\n\t      name: 'collections.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_collection.html',\n\t      controller: 'EditCollectionController',\n\t      resolve: {\n\t        collection: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.collections.getById($route.current.params.collectionId);\n\t        }]\n\t      }\n\t    }).when('/collections/create', {\n\t      name: 'collections.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_collection.html',\n\t      controller: 'CreateCollectionController'\n\t    }).when('/integrations', {\n\t      name: 'integrations.list',\n\t      templateUrl: '/modules/data_dashboard/templates/integrations.html',\n\t      controller: 'IntegrationsController'\n\t    }).when('/integrations/braintree', {\n\t      name: 'integrations.braintree',\n\t      templateUrl: '/modules/data_dashboard/templates/integration_braintree.html',\n\t      controller: 'IntegrationBraintreeController',\n\t      resolve: {\n\t        BraintreeIntegration: ['$http', function ($http) {\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/integrations/braintree',\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          }).then(function (response) {\n\t\n\t            return new Promise(function (resolve) {\n\t              resolve(response);\n\t            });\n\t          }).catch(function () {\n\t            return new Promise(function (resolve) {\n\t              resolve(null);\n\t            });\n\t          });\n\t        }]\n\t      }\n\t    }).when('/integrations/stripe', {\n\t      name: 'integrations.stripe',\n\t      templateUrl: '/modules/data_dashboard/templates/integration_stripe.html',\n\t      controller: 'IntegrationStripeController',\n\t      resolve: {\n\t        StripeIntegration: ['$http', function ($http) {\n\t\n\t          return $http({\n\t            method: 'GET',\n\t            url: API_BASE_URL + '/integrations/stripe',\n\t            headers: {\n\t              Authorization: window.public_key + ':' + window.token\n\t            }\n\t          }).then(function (response) {\n\t\n\t            return new Promise(function (resolve) {\n\t              resolve(response);\n\t            });\n\t          }).catch(function () {\n\t            return new Promise(function (resolve) {\n\t              resolve(null);\n\t            });\n\t          });\n\t        }]\n\t      }\n\t    }).when('/contents', {\n\t      name: 'contents.list',\n\t      templateUrl: '/modules/data_dashboard/templates/contents.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.contents.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'contents';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/contents/create', {\n\t      name: 'contents.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_content.html',\n\t      controller: 'ContentController'\n\t    }).when('/contents/:contentId/edit', {\n\t      name: 'contents.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_content.html',\n\t      controller: 'EditContentController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.contents.getById($route.current.params.contentId);\n\t        }]\n\t      }\n\t    }).when('/contents/static', {\n\t      name: 'staticContents.list',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/staticContents.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', function ($marketcloud) {\n\t          return $marketcloud.staticContents.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'staticContents';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/contents/static/create', {\n\t      name: 'staticContents.create',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/new_staticContent.html',\n\t      controller: 'CreateStaticContentController'\n\t    }).when('/contents/static/:contentId/edit', {\n\t      name: 'staticContents.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/staticContents/edit_staticContents.html',\n\t      controller: 'EditStaticContentController',\n\t      resolve: {\n\t        content: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.staticContents.getById($route.current.params.contentId);\n\t        }]\n\t      }\n\t    }).when('/events', {\n\t      name: 'events.list',\n\t      templateUrl: '/modules/data_dashboard/templates/events.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.events.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'events';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/variables', {\n\t      name: 'variables.list',\n\t      templateUrl: '/modules/data_dashboard/templates/variables.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.variables.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'variables';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/variables/create', {\n\t      name: 'variables.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_variable.html',\n\t      controller: 'CreateVariableController'\n\t    }).when('/variables/:variableId/edit', {\n\t      name: 'variables.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_variable.html',\n\t      controller: 'EditVariableController',\n\t      resolve: {\n\t        variable: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.variables.getById($route.current.params.variableId);\n\t        }]\n\t      }\n\t    }).when('/media', {\n\t      name: 'media.list',\n\t      templateUrl: '/modules/data_dashboard/templates/media.html',\n\t      controller: 'MediaListController',\n\t      resolve: {\n\t        media: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.media.list();\n\t        }]\n\t      }\n\t\n\t    }).when('/promotions', {\n\t      name: 'promotions.list',\n\t      templateUrl: '/modules/data_dashboard/templates/promotions.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.promotions.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'promotions';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/promotions/create', {\n\t      name: 'promotions.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_promotion.html',\n\t      controller: 'NewPromotionController'\n\t    }).when('/promotions/:id/edit', {\n\t      name: 'promotions.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_promotion.html',\n\t      controller: 'EditPromotionController',\n\t      resolve: {\n\t        promotion: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.promotions.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/coupons', {\n\t      name: 'coupons.list',\n\t      templateUrl: '/modules/data_dashboard/templates/coupons.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.coupons.list({\n\t            page: 1\n\t          });\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'coupons';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t      }\n\t    }).when('/coupons/create', {\n\t      name: 'coupons.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_coupon.html',\n\t      controller: 'NewCouponController'\n\t    }).when('/coupons/:id/edit', {\n\t      name: 'coupons.create',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_coupon.html',\n\t      controller: 'EditCouponController',\n\t      resolve: {\n\t        coupon: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.coupons.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/shippings', {\n\t      redirectTo: '/system/shippings'\n\t    }).when('/shippings/create', {\n\t      redirectTo: '/system/shippings/create'\n\t    }).when('/shippings/:shippingId/edit', {\n\t      redirectTo: '/system/shippings/:shippingId/edit'\n\t    }).when('/system/taxes', {\n\t      name: 'system.taxes.list',\n\t      templateUrl: '/modules/data_dashboard/templates/taxes.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.taxes.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'taxes';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/system/taxes/create', {\n\t      name: 'system.taxes.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_tax.html',\n\t      controller: 'CreateTaxController'\n\t    }).when('/system/taxes/:id/edit', {\n\t      name: 'system.taxes.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_tax.html',\n\t      controller: 'EditTaxController',\n\t      resolve: {\n\t        tax: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.taxes.getById($route.current.params.id);\n\t        }]\n\t      }\n\t    }).when('/system/shippings', {\n\t      name: 'system.shippings.list',\n\t      templateUrl: '/modules/data_dashboard/templates/shippings.html',\n\t      controller: 'ListResourcesController',\n\t      resolve: {\n\t        resources: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.shippings.list();\n\t        }],\n\t        resourceName: function resourceName() {\n\t          return 'shippings';\n\t        },\n\t        dependencies: ['$q', function ($q) {\n\t          return $q.when({});\n\t        }]\n\t\n\t      }\n\t    }).when('/system/shippings/create', {\n\t      name: 'system.shippings.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_shipping.html',\n\t      controller: 'CreateShippingController'\n\t    }).when('/system/shippings/:shippingId/edit', {\n\t      name: 'system.shippings.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_shipping.html',\n\t      controller: 'EditShippingController',\n\t      resolve: {\n\t        shipping: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.shippings.getById($route.current.params.shippingId);\n\t        }]\n\t      }\n\t    }).when('/system/settings', {\n\t      name: 'system.settings',\n\t      templateUrl: '/modules/data_dashboard/templates/settings.html',\n\t      controller: 'SettingsController'\n\t    }).when('/system/localization', {\n\t      name: 'system.localization',\n\t      templateUrl: '/modules/data_dashboard/templates/localization.html',\n\t      controller: 'LocalizationController'\n\t    }).when('/system/payments', {\n\t      name: 'system.payments',\n\t      templateUrl: '/modules/data_dashboard/templates/paymentMethods.html',\n\t      controller: 'PaymentMethodsController',\n\t      resolve: {\n\t        paymentMethods: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.paymentMethods.list();\n\t        }]\n\t      }\n\t    }).when('/notifications', {\n\t      name: 'notifications',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications.html',\n\t      controller: 'NotificationsController',\n\t      resolve: {\n\t        notifications: ['$marketcloud', '$route', function ($marketcloud) {\n\t          return $marketcloud.notifications.list();\n\t        }]\n\t      }\n\t    }).when('/notifications/:notificationId/edit', {\n\t      name: 'notifications.edit',\n\t      templateUrl: '/modules/data_dashboard/templates/edit_notification.html',\n\t      controller: 'EditNotificationController',\n\t      resolve: {\n\t        notification: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.notifications.getById($route.current.params.notificationId);\n\t        }]\n\t      }\n\t    }).when('/notifications/:notificationId/translations', {\n\t      name: 'notifications.translation',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications_translation.html',\n\t      controller: 'TranslateNotificationController',\n\t      resolve: {\n\t        notification: ['$marketcloud', '$route', function ($marketcloud, $route) {\n\t          return $marketcloud.notifications.getById($route.current.params.notificationId);\n\t        }]\n\t      }\n\t    }).when('/notifications/create', {\n\t      name: 'notifications.create',\n\t      templateUrl: '/modules/data_dashboard/templates/new_notification.html',\n\t      controller: 'NewNotificationController'\n\t    }).when('/notifications/preview/:data', {\n\t      name: 'notifications.preview',\n\t      templateUrl: '/modules/data_dashboard/templates/notifications_preview.html',\n\t      controller: 'PreviewNotificationController',\n\t      resolve: {\n\t        notification: ['$route', function ($route) {\n\t          return atob($route.current.params.data);\n\t        }]\n\t      }\n\t    }).when('/application/billing', {\n\t      name: 'application.billing',\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_billing.html',\n\t      controller: 'ApplicationBillingController',\n\t      resolve: {\n\t        account: ['$http', function (http) {\n\t          return http({\n\t            method: 'GET',\n\t            url: '/account/get'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application', {\n\t      redirectTo: '/application/overview',\n\t      acl: {\n\t        deny: ['guest']\n\t      }\n\t    }).when('/application/overview', {\n\t      name: 'application.overview',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_overview.html',\n\t      controller: 'ApplicationOverviewController'\n\t    }).when('/application/settings', {\n\t      name: 'application.settings',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_settings.html',\n\t      controller: 'ApplicationSettingsController'\n\t    }).when('/application/deploy', {\n\t      name: 'application.deploy',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_deploy.html',\n\t      controller: 'DeployController'\n\t    }).when('/application/integrations', {\n\t      name: 'application.integrations',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_integrations.html',\n\t      controller: 'IntegrationsController'\n\t    }).when('/application/webhooks', {\n\t      name: 'application.webhooks',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_webhooks.html',\n\t      controller: 'WebhooksController',\n\t      resolve: {\n\t        webhooks: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get(\"id\") + '/webhooks'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/collaborators', {\n\t      name: 'application.collaborators',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/application_collaborators.html',\n\t      controller: 'CollaboratorsController',\n\t      resolve: {\n\t        collaborators: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/collaborators'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/acl', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/roles.html',\n\t      controller: 'ACLController',\n\t      resolve: {\n\t        roles: ['$http', '$route', '$application', function ($http, $route, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/roles'\n\t          });\n\t        }]\n\t      }\n\t    }).when('/application/acl/new', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/new_role.html',\n\t      controller: 'NewRoleController'\n\t    }).when('/application/acl/:roleId/edit', {\n\t      name: 'application.acl',\n\t      acl: {\n\t        deny: ['guest']\n\t      },\n\t      templateUrl: '/modules/data_dashboard/templates/application/edit_role.html',\n\t      controller: 'EditRoleController',\n\t      resolve: {\n\t        role: ['$route', '$http', '$application', function ($route, $http, $application) {\n\t          return $http({\n\t            method: 'GET',\n\t            url: '/applications/' + $application.get('id') + '/roles/' + $route.current.params.roleId\n\t          });\n\t        }]\n\t      }\n\t    }).otherwise({\n\t      redirectTo: '/'\n\t    });\n\t  }]);\n\t\n\t  module.exports = app;\n\t})();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ActiveFiltersController', ['$scope', 'StormConfiguration', function (scope, StormConfiguration) {\n\t\n\t  var ctrl = this;\n\t\n\t  scope.newFilter = {\n\t    name: '',\n\t    value: null\n\t  };\n\t\n\t  var notFilters = ['per_page', 'page', 'sort_by', 'sort_order'];\n\t\n\t  this.$onInit = function () {\n\t\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.query = this.query || {};\n\t\n\t    // An array of attributes name from the parent controller\n\t    scope.filterAttributes = this.filterAttributes;\n\t\n\t    // Initializing filters\n\t    scope.filters = StormConfiguration.get('products_list_active_filters') || [];\n\t\n\t    for (var k in ctrl.query) {\n\t      if (notFilters.indexOf(k) === -1) {\n\t        scope.filters.push({\n\t          name: k,\n\t          value: ctrl.query[k]\n\t        });\n\t      }\n\t    }\n\t\n\t    scope.persistFilters = StormConfiguration.get('products_list_persist_filters') || false;\n\t    scope.persistFilters = Boolean(scope.persistFilter);\n\t  };\n\t\n\t  /*\n\t   *  This function returns the guessed type for a property found in products\n\t   *\n\t   *  @param {String} Product key name to test\n\t   *\n\t   *  @return {String} THe name of the guessed type for the specified key\n\t   */\n\t  var inferFilterType = function inferFilterType(key) {\n\t    if (typeof scope.ctrl.resources === 'undefined') {\n\t      return null;\n\t    }\n\t\n\t    var _resource = scope.ctrl.resources.find(function (item) {\n\t      return item.hasOwnProperty(key);\n\t    });\n\t    // Key is the property name we should analyze on the model\n\t\n\t    if (_resource) {\n\t      return _typeof(_resource[key]);\n\t    } else {\n\t      return null;\n\t    }\n\t  };\n\t\n\t  scope.isFilterSet = function (key) {\n\t    return scope.filters.filter(function (filter) {\n\t      return filter.name === key;\n\t    }).length > 0;\n\t  };\n\t\n\t  /*\n\t   *  Filters out empty filters. Means that we will not show filters that are half created.\n\t   */\n\t  scope.filterIsNotEmpty = function (item, index, array) {\n\t    return item.name !== '' && item.value !== null;\n\t  };\n\t\n\t  /*\n\t   *    View function that selects which control to show for this particular filter\n\t   *\n\t   *  @return {String} A string label identifying the type of input\n\t   */\n\t  scope.getControlForFilter = function (filter) {\n\t\n\t    if (filter.name === 'type') {\n\t      return 'productTypeSelector';\n\t    }\n\t\n\t    if (filter.name === 'category_id') {\n\t      return 'categorySelectorInput';\n\t    }\n\t\n\t    if (filter.name === 'brand_id') {\n\t      return 'brandSelectorInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'number') {\n\t      return 'numberInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'string') {\n\t      return 'textInput';\n\t    }\n\t\n\t    if (inferFilterType(filter.name) === 'boolean') {\n\t      return 'booleanInput';\n\t    }\n\t\n\t    // else\n\t\n\t    return 'disabledInput';\n\t  };\n\t\n\t  /*\n\t   *  Adds an empty filter\n\t   */\n\t  scope.addFilter = function (filter) {\n\t    if (!filter) scope.filters.push({\n\t      name: '',\n\t      value: null\n\t    });else scope.filters.push(filter);\n\t  };\n\t\n\t  scope.saveNewFilterAndApply = function () {\n\t    scope.addFilter(scope.newFilter);\n\t    console.log(\"Saving this new filters\", scope.newFilter);\n\t    scope.applyFilters();\n\t    scope.newFilter = {\n\t      name: '',\n\t      value: null\n\t    };\n\t    $('#singleFilterModal').modal('hide');\n\t  };\n\t\n\t  scope.humanReadableFilterValue = function (filter) {\n\t\n\t    if ('object' === _typeof(filter.value)) {\n\t      if (filter.value.hasOwnProperty('$regex')) {\n\t        return filter.value.$regex;\n\t      }\n\t    }\n\t\n\t    if ('type' === filter.name) {\n\t      return filter.value.replace(/\\_/g, \" \");\n\t    }\n\t\n\t    // If we don't know how to handle it:\n\t    return filter.value;\n\t  };\n\t\n\t  /*\n\t   *  @param {Number} index The position of the filter to remove\n\t   *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\n\t   */\n\t  scope.removeFilter = function (index, applyToQuery) {\n\t    if (typeof applyToQuery === 'undefined') {\n\t      applyToQuery = true;\n\t    }\n\t\n\t    var filterToRemove = scope.filters.splice(index, 1);\n\t\n\t    filterToRemove = filterToRemove[0];\n\t\n\t    delete scope.ctrl.query[filterToRemove.name];\n\t\n\t    if (applyToQuery === true) {\n\t      scope.applyFilters();\n\t    }\n\t  };\n\t\n\t  scope.applyFilters = function () {\n\t    scope.filters.forEach(function (filter) {\n\t      scope.ctrl.query[filter.name] = filter.value;\n\t    });\n\t\n\t    ctrl.onUpdate({\n\t      filters: scope.filters\n\t    });\n\t    $('#filtersModal').modal('hide');\n\t\n\t    //if (scope.persistFilters === true)\n\t    StormConfiguration.set('products_list_active_filters', scope.filters);\n\t  };\n\t}]);\n\tapp.component('activeFilters', {\n\t  templateUrl: '/modules/data_dashboard/src/components/activeFilters/activeFilters.component.html',\n\t  controller: 'ActiveFiltersController',\n\t  bindings: {\n\t    query: '=', // We need access to the controller's query\n\t    filterAttributes: '=', // We need a list of property names to be sued as filters\n\t    onUpdate: '&', // THis will notify the controller that filters changed\n\t    resources: '=' // We need the list of resources to be able to infer which filters to display\n\t  }\n\t});\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\t/*\n\t* @attribute overrides {object} set of overrides to apply\n\t          when querying marketcloud\n\t*\n\t*/\n\tapp.controller('addProductsCardController', ['$scope', '$element', '$attrs', '$marketcloud', function (scope, $element, $attrs, $marketcloud) {\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.config = this.config || {\n\t      additionalFields: [\n\t        // {name : \"quantity\", type : \"number\", required : true}\n\t      ]\n\t    };\n\t\n\t    scope.swapArrayItemPosition = function (sourceIndex, destinationIndex, arr) {\n\t      if (!arr[sourceIndex] || !arr[destinationIndex]) return;\n\t\n\t      var temp = angular.copy(arr[destinationIndex]);\n\t      arr[destinationIndex] = arr[sourceIndex];\n\t      arr[sourceIndex] = temp;\n\t    };\n\t\n\t    // Flag to show/hide the list\n\t    scope.showTheList = false;\n\t\n\t    // Object to hold the query data\n\t    scope.query = {};\n\t\n\t    // Here we save the products we get from marketcloud\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  // Shows the list of choices\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  // Hides the list of choices\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  /*\n\t   *  Pushes an item into the array of selected items and resets the search regex\n\t   */\n\t  scope.addProduct = function (product) {\n\t    scope.ctrl.items.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProduct = function (i) {\n\t    scope.ctrl.items.splice(i, 1);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    // We only want to fetch simple products here\n\t    // TODO, this should be an attribute\n\t    if (scope.ctrl.overrides) {\n\t      for (var k in scope.ctrl.overrides) {\n\t        query[k] = scope.ctrl.overrides[k];\n\t      }\n\t    }\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.ctrl.items.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\tapp.component('addProductsCard', {\n\t  templateUrl: '/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.html',\n\t  controller: 'addProductsCardController',\n\t  bindings: {\n\t    items: '=',\n\t    config: '=',\n\t    overrides: '=', // overrides to the query\n\t    title: '@',\n\t    onUpdate: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('AddressFormController', ['$scope', 'Countries', function ($scope, Countries) {\n\t\n\t  this.$onInit = function () {\n\t\n\t    // Initializing the array of countries taken from the service\n\t    $scope.countries = Countries;\n\t\n\t    // Linking the local address object to the parent scope object\n\t    $scope.address = this.address;\n\t  };\n\t}]);\n\t\n\tapp.component('addressForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/addressForm/addressForm.component.html',\n\t  controller: 'AddressFormController',\n\t  bindings: {\n\t    address: '='\n\t  }\n\t});\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tvar ApplicationController = ['$scope', function (scope) {\n\t\n\t  /*\n\t  * Due to https://github.com/angular/angular.js/commit/bcd0d4d896d0dfdd988ff4f849c1d40366125858\n\t  *\n\t  * From AngularJS >= 1.6.x pre-assigning bindings on controller instances is disabled by default.\n\t  */\n\t  this.$onInit = function () {\n\t    scope.application = this.applicationData;\n\t  };\n\t\n\t  scope.percentage = function (app) {\n\t    var v = app.api_calls_quota_left;\n\t    var t = app.api_calls_quota_max;\n\t    return v / t * 100;\n\t  };\n\t}];\n\t\n\tapp.component('application', {\n\t  templateUrl: '/modules/data_dashboard/src/components/application/application.component.html',\n\t  controller: ApplicationController,\n\t  bindings: {\n\t    applicationData: '='\n\t  }\n\t});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('autocompleteController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  // Since angular 1.6 component initialization must be inside the $onInit call\n\t  // to allow the use of ES6 classes as component controllers\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The list of values\n\t    scope.ctrl.suggestionList = angular.copy(scope.ctrl.items);\n\t\n\t    // Flag to toggle the suggestion list\n\t    scope.showTheList = false;\n\t\n\t    // Here ww handle the initial selection if the model already has a value\n\t    var initiallySelected = scope.ctrl.suggestionList.filter(function (item) {\n\t      if (item === scope.ctrl.myModel) return true;\n\t      if (item[scope.ctrl.value] === scope.ctrl.myModel) return true;\n\t\n\t      return false;\n\t    });\n\t\n\t    if (initiallySelected.length > 0) {\n\t\n\t      scope.selectItem(initiallySelected[0]);\n\t    }\n\t  };\n\t\n\t  /*\n\t   * Filters the suggestion list by query. This updates the suggestion list showing\n\t   * only those results that are matching the query.\n\t   */\n\t  scope.filter = function () {\n\t\n\t    var toMatch = scope.ctrl.selectedLabel.toLowerCase();\n\t\n\t    scope.ctrl.items = scope.ctrl.suggestionList.filter(function (i) {\n\t\n\t      // If the value attribute is provided we use it to look for a particular property\n\t      if (scope.ctrl.value) {\n\t\n\t        return i[scope.ctrl.value].toLowerCase().indexOf(toMatch) > -1;\n\t      } else {\n\t\n\t        return i.toLowerCase().indexOf(toMatch) > -1;\n\t      }\n\t    });\n\t  };\n\t\n\t  /*\n\t   * Makes the suggestion list visible\n\t   */\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t\n\t  /*\n\t   * Makes the suggestion list invisible\n\t   */\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.handleNewItems = function () {\n\t    if (scope.ctrl.allowNewElements) {\n\t\n\t      scope.ctrl.myModel = scope.ctrl.selectedLabel;\n\t      scope.hideList();\n\t    }\n\t  };\n\t\n\t  /**\n\t   * Selects the clicked item as a chosen value\n\t   */\n\t  scope.selectItem = function (item) {\n\t\n\t    console.log(\"selectItem called on \", item);\n\t\n\t    // If the component has a label attribute, we want to show that label\n\t    // insteand of the actually chosen value\n\t    if (scope.ctrl.label) {\n\t      scope.ctrl.selectedLabel = item[scope.ctrl.label];\n\t    } else {\n\t      // Otherwise we want to select the actual value.\n\t      scope.ctrl.selectedLabel = item;\n\t    }\n\t\n\t    if (scope.ctrl.value) {\n\t      scope.ctrl.myModel = item[scope.ctrl.value];\n\t    } else {\n\t      scope.ctrl.myModel = item;\n\t    }\n\t\n\t    // update the query to reflect the model value\n\t    // scope.ctrl.myModel = scope.ctrl.myModel;\n\t\n\t    // After the choice, we hide the list\n\t    scope.showTheList = false;\n\t\n\t    // Fucking AngularJS ng-changes triggers before the update cycle is complete\n\t    window.setTimeout(scope.ctrl.onSelected, 1);\n\t  };\n\t}]);\n\tapp.component('autocomplete', {\n\t  templateUrl: '/modules/data_dashboard/src/components/autocomplete/autocomplete.component.html',\n\t  controller: 'autocompleteController',\n\t  bindings: {\n\t    allowNewElements: '@',\n\t    myModel: '=', // The model\n\t    items: '=', // The source for autocomplete suggestions\n\t    onSelected: '&', // Hook called when an item is selected\n\t    label: '@', // The property to use as a label for suggestions,\n\t    value: '@', // The property to use as a value for suggestions,\n\t    inputClasses: '@' // Classes to add to the input\n\t  }\n\t});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('BackButtonController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  scope.goBack = function () {\n\t    history.back();\n\t  };\n\t}]);\n\t\n\tapp.component('backButton', {\n\t  template: '<a class=\"link pull-right\" ng-click=\"goBack()\"><i class=\"fa fa-long-arrow-left\"></i> <span class=\"xs-hidden\">Back</span></a>',\n\t  controller: 'BackButtonController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('BrandsSelectorController', BrandsSelectorController).component('brandsSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.html',\n\t  controller: 'BrandsSelectorController',\n\t  bindings: {\n\t    brand: '=',\n\t    enableCreateBrand: '@',\n\t    onError: '&'\n\t  }\n\t});\n\t\n\tBrandsSelectorController.$inject = ['$marketcloud', '$scope', '$element'];\n\t\n\tfunction BrandsSelectorController($marketcloud, scope, $elem) {\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    scope.newBrand = {};\n\t\n\t    ctrl.modal = $($elem).find('.modal')[0];\n\t\n\t    scope.enableCreateBrand = this.enableCreateBrand || true;\n\t\n\t    scope.ctrl.query = {\n\t      name: {\n\t        $regex: '',\n\t        $options: 'i'\n\t      }\n\t    };\n\t  };\n\t\n\t  scope.showModal = function () {\n\t    $(ctrl.modal).modal('show');\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      scope.ctrl.brands.push(response.data.data);\n\t      scope.newBrand = {};\n\t      scope.ctrl.brand = response.data.data.id;\n\t      return $marketcloud.brands.list();\n\t    }).then(function (response) {\n\t      scope.ctrl.brands = response.data.data;\n\t      $(ctrl.modal).modal('hide');\n\t    }).catch(function (response) {\n\t      $(ctrl.modal).hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.setSelectedBrand = function (brand) {\n\t    scope.brand = brand;\n\t    scope.ctrl.brand = brand.id;\n\t    scope.ctrl.onChange({\n\t      brand: brand.id\n\t    });\n\t  };\n\t\n\t  // Uses the input box in the component to filter the wanted brand\n\t  scope.filterBrands = function () {\n\t    $marketcloud.brands.list(scope.ctrl.query).then(function (response) {\n\t      ctrl.brands = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred while fetching brands, please retry.', 2);\n\t    });\n\t  };\n\t\n\t  function initializeData() {\n\t    // Initial fetch of brands\n\t    $marketcloud.brands.list().then(function (response) {\n\t      ctrl.brands = response.data.data;\n\t\n\t      var currentBrand = null;\n\t      // Look for the currently selected brand, if any\n\t      ctrl.brands.forEach(function (brand) {\n\t        if (brand.id === scope.ctrl.brand) {\n\t          currentBrand = brand;\n\t        }\n\t      });\n\t\n\t      // If found, we initialize the current brand\n\t      if (currentBrand !== null) {\n\t        scope.brand = currentBrand;\n\t      } else {\n\t        // Otherwise we must fetch it\n\t        return $marketcloud.brands.getById(scope.ctrl.brand);\n\t      }\n\t    }).then(function (response) {\n\t      if (response.data.data) {\n\t        scope.brand = response.data.data;\n\t      }\n\t    }).catch(function (response) {\n\t      ctrl.onError(response);\n\t    });\n\t  }\n\t\n\t  initializeData();\n\t}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('CategoriesSelectorController', CategoriesSelectorController).component('categoriesSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.html',\n\t  controller: 'CategoriesSelectorController',\n\t  bindings: {\n\t    enableCreateCategory: '@',\n\t    category: '=',\n\t    onError: '&',\n\t    onChange: '&'\n\t  }\n\t});\n\t\n\tCategoriesSelectorController.$inject = ['$marketcloud', '$scope', '$element'];\n\t\n\tfunction CategoriesSelectorController($marketcloud, scope, $elem) {\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = this;\n\t    scope.newCategory = {};\n\t    ctrl.modal = $($elem).find('.modal')[0];\n\t\n\t    scope.enableCreateCategory = ctrl.enableCreateCategory || true;\n\t\n\t    scope.ctrl.query = {\n\t      name: {\n\t        $regex: \"\",\n\t        $options: 'i'\n\t      }\n\t    };\n\t  };\n\t\n\t  scope.showModal = function () {\n\t    $(ctrl.modal).modal('show');\n\t  };\n\t\n\t  function initializeData() {\n\t\n\t    // Initial fetch of categories\n\t    $marketcloud.categories.list().then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t\n\t      var currentCategory = null;\n\t      // Look for the currently selected category, if any\n\t      ctrl.categories.forEach(function (category) {\n\t        if (category.id === scope.ctrl.category) currentCategory = category;\n\t      });\n\t\n\t      // If found, we initialize the current category\n\t      if (null !== currentCategory) {\n\t        scope.category = currentCategory;\n\t      } else {\n\t        // Otherwise we must fetch it\n\t        return $marketcloud.categories.getById(scope.ctrl.category);\n\t      }\n\t    }).then(function (response) {\n\t      if (response.data.data) {\n\t        scope.category = response.data.data;\n\t      }\n\t    }).catch(function (response) {\n\t      ctrl.onError(response);\n\t    });\n\t  }\n\t\n\t  initializeData();\n\t\n\t  scope.setSelectedCategory = function (category) {\n\t    scope.category = category;\n\t    scope.ctrl.category = category.id;\n\t    scope.ctrl.onChange({\n\t      category: category.id\n\t    });\n\t  };\n\t\n\t  // Uses the input box in the component to filter the wanted category\n\t  scope.filterCategories = function () {\n\t    $marketcloud.categories.list(scope.ctrl.query).then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred while fetching categories, please retry.', 2);\n\t    });\n\t  };\n\t\n\t  // Saves a new category \n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      ctrl.categories.push(response.data.data);\n\t      scope.newCategory = {};\n\t      ctrl.category = response.data.data.id;\n\t      return $marketcloud.categories.list();\n\t    }).then(function (response) {\n\t      ctrl.categories = response.data.data;\n\t      $(ctrl.modal).modal('hide');\n\t    }).catch(function (response) {\n\t      $(ctrl.modal).hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CustomAttributesFormController', ['$scope', '$element', '$attrs', 'moment', function (scope, $element, $attrs, $moment) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.resource = this.resource;\n\t\n\t    scope.properties = this.properties || {};\n\t\n\t    // Keeping a reference for nesting\n\t    scope.rootObject = scope.properties;\n\t\n\t    scope.newAttribute = {\n\t      name: null,\n\t      value: null,\n\t      type: null\n\t\n\t      // Initializing propertyTypes object\n\t    };computePropertiesTypes();\n\t\n\t    scope.resetNewAttributeValue = function () {\n\t      switch (scope.newAttribute.type) {\n\t        case 'string':\n\t          scope.newAttribute.value = '';\n\t          return;\n\t        case 'number':\n\t          scope.newAttribute.value = 0;\n\t          return;\n\t        case 'boolean':\n\t          scope.newAttribute.value = true;\n\t      }\n\t    };\n\t\n\t    scope.newAttribute.type = 'string';\n\t\n\t    scope.availableTypes = [{\n\t      name: 'String',\n\t      value: 'string'\n\t    }, {\n\t      name: 'Number',\n\t      value: 'number'\n\t    }, {\n\t      name: 'Boolean',\n\t      value: 'boolean'\n\t    }, {\n\t      name: 'RichText',\n\t      value: 'richtext'\n\t    }, {\n\t      name: 'URL/Media',\n\t      value: 'URL'\n\t    }];\n\t  };\n\t\n\t  scope.containerForNewMediaAttribute = [];\n\t\n\t  scope.containersForExistingMediaAttributes = {};\n\t\n\t  scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t    scope.newAttribute.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t  });\n\t\n\t  scope.propertiesTypes = {};\n\t\n\t  function computePropertiesTypes() {\n\t    for (var k in scope.properties) {\n\t      scope.propertiesTypes[k] = _typeof(scope.properties[k]);\n\t\n\t      if (scope.isNull(k) === true) {\n\t        scope.propertiesTypes[k] = 'null';\n\t      }\n\t\n\t      if (scope.isRichText(scope.properties[k]) === true) {\n\t        scope.propertiesTypes[k] = 'richtext';\n\t      }\n\t\n\t      if (scope.isURL(scope.properties[k]) === true) {\n\t        scope.propertiesTypes[k] = 'URL';\n\t        scope.containersForExistingMediaAttributes[k] = [scope.properties[k]];\n\t        scope.$watchCollection('containersForExistingMediaAttributes.' + k, function () {\n\t          // If the value is null, it means that we just deleted it, so we don't have to re-update it\n\t          if (scope.properties[k] === null) {\n\t            return;\n\t          }\n\t          if (scope.containersForExistingMediaAttributes[k]) {\n\t            scope.properties[k] = scope.containersForExistingMediaAttributes[k][scope.containersForExistingMediaAttributes[k].length - 1];\n\t          }\n\t        });\n\t      }\n\t    }\n\t  }\n\t\n\t  scope.isBoolean = function (d) {\n\t    return typeof d === 'boolean';\n\t  };\n\t\n\t  scope.isString = function (d) {\n\t    return typeof d === 'string' && !scope.isRichText(d) && !scope.isURL(d);\n\t  };\n\t\n\t  scope.isNull = function (key) {\n\t    return scope.properties[key] === null;\n\t  };\n\t\n\t  scope.isURL = function (d) {\n\t    if (!d || typeof d.indexOf !== 'function') {\n\t      return false;\n\t    }\n\t    return d.indexOf('http://') === 0 || d.indexOf('https://') === 0;\n\t  };\n\t\n\t  scope.isRichText = function (str) {\n\t    if (typeof str !== 'string') {\n\t      return false;\n\t    }\n\t\n\t    var doc = new DOMParser().parseFromString(str, 'text/html');\n\t    return [].slice.call(doc.body.childNodes).some(function (node) {\n\t      return node.nodeType === 1;\n\t    });\n\t  };\n\t\n\t  scope.isNumber = function (d) {\n\t    return typeof d === 'number';\n\t  };\n\t\n\t  scope.isObject = function (d) {\n\t    if (d === null) {\n\t      return false;\n\t    }\n\t\n\t    return (typeof d === 'undefined' ? 'undefined' : _typeof(d)) === 'object';\n\t  };\n\t\n\t  scope.typeof = function (o) {\n\t    return typeof o === 'undefined' ? 'undefined' : _typeof(o);\n\t  };\n\t\n\t  scope.hasCustomProperties = function () {\n\t    return Object.keys(scope.properties).length > 0;\n\t  };\n\t\n\t  scope.addCustomProperty = function () {\n\t    scope.errorMessage = null;\n\t    if (scope.resource.hasOwnProperty(scope.newAttribute.name)) {\n\t      // scope.productError = \"CUSTOM_PROPERTY_NAME_ALREADY_EXISTS\";\n\t      scope.errorMessage = 'Name already exists';\n\t    } else if (!scope.newAttribute.name) {\n\t      scope.errorMessage = 'Please, enter a valid property name';\n\t    } else {\n\t      scope.properties[scope.newAttribute.name] = scope.newAttribute.value;\n\t      scope.newAttribute.value = null;\n\t      scope.newAttribute.name = null;\n\t      // Re-calculating types\n\t      computePropertiesTypes();\n\t    }\n\t  };\n\t\n\t  scope.deleteCustomProperty = function (propertyName) {\n\t    // delete scope.properties[propertyName]\n\t\n\t    scope.properties[propertyName] = null;\n\t    // Re-calculating types\n\t    computePropertiesTypes();\n\t  };\n\t\n\t  scope.propertiesStack = [];\n\t\n\t  // Goes inside the properties object to show nested properties\n\t  scope.showRecursiveObjectEditor = function (propertyName) {\n\t    // Pushing the new level into the stack\n\t    scope.propertiesStack.push(propertyName);\n\t\n\t    // Getting the pointer to the root of the object\n\t    scope.properties = scope.rootObject;\n\t\n\t    // Digging into the object's nested properties to find the wanted\n\t    for (var i = 0; i < scope.propertiesStack.length; i++) {\n\t      if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\n\t        scope.properties = scope.properties[scope.propertiesStack[i]];\n\t      } else {\n\t        break;\n\t      }\n\t    }\n\t\n\t    // Recalculating the propertiesTypes object for the current properties object\n\t    computePropertiesTypes();\n\t  };\n\t  // Goes to a specific nested level\n\t  scope.goToNestedStep = function (index) {\n\t    // Getting the pointer to the root of the object\n\t    scope.properties = scope.rootObject;\n\t\n\t    // Adjusting the stack to the wanted level\n\t    scope.propertiesStack = scope.propertiesStack.slice(0, index);\n\t\n\t    for (var i = 0; i < index; i++) {\n\t      if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\n\t        scope.properties = scope.properties[scope.propertiesStack[i]];\n\t      } else {\n\t        break;\n\t      }\n\t    }\n\t    // Re-calculating types\n\t    computePropertiesTypes();\n\t  };\n\t}]);\n\t\n\tapp.component('customAttributesForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/customAttributes/customAttributes.component.html',\n\t  controller: 'CustomAttributesFormController',\n\t  bindings: {\n\t    properties: '=',\n\t    resource: '=',\n\t    onError: '&',\n\t    disableAdd: '=',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DashboardBreadcrumbController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  scope.goBack = function () {\n\t    history.back();\n\t  };\n\t}]);\n\t\n\tapp.component('dashboardBreadcrumb', {\n\t  template: '<a href=\"#\" class=\"link pull-right\"><i class=\"fa fa-long-arrow-left\"></i> Back</a>',\n\t  controller: 'DashboardBreadcrumbController',\n\t  bindings: {\n\t    resourceName: '='\n\t  }\n\t});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('McDataTableController', ['$scope', function (scope) {\n\t  this.$onInit = function () {\n\t    var ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    scope.columns = ctrl.columns || Object.keys(scope.ctrl.data[0]);\n\t  };\n\t}]);\n\t\n\tapp.component('mcDataTable', {\n\t  templateUrl: '/modules/data_dashboard/src/components/dataTable/dataTable.component.html',\n\t  controller: 'McDataTableController',\n\t  bindings: {\n\t    data: '=',\n\t    columns: '=?'\n\t  }\n\t});\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('ErrorMessagesController', ErrorMessagesController).component('errorMessages', {\n\t  templateUrl: '/modules/data_dashboard/src/components/errorMessages/errorMessages.component.html',\n\t  controller: 'ErrorMessagesController',\n\t  bindings: {\n\t    validation: '<',\n\t    propertyName: '@',\n\t    modelName: '@',\n\t    onError: '&',\n\t\n\t    messageMin: '@',\n\t    messageMax: '@',\n\t    messageRequired: '@',\n\t    messageType: '@'\n\t  }\n\t});\n\t\n\tErrorMessagesController.$inject = ['$scope', '$models'];\n\t\n\tfunction ErrorMessagesController(scope, Models) {\n\t  if (!Models) {\n\t    throw new Error('ErrorMessages Component requires Models factory. errorMessages.component.js');\n\t  }\n\t\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t\n\t    if (ctrl.modelName) {\n\t      if (!Models.hasOwnProperty(ctrl.modelName)) {\n\t        throw new Error('Cannot find model with name ' + ctrl.modelName);\n\t      }\n\t\n\t      ctrl.schema = angular.copy(Models[ctrl.modelName].schema);\n\t      if (!ctrl.schema) {\n\t        console.log(\"Lo schema non ha il mio model \" + ctrl.modelName, Models);\n\t      }\n\t    }\n\t  };\n\t\n\t  this.$onChanges = function (changes) {\n\t    var validation = changes.validation.currentValue;\n\t\n\t    if (validation.invalidPropertyName === this.propertyName) $('html, body').animate({\n\t      scrollTop: $(\"[property-name='\" + validation.invalidPropertyName + \"']\").offset().top - 200\n\t    }, 500);\n\t  };\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('FlagIconController', ['$scope', 'Countries', function (scope, countries) {\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t    var countryObject = countries.find(function (item) {\n\t      return item.name.toLowerCase() === ctrl.country.toLowerCase();\n\t    });\n\t\n\t    if (!countryObject) ctrl.countryCode = ctrl.country;else ctrl.countryCode = countryObject.code;\n\t  };\n\t\n\t  scope.getFlagClassName = function () {\n\t    return 'flag-icon-' + ctrl.countryCode.toLowerCase();\n\t  };\n\t}]);\n\t\n\tapp.component('flagIcon', {\n\t  template: '<span class=\"flag-icon\" ng-class=\"getFlagClassName()\"></span>',\n\t  controller: 'FlagIconController',\n\t  bindings: {\n\t    country: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar ImageSelectorControllerDependencies = ['$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'];\n\t\n\tvar ImageSelectorController = function ImageSelectorController(scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    // Reference to the controller\n\t    ctrl = this;\n\t\n\t    // List of image urls\n\t    ctrl.images = ctrl.images || [];\n\t\n\t    // List of image objects\n\t    // ctrl.media = ctrl.media || [];\n\t\n\t    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete;\n\t\n\t    /* Component configuration from attributes */\n\t    // The classes used to style the button\n\t    scope.buttonClass = $attrs.buttonClass;\n\t\n\t    // The text displayed on the button\n\t    scope.buttonText = $attrs.buttonText;\n\t\n\t    // The icon displayed on the button\n\t    scope.buttonIcon = $attrs.buttonIcon || null;\n\t\n\t    var tabs = $attrs.tabs || 'library,from_disk,from_url';\n\t\n\t    // This will hold an array of tab names\n\t    // The component will show only those tabs\n\t    // whose name is in this array\n\t    //\n\t    // The first tab will be the active one.\n\t    // TODO to improve this, we can add an attribute \"activeTab\"\n\t\n\t    scope.tabs = tabs.split(',');\n\t\n\t    // This is the name of the parent function which will return a reference to the image container\n\t    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n\t  };\n\t\n\t  /* Uploader configuration */\n\t  scope.uploader = new FileUploader({\n\t    url: window.API_BASE_URL + '/media',\n\t    arrayKey: '',\n\t    headers: {\n\t      'Authorization': window.public_key + ':' + window.token\n\t    },\n\t    filters: []\n\t  });\n\t\n\t  // When closeDialog is called from within the component\n\t  // we notify the parent component/controller by calling the on-close-dialog\n\t  // callback\n\t  scope.closeDialog = function () {\n\t    ctrl.onCloseDialog();\n\t  };\n\t\n\t  scope.openDialog = function () {\n\t    ctrl.onOpenDialog();\n\t  };\n\t\n\t  scope.uploadImages = function () {\n\t    ctrl.onUploadImages();\n\t  };\n\t\n\t  scope.image = {};\n\t  scope.media_files = [];\n\t  scope.loadingMediaFiles = false;\n\t\n\t  // Used to keep filters and pagination state\n\t  scope.query = {};\n\t\n\t  // Initializing the pagination object to null\n\t  // This allows for convenient check on view pagination === null => dont show pagination\n\t  scope.pagination = null;\n\t\n\t  scope.loadMedias = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t    /* $http({\n\t        method: 'GET',\n\t        url: window.API_BASE_URL + '/media',\n\t        headers: {\n\t          Authorization: window.public_key\n\t        }\n\t      }) */\n\t    $marketcloud.media.list(query || {}).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.loadMore = function () {\n\t    var pageToFetch = scope.media_files.length / 20 + 1;\n\t    $marketcloud.media.list({ page: pageToFetch }).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t\n\t      scope.media_files = scope.media_files.concat(response.data.data);\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t\n\t    if (!query) {\n\t      query = scope.query || {};\n\t    }\n\t\n\t    $marketcloud.media.list(query).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  // Calling it right now because we want to initialize the media library\n\t  if (scope.media_files.length === 0) {\n\t    scope.loadMedias();\n\t  }\n\t\n\t  scope.showProgressBar = false;\n\t  scope.uploadingImages = false;\n\t\n\t  scope.howManySelectedMedia = function () {\n\t    return ctrl.images.length;\n\t  };\n\t\n\t  scope.addSelectedFromLibrary = function () {\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('hide');\n\t    /* $('#ImageSelectorModal').modal('hide') */\n\t  };\n\t\n\t  scope.isImageSelected = function (image) {\n\t    return ctrl.images.indexOf(image.url) > -1;\n\t  };\n\t  scope.selectImage = function (image) {\n\t    ctrl.image = image.url;\n\t    scope.closeDialog();\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('hide');\n\t  };\n\t\n\t  var removeImage = function removeImage(image) {\n\t    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n\t    var pos = ctrl.images.indexOf(image.url);\n\t    if (pos > -1) {\n\t      ctrl.images.splice(pos, 1);\n\t    }\n\t\n\t    // Rimuovo il media\n\t    /* for (var i =0; i< ctrl.media.length;i++) {\n\t      if (ctrl.media[i].url === image.url)\n\t        ctrl.media.splice(i,1);\n\t    } */\n\t  };\n\t\n\t  scope.uploader.onCompleteAll = function () {\n\t    scope.loadMedias();\n\t    scope.showProgressBar = false;\n\t    scope.uploadingImages = false;\n\t    scope.uploader.clearQueue();\n\t\n\t    // Checking if we need to close the dialog\n\t    if (scope.closeOnUploadComplete === 'true') {\n\t      scope.closeDialog();\n\t      /* $('#ImageSelectorModal').modal('hide') */\n\t      var modal = $element.find('#ImageSelectorModal');\n\t      $(modal).modal('hide');\n\t    }\n\t\n\t    if (ctrl.onUploadComplete) {\n\t      ctrl.onUploadComplete();\n\t    }\n\t  };\n\t\n\t  scope.uploader.onProgressAll = function (progress) {};\n\t\n\t  scope.uploader.onErrorItem = function (item, response, status, headers) {\n\t    var err = new Error('Error uploading an item');\n\t    err.response = response;\n\t    err.status = status;\n\t    err.headers = headers;\n\t    $exceptionHandler(err);\n\t  };\n\t\n\t  scope.chooseFileFromStorage = function () {\n\t    $('#chooseFileFromStorageButton').trigger('click');\n\t  };\n\t\n\t  scope.uploadSelectedImages = function () {\n\t    scope.showProgressBar = true;\n\t    scope.uploadingImages = true;\n\t    scope.uploader.uploadAll();\n\t  };\n\t\n\t  scope.addImageFromUrl = function () {\n\t    ctrl.images.push(scope.image.url);\n\t    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n\t    scope.image.url = null;\n\t  };\n\t\n\t  scope.showImageSelectorModal = function () {\n\t    /* $('#ImageSelectorModal').modal('show') */\n\t    var modal = $element.find('#ImageSelectorModal');\n\t    $(modal).modal('show');\n\t\n\t    // Notifying the parent\n\t    scope.openDialog();\n\t  };\n\t};\n\t\n\tImageSelectorController.$inject = ImageSelectorControllerDependencies;\n\t\n\tangular.module('DataDashboard').controller('ImageSelectorController', ImageSelectorController);\n\t\n\tangular.module('DataDashboard').component('imageSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imageSelector/imageSelector.component.html',\n\t  controller: 'ImageSelectorController',\n\t  bindings: {\n\t    onCloseDialog: '&',\n\t    onOpenDialog: '&',\n\t    onUploadComplete: '&',\n\t    image: '=?',\n\t    buttonClass: '@',\n\t    buttonIcon: '@',\n\t    buttonText: '@',\n\t    closeOnUploadComplete: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ImageThumbnailController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // Boolean flag to control display/hide of the overlay\n\t    scope.ctrl.showOverlay = false;\n\t  };\n\t\n\t  scope.edit = function () {\n\t    scope.ctrl.onEdit();\n\t    $element.find('#editImageModal').modal('show');\n\t  };\n\t  scope.delete = function () {\n\t    scope.ctrl.onDelete();\n\t  };\n\t\n\t  scope.zoom = function () {\n\t    $element.find('#zoomImageModal').modal('show');\n\t  };\n\t\n\t  scope.showOverlay = function () {\n\t    scope.ctrl.showOverlay = true;\n\t  };\n\t  scope.hideOverlay = function () {\n\t    scope.ctrl.showOverlay = false;\n\t  };\n\t\n\t  scope.toggleEditImageModal = function (image) {\n\t    $element.find('#editImageModal').modal('hide');\n\t  };\n\t}]);\n\tapp.component('imageThumbnail', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.html',\n\t  controller: 'ImageThumbnailController',\n\t  bindings: {\n\t    imageSrc: '=',\n\t    image: '=',\n\t    onEdit: '&',\n\t    onDelete: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction ImagesCardController(scope) {\n\t  var ctrl = null;\n\t\n\t  this.$onInit = function () {\n\t    ctrl = this;\n\t    scope.ctrl = ctrl;\n\t  };\n\t\n\t  scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n\t    var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\n\t\n\t    // We ensure that the indexes exist\n\t    if (fromIndex > target.length - 1) return;\n\t\n\t    // First we remove the element to move\n\t    target.splice(fromIndex, 1);\n\t\n\t    // Then we add it to the desired position\n\t    target.splice(toIndex, 0, toMove);\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    var removed = scope.ctrl.items.splice(i, 1);\n\t    scope.ctrl.onRemove(removed[0]);\n\t  };\n\t}\n\t\n\tImagesCardController.$inject = ['$scope'];\n\t\n\tangular.module('DataDashboard').controller('ImagesCardController', ImagesCardController).component('imagesCard', {\n\t  templateUrl: '/modules/data_dashboard/src/components/imagesCard/imagesCard.component.html',\n\t  controller: 'ImagesCardController',\n\t  bindings: {\n\t    items: '=',\n\t    onRemove: '&',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('LinkHelpTextController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The text to display\n\t    scope.ctrl.text = this.text;\n\t\n\t    // The label to display\n\t    scope.ctrl.label = this.label;\n\t\n\t    scope.showHelpText = false;\n\t  };\n\t\n\t  scope.toggleHelpText = function () {\n\t    scope.showHelpText = !scope.showHelpText;\n\t  };\n\t}]);\n\tapp.component('linkHelpText', {\n\t  templateUrl: '/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.html',\n\t  controller: 'LinkHelpTextController',\n\t  bindings: {\n\t    text: '@',\n\t    label: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('NavbarController', ['$scope', '$application', '$account', function ($scope, $application, $account) {\n\t\n\t  $scope.application = $application.get();\n\t  $scope.user = $account.get();\n\t}]);\n\t\n\tapp.component('navbar', {\n\t  templateUrl: '/modules/data_dashboard/src/components/navbar/navbar.component.html',\n\t  controller: 'NavbarController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaginationNavController', ['$scope', '$element', '$attrs', '$marketcloud', function (scope, $element, $attrs, $marketcloud) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.ctrl.onChangePage({\n\t      page: page_number\n\t    });\n\t  };\n\t\n\t  scope.getListOfPages = function () {\n\t    var np = scope.ctrl.pagination.numberOfPages;\n\t    var cp = scope.ctrl.pagination.currentPage;\n\t\n\t    var arr = [];\n\t    var initialPage = cp - 2;\n\t    if (initialPage <= 0) {\n\t      initialPage = 1;\n\t    }\n\t    var lastPage = cp + 2;\n\t    if (lastPage > np) {\n\t      lastPage = np;\n\t    }\n\t\n\t    for (var i = initialPage; i < lastPage; i++) {\n\t      arr.push(i);\n\t    }\n\t\n\t    return arr;\n\t  };\n\t}]);\n\tapp.component('paginationNav', {\n\t  templateUrl: '/modules/data_dashboard/src/components/paginationNav/paginationNav.component.html',\n\t  controller: 'PaginationNavController',\n\t  bindings: {\n\t    pagination: '=',\n\t    onChangePage: '&'\n\t\n\t  }\n\t});\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaginationSelectorController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t\n\t    scope.ctrl = this;\n\t    scope.ctrl.perPage = this.perPage || this.config.defaultPageSize;\n\t    scope.ctrl.page = this.page || this.config.defaultPageNumber;\n\t\n\t    this.updatePageCounters();\n\t  };\n\t\n\t  // If the parent controller's pagination changes\n\t  // we have to update our reference\n\t  this.$onChanges = function (changes) {\n\t\n\t    // Whenever the parent controller refreshes data updating the query\n\t    // we must update our reference to pagination\n\t    if (changes.pagination) {\n\t      ctrl.pagination = changes.pagination.currentValue;\n\t\n\t      // We have to be sure that scope is already there\n\t      if (scope && scope.ctrl) {\n\t        ctrl.updatePageCounters();\n\t      }\n\t    }\n\t  };\n\t\n\t  this.updatePageCounters = function () {\n\t    scope.pages = [];\n\t    for (var i = 1; i <= this.pagination.numberOfPages; i++) {\n\t      scope.pages.push(i);\n\t    }\n\t\n\t    // We find the positions of the first and the last displayed item\n\t    scope.first = (scope.ctrl.page - 1) * scope.ctrl.perPage + 1;\n\t    scope.last = scope.ctrl.page * scope.ctrl.perPage - 1;\n\t\n\t    // If there are less items than the perPage value, we adjust the \"last\" value\n\t    if (scope.last > scope.ctrl.pagination.count) {\n\t      scope.last = scope.ctrl.pagination.count;\n\t    }\n\t  };\n\t\n\t  this.config = {\n\t    availablePageSizes: [10, 20, 50, 100],\n\t    defaultPageSize: 20,\n\t    defaultPageNumber: 1\n\t\n\t    // this function triggers the callback specified as onChangePageSize\n\t  };scope.setPageSize = function (pageSize) {\n\t\n\t    var newSize = scope.ctrl.perPage;\n\t\n\t    if (pageSize) newSize = pageSize;\n\t\n\t    scope.ctrl.onChangePageSize({\n\t      per_page: newSize\n\t    }).then(function () {\n\t      ctrl.updatePageCounters();\n\t    });\n\t  };\n\t\n\t  scope.setPageNumber = function (pageNumber) {\n\t\n\t    if (pageNumber <= 0) {\n\t      console.info(\"Cannot set page <= 0. Ignoring setPageNumber() call.\");\n\t      return;\n\t    }\n\t\n\t    if (pageNumber > scope.ctrl.pagination.numberOfPages) {\n\t      console.info(\"Cannot set page > pagination.numberOfPages. Ignoring setPageNumber() call.\");\n\t      return;\n\t    }\n\t\n\t    scope.ctrl.onChangePageNumber({\n\t      page: pageNumber\n\t    }).then(function () {\n\t      ctrl.updatePageCounters();\n\t    });\n\t  };\n\t}]);\n\tapp.component('paginationSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.html',\n\t  controller: 'PaginationSelectorController',\n\t  bindings: {\n\t    perPage: '=',\n\t    page: '=',\n\t    pagination: '<', // We don't need to modify this, we just use it to listen for changes and read data\n\t    onChangePageSize: '&',\n\t    onChangePageNumber: '&'\n\t\n\t  }\n\t});\n\n/***/ }),\n/* 24 */\n13,\n/* 25 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('SEOFormController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    // The SEO object holds all SEO related data\n\t    scope.ctrl.seo = this.seo;\n\t\n\t    // The active tab key\n\t    scope.activeSeoTab = 'meta';\n\t  };\n\t\n\t  scope.showSeoTab = function (tabname) {\n\t    scope.activeSeoTab = tabname;\n\t  };\n\t}]);\n\tapp.component('seoForm', {\n\t  templateUrl: '/modules/data_dashboard/src/components/seoForm/seoForm.component.html',\n\t  controller: 'SEOFormController',\n\t  bindings: {\n\t    seo: '=',\n\t    removeCardFrame: '@?'\n\t  }\n\t});\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SidebarController', ['$scope', '$http', '$routeParams', '$location', '$rootScope', '$route', '$application', '$window', 'StormConfiguration', function ($scope, $http, $params, $location, $root, $route, $application, $window, Configuration) {\n\t  $scope.showingSubSidebar = false;\n\t\n\t  $scope.currentSidebarSection = null;\n\t\n\t  $scope.currentSection = null;\n\t\n\t  $scope.sidebarIsExpanded = true;\n\t\n\t  $scope.subEntriesGroupToShow = null;\n\t\n\t  $scope.subSideBars = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t\n\t  $scope.StormConfiguration = {};\n\t  $scope.StormConfiguration = Configuration.get();\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    if (args.section) {\n\t\n\t      $scope.currentSection = args.section.split('.')[0];\n\t      $scope.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      $root.currentSection = args.section.split('.')[0];\n\t      $root.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n\t        $scope.hideSubSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.switchToApp = function (app_id) {\n\t    var current_app_id = $application.get().id;\n\t    // We just need to swap the current urls with the desired app id\n\t    var url = '/applications/' + app_id + '/dashboard#/';\n\t\n\t    window.location.href = url;\n\t  };\n\t\n\t  $scope.showSubEntries = function (id) {\n\t    $scope.subEntriesGroupToShow = id;\n\t  };\n\t  $scope.hideAllSubEntries = function () {\n\t    for (var k in $scope.subEntriesGroupShown) {\n\t      $scope.subEntriesGroupShown[k] = false;\n\t    }\n\t  };\n\t\n\t  $scope.subEntriesGroupShown = {\n\t    inventory: false,\n\t    system: false\n\t\n\t    // find workaround with $window, since currently using $window doesnt work\n\t  };this.mql = window.matchMedia('screen and (max-width:1000px)');\n\t\n\t  this.mql.addListener(function (mq) {\n\t    console.log(\"matchMedia Listener\");\n\t    if (mq.matches) {\n\t      if (true === $scope.sidebarIsExpanded) {\n\t        $scope.toggleSidebar();\n\t      }\n\t    } else {\n\t      // When the screen size grows bigger, we expand the sidebar,\n\t      // not required but probably wanted by the user\n\t      if (false === $scope.sidebarIsExpanded) {\n\t        $scope.toggleSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.toggleSidebar = function () {\n\t\n\t    var movement = \"-=200\";\n\t    var duration = 500;\n\t\n\t    if ($scope.sidebarIsExpanded === false) {\n\t      movement = '+=200';\n\t\n\t      // if we are closing the sidebar, we also close sub-sections in it\n\t      $scope.hideAllSubEntries();\n\t    }\n\t\n\t    $(\"#page-wrapper\").animate({\n\t      \"margin-left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".dashboard-section-header\").animate({\n\t      \"left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".sidebar-footer\").animate({\n\t      \"left\": movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false\n\t    });\n\t\n\t    $(\".sidebar\").not('.sub-sidebar').animate({\n\t      left: movement\n\t    }, {\n\t      duration: duration,\n\t      queue: false,\n\t      done: function done() {\n\t\n\t        if (true === $scope.sidebarIsExpanded) {\n\t          $(\"a.entry .fa\").addClass(\"pull-right\");\n\t          $scope.sidebarIsExpanded = false;\n\t        } else {\n\t          $scope.sidebarIsExpanded = true;\n\t          $(\"a.entry .fa\").removeClass(\"pull-right\");\n\t        }\n\t\n\t        $scope.$apply();\n\t      }\n\t    });\n\t  };\n\t\n\t  $scope.toggleSidebar = function () {\n\t\n\t    if (true === $scope.sidebarIsExpanded) {\n\t      angular.element('.sidebar').addClass('collapsed');\n\t      angular.element('.sidebar').removeClass('expanded');\n\t      angular.element('#page-wrapper').addClass('expanded');\n\t      angular.element('#page-wrapper').removeClass('collapsed');\n\t      $scope.hideAllSubEntries();\n\t      $scope.sidebarIsExpanded = false;\n\t    } else {\n\t      angular.element('.sidebar').addClass('expanded');\n\t      angular.element('.sidebar').removeClass('collapsed');\n\t      angular.element('#page-wrapper').addClass('collapsed');\n\t      angular.element('#page-wrapper').removeClass('expanded');\n\t      $scope.sidebarIsExpanded = true;\n\t    }\n\t  };\n\t\n\t  $scope.toggleSubEntries = function (group_id) {\n\t    // group_id is the name of the dashboard section\n\t    // a section is a group of logical views\n\t    // e.g. inventory is a group of views related to inventory management\n\t    $scope.currentSection = group_id;\n\t\n\t    if (false === $scope.sidebarIsExpanded) $scope.toggleSidebar();\n\t\n\t    $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id];\n\t  };\n\t\n\t  $scope.saveStormConfiguration = function () {\n\t\n\t    for (var k in $scope.StormConfiguration) {\n\t      Configuration.set(k, $scope.StormConfiguration[k], true);\n\t    }\n\t\n\t    if ($scope.StormConfiguration.hasOwnProperty(\"theme\")) Configuration.applyTheme($scope.StormConfiguration.theme);\n\t  };\n\t\n\t  $scope.showSubSidebar = function (id) {\n\t\n\t    $scope.showingSubSidebar = true;\n\t\n\t    var sidebars = ['inventory', 'system', 'contents'];\n\t\n\t    if (sidebars.indexOf(id) < 0) {\n\t      return false;\n\t    }\n\t\n\t    $scope.currentSidebarSection = id;\n\t  };\n\t\n\t  $scope.hideSubSidebar = function () {\n\t    $scope.showingSubSidebar = false;\n\t  };\n\t}]);\n\t\n\tapp.component('sidebar', {\n\t  templateUrl: '/modules/data_dashboard/src/components/sidebar/sidebar.component.html',\n\t  controller: 'SidebarController',\n\t  bindings: {}\n\t});\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('sortingSelectorController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t    scope.ctrl.query = this.query || {};\n\t\n\t    if (!scope.ctrl.query.sort_by) scope.ctrl.query.sort_by = 'id';\n\t    if (!scope.ctrl.query.sort_order) scope.ctrl.query.sort_order = 'DESC';\n\t\n\t    scope.ctrl.resourceAttributes = this.resourceAttributes || [];\n\t  };\n\t\n\t  scope.applySorting = function () {\n\t    console.log(\"sortingSelector.applySorting\", {\n\t      sort_by: scope.ctrl.query.sort_by,\n\t      sort_order: scope.ctrl.query.sort_order\n\t    });\n\t    scope.ctrl.onUpdate({\n\t      sort_by: scope.ctrl.query.sort_by,\n\t      sort_order: scope.ctrl.query.sort_order\n\t    });\n\t\n\t    $(\"#sortingModal\").modal('hide');\n\t  };\n\t}]);\n\t\n\tapp.component('sortingSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.html',\n\t  controller: 'sortingSelectorController',\n\t  bindings: {\n\t    query: '=',\n\t    resourceAttributes: '=',\n\t    onUpdate: '&'\n\t  }\n\t});\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('SwitchController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.value = this.value;\n\t\n\t    // Theme is success danger info primary warning default\n\t    scope.ctrl.theme = $attrs.theme || 'info';\n\t\n\t    scope.ctrl.align = $attrs.align || '';\n\t  };\n\t\n\t  $element.on('click', function () {\n\t    if (scope.ctrl.readOnly === true) {\n\t      return;\n\t    }\n\t\n\t    scope.ctrl.value = !scope.ctrl.value;\n\t\n\t    // Params must be wrapped in an object\n\t    // then when using the on-update attribute i can write\n\t    // on-update=\"somfunc(params)\"\n\t\n\t    scope.$apply();\n\t\n\t    scope.ctrl.onUpdate();\n\t  });\n\t}]);\n\tapp.component('switch', {\n\t  templateUrl: '/modules/data_dashboard/src/components/switch/switch.component.html',\n\t  controller: 'SwitchController',\n\t  bindings: {\n\t    value: '=',\n\t    onUpdate: '&',\n\t    class: '@',\n\t    align: '@',\n\t    readOnly: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('TaxesSelectorController', TaxesSelectorController).component('taxesSelector', {\n\t  templateUrl: '/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.html',\n\t  controller: 'TaxesSelectorController',\n\t  bindings: {\n\t    tax: '=',\n\t    onError: '&',\n\t    onChange: '&'\n\t  }\n\t});\n\t\n\tTaxesSelectorController.$inject = ['$marketcloud', '$scope'];\n\t\n\tfunction TaxesSelectorController($marketcloud, scope) {\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t  };\n\t\n\t  $marketcloud.taxes.list().then(function (response) {\n\t    scope.ctrl.taxes = response.data.data;\n\t  }).catch(function (response) {\n\t    scope.ctrl.onError(response);\n\t  });\n\t}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ToolbarSearchController', ['$scope', function (scope) {\n\t\n\t  var ctrl = this;\n\t  scope.searchWord = '';\n\t\n\t  this.$onInit = function () {\n\t    scope.ctrl = this;\n\t\n\t    scope.ctrl.query = {};\n\t\n\t    if (!this.propertyName) this.propertyName = \"name\";\n\t\n\t    scope.ctrl.query[ctrl.propertyName] = {\n\t      $options: 'i',\n\t      $regex: ''\n\t    };\n\t  };\n\t\n\t  scope.onQueryChange = function () {\n\t\n\t    scope.ctrl.query[ctrl.propertyName][\"$regex\"] = scope.searchWord;\n\t    return scope.ctrl.onUpdate({\n\t      query: scope.ctrl.query\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.component('toolbarSearch', {\n\t  templateUrl: '/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.html',\n\t  controller: 'ToolbarSearchController',\n\t  bindings: {\n\t    onUpdate: '&',\n\t    propertyName: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PaymentMethodsController', ['$scope', '$http', '$marketcloud', '$location', 'paymentMethods', function (scope, http, $marketcloud, location, paymentMethods) {\n\t  scope.paymentMethods = paymentMethods.data.data;\n\t  /* scope.integrations = integrations.data.data; */\n\t  scope.modalMode = 'update';\n\t  scope.paymentMethod = {\n\t    name: '',\n\t    description: '',\n\t    active: false\n\t\n\t  };\n\t\n\t  scope.loadPaymentMethods = function () {\n\t    $marketcloud.paymentMethods.list().then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An erro has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.availableChargeOptions = [{\n\t    label: 'No additional charge',\n\t    value: 'no_cost'\n\t  }, {\n\t    label: 'Fixed fee',\n\t    value: 'fixed_fee'\n\t  }, {\n\t    label: 'Percentage based fee',\n\t    value: 'percentage_fee'\n\t  }, {\n\t    label: 'Fixed plus percentage',\n\t    value: 'fixed_plus_percentage'\n\t  }];\n\t\n\t  scope.delete = function (payment) {\n\t\n\t    payment = payment || scope.payment;\n\t\n\t    $marketcloud.paymentMethods.delete(payment.id).then(function (response) {\n\t      notie.alert(1, 'Payment method deleted.', 1.5);\n\t      scope.payment = {};\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t\n\t  scope.save = function () {\n\t    $marketcloud.paymentMethods.save(scope.payment).then(function (response) {\n\t      notie.alert(1, 'Payment method created.', 1.5);\n\t      scope.payment = {};\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t  scope.createPayment = function () {\n\t    scope.modalMode = 'create';\n\t    scope.payment = {};\n\t    $('#addManualPaymentMethodModal').modal('show');\n\t  };\n\t  scope.editPayment = function (payment) {\n\t    scope.modalMode = 'update';\n\t\n\t    scope.payment = payment;\n\t\n\t    $('#addManualPaymentMethodModal').modal('show');\n\t  };\n\t\n\t  scope.update = function (updates) {\n\t    var payload = updates || scope.payment;\n\t\n\t    $marketcloud.paymentMethods.update(scope.payment.id, payload).then(function (response) {\n\t      notie.alert(1, 'Payment method updated.', 1.5);\n\t      return $marketcloud.paymentMethods.list();\n\t    }).then(function (response) {\n\t      scope.paymentMethods = response.data.data;\n\t      $('#addManualPaymentMethodModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.');\n\t    });\n\t  };\n\t\n\t  scope.togglePaymentMethod = function (paymentMethod) {\n\t    $marketcloud.paymentMethods.update(paymentMethod.id, paymentMethod).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('AnalyticsController', ['$scope', '$http', '$routeParams', 'analytics', 'moment', 'carts', 'customers', '$location', function (scope, http, params, analytics, moment, carts, customers, $location) {\n\t\n\t  scope.currentRange = \"This month\";\n\t  if ($location.search().range) scope.currentRange = $location.search().range;\n\t\n\t  var today = new Date();\n\t  today.setHours(0, 0, 0, 0);\n\t  today = today.getTime();\n\t\n\t  var yesterday = new Date();\n\t  yesterday.setDate(yesterday.getDate() - 1);\n\t  yesterday.setHours(0, 0, 0, 0);\n\t  yesterday = yesterday.getTime();\n\t\n\t  var oneWeekAgo = new Date();\n\t  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n\t  oneWeekAgo.setHours(0, 0, 0, 0);\n\t  oneWeekAgo = oneWeekAgo.getTime();\n\t\n\t  var orders = analytics.data.data;\n\t\n\t  var salesVolumePerDay = {};\n\t\n\t  var numberOfOrdersPerDay = {};\n\t\n\t  orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  }).map(function (x) {\n\t    return {\n\t      created_at: x.created_at,\n\t      total: x.total\n\t    };\n\t  }).forEach(function (x) {\n\t    var d = new Date(x.created_at);\n\t    var month = String(d.getMonth() + 1);\n\t    if (month.length < 2) {\n\t      month = '0' + month;\n\t    }\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    if (!salesVolumePerDay[day]) {\n\t      salesVolumePerDay[day] = 0;\n\t    }\n\t\n\t    salesVolumePerDay[day] += x.total;\n\t\n\t    if (!numberOfOrdersPerDay[day]) numberOfOrdersPerDay[day] = 0;\n\t\n\t    numberOfOrdersPerDay[day]++;\n\t  });\n\t\n\t  var goodOrders = orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  });\n\t\n\t  // Given a date object\n\t  // returns yyyy-mm-dd\n\t  function getDateKeyFromDate(d) {\n\t    var month = String(d.getMonth() + 1);\n\t\n\t    if (month.length < 2) month = '0' + month;\n\t\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    return day;\n\t  }\n\t\n\t  var ordersPerDay = {};\n\t\n\t  // We have to prefill days labels\n\t\n\t\n\t  var d = new Date();\n\t  switch (scope.currentRange.toLowerCase()) {\n\t    case \"this month\":\n\t      for (var i = 1; i < 30; i++) {\n\t        var key = getDateKeyFromDate(d);\n\t        ordersPerDay[key] = [];\n\t        d.setDate(d.getDate() - i);\n\t      }\n\t      break;\n\t\n\t    case \"this week\":\n\t      for (var i = 1; i < 7; i++) {\n\t        var key = getDateKeyFromDate(d);\n\t        ordersPerDay[key] = [];\n\t        d.setDate(d.getDate() - i);\n\t      }\n\t      break;\n\t\n\t    case \"yesterday\":\n\t      var yesterday = new Date();\n\t      yesterday.setDate(yesterday.getDate() - 1);\n\t      var key = getDateKeyFromDate(yesterday);\n\t      ordersPerDay[key] = [];\n\t      break;\n\t\n\t    case \"today\":\n\t      var today = new Date();\n\t      var key = getDateKeyFromDate(today);\n\t      ordersPerDay[key] = [];\n\t      break;\n\t  }\n\t\n\t  goodOrders.forEach(function (order) {\n\t    var d = new Date(order.created_at);\n\t\n\t    var day = getDateKeyFromDate(d);\n\t\n\t    if (ordersPerDay[day]) ordersPerDay[day].push(order);else ordersPerDay[day] = [order];\n\t  });\n\t\n\t  scope.dateLabels = Object.keys(ordersPerDay);\n\t  scope.formattedDateLabels = scope.dateLabels.map(function (label) {\n\t    return moment(label, 'YYYY-M-DD').format('MMM Do');\n\t  });\n\t\n\t  scope.ordersVolumePerDay = [];\n\t  scope.ordersCountPerDay = [];\n\t\n\t  scope.dateLabels.forEach(function (date) {\n\t    var numberOfOrdersThisDate = ordersPerDay[date].length;\n\t    var salesThisDate = ordersPerDay[date].map(function (order) {\n\t      return order.total;\n\t    }).reduce(function (a, b) {\n\t      return a + b;\n\t    }, 0);\n\t\n\t    scope.ordersCountPerDay.push(numberOfOrdersThisDate);\n\t    scope.ordersVolumePerDay.push(salesThisDate);\n\t  });\n\t\n\t  scope.totalOrdersValue = goodOrders.map(function (order) {\n\t    return order.total;\n\t  }).reduce(function (a, b) {\n\t    return a + b;\n\t  }, 0).toFixed(2);\n\t\n\t  scope.totalOrdersCount = goodOrders.length;\n\t  /*\n\t   *\tHere we feed the Chart.js chart on the dashboard homepage\n\t   *\n\t   *\tThis chart shows orders volume for this month (last 30 days)\n\t   */\n\t\n\t  scope.chartOptions = {\n\t    scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n\t  };\n\t\n\t  scope.chartOptions = {\n\t    scales: {\n\t      xAxes: [{\n\t        gridLines: {\n\t          display: false\n\t        }\n\t      }],\n\t      yAxes: [{\n\t        scaleLabel: {\n\t          display: true,\n\t          labelString: scope.application.currency_code\n\t        }\n\t      }]\n\t    }\n\t  };\n\t\n\t  carts = carts.data.data;\n\t\n\t  customers = customers.data.data;\n\t\n\t  scope.totalCustomersCount = customers.length;\n\t\n\t  var totalCartsCount = carts.length;\n\t  scope.totalCartsCount = totalCartsCount;\n\t\n\t  // Carts with item inside\n\t  var abandonedCarts = carts.filter(function (cart) {\n\t    return cart.status === \"open\" && cart.items.length > 0;\n\t  });\n\t  var abandonedCartsCount = abandonedCarts.length;\n\t\n\t  // Empty carts\n\t  var emptyCartsCount = carts.filter(function (cart) {\n\t    return cart.status === \"open\" && cart.items.length === 0;\n\t  }).length;\n\t\n\t  //\n\t  var convertedCartsCount = carts.filter(function (cart) {\n\t    return cart.status === \"closed\";\n\t  }).length;\n\t\n\t  scope.abandonedCartsTotalValue = abandonedCarts.map(function (cart) {\n\t    return cart.total;\n\t  }).reduce(function (a, b) {\n\t    return a + b;\n\t  }, 0);\n\t\n\t  scope.CartsDatasets = [abandonedCartsCount, emptyCartsCount, convertedCartsCount];\n\t\n\t  scope.CartsLabels = ['Abandoned', 'Empty', 'Converted'];\n\t\n\t  scope.CartsChartOptions = {\n\t    legend: {\n\t      display: true,\n\t      position: 'bottom'\n\t    }\n\t\n\t  };\n\t\n\t  scope.setCurrentTimeRange = function (range) {\n\t\n\t    range = range.toLowerCase();\n\t\n\t    scope.currentRange = range;\n\t\n\t    return $location.path('/analytics').search(\"range\", range);\n\t  };\n\t\n\t  var totalCartValue = carts.map(function (cart) {\n\t    return cart.total;\n\t  }).reduce(function (a, b) {\n\t    return a + b;\n\t  }, 0);\n\t\n\t  scope.averageCartValue = 0;\n\t\n\t  if (totalCartValue > 0) scope.averageCartValue = (totalCartValue / carts.length).toFixed(2);\n\t\n\t  var totalOrdersValue = orders.map(function (order) {\n\t    return order.total;\n\t  }).reduce(function (a, b) {\n\t    return a + b;\n\t  }, 0);\n\t\n\t  scope.averageOrderValue = 0;\n\t\n\t  if (totalOrdersValue > 0) scope.averageOrderValue = (totalOrdersValue / orders.length).toFixed(2);\n\t}]);\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', 'role', '$location', function (scope, http, $application, rootScope, rolePresets, role, location) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.collaborators';\n\t\n\t  scope.role = role.data.data;\n\t\n\t  scope.preset_name = 'public';\n\t  scope.errors = {};\n\t\n\t  scope.presets = rolePresets;\n\t  scope.applyPreset = function () {\n\t    if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.presets[scope.preset_name]) {\n\t      scope.role.endpoints[k] = scope.presets[scope.preset_name][k];\n\t    }\n\t  };\n\t  scope.clearErrors = function () {\n\t    scope.errors = {};\n\t  };\n\t  scope.formHasErrors = function () {\n\t    return Object.keys(scope.errors).length > 0;\n\t  };\n\t  var validateRole = function validateRole() {\n\t    scope.clearErrors();\n\t    if (scope.role.name.length > 253) {\n\t      scope.errors.name = 'Name too long';\n\t\n\t      return false;\n\t    }\n\t\n\t    if (scope.role.name.length < 1) {\n\t      scope.errors.name = 'Name too short';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t  scope.updateRole = function () {\n\t    if (!validateRole()) {\n\t      return;\n\t    }\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/roles/' + scope.role.id,\n\t      data: scope.role\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role successfuly created.', 1.5);\n\t      location.path('#/application/acl');\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('NewRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', '$location', function (scope, http, $application, rootScope, rolePresets, location) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.acl';\n\t\n\t  scope.preset_name = 'public';\n\t  scope.errors = {};\n\t  scope.newRole = {\n\t    name: '',\n\t    description: '',\n\t    endpoints: angular.copy(rolePresets.public)\n\t  };\n\t  scope.presets = rolePresets;\n\t  scope.applyPreset = function () {\n\t    if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.presets[scope.preset_name]) {\n\t      scope.newRole.endpoints[k] = scope.presets[scope.preset_name][k];\n\t    }\n\t  };\n\t  scope.clearErrors = function () {\n\t    scope.errors = {};\n\t  };\n\t  scope.formHasErrors = function () {\n\t    return Object.keys(scope.errors).length > 0;\n\t  };\n\t  var validateRole = function validateRole() {\n\t    scope.clearErrors();\n\t    if (scope.newRole.name.length > 253) {\n\t      scope.errors.name = 'Name too long';\n\t\n\t      return false;\n\t    }\n\t\n\t    if (scope.newRole.name.length < 1) {\n\t      scope.errors.name = 'Name too short';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t  scope.saveRole = function () {\n\t    if (!validateRole()) {\n\t      return;\n\t    }\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/roles',\n\t      data: scope.newRole\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role successfuly created.', 1.5);\n\t      location.path('/applications/' + scope.application.id + '/acl');\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('ACLController', ['$scope', '$http', 'roles', '$application', '$rootScope', function (scope, http, roles, $application, rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.acl';\n\t\n\t  scope.roles = roles.data.data;\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/roles'\n\t    }).then(function (response) {\n\t      scope.roles = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading roles.', 1);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (role) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/roles/' + role.id\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Role correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, role not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateApplicationController', ['$scope', '$http', '$location', '$rootScope', function (scope, http, location, $rootScope) {\n\t\n\t    scope.application = {};\n\t\n\t    scope.create = function () {\n\t        scope._invalid = null;\n\t        var validation = window.Models.Application.validate(scope.application);\n\t        if (false === validation.valid) {\n\t            scope._invalid = validation.invalidPropertyName;\n\t        }\n\t        http({\n\t            method: 'POST',\n\t            url: '/applications',\n\t            data: scope.application\n\t        }).then(function (response) {\n\t            notie.alert(1, \"Application created\", 1.5);\n\t            location.path('#/applications/list');\n\t        }).catch(function (error) {\n\t            notie.alert(3, \"An error has occurred, please try again\", 1.5);\n\t        });\n\t    };\n\t}]);\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ListApplicationsController', ['$scope', function (scope) {\n\t\n\t  scope.applications = window.applications;\n\t}]);\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ApplicationBillingController', ['$scope', '$http', '$rootScope', '$application', '$account', function (scope, http, rootScope, $application, $account) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  rootScope.currentSection = 'application.billing';\n\t\n\t  // The form's step\n\t  scope.step = 1;\n\t\n\t  // The selected plan\n\t  scope.selected_plan = null;\n\t\n\t  // the error message\n\t  scope.error = null;\n\t\n\t  scope.invalidPropertyName = null;\n\t\n\t  // holds the card data\n\t  scope.card = {};\n\t\n\t  // idle, processing, error, success\n\t  scope.creditCardFormState = 'idle';\n\t\n\t  scope.showYearlyPlans = false;\n\t\n\t  scope.goToStep = function (step) {\n\t    scope.step = step;\n\t  };\n\t\n\t  // Loads the current user information like profile and billing\n\t  scope.account = $account.get();\n\t\n\t  scope.selectPlan = function (plan_id) {\n\t    scope.plans.forEach(function (plan) {\n\t      if (plan.id === plan_id) {\n\t        scope.selected_plan = plan;\n\t      }\n\t    });\n\t    console.log('selected_plan', scope.selected_plan);\n\t    scope.goToStep(2);\n\t  };\n\t\n\t  var validateCard = function validateCard() {\n\t    scope.error = null;\n\t\n\t    if (!Stripe.card.validateExpiry(scope.card.exp_month, scope.card.exp_year)) {\n\t      scope.error = 'The card\\'s expiration is invalid';\n\t      scope.invalidPropertyName = 'card.expiry';\n\t    }\n\t\n\t    if (!Stripe.card.validateCVC(scope.card.cvc)) {\n\t      scope.error = 'The card\\'s cvc is invalid';\n\t      scope.invalidPropertyName = 'card.cvc';\n\t    }\n\t\n\t    if (!Stripe.card.validateCardNumber(scope.card.number)) {\n\t      scope.error = 'The card\\'s number is invalid';\n\t      scope.invalidPropertyName = 'card.number';\n\t    }\n\t\n\t    return scope.error === null;\n\t  };\n\t\n\t  scope.updateApplicationSubscription = function () {\n\t    scope.creditCardFormState = 'processing';\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + application.id + '/billing',\n\t      data: {\n\t        plan_id: scope.selected_plan.id\n\t      }\n\t    }).then(function (response) {\n\t      scope.goToStep(3);\n\t      scope.creditCardFormState = 'success';\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      scope.error = error;\n\t      notie.alert(2, error.data.errors[0].message || 'Payment failed, please check your billing information.');\n\t      scope.creditCardFormState = 'error';\n\t    });\n\t  };\n\t\n\t  scope.filterByInterval = function (value, index, arr) {\n\t    if (scope.showYearlyPlans === true) {\n\t      return value.interval === 'yearly';\n\t    } else {\n\t      return value.interval === 'monthly';\n\t    }\n\t  };\n\t\n\t  scope.plans = [];\n\t\n\t  http.get('/applications/' + scope.application.id + '/plans').then(function (response) {\n\t    console.log('PLANS', response.data);\n\t    scope.plans = response.data.data;\n\t\n\t    scope.plans.forEach(function (plan) {\n\t      plan.api_calls_quota_max = plan.api_calls_quota_max / 1000;\n\t      plan.api_calls_quota_max = plan.api_calls_quota_max + 'K';\n\t    });\n\t  }).catch(function (error) {\n\t    console.log(error);\n\t  });\n\t}]);\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CollaboratorsController', ['$scope', '$http', 'collaborators', '$application', '$rootScope', function (scope, http, collaborators, $application, rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  rootScope.currentSection = 'application.collaborators';\n\t\n\t  scope.mode = null;\n\t\n\t  scope.collaborators = collaborators.data.data;\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/collaborators'\n\t    }).then(function (response) {\n\t      scope.collaborators = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading collaborators.', 1);\n\t    });\n\t  };\n\t\n\t  /* scope.edit = function(collaborator) {\n\t    scope.newCollaborator = collaborator;\n\t    scope.showUpdateModal();\n\t  };\n\t  scope.showUpdateModal = function() {\n\t    scope.mode = 'update';\n\t    $('#newCollaboratorModal').modal('show');\n\t  }; */\n\t\n\t  scope.showCreateModal = function () {\n\t    scope.mode = 'create';\n\t    $('#newCollaboratorModal').modal('show');\n\t  };\n\t\n\t  scope.saveCollaborator = function () {\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/collaborators',\n\t      data: scope.newCollaborator\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly created', 1.5);\n\t      scope.newCollaborator = {};\n\t      $('#newCollaboratorModal').modal('hide');\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not created', 1.5);\n\t      scope.newCollaborator = {};\n\t    });\n\t  };\n\t\n\t  scope.updateCollaborator = function (collaborator) {\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email,\n\t      data: {\n\t        role: collaborator.role\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not updated', 1);\n\t      scope.newCollaborator = {};\n\t    });\n\t  };\n\t\n\t  scope.delete = function (collaborator) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Collaborator correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, collaborator not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DeployController', ['$scope', '$rootScope', '$application', function (scope, $rootScope, $application) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  scope.selectedTemplate = null;\n\t\n\t  $rootScope.application = application;\n\t  $rootScope.currentSection = 'application.deploy';\n\t\n\t  scope.getHerokuURL = function () {\n\t    var str = 'https://heroku.com/deploy';\n\t    str += '?template=' + scope.selectedTemplate;\n\t    str += '&env[MARKETCLOUD_PUBLIC_KEY]=' + encodeURIComponent(scope.application.public_key);\n\t    str += '&env[MARKETCLOUD_SECRET_KEY]=' + encodeURIComponent(scope.application.secret_key);\n\t    return str;\n\t  };\n\t}]);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('IntegrationsController', function ($scope, $http, $application, $rootScope) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t  $scope.integrations = [{\n\t    name: 'braintree',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n\t    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n\t    links: {\n\t      'view': '/documentation/integrations/braintree'\n\t    }\n\t  }, {\n\t    name: 'stripe',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n\t    description: 'Web and mobile payments. Built for developers.',\n\t    links: {\n\t      'view': '/documentation/integrations/stripe'\n\t    }\n\t  }, {\n\t    name: 'facebook',\n\t    tags: ['authentication'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n\t    description: 'Facebook authentication',\n\t    links: {\n\t      'view': '/documentation/guides/facebook-login'\n\t    }\n\t  }];\n\t  rootScope.currentSection = 'application.integrations';\n\t});\n\t\n\tapp.controller('IntegrationStripeController', function ($scope, $http, $routeParams, StripeIntegration) {\n\t  console.log('Integration status', StripeIntegration);\n\t\n\t  /*\n\t   *  The integration states are\n\t   *\n\t   *  Not installed\n\t   *  Installed inactive\n\t   *  Installed active\n\t   *\n\t   *  Installed means that the oauth flow was completed and we have the data\n\t   *  StripeIntegration is the object we use to inject the integration state fetched from the api\n\t   *\n\t   *  If it's null, we conclude that it is not installed\n\t   */\n\t  if (StripeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.StripeIntegration = StripeIntegration;\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  // TODO\n\t  // Lo switch deve essere visibile se e solo se l'integrazione  installata. cos da\n\t  // non essere clicccabile altrimenti.\n\t\n\t  $scope.toggleIntegration = function () {\n\t    alert($scope.StripeIntegration.isActive);\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/stripe',\n\t      data: {\n\t        isActive: $scope.StripeIntegration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t});\n\t\n\tapp.controller('IntegrationBraintreeController', function ($scope, $http, $routeParams, BraintreeIntegration) {\n\t  // This bool is used to show/hide credentials form\n\t  // This form is used to update the credentials\n\t  $scope.displayCredentialsForm = false;\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  $scope.braintreeConfiguration = BraintreeIntegration.data.data;\n\t\n\t  $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data);\n\t\n\t  // If the integration is not enabled we initialize it to false\n\t  if (!$scope.braintreeUpdate.hasOwnProperty('isActive')) {\n\t    $scope.braintreeUpdate.isActive = false;\n\t  }\n\t\n\t  $scope.toggleCredentialsForm = function () {\n\t    $scope.displayCredentialsForm = !$scope.displayCredentialsForm;\n\t  };\n\t\n\t  $scope.showModal = function () {\n\t    $('#BraintreeCredentialsModal').modal('show');\n\t  };\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: {\n\t        isActive: $scope.braintreeConfiguration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t  $scope.saveBraintreeConfiguration = function () {\n\t    var payload = {\n\t      environment: $scope.braintreeUpdate.environment,\n\t      isActive: $scope.braintreeUpdate.isActive\n\t\n\t      // If the user also changed the config,\n\t    };if ($scope.braintreeUpdate.merchantId && $scope.braintreeUpdate.publicKey && $scope.braintreeUpdate.privateKey) {\n\t      payload.merchantId = $scope.braintreeUpdate.merchantId;\n\t      payload.publicKey = $scope.braintreeUpdate.publicKey;\n\t      payload.privateKey = $scope.braintreeUpdate.privateKey;\n\t    }\n\t\n\t    console.log('PUTTING', payload);\n\t    $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: payload\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t      $('#BraintreeCredentialsModal').modal('hide');\n\t      $scope.braintreeConfiguration = angular.copy({\n\t        environment: payload.environment,\n\t        isActive: payload.isActive\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t});\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('NavigationController', ['$scope', '$route', '$rootScope', '$application', function ($scope, $route, $rootScope, $application) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  // $rootScope.$broadcast('$dashboardSectionChange',{section : $route.current.$$route.name});\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    // $scope.currentSection = args.section.split('.')[0];\n\t    $scope.currentSection = args.section;\n\t\n\t    $scope.showNavigation = $scope.currentSection !== 'home' && $scope.currentSection !== 'create';\n\t  });\n\t}]);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ApplicationOverviewController', ['$scope', '$http', '$application', '$rootScope', function (scope, http, $application, rootScope) {\n\t  scope.activities = [];\n\t\n\t  // Not loading activities as a route resolve\n\t  // this is because the http method is still quite slow.\n\t  // so we load it after showing the view.\n\t  http({\n\t    url: '/applications/' + $application.get(\"id\") + '/activity',\n\t    method: 'GET'\n\t  }).then(function (response) {\n\t    scope.activities = response.data.data;\n\t  });\n\t\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  // TODO grab statistical information\n\t\n\t  rootScope.currentSection = 'application.overview';\n\t\n\t  function getNextMonth(date) {\n\t    var next_month = new Date(date);\n\t    next_month.setMonth(date.getMonth() + 1);\n\t    return next_month;\n\t  }\n\t\n\t  scope.kilobytesToGigabytes = function (kb) {\n\t    return kb / 1024 / 1024;\n\t  };\n\t\n\t  scope.application.renew_date;\n\t  scope.getMethodCSSClass = function (a) {\n\t    var cls = null;\n\t    switch (a.method) {\n\t      case 'GET':\n\t        cls = 'label-success';\n\t        break;\n\t      case 'POST':\n\t        cls = 'label-info';\n\t        break;\n\t      case 'PUT':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'PATCH':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'DELETE':\n\t        cls = 'label-danger';\n\t        break;\n\t      default:\n\t        cls = 'label-success';\n\t        break;\n\t\n\t    }\n\t    return cls;\n\t  };\n\t}]);\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.factory('BillingPlans', function () {\n\t  var BILLING_PLANS = {\n\t    'free': {\n\t      name: 'free',\n\t      id: 'free',\n\t      price_monthly: 0,\n\t      price_yearly: 0,\n\t      api_calls_quota_max: '5000',\n\t      storage: 0.5\n\t    },\n\t    'month-19': {\n\t      name: 'cumulus',\n\t      id: 'month-19',\n\t      price_monthly: 19,\n\t      price_yearly: 190,\n\t      api_calls_quota_max: '100000',\n\t      storage: 1\n\t    },\n\t    'month-49': {\n\t      name: 'stratus',\n\t      id: 'month-49',\n\t      price_monthly: 49,\n\t      price_yearly: 490,\n\t      api_calls_quota_max: '450000',\n\t      storage: 2\n\t    },\n\t    'month-99': {\n\t      name: 'nimbo stratus',\n\t      id: 'month-99',\n\t      price_monthly: 99,\n\t      price_yearly: 990,\n\t      api_calls_quota_max: '1500000',\n\t      storage: 5\n\t    }\n\t  };\n\t  return BILLING_PLANS;\n\t});\n\t\n\tapp.controller('ApplicationSettingsController', ['$scope', '$application', '$http', '$location', '$rootScope', 'BillingPlans', function (scope, $application, $http, $location, rootScope, BillingPlans) {\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  rootScope.currentSection = 'application.settings';\n\t\n\t  scope.plans = BillingPlans;\n\t\n\t  scope.currentPlan = null;\n\t\n\t  for (var k in BillingPlans) {\n\t    if (scope.application.plan_name === BillingPlans[k].name) {\n\t      scope.currentPlan = BillingPlans[k];\n\t    }\n\t  }\n\t\n\t  scope.updateApplication = function () {\n\t    var update = {\n\t      url: scope.application.url,\n\t      name: scope.application.name\n\t    };\n\t\n\t    $http.put('/applications/' + scope.application.id, update).then(function (response) {\n\t      notie.alert(1, 'The application has been updated.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteApplication = function () {\n\t    notie.confirm('Do you really want to delete the application? It is not reversible!', 'Confirm', 'Cancel', function () {\n\t      $http.delete('/applications/' + scope.application.id).then(function (response) {\n\t        notie.alert(1, 'The application has been deleted.', 1.5);\n\t        $location.path('/');\n\t      }).catch(function (response) {\n\t        notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t      });\n\t    });\n\t  };\n\t\n\t  scope.regenerateKeys = function () {\n\t    notie.confirm('Do you really want to update the application\\'s keys?', 'Confirm', 'Cancel', function () {\n\t      $http.put('/applications/' + scope.application.id + '/regenerateKeys').then(function (response) {\n\t        scope.application.public_key = response.data.data.public_key;\n\t        scope.application.secret_key = response.data.data.secret_key;\n\t        notie.alert(1, 'Keys regenerated correctly.', 1.5);\n\t      }).catch(function (response) {\n\t        notie.alert(3, 'An error has occurred. Please retry', 1.5);\n\t      });\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('WebhooksController', ['$scope', '$http', 'webhooks', '$application', '$rootScope', function (scope, http, webhooks, $application, rootScope) {\n\t  rootScope.currentSection = 'application.webhooks';\n\t\n\t  var application = $application.get();\n\t  scope.application = application;\n\t\n\t  scope.mode = null;\n\t  scope.error = null;\n\t  scope.invalidPropertyName = null;\n\t\n\t  scope.application = application;\n\t  scope.webhooks = webhooks.data.data;\n\t\n\t  scope.newWebhook = {};\n\t\n\t  var webhookMethods = ['create', 'update', 'delete'];\n\t\n\t  var webhookResources = ['addresses', 'brands', 'carts', 'categories', 'collections', 'contents', 'coupons', 'invoices', 'files', 'orders', 'paymentMethods', 'products', 'promotions', 'stores', 'taxes', 'users', 'variables'];\n\t\n\t  /* scope.events = [\n\t    'products.create',\n\t    'products.delete',\n\t    'products.update',\n\t    'brands.create',\n\t    'brands.delete',\n\t    'brands.update',\n\t    'categories.create',\n\t    'categories.delete',\n\t    'categories.update',\n\t    'orders.create',\n\t    'orders.delete',\n\t    'orders.update',\n\t    'carts.create',\n\t    'carts.delete',\n\t    'carts.update',\n\t    'payments.create',\n\t    'payments.delete',\n\t    'payments.update',\n\t    'shippings.create',\n\t    'shippings.delete',\n\t    'shippings.update',\n\t    'users.create',\n\t    'users.update',\n\t    'users.delete'\n\t  ]; */\n\t\n\t  scope.events = [];\n\t\n\t  webhookResources.forEach(function (resource) {\n\t    webhookMethods.forEach(function (method) {\n\t      scope.events.push(resource + '.' + method);\n\t    });\n\t  });\n\t\n\t  scope.events.splice(scope.events.indexOf(\"orders.delete\"), 0, \"payments.create\");\n\t\n\t  scope.load = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/applications/' + scope.application.id + '/webhooks'\n\t    }).then(function (response) {\n\t      console.log('LOAD', response);\n\t      scope.webhooks = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred while reloading webhooks.', 1);\n\t    });\n\t  };\n\t\n\t  scope.edit = function (hook) {\n\t    scope.newWebhook = hook;\n\t    scope.showUpdateModal();\n\t  };\n\t\n\t  scope.showUpdateModal = function () {\n\t    scope.mode = 'update';\n\t    $('#newWebhookModal').modal('show');\n\t  };\n\t\n\t  scope.showCreateModal = function () {\n\t    scope.mode = 'create';\n\t    scope.newWebhook = {};\n\t    $('#newWebhookModal').modal('show');\n\t  };\n\t\n\t  scope.validateWebhook = function () {\n\t    scope.error = null;\n\t    scope.invalidPropertyName = null;\n\t    if (scope.validateUrl() === false) {\n\t      scope.error = 'The URL is not valid. Remember to specify the protocol http:// or https:// at the beginning.';\n\t      scope.invalidPropertyName = 'url';\n\t      return false;\n\t    }\n\t\n\t    if (!scope.newWebhook.event) {\n\t      scope.error = 'Please select a valid event from the menu';\n\t      scope.invalidPropertyName = 'event';\n\t      return false;\n\t    }\n\t\n\t    return true;\n\t  };\n\t\n\t  scope.saveWebhook = function () {\n\t    if (!scope.validateWebhook()) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'POST',\n\t      url: '/applications/' + scope.application.id + '/webhooks',\n\t      data: scope.newWebhook\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly created', 1);\n\t      scope.newWebhook = {};\n\t      $('#newWebhookModal').modal('hide');\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not created', 1);\n\t      scope.newWebhook = {};\n\t    });\n\t  };\n\t\n\t  scope.validateUrl = function () {\n\t    var regex = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i;\n\t    return regex.test(scope.newWebhook.url);\n\t  };\n\t\n\t  scope.updateWebhook = function () {\n\t    if (!scope.validateWebhook()) {\n\t      return;\n\t    }\n\t\n\t    var update = {\n\t      event: scope.newWebhook.event,\n\t      url: scope.newWebhook.url\n\t    };\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id + '/webhooks/' + scope.newWebhook.id,\n\t      data: update\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly updated', 1);\n\t      scope.newWebhook = {};\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not updated', 1);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (hook) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: '/applications/' + scope.application.id + '/webhooks/' + hook.id\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Webhook correctly deleted', 1);\n\t      scope.load();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, webhook not deleted', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditBrandTranslationsController', EditBrandTranslationsController);\n\t\n\t  EditBrandTranslationsController.$inject = ['$scope', '$marketcloud', 'brand', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditBrandTranslationsController(scope, $marketcloud, brand, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.brand = brand.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.brand.locales[scope.currentLocale.code].slug = getSlugFromString(scope.brand.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.brand.hasOwnProperty('locales')) {\n\t      scope.brand.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.brand.locales.hasOwnProperty(locale.code)) {\n\t        scope.brand.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.brand.locales)\n\t      };\n\t\n\t      $marketcloud.brands.update(scope.brand.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditBrandController', ['$scope', '$http', 'brand', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, brandResponse, location, $marketcloud, $utils, $validation, $models) {\n\t  scope.brand = brandResponse.data.data;\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.brand) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.brand[k];\n\t      delete scope.brand[k];\n\t    }\n\t  }\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.brand.images.splice(i, 1);\n\t  };\n\t\n\t  scope.updateBrand = function () {\n\t    scope.brand.image_url = scope.brand.images[0];\n\t\n\t    var toSave = angular.copy(scope.brand);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.brands.update(scope.brand.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Brand successfully update.', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Brand.schema, '[ng-model=\"brand.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.brand.slug = $utils.getSlugFromString(scope.brand.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('BrandsController', ['$scope', '$marketcloud', 'brands', function (scope, $marketcloud, resources) {\n\t  scope.brands = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    return scope.loadData({ page: page_number });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.brands.list(query).then(function (response) {\n\t      scope.brands = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteBrand = function (brand_id, index) {\n\t    $marketcloud.brands.delete(brand_id).then(function (response) {\n\t      scope.loadData({\n\t        page: scope.currentPage\n\t      });\n\t      notie.alert(1, 'Brand deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('BrandController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t\n\t  scope.newBrand = {};\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  // For imageThumbnail\n\t  scope.removeImage = function (i) {\n\t    scope.newBrand.images.splice(i, 1);\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.newBrand.slug = $utils.getSlugFromString(scope.newBrand.name);\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    scope.newBrand.image_url = scope.newBrand.images[0];\n\t\n\t    var toSave = angular.copy(scope.newBrand);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.brands.save(toSave).then(function (response) {\n\t      notie.alert(1, 'Brand saved', 1.5);\n\t      location.path('/brands');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Brand.schema, '[ng-model=\"newBrand.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditCategoryController', ['$scope', '$http', 'category', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, category, location, $marketcloud, $utils, $validation, $models) {\n\t  scope.loadingData = true;\n\t\n\t  scope.category = category.data.data;\n\t\n\t  scope.categories = [];\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Brand.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'parent_id', 'path', 'updated_at', 'created_at');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.category) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.category[k];\n\t      delete scope.category[k];\n\t    }\n\t  }\n\t\n\t  // For image thumbnail\n\t  scope.removeImage = function (i) {\n\t    scope.category.images.splice(i, 1);\n\t  };\n\t\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.updateCategory = function () {\n\t    scope.category.image_url = scope.category.images[0];\n\t\n\t    var toSave = angular.copy(scope.category);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    $marketcloud.categories.update(category.data.data.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Category updated with success ', 2);\n\t      location.path('/categories');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Category.schema, '[ng-model=\"category.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.category.slug = $utils.getSlugFromString(scope.category.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CategoriesController', ['$scope', 'categories', '$q', '$marketcloud', function (scope, resources, $q, $marketcloud) {\n\t  scope.categories = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    scope.categories.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.categories.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (category) {\n\t        promises.push($marketcloud.categories.delete(category.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadPage(scope.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.categories.list(query).then(function (response) {\n\t      scope.categories = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteCategory = function (category_id, index) {\n\t    $marketcloud.categories.delete(category_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Category deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CategoryController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t\n\t  scope.customPropertiesData = {};\n\t  scope.newCategory = {};\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(3, 'An error has occurred. Please retry', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = $models.Category.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'parent_id', 'path', 'updated_at', 'created_at');\n\t\n\t  // For image thumbnails\n\t  scope.removeImage = function (i) {\n\t    scope.newCategory.images.splice(i, 1);\n\t  };\n\t\n\t  scope.saveCategory = function () {\n\t    scope.newCategory.image_url = scope.newCategory.images[0];\n\t\n\t    var toSave = angular.copy(scope.newCategory);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }$marketcloud.categories.save(toSave).then(function (response) {\n\t      notie.alert(1, 'Category saved', 1.5);\n\t      location.path('/categories');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validationObject = response.data.errors[0];\n\t        var invalidPropertyName = validationObject.invalidPropertyName;\n\t\n\t        $validation.showErrorMessage(validationObject, $models.Category.schema, '[ng-model=\"newCategory.' + invalidPropertyName + '\"]');\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.newCategory.slug = $utils.getSlugFromString(scope.newCategory.name);\n\t  };\n\t}]);\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditCategoryTranslationsController', EditCategoryTranslationsController);\n\t\n\t  EditCategoryTranslationsController.$inject = ['$scope', '$marketcloud', 'category', '$http', '$location', '$application', 'LocalesFactory'];\n\t\n\t  function EditCategoryTranslationsController(scope, $marketcloud, category, $http, $location, $application, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.category = category.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').filter(function (localeCode) {\n\t      // When splitting an empty string, we get [\"\"]\n\t      return localeCode !== '';\n\t    }).map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.category.hasOwnProperty('locales')) {\n\t      scope.category.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.category.locales.hasOwnProperty(locale.code)) {\n\t        scope.category.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.category.locales[scope.currentLocale.code].slug = getSlugFromString(scope.category.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      if (scope.currentLocale) {\n\t        return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t      }\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.category.locales)\n\t      };\n\t\n\t      $marketcloud.categories.update(scope.category.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditCollectionTranslationsController', EditCollectionTranslationsController);\n\t\n\t  EditCollectionTranslationsController.$inject = ['$scope', '$marketcloud', 'collection', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditCollectionTranslationsController(scope, $marketcloud, collection, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.collection = collection.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.collection.hasOwnProperty('locales')) {\n\t      scope.collection.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.collection.locales.hasOwnProperty(locale.code)) {\n\t        scope.collection.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.collection.locales[scope.currentLocale.code].slug = getSlugFromString(scope.collection.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.collection.locales)\n\t      };\n\t\n\t      $marketcloud.collections.update(scope.collection.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CollectionController', ['$scope', '$http', '$marketcloud', '$location', '$utils', function (scope, http, $marketcloud, location, $utils) {\n\t\n\t\tscope.collection = {\n\t\t\titems: []\n\t\t};\n\t\n\t\tscope.products = [];\n\t\tscope.itemsToAdd = [];\n\t\n\t\tscope.query = {};\n\t\n\t\tscope.prepareRegex = function () {\n\t\t\tscope.query.name.$options = 'i';\n\t\t};\n\t\n\t\tscope.addProductToCollection = function (product) {\n\t\t\tscope.itemsToAdd.push(product);\n\t\t\tscope.query.name.$regex = '';\n\t\t\tscope.products = [];\n\t\t};\n\t\n\t\tscope.removeProductFromCollection = function (i) {\n\t\t\tscope.itemsToAdd.splice(i, 1);\n\t\t};\n\t\n\t\tscope.showTheList = false;\n\t\tscope.showList = function () {\n\t\t\tscope.showTheList = true;\n\t\t};\n\t\tscope.hideList = function () {\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tscope.showTheList = false;\n\t\t\t\tscope.$apply();\n\t\t\t}, 200);\n\t\t};\n\t\tscope.loadProducts = function (query) {\n\t\t\tquery = query || scope.query;\n\t\n\t\t\t$marketcloud.products.list(query).then(function (response) {\n\t\n\t\t\t\tscope.products = response.data.data.filter(function (item) {\n\t\t\t\t\treturn scope.itemsToAdd.map(function (i) {\n\t\t\t\t\t\treturn i.id;\n\t\t\t\t\t}).indexOf(item.id) < 0;\n\t\t\t\t});\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred. Please try again');\n\t\t\t});\n\t\t};\n\t\n\t\tscope.loadProducts();\n\t\n\t\tscope.saveCollection = function () {\n\t\t\tscope.collection.items = scope.itemsToAdd.map(function (item) {\n\t\t\t\treturn { product_id: item.id };\n\t\t\t});\n\t\t\t$marketcloud.collections.save(scope.collection).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Collection saved', 1.5);\n\t\t\t\tlocation.path('/collections');\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(2, 'An error has occurred, please try again', 1.5);\n\t\t\t});\n\t\t};\n\t}]);\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location', function (scope, http, $marketcloud, location) {\n\t  scope.collection = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.query = {};\n\t\n\t  // Slug related functions\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.save(scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t      location.path('/collections');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditCollectionController', ['$scope', '$http', '$marketcloud', '$location', 'collection', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, collection, $utils, $validation, $models) {\n\t  scope.collection = collection.data.data;\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = angular.copy(scope.collection.items);\n\t\n\t  scope.query = {};\n\t\n\t  // This will hold custom properties for further processing\n\t  scope.customPropertiesData = {};\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Collection.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'application_id', 'seo');\n\t\n\t  for (var k in scope.collection) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.collection[k];\n\t      delete scope.collection[k];\n\t    }\n\t  }\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = $utils.getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t\n\t    // let's re-assemble the custom properties first.\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.update(scope.collection.id, scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Collection.schema, '[ng-model=\"collection.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location', '$utils', '$validation', '$models', function (scope, http, $marketcloud, location, $utils, $validation, $models) {\n\t  scope.collection = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.query = {};\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.collection.slug = $utils.getSlugFromString(scope.collection.name);\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.addProductToCollection = function (product) {\n\t    scope.itemsToAdd.push(product);\n\t    scope.query.name.$regex = '';\n\t    scope.products = [];\n\t  };\n\t\n\t  scope.removeProductFromCollection = function (i) {\n\t    scope.itemsToAdd.splice(i, 1);\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.saveCollection = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.collection[k] = scope.customPropertiesData[k];\n\t    }\n\t    scope.collection.items = scope.itemsToAdd.map(function (item) {\n\t      return {\n\t        product_id: item.id\n\t      };\n\t    });\n\t    $marketcloud.collections.save(scope.collection).then(function (response) {\n\t      notie.alert(1, 'Collection saved', 1.5);\n\t      location.path('/collections');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        $validation.showErrorMessage(validation, $models.Collection.schema, '[ng-model=\"collection.' + validation.invalidPropertyName + '\"]');\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditContentTranslationsController', EditContentTranslationsController);\n\t\n\t  EditContentTranslationsController.$inject = ['$scope', '$marketcloud', 'content', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditContentTranslationsController(scope, $marketcloud, content, $http, $application, $location, locales) {\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.content = content.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    scope.locales = locales;\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // Init locales object\n\t    if (!scope.content.hasOwnProperty('locales')) {\n\t      scope.content.locales = {};\n\t    }\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.content.locales.hasOwnProperty(locale.code)) {\n\t        scope.content.locales[locale.code] = {};\n\t      }\n\t    });\n\t\n\t    // Slugs functions\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t    scope.unsafeSlug = false;\n\t\n\t    scope.updateSlug = function () {\n\t      scope.content.locales[scope.currentLocale.code].slug = getSlugFromString(scope.content.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.content.locales)\n\t      };\n\t\n\t      $marketcloud.contents.update(scope.content.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditContentController', ['$scope', '$http', 'content', '$location', '$marketcloud', 'moment', '$utils', '$validation', '$models', function (scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n\t  scope.content = content.data.data;\n\t\n\t  scope.content.date = $moment(scope.content.date);\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Content.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'locales', 'seo', 'application_id', 'images', 'slug', 'published', 'category', 'date', 'updated_at', 'created_at', 'type');\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.content) {\n\t    if (coreProperties.indexOf(k) === -1) {\n\t      scope.customPropertiesData[k] = scope.content[k];\n\t      delete scope.content[k];\n\t    }\n\t  }\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.content.author.images.splice(i, 1);\n\t  };\n\t\n\t  scope.updateContent = function () {\n\t    var toSave = angular.copy(scope.content);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      toSave[k] = scope.customPropertiesData[k];\n\t    }\n\t    $marketcloud.contents.update(scope.content.id, toSave).then(function (response) {\n\t      notie.alert(1, 'Content updated with success', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Content.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ContentController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$validation', '$models', '$account', function (scope, http, location, $marketcloud, $utils, $validation, $models, $account) {\n\t\n\t  scope.content = {\n\t    title: '',\n\t    slug: '',\n\t    text: '',\n\t    published: false,\n\t    author: {\n\t      name: $account.get('full_name'),\n\t      description: '',\n\t      images: [$account.get('image_url')]\n\t\n\t    },\n\t    seo: {\n\t      meta: {},\n\t      twitter: {},\n\t      facebook: {}\n\t    }\n\t  };\n\t\n\t  scope.customPropertiesData = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.content.author.images.splice(i, 1);\n\t  };\n\t\n\t  // This function is invoked when a seo property\n\t  // changes.\n\t  scope.computeSeoTags = function () {};\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t  scope.saveContent = function () {\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.content[k] = scope.customPropertiesData[k];\n\t    }\n\t    console.log(\"Salvo questo\", scope.content);\n\t    $validation.hideErrors();\n\t    $marketcloud.contents.save(scope.content).then(function (response) {\n\t      // title text author\n\t      notie.alert(1, 'Content saved', 2);\n\t      location.path('/contents');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Content.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ContentsController', ['$scope', '$http', 'contents', '$marketcloud', function (scope, http, resources, $marketcloud) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    per_page: 20\n\t\n\t    // Initial data resolved from the router\n\t  };scope.contents = resources.data.data;\n\t\n\t  scope.loadPage = function (p) {\n\t    return scope.loadData({ page: p });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.contents.list(query).then(function (response) {\n\t      scope.contents = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t  scope.setPublishing = function (content) {\n\t    return http({\n\t      method: 'PUT',\n\t      url: API_BASE_URL + '/contents/' + content.id,\n\t      data: {\n\t        published: content.published\n\t      },\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteContent = function (content_id, index) {\n\t    $marketcloud.contents.delete(content_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Content deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditGroupedProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.itemsToAdd = [];\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  var product_ids = scope.product.items.map(function (product) {\n\t    return product.product_id;\n\t  });\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    scope.product.items.forEach(function (i) {\n\t      p_map[i.product_id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the grouped product, such as the quantity\n\t    scope.itemsToAdd = response.data.data.map(function (prod) {\n\t      var p = angular.copy(prod);\n\t      p.quantity = p_map[p.id]['quantity'];\n\t      return p;\n\t    });\n\t    // scope.product.items = response.data.data;\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'items');\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  /* $http({\n\t  \tmethod: 'GET',\n\t  \turl: API_BASE_URL+'/categories',\n\t  \theaders: {\n\t  \t\tAuthorization: window.public_key + ':' + window.token\n\t  \t}\n\t  }) */\n\t  $marketcloud.categories.list().success(function (response) {\n\t    scope.categories = response.data;\n\t  }).error(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 2);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().success(function (response) {\n\t    scope.brands = response.data;\n\t  }).error(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 2);\n\t  });\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    scope.product.items = scope.itemsToAdd.map(function (item) {\n\t      return { product_id: item.id, quantity: item.quantity };\n\t    });\n\t\n\t    $marketcloud.products.update(scope.product.id, scope.product).success(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).error(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewGroupedProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.error = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).success(function (response) {\n\t      scope.categories = response.data;\n\t    }).error(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).success(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).error(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).success(function (response) {\n\t      scope.brands = response.data;\n\t    }).error(function () {\n\t      console.log('An error has occurred while loading brands');\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).success(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).error(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'grouped_product',\n\t    price: 0,\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    has_variants: false,\n\t    published: true,\n\t    items: []\n\t\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.saveProduct = function () {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t        console.log('Un null');\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t    /* var validation = Models.GroupedProduct.validate(scope.product);\n\t    \tif (validation.valid === false) {\n\t    \tscope.errorField = validation.invalidPropertyName;\n\t    \t\tif (validation.failedValidator === 'required')\n\t    \t\tscope.error = 'The ' + scope.errorField + ' field is required';\n\t    \telse if (validation.failedValidator === 'min') {\n\t    \t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\n\t    \t\telse\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t    \t\t} else if (validation.failedValidator === 'max') {\n\t    \t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\n\t    \t\telse\n\t    \t\t\tscope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t    \t} else {\n\t    \t\tscope.error = 'The ' + scope.errorField + ' field has an invalid value ('+props_to_validate[scope.errorField]+')';\n\t    \t}\n\t    \treturn;\n\t    } */\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t    console.log('Saving this prod', scope.product);\n\t\n\t    scope.product.items = scope.product.items.map(function (item) {\n\t      return { product_id: item.id };\n\t    });\n\t\n\t    $marketcloud.products.save(scope.product).success(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).error(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditCouponController', ['$scope', '$http', '$marketcloud', '$location', '$validation', '$models', 'coupon', function (scope, http, $marketcloud, location, $validation, $models, coupon) {\n\t  scope.coupon = coupon.data.data;\n\t\n\t  scope.save = function () {\n\t    $validation.hideErrors();\n\t    $marketcloud.coupons.update(scope.coupon.id, scope.coupon).then(function (response) {\n\t      notie.alert(1, 'Coupon updated', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Coupon.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  if ('expiration_date' in scope.coupon) {\n\t    scope.hasExpirationDate = true;\n\t  }\n\t\n\t  if ('usages_left' in scope.coupon) {\n\t    scope.limitedUsage = true;\n\t  }\n\t\n\t  scope.toggleCouponExpiration = function () {\n\t    scope.coupon.expiration_date = null;\n\t  };\n\t\n\t  scope.toggleCouponUsage = function () {\n\t    scope.coupon.usages_left = null;\n\t  };\n\t\n\t  scope.clearTargetId = function () {\n\t    scope.coupon.target_id = null;\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.coupon.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.coupon.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t\n\t  // Target management\n\t  // Stuff to add a product.\n\t  // This must be packaged into a component\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t  // This is used as a reference after i pick a product\n\t  scope.targetProduct = null;\n\t  // If the coupon already has a target product\n\t  // we must load it\n\t  if (scope.coupon.target_type === 'PRODUCT_COUPON') {\n\t    $marketcloud.products.getById(scope.coupon.target_id).then(function (response) {\n\t      scope.targetProduct = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred', 2);\n\t    });\n\t  }\n\t\n\t  scope.query = {};\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.selectProductAsTarget = function (product) {\n\t    scope.targetProduct = product;\n\t    scope.coupon.target_id = product.id;\n\t  };\n\t  scope.resetTargetProduct = function () {\n\t    scope.targetProduct = null;\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.handleCategoryChange = function () {};\n\t}]);\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewCouponController', ['$scope', '$http', '$marketcloud', '$location', '$validation', '$models', function (scope, http, $marketcloud, location, $validation, $models) {\n\t  scope.coupon = {\n\t    active: true,\n\t    discount_type: 'NET_REDUCTION'\n\t  };\n\t  scope.randomizeCode = function () {\n\t    scope.coupon.code = Math.random().toString(36).substr(2, 10).toUpperCase();\n\t  };\n\t\n\t  scope.updateCouponExpiration = function () {\n\t    if (scope.hasExpirationDate !== true) {\n\t      delete scope.coupon.expiration_date;\n\t    }\n\t  };\n\t\n\t  scope.clearTargetId = function () {\n\t    scope.coupon.target_id = null;\n\t  };\n\t\n\t  scope.updateCouponUsage = function () {\n\t    if (scope.limitedUsage !== true) {\n\t      delete scope.coupon.usages_left;\n\t    }\n\t  };\n\t\n\t  scope.save = function () {\n\t\n\t    for (var k in scope.coupon) {\n\t      if (scope.coupon[k] === null) {\n\t        delete scope.coupon[k];\n\t      }\n\t    }\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.coupons.save(scope.coupon).then(function (response) {\n\t      notie.alert(1, 'Coupon saved', 1.5);\n\t      location.path('/coupons');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Coupon.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.coupon.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.coupon.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t\n\t  // Stuff to add a product.\n\t  // This must be packaged into a component\n\t  scope.products = [];\n\t  scope.itemsToAdd = [];\n\t  // This is used as a reference after i pick a product\n\t  scope.targetProduct = null;\n\t\n\t  scope.query = {};\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data.filter(function (item) {\n\t        return scope.itemsToAdd.map(function (i) {\n\t          return i.id;\n\t        }).indexOf(item.id) < 0;\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again');\n\t    });\n\t  };\n\t\n\t  scope.selectProductAsTarget = function (product) {\n\t    scope.targetProduct = product;\n\t    scope.coupon.target_id = product.id;\n\t  };\n\t  scope.resetTargetProduct = function () {\n\t    scope.targetProduct = null;\n\t  };\n\t\n\t  scope.loadProducts();\n\t\n\t  scope.handleCategoryChange = function () {};\n\t}]);\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('DeployController', ['$scope', '$application', function (scope, $application) {\n\t\n\t\tscope.selectedTemplate = null;\n\t\n\t\tscope.getHerokuURL = function () {\n\t\t\tvar str = 'https://heroku.com/deploy';\n\t\t\tstr += '?template=' + scope.selectedTemplate;\n\t\t\tstr += '&env[MARKETCLOUD_PUBLIC_KEY]=' + $application.get().public_key;\n\t\t\tstr += '&env[MARKETCLOUD_SECRET_KEY]=' + $application.get().secret_key;\n\t\t\treturn str;\n\t\t};\n\t}]);\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('HomeController', ['$scope', '$http', '$routeParams', 'analytics', 'moment', function (scope, http, params, analytics, moment) {\n\t  scope.activities = [];\n\t\n\t  var getResourceNameFromPath = function getResourceNameFromPath(p) {\n\t    var names = {\n\t      'orders': 'an order',\n\t      'products': 'a product',\n\t      'categories': 'a category',\n\t      'brands': 'a brand',\n\t      'users': 'a user',\n\t      'cart': 'a cart',\n\t      'promotions': 'a promotion',\n\t      'collection': 'a collection'\n\t\n\t    };\n\t    var resourcename = p.split('/')[2];\n\t\n\t    if (names.hasOwnProperty(resourcename)) {\n\t      return names[resourcename];\n\t    } else {\n\t      return resourcename;\n\t    }\n\t  };\n\t\n\t  // What i want to match\n\t  // new orders\n\t  // updates to orders\n\t  // Updates to inventory\n\t  scope.alerts = [];\n\t\n\t  // ORders used to display stats\n\t  scope.analytics = {\n\t    today: {\n\t      total: 0,\n\t      count: 0\n\t\n\t    },\n\t    yesterday: {\n\t      total: 0,\n\t      count: 0\n\t    },\n\t    this_week: {\n\t      total: 0,\n\t      count: 0\n\t    },\n\t    this_month: {\n\t      total: 0,\n\t      count: 0\n\t    }\n\t  };\n\t\n\t  var today = new Date();\n\t  today.setHours(0, 0, 0, 0);\n\t  today = today.getTime();\n\t\n\t  var yesterday = new Date();\n\t  yesterday.setDate(yesterday.getDate() - 1);\n\t  yesterday.setHours(0, 0, 0, 0);\n\t  yesterday = yesterday.getTime();\n\t\n\t  var oneWeekAgo = new Date();\n\t  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\n\t  oneWeekAgo.setHours(0, 0, 0, 0);\n\t  oneWeekAgo = oneWeekAgo.getTime();\n\t\n\t  var orders = analytics.data.data;\n\t\n\t  scope.ordersToManage = orders.filter(function (order) {\n\t    return ['processing', 'pending', 'on_hold'].indexOf(order.status) > -1;\n\t  }).slice(0, 10);\n\t\n\t  var salesVolumePerDay = {};\n\t\n\t  var numberOfOrdersPerDay = {};\n\t\n\t  scope.orders_data = [];\n\t  scope.orders_labels = [];\n\t\n\t  var last_30_days = [];\n\t  var last_30_days_labels = [];\n\t  for (var i = 1; i < 30; i++) {\n\t    var d = new Date();\n\t    d.setDate(d.getDate() - i);\n\t    var month = String(d.getMonth() + 1);\n\t    if (month.length < 2) {\n\t      month = '0' + month;\n\t    }\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    last_30_days_labels.push(day);\n\t    last_30_days.push({\n\t      date: day,\n\t      value: 0\n\t    });\n\t    salesVolumePerDay[day] = 0;\n\t  }\n\t\n\t  orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  }).map(function (x) {\n\t    return {\n\t      created_at: x.created_at,\n\t      total: x.total\n\t    };\n\t  }).forEach(function (x) {\n\t    var d = new Date(x.created_at);\n\t    var month = String(d.getMonth() + 1);\n\t    if (month.length < 2) {\n\t      month = '0' + month;\n\t    }\n\t    var day = d.getFullYear() + '-' + month + '-' + d.getDate();\n\t\n\t    if (!salesVolumePerDay[day]) {\n\t      salesVolumePerDay[day] = 0;\n\t    }\n\t\n\t    salesVolumePerDay[day] += x.total;\n\t\n\t    if (!numberOfOrdersPerDay[day]) numberOfOrdersPerDay[day] = 0;\n\t\n\t    numberOfOrdersPerDay[day]++;\n\t  });\n\t\n\t  orders.filter(function (x) {\n\t    // We consider only orders not canceled or refunded or failed for the analytics\n\t    var invalid_orders = ['failed', 'canceled', 'refunded'];\n\t    return invalid_orders.indexOf(x.status) < 0;\n\t  }).map(function (x) {\n\t    return {\n\t      created_at: x.created_at,\n\t      total: x.total\n\t    };\n\t  }).forEach(function (x) {\n\t    if (x.created_at > today) {\n\t      scope.analytics.today.total = Math.round((scope.analytics.today.total + x.total) * 1000) / 1000;\n\t      scope.analytics.today.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else if (x.created_at > yesterday) {\n\t      scope.analytics.yesterday.total = Math.round((scope.analytics.yesterday.total + x.total) * 1000) / 1000;\n\t      scope.analytics.yesterday.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else if (x.created_at > oneWeekAgo) {\n\t      scope.analytics.this_week.total = Math.round((scope.analytics.this_week.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_week.count++;\n\t\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    } else {\n\t      scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000;\n\t      scope.analytics.this_month.count++;\n\t    }\n\t  });\n\t\n\t  /*\n\t   *\tHere we feed the Chart.js chart on the dashboard homepage\n\t   *\n\t   *\tThis chart shows orders volume for this month (last 30 days)\n\t   */\n\t  scope.orders_volume_data = [];\n\t  scope.orders_count_data = [];\n\t  scope.orders_volume_labels = [];\n\t\n\t  for (var k in salesVolumePerDay) {\n\t    scope.orders_volume_data.unshift(parseFloat(Number(salesVolumePerDay[k]).toFixed(2)));\n\t    scope.orders_count_data.unshift(numberOfOrdersPerDay[k]);\n\t    scope.orders_volume_labels.unshift(moment(k, 'YYYY-M-DD').format('MMM Do'));\n\t  }\n\t\n\t  scope.datasets = [scope.orders_volume_data, scope.orders_count_data];\n\t\n\t  scope.getMethodCSSClass = function (a) {\n\t    var cls = null;\n\t    switch (a.method) {\n\t      case 'GET':\n\t        cls = 'label-success';\n\t        break;\n\t      case 'POST':\n\t        cls = 'label-info';\n\t        break;\n\t      case 'PUT':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'PATCH':\n\t        cls = 'label-warning';\n\t        break;\n\t      case 'DELETE':\n\t        cls = 'label-danger';\n\t        break;\n\t      default:\n\t        cls = 'label-success';\n\t        break;\n\t\n\t    }\n\t    return cls;\n\t  };\n\t\n\t  scope.chartOptions = {\n\t    scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n\t  };\n\t\n\t  scope.chartOptions = {\n\t    scales: {\n\t      xAxes: [{\n\t        gridLines: {\n\t          display: false\n\t        }\n\t      }],\n\t      yAxes: [{\n\t        scaleLabel: {\n\t          display: true,\n\t          labelString: scope.application.currency_code\n\t        }\n\t      }]\n\t    }\n\t  };\n\t}]);\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('IntegrationsController', ['$scope', '$http', '$application', function ($scope, $http, $application) {\n\t  $scope.integrations = [{\n\t    name: 'braintree',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n\t    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n\t    links: {\n\t      'view': '/documentation/integrations/braintree'\n\t    }\n\t  }, {\n\t    name: 'stripe',\n\t    tags: ['payments'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n\t    description: 'Web and mobile payments. Built for developers.',\n\t    links: {\n\t      'view': '/documentation/integrations/stripe'\n\t    }\n\t  }, {\n\t    name: 'facebook',\n\t    tags: ['authentication'],\n\t    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n\t    description: 'Facebook auth integration',\n\t    links: {\n\t      'view': '/documentation/guides/facebook-login'\n\t    }\n\t  }];\n\t}]);\n\t\n\tapp.controller('IntegrationStripeController', ['$scope', '$http', '$routeParams', 'StripeIntegration', '$application', function ($scope, $http, $routeParams, StripeIntegration, $application) {\n\t  /*\n\t   *  The integration states are\n\t   *\n\t   *  Not installed\n\t   *  Installed inactive\n\t   *  Installed active\n\t   *\n\t   *  Installed means that the oauth flow was completed and we have the data\n\t   *  StripeIntegration is the object we use to inject the integration state fetched from the api\n\t   *\n\t   *  If it's null, we conclude that it is not installed\n\t   */\n\t  if (StripeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.StripeIntegration = StripeIntegration.data.data;\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  // TODO\n\t  // Lo switch deve essere visibile se e solo se l'integrazione  installata. cos da\n\t  // non essere clicccabile altrimenti.\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/stripe',\n\t      data: {\n\t        isActive: $scope.StripeIntegration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t}]);\n\t\n\tapp.controller('IntegrationBraintreeController', ['$scope', '$http', '$routeParams', 'BraintreeIntegration', '$application', function ($scope, $http, $routeParams, BraintreeIntegration, $application) {\n\t  // This bool is used to show/hide credentials form\n\t  // This form is used to update the credentials\n\t  $scope.displayCredentialsForm = false;\n\t\n\t  $scope.currentApplication = $application.get();\n\t\n\t  if (BraintreeIntegration) {\n\t    $scope.isIntegrationInstalled = true;\n\t    $scope.braintreeConfiguration = BraintreeIntegration.data.data;\n\t    $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data);\n\t  } else {\n\t    $scope.isIntegrationInstalled = false;\n\t  }\n\t\n\t  $scope.toggleCredentialsForm = function () {\n\t    $scope.displayCredentialsForm = !$scope.displayCredentialsForm;\n\t  };\n\t\n\t  $scope.showModal = function () {\n\t    $('#BraintreeCredentialsModal').modal('show');\n\t  };\n\t\n\t  $scope.toggleIntegration = function () {\n\t    return $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: {\n\t        isActive: $scope.braintreeConfiguration.isActive\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t\n\t  $scope.saveBraintreeConfiguration = function () {\n\t    console.log(\"Sending\", $scope.braintreeUpdate);\n\t    $http({\n\t      method: 'PUT',\n\t      url: '/applications/' + $application.get().id + '/integrations/braintree',\n\t      data: $scope.braintreeUpdate\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Integration correctly updated', 1);\n\t      $('#BraintreeCredentialsModal').modal('hide');\n\t      $scope.isIntegrationInstalled = true;\n\t      $scope.braintreeConfiguration = angular.copy({\n\t        environment: $scope.braintreeUpdate.environment,\n\t        isActive: $scope.braintreeUpdate.isActive\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Integration not updated', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewInvoiceController', ['$scope', '$http', '$marketcloud', '$application', '$location', 'parentOrder', 'orders', 'Countries', '$validation', '$models', function (scope, http, $marketcloud, $application, location, parentOrder, orders, countries, $validation, $models) {\n\t  scope.invoice = {\n\t    company: {\n\t      name: $application.get('company_name'),\n\t      email: $application.get('email_address'),\n\t      address: $application.get('company_address'),\n\t      country: $application.get('company_country'),\n\t      city: $application.get('company_city'),\n\t      state: $application.get('company_state'),\n\t      postal_code: $application.get('company_postalcode'),\n\t      vat: $application.get('company_taxid')\n\t\n\t    },\n\t    customer: {},\n\t    date_created: new Date(),\n\t    date_due: new Date(),\n\t    lineItems: [{\n\t      name: '',\n\t      description: '',\n\t      quantity: 0,\n\t      price: 0\n\t    }]\n\t  };\n\t\n\t  console.log(scope.invoice);\n\t\n\t  function setNextInvoiceNumber() {\n\t    $marketcloud.invoices.list().then(function (response) {\n\t      var applicationSettings = $application.get();\n\t      var lastNumber = response.data.data.map(function (invoice) {\n\t        return invoice.number;\n\t      }).map(function (number) {\n\t        if (number.indexOf && number.indexOf(applicationSettings.invoices_prefix) > -1) {\n\t          number = number.replace(applicationSettings.invoices_prefix, '');\n\t        }\n\t\n\t        if (!isNaN(number)) {\n\t          number = Number(number);\n\t        }\n\t        return number;\n\t      }).sort(function (a, b) {\n\t        return a - b;\n\t      }).pop();\n\t\n\t      console.log('LastNumber is ', lastNumber);\n\t\n\t      if (!isNaN(lastNumber)) {\n\t        lastNumber = Number(lastNumber);\n\t        scope.invoice.number = applicationSettings.invoices_prefix + String(lastNumber + 1);\n\t      }\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t    });\n\t  }\n\t\n\t  function fillDataFromOrder(order) {\n\t    console.log('fillDataFromOrder', order);\n\t    scope.parentOrder = order;\n\t    scope.invoice = {\n\t      order_id: scope.parentOrder.id,\n\t      company: {\n\t        name: $application.get('company_name'),\n\t        email: $application.get('email_address'),\n\t        address: $application.get('company_address'),\n\t        country: $application.get('company_country'),\n\t        city: $application.get('company_city'),\n\t        state: $application.get('company_state'),\n\t        postal_code: $application.get('company_postalcode'),\n\t        vat: $application.get('company_taxid')\n\t      },\n\t      customer: {},\n\t      date_created: new Date(),\n\t      date_due: new Date(),\n\t      lineItems: scope.parentOrder.products.map(function (p) {\n\t        p.description = '';\n\t        return p;\n\t      })\n\t\n\t      // adding shipping to line items\n\t    };if (scope.parentOrder.hasOwnProperty('shipping')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Shipping ' + scope.parentOrder.shipping.name,\n\t        description: scope.parentOrder.shipping.description,\n\t        quantity: 1,\n\t        price: scope.parentOrder.shipping_total\n\t      });\n\t    }\n\t\n\t    // adding payment method fee to line items\n\t    if (scope.parentOrder.hasOwnProperty('payment_method')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Payment method ' + scope.parentOrder.payment_method.name,\n\t        description: scope.parentOrder.payment_method.description,\n\t        quantity: 1,\n\t        price: scope.parentOrder.payment_method_total\n\t      });\n\t    }\n\t\n\t    // adding coupons to line items\n\t    if (scope.parentOrder.hasOwnProperty('coupon')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Coupon ' + scope.parentOrder.coupon.name,\n\t        description: scope.parentOrder.coupon.description,\n\t        quantity: 1,\n\t        price: 0 - Number(scope.parentOrder.coupon_total)\n\t      });\n\t    }\n\t\n\t    // adding promotions to line items\n\t    if (scope.parentOrder.hasOwnProperty('promotion')) {\n\t      scope.invoice.lineItems.push({\n\t        name: 'Promotion ' + scope.parentOrder.promotion.name,\n\t        description: scope.parentOrder.promotion.description,\n\t        quantity: 1,\n\t        price: 0 - Number(scope.parentOrder.promotion_total)\n\t      });\n\t    }\n\t\n\t    // We gather customer's invoicing data from the billing address.\n\t    for (var k in scope.parentOrder.billing_address) {\n\t      scope.invoice.customer[k] = scope.parentOrder.billing_address[k];\n\t    }\n\t  }\n\t\n\t  // If the parentOrder is populated, we prefill data\n\t  if (parentOrder && parentOrder.data) {\n\t    // Must check for 404s\n\t    fillDataFromOrder(parentOrder.data.data);\n\t  } else {\n\t    scope.parentOrder = null;\n\t  }\n\t\n\t  setNextInvoiceNumber();\n\t\n\t  scope.orders = orders.data.data;\n\t  scope.ordersQuery = {\n\t    per_page: 5,\n\t    page: 1\n\t  };\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t  scope.loadNextOrders = function () {\n\t    scope.showTheList = true;\n\t    scope.ordersQuery.page += 1;\n\t\n\t    $marketcloud.orders.list(scope.ordersQuery).then(function (response) {\n\t      scope.orders = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(3);\n\t    });\n\t  };\n\t  scope.loadPreviousOrders = function () {\n\t    scope.showTheList = true;\n\t\n\t    if (scope.ordersQuery.page <= 1) {\n\t      return;\n\t    }\n\t\n\t    scope.ordersQuery.page -= 1;\n\t\n\t    $marketcloud.orders.list(scope.ordersQuery).then(function (response) {\n\t      scope.orders = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(3);\n\t    });\n\t  };\n\t  scope.selectOrder = function (order) {\n\t    scope.showTheList = false;\n\t    scope.invoice.order_id = order.id;\n\t\n\t    fillDataFromOrder(order);\n\t  };\n\t\n\t  scope.countries = countries;\n\t  scope.customerStates = [];\n\t  scope.companyStates = [];\n\t\n\t  scope.getInvoiceTotal = function () {\n\t    return scope.invoice.lineItems.map(function (item) {\n\t      return item.price * item.quantity;\n\t    }).reduce(function (a, b) {\n\t      return a + b;\n\t    }).toFixed(2);\n\t  };\n\t\n\t  scope.updateCompanyStates = function () {\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.company.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.companyStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.companyStates = [];\n\t      }\n\t      /* else {\n\t        // Commenting this error because it seems to be disorientating for users\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n\t      } */\n\t    });\n\t  };\n\t\n\t  // Immediatly invoking the function in order to load states\n\t  // but only if the value is already assigned.\n\t  if (scope.invoice.company.country) {\n\t    scope.updateCompanyStates();\n\t  }\n\t\n\t  scope.updateCustomerStates = function () {\n\t    if (!scope.invoice.customer.country) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.customerStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.customerStates = [];\n\t      } /* else {\n\t         // Commenting this error because it seems to be disorientating for users\n\t         notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n\t        } */\n\t    });\n\t  };\n\t\n\t  // Immediatly invoking the function in order to load states\n\t  // but only if the value is already assigned.\n\t  if (scope.invoice.customer.country) {\n\t    scope.updateCustomerStates();\n\t  }\n\t\n\t  scope.saveInvoice = function (goToOrder) {\n\t    goToOrder = goToOrder || false;\n\t\n\t    $validation.hideErrors();\n\t    console.log('Salvo questo', angular.copy(scope.invoice));\n\t    $marketcloud.invoices.save(scope.invoice).then(function (response) {\n\t      notie.alert(1, 'Invoice saved', 1.5);\n\t      if (goToOrder === true) {\n\t        return location.path('/orders/' + scope.invoice.order_id + '/view');\n\t      }\n\t      location.path('/invoices');\n\t    }).catch(function (response) {\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) {\n\t          selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t        }\n\t\n\t        $validation.showErrorMessage(validation, $models.Invoice.schema, selector);\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again', 2);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addLineItem = function () {\n\t    scope.invoice.lineItems.push({\n\t      name: '',\n\t      description: '',\n\t      quantity: null,\n\t      price: null\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditInvoiceController', ['$scope', '$http', '$marketcloud', '$location', 'invoice', 'Countries', '$validation', '$models', function (scope, http, $marketcloud, location, invoice, countries, $validation, $models) {\n\t  scope.invoice = invoice.data.data;\n\t  console.log('Prima di fottere le date', angular.copy(scope.invoice));\n\t  // Angular wants the input[date] to be valid date objects :@\n\t  scope.invoice.date_due = moment(scope.invoice.date_due);\n\t  scope.invoice.date_created = moment(scope.invoice.date_created);\n\t\n\t  console.log('Dopo di fottere le date', angular.copy(scope.invoice));\n\t\n\t  scope.countries = countries;\n\t  scope.customerStates = [];\n\t  scope.companyStates = [];\n\t\n\t  scope.alert = function (m) {\n\t    window.alert(m);\n\t  };\n\t\n\t  scope.getInvoiceTotal = function () {\n\t    return scope.invoice.lineItems.map(function (item) {\n\t      return item.price * item.quantity;\n\t    }).reduce(function (a, b) {\n\t      return a + b;\n\t    }).toFixed(2);\n\t  };\n\t\n\t  scope.updateCompanyStates = function () {\n\t    http({\n\t      method: 'GET',\n\t      // url : '/modules/shared/geography/countries/'+scope.invoice.company.country.toLowerCase()+'.json'\n\t      url: '/countries/' + scope.invoice.company.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.companyStates = response.data;\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.companyStates = [];\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.updateCustomerStates = function () {\n\t    if (!scope.invoice.customer.country) {\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.customerStates = response.data;\n\t    }).catch(function (error) {\n\t      var type = null;\n\t      if (error.data && error.data.errors && error.data.errors[0]) {\n\t        type = error.data.errors[0].type;\n\t      }\n\t\n\t      if (type === 'StatesListNotAvailable') {\n\t        scope.customerStates = [];\n\t      } else {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.updateCustomerStates();\n\t  scope.updateCompanyStates();\n\t  scope.debug = function () {\n\t    console.log(scope.invoice);\n\t  };\n\t\n\t  scope.saveInvoice = function () {\n\t    if (typeof scope.invoice.date_created.toDate === 'function') {\n\t      scope.invoice.date_created = scope.invoice.date_created.toDate();\n\t      scope.invoice.date_created.setHours(12);\n\t    }\n\t    if (typeof scope.invoice.date_due.toDate === 'function') {\n\t      scope.invoice.date_due = scope.invoice.date_due.toDate();\n\t      scope.invoice.date_due.setHours(12);\n\t    }\n\t    console.log('Salvo', angular.copy(scope.invoice));\n\t    $validation.hideErrors();\n\t    $marketcloud.invoices.update(scope.invoice.id, scope.invoice).then(function (response) {\n\t      notie.alert(1, 'Invoice saved', 1.5);\n\t      location.path('/invoices');\n\t    }).catch(function (response) {\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) {\n\t          selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t        }\n\t\n\t        $validation.showErrorMessage(validation, $models.Invoice.schema, selector);\n\t      } else {\n\t        notie.alert(3, 'An error has occurred.', 2);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addLineItem = function () {\n\t    scope.invoice.lineItems.push({\n\t      name: '',\n\t      description: '',\n\t      quantity: null,\n\t      price: null\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('LocalizationController', ['$scope', '$http', 'Currencies', 'Timezones', 'LocalesFactory', '$application', function (scope, http, currencies, timezones, locales, $application) {\n\t  scope.application = $application.get();\n\t\n\t  scope.currencies = currencies;\n\t\n\t  for (var k in scope.currencies) {\n\t    scope.currencies[k].name_plus_code = scope.currencies[k].name + \" (\" + scope.currencies[k].code + \")\";\n\t  }\n\t  scope.activeCurrencies = [];\n\t  // string '[{code,rate},{code,rate},{code,rate}]'\n\t  // array  [{code,rate},{code,rate},{code,rate}]\n\t  //\n\t\n\t  if (typeof $application.get().currencies !== 'string') {\n\t    $application.get().currencies = '[]';\n\t  }\n\t  var saved_currencies = JSON.parse($application.get().currencies);\n\t\n\t  // scope.currencies.forEach(function(currency){\n\t  for (var k in scope.currencies) {\n\t    var currency = scope.currencies[k];\n\t    saved_currencies.forEach(function (saved_currency) {\n\t      if (saved_currency.code === currency.code) {\n\t        var new_currency_obj = angular.copy(currency);\n\t        new_currency_obj.rate = saved_currency.rate;\n\t        scope.activeCurrencies.push(new_currency_obj);\n\t      }\n\t    });\n\t  }\n\t  // })\n\t\n\t  /*\n\t   *  Adds a currency and updates app's settings\n\t   */\n\t  scope.addCurrency = function (currency) {\n\t    if (scope.activeCurrencies.map(function (c) {\n\t      return c.code;\n\t    }).indexOf(currency.code) > -1) {\n\t      return;\n\t    }\n\t    currency.rate = 1;\n\t    scope.activeCurrencies.push(currency);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  /*\n\t   *  Removes a currency and updates app's settings\n\t   */\n\t  scope.removeCurrency = function (i) {\n\t    scope.activeCurrencies.splice(i, 1);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  /*\n\t    There are better APIs for currency exchange, but they are not free.\n\t    Fixer only has a small subset of currencies.\n\t    This is free for 1000 reqs/month\n\t      https://currencylayer.com/product\n\t    This starts from 12$/month and also free for 1000 res/month\n\t    https://openexchangerates.org/signup\n\t     We ended up using Yahoo Finance through Yahoo Query Console.\n\t    It's a bit hacky but its working for now and it is the\n\t    only free service with any exchange rate.\n\t    very gouda.\n\t     Yahoo Finance is DEAD 8 Nov 2017\n\t  */\n\t  /*\n\t      function buildURL(from_currency_code, to_currency_code) {\n\t        return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20csv%20where%20url%3D%22http%3A%2F%2Ffinance.yahoo.com%2Fd%2Fquotes.csv%3Fe%3D.csv%26f%3Dnl1d1t1%26s%3D' + from_currency_code + to_currency_code + '%3DX%22%3B&format=json&callback='\n\t      }\n\t  \n\t      scope.applyExchangeRate = function(currencyToApply) {\n\t        http({\n\t            method: 'GET',\n\t            url: buildURL($application.get().currency_code, currencyToApply.code)\n\t          }).then(function(response) {\n\t            currencyToApply.rate = Number(response.data.query.results.row.col1)\n\t          })\n\t          .catch(function(err) {\n\t            notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\n\t          })\n\t      }*/\n\t\n\t  function buildURL(from_currency_code, to_currency_code) {\n\t    return 'https://api.fixer.io/latest?symbols=' + to_currency_code + '&base=' + from_currency_code;\n\t  }\n\t\n\t  scope.applyExchangeRate = function (currencyToApply) {\n\t    http({\n\t      method: 'GET',\n\t      url: buildURL($application.get().currency_code, currencyToApply.code)\n\t    }).then(function (response) {\n\t      console.log(\"LA RISPOSONA DI FIXER\", response);\n\t      console.log(\"Io \");\n\t      currencyToApply.rate = Number(response.data.rates[currencyToApply.code]);\n\t    }).catch(function (err) {\n\t      notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2);\n\t    });\n\t  };\n\t\n\t  scope.applyAllExchangeRates = function () {\n\t    scope.activeCurrencies.forEach(function (currencyToApply) {\n\t      if (scope.exchangeRates.hasOwnProperty(currencyToApply.code)) {\n\t        currencyToApply.rate = scope.exchangeRates[currencyToApply.code];\n\t      }\n\t    });\n\t  };\n\t\n\t  // This is for sorting the locales by name\n\t  function compare(a, b) {\n\t    if (a.name < b.name) {\n\t      return -1;\n\t    } else if (a.name > b.name) {\n\t      return 1;\n\t    } else {\n\t      return 0;\n\t    }\n\t  }\n\t\n\t  // Locales are provided by the factory as an object with the code as key\n\t  // For sorting them, we need an array.\n\t  scope.locales = Object.keys(locales).map(function (k) {\n\t    return locales[k];\n\t  }).sort(compare);\n\t\n\t  if (scope.application.locales === '') {\n\t    scope.activeLocales = [];\n\t  } else {\n\t    scope.activeLocales = scope.application.locales.split(',').map(function (code) {\n\t      return locales[code];\n\t    });\n\t  }\n\t\n\t  /*\n\t   *  Adds a locale to the app and saves\n\t   */\n\t  scope.addLocale = function (locale) {\n\t    if (scope.activeLocales.map(function (l) {\n\t      return l.code;\n\t    }).indexOf(locale.code) > -1) {\n\t      return;\n\t    }\n\t\n\t    scope.activeLocales.push(locale);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  scope.getFlagClassName = function (locale) {\n\t    return 'flag-icon-' + locale.code.slice(-2).toLocaleLowerCase();\n\t  };\n\t\n\t  /*\n\t   *  Removes a locale to the app and saves\n\t   */\n\t  scope.removeLocale = function (i) {\n\t    scope.activeLocales.splice(i, 1);\n\t\n\t    // saving the new settings configuration\n\t    scope.updateSettings();\n\t  };\n\t\n\t  // Let's re-pack the active locales in a single string\n\t  function activeLocalesToString() {\n\t    return scope.activeLocales.map(function (locale) {\n\t      return locale.code;\n\t    }).join(',');\n\t  }\n\t\n\t  function activeCurrenciesToString() {\n\t    return JSON.stringify(scope.activeCurrencies.map(function (c) {\n\t      return {\n\t        code: c.code,\n\t        rate: c.rate\n\t      };\n\t    }));\n\t  }\n\t\n\t  scope.updateSettings = function () {\n\t    var payload = {\n\t      locales: activeLocalesToString(),\n\t      currencies: activeCurrenciesToString()\n\t    };\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: '/applications/' + scope.application.id,\n\t      data: payload\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Application successfully updated', 1);\n\t      console.log('Setto i locales a ', response.data.data.locales);\n\t      $application.set('locales', response.data.data.locales);\n\t      $application.set('currencies', response.data.data.currencies);\n\t    }).catch(function (err) {\n\t      notie.alert(3, 'An error has occurred.');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('MediaListController', ['$scope', '$http', 'media', '$marketcloud', '$q', function (scope, http, resources, $marketcloud, $q) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.inspectFile = function (file) {\n\t    scope.inspectedFile = file;\n\t    $(\"#inspectFileModal\").modal(\"show\");\n\t  };\n\t\n\t  scope.formatFileSize = function (file) {\n\t    if (!file) return \"\";\n\t\n\t    var size = Number(file.size);\n\t    var formatted = size + \"b\";\n\t\n\t    var kb = 1000;\n\t    var mb = kb * 1000;\n\t    var gb = mb * 1000;\n\t\n\t    if (size > kb && size < mb) {\n\t      // Kilobytes\n\t      size = (size / kb).toFixed(2);\n\t      return String(size) + \" KB\";\n\t    } else if (size > mb && size < gb) {\n\t      // Megabytes\n\t      size = (size / mb).toFixed(2);\n\t      return String(size) + \" MB\";\n\t    } else {\n\t      size = (size / gb).toFixed(2);\n\t      return String(size) + \" GB\";\n\t    }\n\t  };\n\t\n\t  // Query\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t  scope.toggleAll = function () {\n\t    scope.media.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.media.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud.media.delete(item.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadPage(scope.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  // Initial data resolved from the router\n\t  scope.media = resources.data.data;\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.media;\n\t  };\n\t\n\t  scope.loadPage = function (page) {\n\t    scope.query.page = page;\n\t    return scope.loadData({\n\t      page: page\n\t    });\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    return $marketcloud.media.list(query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t\n\t      scope.media = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateInspectedFile = function () {\n\t    console.log(\"Saving this\", scope.inspectedFile);\n\t    $marketcloud.media.update(scope.inspectedFile.id, { name: scope.inspectedFile.name }).then(function (response) {\n\t      notie.alert(1, 'File updated', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred. Please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteMedia = function (media_id, index) {\n\t    $marketcloud.media.delete(media_id).then(function (response) {\n\t      scope.loadData({\n\t        page: scope.currentPage\n\t      });\n\t      notie.alert(1, 'Media deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar MediaManagerControllerDependencies = ['$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'];\n\t\n\tvar MediaManagerController = function MediaManagerController(scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n\t  var ctrl = null;\n\t  this.$onInit = function () {\n\t    // Reference to the controller\n\t    ctrl = this;\n\t\n\t    // List of image urls\n\t    ctrl.images = ctrl.images || [];\n\t\n\t    // List of image objects\n\t    // ctrl.media = ctrl.media || [];\n\t\n\t    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete;\n\t\n\t    /* Component configuration from attributes */\n\t    // The classes used to style the button\n\t    scope.buttonClass = $attrs.buttonClass;\n\t\n\t    // The text displayed on the button\n\t    scope.buttonText = $attrs.buttonText;\n\t\n\t    // The icon displayed on the button\n\t    scope.buttonIcon = $attrs.buttonIcon || null;\n\t\n\t    var tabs = $attrs.tabs || 'library,from_disk,from_url';\n\t\n\t    // This will hold an array of tab names\n\t    // The component will show only those tabs\n\t    // whose name is in this array\n\t    //\n\t    // The first tab will be the active one.\n\t    // TODO to improve this, we can add an attribute \"activeTab\"\n\t\n\t    scope.tabs = tabs.split(',');\n\t\n\t    // This is the name of the parent function which will return a reference to the image container\n\t    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n\t  };\n\t\n\t  /* Uploader configuration */\n\t  scope.uploader = new FileUploader({\n\t    url: window.API_BASE_URL + '/media',\n\t    arrayKey: '',\n\t    headers: {\n\t      'Authorization': window.public_key + ':' + window.token\n\t    },\n\t    filters: []\n\t  });\n\t\n\t  // When closeDialog is called from within the component\n\t  // we notify the parent component/controller by calling the on-close-dialog\n\t  // callback\n\t  scope.closeDialog = function () {\n\t    ctrl.onCloseDialog();\n\t  };\n\t\n\t  scope.openDialog = function () {\n\t    ctrl.onOpenDialog();\n\t  };\n\t\n\t  scope.uploadImages = function () {\n\t    ctrl.onUploadImages();\n\t  };\n\t\n\t  scope.image = {};\n\t  scope.media_files = [];\n\t  scope.loadingMediaFiles = false;\n\t\n\t  // Used to keep filters and pagination state\n\t  scope.query = {};\n\t\n\t  // Initializing the pagination object to null\n\t  // This allows for convenient check on view pagination === null => dont show pagination\n\t  scope.pagination = null;\n\t\n\t  scope.loadMedias = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t    /* $http({\n\t        method: 'GET',\n\t        url: window.API_BASE_URL + '/media',\n\t        headers: {\n\t          Authorization: window.public_key\n\t        }\n\t      }) */\n\t    $marketcloud.media.list(query || {}).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.loadMore = function () {\n\t    var pageToFetch = scope.media_files.length / 20 + 1;\n\t    $marketcloud.media.list({ page: pageToFetch }).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t\n\t      scope.media_files = scope.media_files.concat(response.data.data);\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(2, 'An error has occurred, please retry.', 1.5);\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    scope.media_files = [];\n\t    scope.loadingMediaFiles = true;\n\t\n\t    if (!query) {\n\t      query = scope.query || {};\n\t    }\n\t\n\t    $marketcloud.media.list(query).then(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      scope.media_files = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      scope.loadingMediaFiles = false;\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  // Calling it right now because we want to initialize the media library\n\t  if (scope.media_files.length === 0) {\n\t    scope.loadMedias();\n\t  }\n\t\n\t  scope.showProgressBar = false;\n\t  scope.uploadingImages = false;\n\t\n\t  scope.howManySelectedMedia = function () {\n\t    return ctrl.images.length;\n\t  };\n\t\n\t  scope.addSelectedFromLibrary = function () {\n\t    var modal = $element.find('#MediaManagerModal');\n\t    $(modal).modal('hide');\n\t    /*$('#MediaManagerModal').modal('hide')*/\n\t  };\n\t\n\t  scope.isImageSelected = function (image) {\n\t    return ctrl.images.indexOf(image.url) > -1;\n\t  };\n\t  scope.selectImage = function (image) {\n\t    if (image.selected === true) {\n\t      image.selected = false;\n\t      removeImage(image);\n\t    } else {\n\t      image.selected = true;\n\t      ctrl.images.push(image.url);\n\t    }\n\t  };\n\t\n\t  var removeImage = function removeImage(image) {\n\t    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n\t    var pos = ctrl.images.indexOf(image.url);\n\t    if (pos > -1) {\n\t      ctrl.images.splice(pos, 1);\n\t    }\n\t\n\t    // Rimuovo il media\n\t    /* for (var i =0; i< ctrl.media.length;i++) {\n\t      if (ctrl.media[i].url === image.url)\n\t        ctrl.media.splice(i,1);\n\t    } */\n\t  };\n\t\n\t  scope.uploader.onCompleteAll = function () {\n\t    scope.loadMedias();\n\t    scope.showProgressBar = false;\n\t    scope.uploadingImages = false;\n\t    scope.uploader.clearQueue();\n\t\n\t    // Checking if we need to close the dialog\n\t    if (scope.closeOnUploadComplete === 'true') {\n\t      scope.closeDialog();\n\t      /*$('#MediaManagerModal').modal('hide')*/\n\t      var modal = $element.find('#MediaManagerModal');\n\t      $(modal).modal('hide');\n\t    }\n\t\n\t    if (ctrl.onUploadComplete) {\n\t      ctrl.onUploadComplete();\n\t    }\n\t  };\n\t\n\t  scope.uploader.onProgressAll = function (progress) {};\n\t\n\t  scope.uploader.onErrorItem = function (item, response, status, headers) {\n\t    var err = new Error('Error uploading an item');\n\t    err.response = response;\n\t    err.status = status;\n\t    err.headers = headers;\n\t    $exceptionHandler(err);\n\t  };\n\t\n\t  scope.chooseFileFromStorage = function () {\n\t    $('#chooseFileFromStorageButton').trigger('click');\n\t  };\n\t\n\t  scope.uploadSelectedImages = function () {\n\t    scope.showProgressBar = true;\n\t    scope.uploadingImages = true;\n\t    scope.uploader.uploadAll();\n\t  };\n\t\n\t  scope.addImageFromUrl = function () {\n\t    ctrl.images.push(scope.image.url);\n\t    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n\t    scope.image.url = null;\n\t  };\n\t\n\t  scope.showMediaManagerModal = function () {\n\t    /*$('#MediaManagerModal').modal('show')*/\n\t    var modal = $element.find('#MediaManagerModal');\n\t    $(modal).modal('show');\n\t\n\t    // Notifying the parent\n\t    scope.openDialog();\n\t  };\n\t};\n\t\n\tMediaManagerController.$inject = MediaManagerControllerDependencies;\n\t\n\tangular.module('DataDashboard').controller('MediaManagerController', MediaManagerController);\n\t\n\tangular.module('DataDashboard').component('mediaManager', {\n\t  templateUrl: '/modules/data_dashboard/templates/modals/media_manager.html',\n\t  controller: 'MediaManagerController',\n\t  bindings: {\n\t    onCloseDialog: '&',\n\t    onOpenDialog: '&',\n\t    onUploadComplete: '&',\n\t    // imagesContainer: '=',\n\t    images: '=?',\n\t    media: '=?',\n\t    buttonClass: '@',\n\t    buttonIcon: '@',\n\t    buttonText: '@',\n\t    closeOnUploadComplete: '@'\n\t  }\n\t});\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditNotificationController', ['$scope', '$http', 'notification', '$location', '$marketcloud', 'NotificationsPresetsFactory', function (scope, http, notification, $location, $marketcloud, NotificationsPresets) {\n\t  scope.events = {\n\t    'invoices.create': 'An invoice is created',\n\t    'orders.create': 'An order is created',\n\t    'users.create': 'A new user is created',\n\t    'users.recoverPassword': 'A user wants to recover the password',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t\n\t    // name => label\n\t    // This object is used to map template variable names\n\t    // to more user friendly names\n\t  };scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t\n\t  scope.presets = NotificationsPresets;\n\t\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.notification = notification.data.data;\n\t\n\t  // Notifications created before templates were available might need some more work\n\t  if (!scope.notification.template) {\n\t    scope.notification.template = angular.copy(scope.presets[scope.notification.event].template);\n\t  }\n\t\n\t  // In the same way, some notification might have only a subset of template values.\n\t  for (var tplKey in scope.presets[scope.notification.event].template) {\n\t    if (!(tplKey in scope.notification.template)) {\n\t      scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey];\n\t    }\n\t  }\n\t\n\t  scope.save = function () {\n\t    $marketcloud.notifications.update(scope.notification.id, scope.notification).then(function (response) {\n\t      notie.alert(1, 'Item successfully updated!', 1.5);\n\t      $location.path('/notifications');\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NotificationsController', ['$scope', '$http', '$marketcloud', 'notifications', function (scope, http, $marketcloud, notifications) {\n\t  scope.notifications = notifications.data.data;\n\t\n\t  scope.delete = function (notification, index) {\n\t    $marketcloud.notifications.delete(notification.id).then(function (response) {\n\t      notie.alert(1, 'Notification deleted', 1.5);\n\t      scope.notifications.splice(index, 1);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.toggleNotification = function (notification) {\n\t    $marketcloud.notifications.update(notification.id, notification).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewNotificationController', ['$scope', '$http', '$location', '$marketcloud', 'NotificationsPresetsFactory', function (scope, http, $location, $marketcloud, NotificationsPresets) {\n\t  scope.events = {\n\t    'invoices.create': 'An invoice is created',\n\t    'orders.create': 'An order is created',\n\t    'users.create': 'A new user is created',\n\t    'users.recoverPassword': 'A user wants to recover the password',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t  };\n\t\n\t  scope.notification = {\n\t    event: null,\n\t    name: null,\n\t    description: null,\n\t    subject: null,\n\t    sendCopyToOwner: false,\n\t    active: false\n\t  };\n\t\n\t  scope.query = {};\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.presets = NotificationsPresets;\n\t\n\t  // name => label\n\t  // This object is used to map template variable names\n\t  // to more user friendly names\n\t  scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t\n\t  scope.save = function () {\n\t    $marketcloud.notifications.save(scope.notification).then(function (response) {\n\t      notie.alert(1, 'Notification saved', 1.5);\n\t      $location.path('/notifications');\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('PreviewNotificationController', ['$scope', '$http', 'notification', '$location', '$marketcloud', function (scope, http, notification, $location, $marketcloud) {\n\t  scope.notification = JSON.parse(notification);\n\t\n\t  scope.sampleData = {};\n\t\n\t  scope.sampleData['orders.update.completed'] = {};\n\t\n\t  scope.sampleData['orders.update.processing'] = {};\n\t\n\t  scope.sampleData['orders.created'] = {};\n\t\n\t  scope.sampleData['users.created'] = {};\n\t}]);\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('TranslateNotificationController', ['$scope', '$http', 'notification', '$marketcloud', 'LocalesFactory', '$application', '$location', 'NotificationsPresetsFactory', function (scope, http, notification, $marketcloud, locales, $application, $location, NotificationsPresets) {\n\t  if ($application.getAvailableLocaleCodes().length === 0) {\n\t    notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t    return $location.path('/system/localization');\n\t  }\n\t  scope.presets = NotificationsPresets;\n\t  scope.notification = notification.data.data;\n\t  // This is fetched from the app's config\n\t  scope.availableLocales = [];\n\t  // mocking the retrieval of locales\n\t  scope.locales = locales;\n\t  // name => label\n\t  // This object is used to map template variable names\n\t  // to more user friendly names\n\t  scope.templateVariablesLabels = {\n\t    title: 'Title',\n\t    introduction: 'introduction',\n\t    productLabel: 'Product Label',\n\t    priceLabel: 'Price Label',\n\t    customerInformationLabel: 'Customer information label',\n\t    shippingAddressLabel: 'Shipping address label',\n\t    billingAddressLabel: 'Billing address label',\n\t    tracking_code_introduction: 'Shipment tracking introduction',\n\t    redirect_url: 'Redirect URL',\n\t    buttonLabel: 'Button Label'\n\t  };\n\t  scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t    return scope.locales[code];\n\t  });\n\t  // Which locale we are currently editing\n\t  scope.currentLocale = scope.availableLocales[0];\n\t  // Init locales object\n\t  if (!scope.notification.hasOwnProperty('locales')) {\n\t    scope.notification.locales = {};\n\t  }\n\t  // Checking that the product has initialized every locale sub object\n\t  scope.availableLocales.forEach(function (locale) {\n\t    // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t    if (!scope.notification.locales.hasOwnProperty(locale.code)) {\n\t      scope.notification.locales[locale.code] = {};\n\t    }\n\t  });\n\t  scope.getFlagClassName = function () {\n\t    return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t  };\n\t  scope.events = {\n\t    'invoices.create': 'An order is created',\n\t    'orders.create': 'An order is created',\n\t    // 'orders.update.canceled'     : 'An order is canceled',\n\t    'users.create': 'A new user is created',\n\t    'orders.update.processing': 'An order is paid',\n\t    'orders.update.completed': 'An order is shipped'\n\t  };\n\t  scope.eventKeys = Object.keys(scope.events).map(function (e) {\n\t    return scope.events[e];\n\t  });\n\t  scope.updateNotificationPreset = function () {\n\t    if (scope.presets.hasOwnProperty(scope.notification.event)) {\n\t      var e = scope.notification.event;\n\t      for (var k in scope.presets[e]) {\n\t        scope.notification[k] = scope.presets[e][k];\n\t      }\n\t    }\n\t  };\n\t  // Notifications created before templates were available might need some more work\n\t  if (!scope.notification.template) {\n\t    scope.notification.template = angular.copy(scope.presets[scope.notification.event]);\n\t  }\n\t  // In the same way, some notification might have only a subset of template values.\n\t  for (var tplKey in scope.presets[scope.notification.event].template) {\n\t    if (!(tplKey in scope.notification.template)) {\n\t      scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey];\n\t    }\n\t  }\n\t  scope.updateTranslations = function () {\n\t    var payload = {\n\t      locales: angular.copy(scope.notification.locales)\n\t    };\n\t    $marketcloud.notifications.update(scope.notification.id, payload).then(function (response) {\n\t      notie.alert(1, 'All updates have been saved.', 2);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* global angular: true  */\n\t/* global API_BASE_URL: true  */\n\t/* global notie: true  */\n\t/* global alert: true  */\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('OrdersController', ['$q', '$scope', '$http', '$location', 'ordersResponse', '$marketcloud', '$route', '$utils', function ($q, scope, http, $location, resources, $marketcloud, $route, $utils) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    page: 1,\n\t    per_page: 20\n\t\n\t    // Parsing URL parameters, if provided\n\t\n\t    // Applying Url query\n\t  };var urlQuery = {};\n\t  try {\n\t    urlQuery = JSON.parse($route.current.params.query);\n\t  } catch (e) {\n\t    console.log(\"Non ho potuto parsare il JSON di questa stringa \", $route.current.params.query);\n\t    urlQuery = {};\n\t  }\n\t\n\t  console.log(\"Sono il controller ed inizializzo la query usando query URL Params \", urlQuery);\n\t  for (var k in urlQuery) {\n\t    scope.query[k] = urlQuery[k];\n\t  }\n\t\n\t  // Initial data resolved from the router\n\t  scope.orders = resources.data.data;\n\t\n\t  // This computes a \"paid\" flag on each order\n\t  // it is calculated checking each payment status\n\t  function setPaidFlag(order) {\n\t    // Old api set payment instead of payments\n\t    if (order.hasOwnProperty('payment')) {\n\t      order.paid = true;\n\t    } else if (order.hasOwnProperty('payments')) {\n\t      order.paid = order.payments.filter(function (p) {\n\t        return p.successful;\n\t      }).length > 0;\n\t    } else {\n\t      order.paid = false;\n\t    }\n\t  }\n\t\n\t  // Setting the paid flag\n\t  scope.orders.forEach(setPaidFlag);\n\t\n\t  // Util\n\t  scope.timestampToDate = function (t) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    return a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t  };\n\t\n\t  /*\n\t    BULK EDIT\n\t  */\n\t  scope.toggleAll = function () {\n\t    scope.orders.forEach(function (o) {\n\t      o.selected = scope.selectAll;\n\t    });\n\t  };\n\t  scope.getSelectedItems = function () {\n\t    return scope.orders.filter(function (o) {\n\t      return o.selected === true;\n\t    });\n\t  };\n\t  scope.bulkExport = function () {\n\t\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return scope.downloadCSV(scope.orders);\n\t\n\t    scope.downloadCSV(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.orders);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkUpdateStatus = function (status) {\n\t\n\t    if (!status) status = scope.bulkStatusChange;\n\t\n\t    var defer = $q.defer();\n\t\n\t    var promises = [];\n\t\n\t    scope.getSelectedItems().forEach(function (order) {\n\t      promises.push($marketcloud.orders.update(order.id, {\n\t        status: status\n\t      }));\n\t    });\n\t\n\t    $q.all(promises).then(function () {\n\t      notie.alert(1, 'All orders have been updated', 1.5);\n\t      scope.loadPage(scope.pagination.currentPage);\n\t    });\n\t\n\t    return defer.promise;\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    /*notie.confirm('Delete ' + scope.getSelectedItems().length + ' orders?', 'Delete', 'Cancel', function() {*/\n\t    window.Alert.confirm({\n\t      title: 'Delete ' + scope.getSelectedItems().length + ' orders?',\n\t      message: 'Deleted orders cannot be recovered. Do you want to continue?',\n\t      onConfirm: function onConfirm() {\n\t\n\t        var defer = $q.defer();\n\t\n\t        var promises = [];\n\t\n\t        scope.getSelectedItems().forEach(function (order) {\n\t          promises.push($marketcloud.orders.delete(order.id));\n\t        });\n\t\n\t        $q.all(promises).then(function () {\n\t          notie.alert(1, 'All orders have been deleted', 1.5);\n\t          scope.loadPage(scope.pagination.currentPage);\n\t        });\n\t\n\t        return defer.promise;\n\t      }\n\t    });\n\t  };\n\t\n\t  function jsonToCsv(json) {\n\t    // Questo non va bene, i fields devono essere l'unione di\n\t    // campi dell'ordine e campi dei prodotti\n\t    // perch csv  un formato di merda\n\t    var order_fields = ['id', 'created_at', 'status', 'total', 'items_total', 'shipping_total', 'taxes_total',\n\t    // shipping address\n\t    'shipping_address_email', 'shipping_address_full_name', 'shipping_address_country', 'shipping_address_city', 'shipping_address_address1', 'shipping_address_state', 'shipping_address_postal_code',\n\t    // billing address\n\t    'billing_address_email', 'billing_address_full_name', 'billing_address_country', 'billing_address_city', 'billing_address_address1', 'billing_address_state', 'billing_address_postal_code',\n\t    // Products\n\t    'product_name', 'product_id', 'product_price', 'product_price_discount', 'product_weight', 'product_depth', 'product_width', 'product_height', 'variant_name_1', 'variant_value_1', 'variant_name_2', 'variant_value_2', 'variant_name_3', 'variant_value_3', 'variant_name_4', 'variant_value_4', 'variant_name_5', 'variant_value_5'];\n\t\n\t    // var fields = Object.keys(json[0]);\n\t    var fields = order_fields;\n\t\n\t    var csv = json.map(function (row) {\n\t      return fields.map(function (fieldName) {\n\t        return JSON.stringify(row[fieldName] || '');\n\t      });\n\t    });\n\t    csv.unshift(fields); // add header column\n\t    return csv.join('\\r\\n');\n\t  }\n\t\n\t  scope.downloadCSV = function (array_to_download) {\n\t    // Here we will push order lines and product lines\n\t    var to_transform = [];\n\t\n\t    // For each order we add\n\t    // order id\n\t    array_to_download.forEach(function (order) {\n\t      var order_data = {\n\t        'items_total': order.items_total,\n\t        'shipping_total': order.shipping_total,\n\t        'taxes_total': order.taxes_total,\n\t        'total': order.total,\n\t        'created_at': new Date(order.created_at),\n\t        'status': order.status,\n\t        'id': order.id\n\t\n\t        // Adding flattened shipping address\n\t      };for (var ks in order.shipping_address) {\n\t        order_data['shipping_address_' + ks] = order.shipping_address[ks];\n\t      }\n\t      for (var kb in order.billing_address) {\n\t        order_data['billing_address_' + kb] = order.billing_address[kb];\n\t      }\n\t\n\t      to_transform.push(order_data);\n\t\n\t      // Ora per ogni prodotto aggiungo una riga, prima per devo estendere le chiavi dell'ordine\n\t      var product_props = ['name', 'id', 'price', 'price_discount', 'weight', 'depth', 'width', 'height'];\n\t      order.products.forEach(function (product) {\n\t        // Prima prendiamo i dati del parent\n\t        // Poi, se ha varianti\n\t        // prendiamo i dati di variante che sovrascrivono quelli del parent\n\t        // (ad esempio un price diverso perch la maglietta verde costa diverso)\n\t        // e poi prendiamo le propriet strutturali della variante e le assegnamo\n\t        // alloggetto in forma di variant_name_1 variant_value_1\n\t\n\t        var prod_data = {};\n\t        product_props.forEach(function (prop) {\n\t          prod_data['product_' + prop] = product[prop];\n\t        });\n\t        // Ho aggiunto le propriet di base, ora devo aggiungere le varianti\n\t        // solo se il prodotto le ha.\n\t\n\t        if (product.has_variants === true) {\n\t          // Gli attributi base, possono essere sovrascritti\n\t          product_props.forEach(function (prop) {\n\t            if (product.variant.hasOwnProperty(prop)) {\n\t              prod_data['product_' + prop] = product.variant[prop];\n\t            }\n\t          });\n\t          // Gli attributi varianti\n\t          var variants_counter = 1;\n\t          for (var variant_name in product.variantsDefinition) {\n\t            prod_data['variant_name_' + variants_counter] = variant_name;\n\t            prod_data['variant_value_' + variants_counter] = product.variant[variant_name];\n\t            variants_counter++;\n\t          }\n\t        }\n\t\n\t        to_transform.push(prod_data);\n\t      });\n\t    });\n\t\n\t    buildDownload(to_transform);\n\t  };\n\t\n\t  function buildDownload(data) {\n\t    var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + jsonToCsv(data));\n\t    var link = document.createElement('a');\n\t    link.setAttribute('href', encodedUri);\n\t    link.setAttribute('download', 'exported_orders.csv');\n\t    document.body.appendChild(link); // Required for FF\n\t\n\t    link.click(); // This will download the data file named \"my_data.csv\".\n\t  }\n\t\n\t  scope.nullOrUndefined = function (value) {\n\t    return value === null || typeof value === 'undefined';\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    return scope.loadData(scope.query);\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    return $marketcloud.orders.list(query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t\n\t      scope.orders = response.data.data;\n\t\n\t      scope.orders.forEach(setPaidFlag);\n\t\n\t      // This little trick allows us to get back to the latest state of the view when we hit a back button.\n\t      window.history.pushState(scope.query, \"List orders\", '#/orders?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteOrder = function (order) {\n\t    notie.confirm('Delete order?<p>Deleting the order, inventory quantities will be re-assigned.</p>', 'Delete', 'Cancel', function () {\n\t      $marketcloud.orders.delete(order.id).then(function () {\n\t        notie.alert(1, 'Order deleted succesfully', 1);\n\t        scope.loadPage(scope.pagination.currentPage);\n\t      }).catch(function () {\n\t        notie.alert(3, 'An error has occurred, order not deleted.', 1);\n\t      });\n\t    });\n\t  };\n\t\n\t  /* FILTERS */\n\t  scope.filters = [];\n\t\n\t  var notFilters = ['per_page', 'page', 'sort_by', 'sort_order'];\n\t\n\t  function isOperator(key) {\n\t    return notFilters.indexOf(key) >= 0;\n\t  };\n\t\n\t  for (var k in scope.query) {\n\t    if (!isOperator(k)) {\n\t      console.log(k + \" is not an operator\");\n\t      scope.filters.push({\n\t        name: k,\n\t        value: scope.query[k]\n\t      });\n\t    }\n\t  }\n\t\n\t  scope.applyFilters = function () {\n\t\n\t    scope.filters.forEach(function (filter) {\n\t      scope.query[filter.name] = filter.value;\n\t    });\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.saveNewFilterAndApply = function () {\n\t\n\t    scope.addFilter(scope.newFilter);\n\t\n\t    scope.newFilter = {\n\t      name: '',\n\t      value: null\n\t    };\n\t    $('#singleFilterModal').modal('hide');\n\t  };\n\t\n\t  scope.addFilter = function (key, value) {\n\t\n\t    if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key))) this.filters.push(key);else if (\"string\" === typeof key) this.filters.push({\n\t      name: key,\n\t      value: value\n\t    });else throw new Error(\"addFilter(Filter: f) or addFilter(String: fName, Any: fValue)\");\n\t\n\t    scope.applyFilters();\n\t  };\n\t\n\t  /*\n\t   *  @param {Number} index The position of the filter to remove\n\t   *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\n\t   */\n\t  scope.removeFilter = function (index, applyToQuery) {\n\t    if (typeof applyToQuery === 'undefined') {\n\t      applyToQuery = true;\n\t    }\n\t\n\t    var filterToRemove = scope.filters.splice(index, 1);\n\t\n\t    filterToRemove = filterToRemove[0];\n\t\n\t    delete scope.query[filterToRemove.name];\n\t\n\t    if (applyToQuery === true) {\n\t      scope.applyFilters();\n\t    }\n\t  };\n\t\n\t  // Removes a filter given its name in the filters array\n\t  scope.removeFilterByName = function (name) {\n\t    scope.filters = scope.filters.filter(function (filter) {\n\t      return filter.name !== name;\n\t    });\n\t\n\t    delete scope.query[name];\n\t\n\t    scope.applyFilters();\n\t  };\n\t\n\t  scope.removeFilterByPosition = function (pos) {\n\t    scope.filters.splice(pos, 1);\n\t    scope.applyFilters();\n\t  };\n\t\n\t  scope.setQueryParam = function (key, value) {\n\t    scope.query[key] = value;\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteQueryParam = function (key) {\n\t    delete scope.query[key];\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.sortingAttributes = ['id', 'status', 'created_at', 'total', 'items_total', 'shipping_total', 'taxes_total', 'coupon_total', 'promotion_total'];\n\t\n\t  scope.applySorting = function () {\n\t    scope.loadData();\n\t    //$(\"#sortingModal\").modal('hide');\n\t  };\n\t}]);\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewOrderController', ['$scope', '$marketcloud', function (scope, marketcloud) {\n\t  scope.order = {\n\t    items: []\n\t  };\n\t\n\t  scope.products = [{ name: 'Scolapasta', price: 12 }, { name: 'Cucchiaio', price: 1 }, { name: 'Forchetta', price: 2 }];\n\t\n\t  scope.saveOrder = function () {\n\t    console.log('Saving this order', scope.order);\n\t  };\n\t\n\t  // Shows/hide modal for products\n\t  scope.toggleProductsModal = function () {\n\t    console.log('Showing products modal');\n\t    $('#itemsModal').modal('show');\n\t  };\n\t\n\t  // loads some products from backend\n\t  scope.loadInventory = function (query) {\n\t    console.log('Loading inventory', query);\n\t  };\n\t\n\t  // Adds a line item to the order\n\t  scope.addItemToOrder = function (item) {\n\t    console.log('Item added to order', item);\n\t  };\n\t\n\t  // loads some addresses from backend\n\t  scope.loadAddresses = function (query) {\n\t    console.log('Loading addresses', query);\n\t  };\n\t}]);\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('OrderController', ['$scope', '$http', 'order', 'shippingMethods', '$marketcloud', 'paymentMethods', 'Countries', function (scope, http, order, shippingMethods, $marketcloud, paymentMethods, countries) {\n\t  scope.paymentMethods = paymentMethods.data.data;\n\t  scope.countries = countries;\n\t  // Data fetched by the resolve\n\t  scope.order = order.data.data;\n\t\n\t  scope.addressToEdit = {};\n\t\n\t  // List of shipping methods\n\t  // @property Array<Object>\n\t  scope.shippingMethods = shippingMethods.data.data;\n\t\n\t  // New shipment\n\t  scope.newShipment = {\n\t    tracking_code: null,\n\t    tracking_link: null,\n\t    date: new Date(),\n\t    delivery_date: new Date(),\n\t    method: null,\n\t    description: null\n\t  };\n\t  scope.saveShipmentAndFullfill = false;\n\t\n\t  // New payment\n\t  scope.newPayment = {\n\t    method: 'Manual',\n\t    description: null,\n\t    amount: scope.order.total\n\t  };\n\t  scope.savePaymentAndSetToProcessing = false;\n\t\n\t  scope.payments = [];\n\t\n\t  scope.showEditAddressDialog = function (addressToEdit) {\n\t    scope.addressToEdit = addressToEdit;\n\t    $('#editAddressModal').modal('show');\n\t  };\n\t\n\t  scope.saveAddress = function () {\n\t    $marketcloud.orders.update(scope.order.id, {\n\t      billing_address: scope.order.billing_address,\n\t      shipping_address: scope.order.shipping_address\n\t    }).then(function () {\n\t      notie.alert(1, 'Order successfully updated', 1.5);\n\t      $('#editAddressModal').modal('hide');\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred, order not updated', 1.5);\n\t      $('#editAddressModal').modal('hide');\n\t    });\n\t  };\n\t  /* scope.order = null;\n\t   scope.loadingData = true; */\n\t\n\t  // Checking shipment dates\n\t  function assignDataToShipments() {\n\t    if (Array.isArray(scope.order.shipments)) {\n\t      scope.order.shipments = scope.order.shipments.map(function (shipment) {\n\t        if (shipment.date) {\n\t          shipment.date = moment(shipment.date);\n\t        }\n\t        if (shipment.delivery_date) {\n\t          shipment.delivery_date = moment(shipment.delivery_date);\n\t        }\n\t\n\t        if (shipment.method) {\n\t          scope.shippingMethods.forEach(function (method) {\n\t            if (shipment.method.id === method.id) {\n\t              shipment.method = method;\n\t            }\n\t          });\n\t        }\n\t\n\t        return shipment;\n\t      });\n\t    }\n\t  }\n\t\n\t  assignDataToShipments();\n\t\n\t  scope.refundedProducts = [];\n\t\n\t  if (scope.order.refunds) {\n\t    scope.order.refunds.forEach(function (refund) {\n\t      refund.line_items.forEach(function (item) {\n\t        scope.refundedProducts.push(item);\n\t      });\n\t    });\n\t  }\n\t\n\t  function getLineItemPrice(lineItem) {\n\t    if (lineItem.variant) {\n\t      if (lineItem.variant.price_discount) {\n\t        return lineItem.variant.price_discount * lineItem.quantity;\n\t      } else {\n\t        return lineItem.variant.price * lineItem.quantity;\n\t      }\n\t    } else {\n\t      if (lineItem.price_discount) {\n\t        return lineItem.price_discount * lineItem.quantity;\n\t      } else {\n\t        return lineItem.price * lineItem.quantity;\n\t      }\n\t    }\n\t  }\n\t\n\t  function getLineItemTaxes(lineItem) {\n\t    var price = getLineItemPrice(lineItem);\n\t    var tax_rate = lineItem.applied_tax_rate;\n\t\n\t    return tax_rate / 100 * price * lineItem.quantity;\n\t  }\n\t\n\t  scope.showRefundModal = function () {\n\t    scope.newRefund = {\n\t      created_at: new Date(),\n\t      reason: '',\n\t      line_items: [],\n\t      items_total: 0,\n\t      taxes_total: 0,\n\t      total: 0,\n\t      restock_refunded_items: false\n\t    };\n\t\n\t    scope.newRefund.line_items = scope.order.products.map(function (product) {\n\t      var p = angular.copy(product);\n\t      p.quantityInOrder = product.quantity;\n\t\n\t      p.product_id = product.id;\n\t\n\t      p.variant_id = 0;\n\t\n\t      if (p.hasOwnProperty('variant')) {\n\t        p.variant_id = p.variant.id;\n\t      }\n\t\n\t      return p;\n\t    });\n\t\n\t    scope.updateNewRefund();\n\t\n\t    $('#RefundModal').modal('show');\n\t  };\n\t\n\t  scope.saveRefund = function () {\n\t    scope.refundErrorMessage = '';\n\t\n\t    scope.newRefund.line_items = scope.newRefund.line_items.filter(function (item) {\n\t      return item.quantity > 0;\n\t    });\n\t\n\t    if (scope.newRefund.total <= 0) {\n\t      scope.refundErrorMessage = 'Refund total must be greater than zero.';\n\t      return;\n\t    }\n\t\n\t    $marketcloud.refunds.save(scope.order.id, scope.newRefund).then(function (response) {\n\t      $('#RefundModal').modal('hide');\n\t      window.Alert.success({\n\t        message: 'Refund saved successfully!'\n\t      });\n\t    }).catch(function (response) {\n\t      scope.refundErrorMessage = 'Unable to create refund. Please review the inserted data.';\n\t    });\n\t  };\n\t\n\t  scope.updateNewRefund = function () {\n\t    scope.newRefund.items_total = 0;\n\t    scope.newRefund.taxes_total = 0;\n\t\n\t    scope.newRefund.line_items.forEach(function (item) {\n\t      scope.newRefund.items_total += getLineItemPrice(item);\n\t      scope.newRefund.taxes_total += getLineItemTaxes(item);\n\t    });\n\t\n\t    scope.newRefund.total = scope.newRefund.items_total + scope.newRefund.taxes_total;\n\t    console.log('updateNewRefund ' + scope.newRefund.total);\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t  scope.getSelectedVariantValues = function (p) {\n\t    var temp = {};\n\t    Object.keys(p.variantsDefinition).forEach(function (k) {\n\t      temp[k] = p.variant[k];\n\t    });\n\t    return temp;\n\t  };\n\t\n\t  scope.getSelectedVariantKeysAndValues = function (p) {\n\t    var temp = {};\n\t    Object.keys(p.variantsDefinition).forEach(function (k) {\n\t      temp[k] = k + ': ' + String(p.variant[k]);\n\t    });\n\t    return temp;\n\t  };\n\t\n\t  delete scope.order['items'];\n\t\n\t  scope.updateStatus = function (status) {\n\t    scope.order.status = status;\n\t    $marketcloud.orders.update(scope.order.id, {\n\t      status: scope.order.status\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Order successfully updated', 1);\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Please try again.', 1);\n\t    });\n\t  };\n\t\n\t  // Util\n\t  scope.timestampToDate = function (t, showHours) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    var the_date = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t\n\t    if (showHours === true) {\n\t      the_date += ' at ' + a.getHours() + ':' + a.getMinutes();\n\t    }\n\t\n\t    return the_date;\n\t  };\n\t\n\t  function syntaxHighlight(json) {\n\t    if (typeof json !== 'string') {\n\t      json = JSON.stringify(json, null, 2);\n\t    }\n\t\n\t    json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(new RegExp('\\n', 'g'), '<br>').replace(new RegExp('\\t'), '&nbsp;&nbsp;');\n\t    return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n\t      var cls = 'number';\n\t      if (/^\"/.test(match)) {\n\t        if (/:$/.test(match)) {\n\t          cls = 'key';\n\t        } else {\n\t          cls = 'string';\n\t        }\n\t      } else if (/true|false/.test(match)) {\n\t        cls = 'boolean';\n\t      } else if (/null/.test(match)) {\n\t        cls = 'null';\n\t      }\n\t      return '<span class=\"' + cls + '\">' + match + '</span>';\n\t    });\n\t  }\n\t  scope.inspectObject = function (p) {\n\t    scope.json = syntaxHighlight(p);\n\t    $('#JsonInspector').modal('show');\n\t  };\n\t\n\t  scope.round = function (numb) {\n\t    return Math.round(numb * 1000) / 1000;\n\t  };\n\t\n\t  scope.fullfill = function () {\n\t    // Sets the order to completed\n\t    notie.confirm('This will set the order as completed, and eventually send notifications. Confirm?', 'Confirm', 'Cancel', function () {\n\t      $marketcloud.orders.update(scope.order.id, {\n\t        status: 'completed'\n\t      }).then(function (response) {\n\t        scope.order.status = 'completed';\n\t        notie.alert(1, 'Order successfully updated', 1);\n\t      }).catch(function (response) {\n\t        notie.alert(2, 'An error has occurred. Please try again.', 1);\n\t      });\n\t    });\n\t  };\n\t\n\t  scope.setToProcessing = function () {\n\t    // Sets the order to processing\n\t    window.Alert.confirm({\n\t      title: 'Confirm order status update?',\n\t      message: 'This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\n\t      onConfirm: function onConfirm() {\n\t        $marketcloud.orders.update(scope.order.id, {\n\t          status: 'processing'\n\t        }).then(function (response) {\n\t          scope.order.status = 'processing';\n\t          window.Alert.success({\n\t            message: 'Order successfully updated'\n\t          });\n\t        }).catch(function (response) {\n\t          window.Alert.error({});\n\t        });\n\t      }\n\t    });\n\t    /*      notie.confirm('This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\n\t            'Confirm',\n\t            'Cancel',\n\t            function() {\n\t              $marketcloud.orders.update(scope.order.id, {\n\t                  status: 'processing'\n\t                })\n\t                .then(function(response) {\n\t                  scope.order.status = 'processing'\n\t                  notie.alert(1, 'Order successfully updated', 1)\n\t                })\n\t                .catch(function(response) {\n\t                  notie.alert(2, 'An error has occurred. Please try again.', 1)\n\t                })\n\t            }) */\n\t  };\n\t\n\t  scope.saveShipment = function () {\n\t    // Removing all validation feedback from the shipment\n\t    $('#shipmentModal .has-error').removeClass('has-error');\n\t    $('#shipmentModal .error').remove();\n\t\n\t    // Validating the new shipment\n\t    if (scope.newShipment.method === null) {\n\t      $('select[ng-model=\"newShipment.method\"]').parent().addClass('has-error');\n\t      $('select[ng-model=\"newShipment.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'));\n\t      return;\n\t    }\n\t\n\t    if (scope.newShipment.date) {\n\t      scope.newShipment.date = new Date(scope.newShipment.date);\n\t    }\n\t\n\t    if (scope.newShipment.delivery_date) {\n\t      scope.newShipment.delivery_date = new Date(scope.newShipment.delivery_date);\n\t    }\n\t\n\t    var shipmentToSave = angular.copy(scope.newShipment);\n\t\n\t    // Saving the new shipment\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments',\n\t      data: shipmentToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      // Resetting the shipment\n\t      scope.newShipment = {\n\t        tracking_code: null,\n\t        tracking_link: null,\n\t        date: new Date(),\n\t        delivery_date: new Date(),\n\t        method: null,\n\t        description: null\n\t      };\n\t      if (scope.order.shipments) {\n\t        scope.order.shipments.push(shipmentToSave);\n\t      } else {\n\t        scope.order.shipments = [shipmentToSave];\n\t      }\n\t\n\t      $('#shipmentModal').modal('hide');\n\t\n\t      if (scope.saveShipmentAndFullfill === true) {\n\t        scope.fullfill();\n\t      }\n\t\n\t      assignDataToShipments();\n\t    }).catch(function (response) {\n\t      // $('#shipmentModal').modal('hide')\n\t      notie.alert(2, 'An error has occurred, please check your input', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateShipment = function () {\n\t    // Removing all validation feedback from the shipment\n\t    $('#esitShipmentModal .has-error').removeClass('has-error');\n\t    $('#editShipmentModal .error').remove();\n\t\n\t    // Validating the new shipment\n\t    if (scope.shipmentToEdit.method === null) {\n\t      $('select[ng-model=\"shipmentToEdit.method\"]').parent().addClass('has-error');\n\t      $('select[ng-model=\"shipmentToEdit.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'));\n\t      return;\n\t    }\n\t\n\t    var shipmentToSave = angular.copy(scope.shipmentToEdit);\n\t\n\t    if (shipmentToSave.date && shipmentToSave.date.toDate) {\n\t      shipmentToSave.date = shipmentToSave.date.toDate();\n\t      // scope.shipmentToEdit.date = new Date(scope.shipmentToEdit.date)\n\t    }\n\t\n\t    if (shipmentToSave.delivery_date && shipmentToSave.delivery_date.toDate) {\n\t      // scope.shipmentToEdit.delivery_date = new Date(scope.shipmentToEdit.delivery_date)\n\t      shipmentToSave.delivery_date = shipmentToSave.delivery_date.toDate();\n\t    }\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments/' + scope.shipmentToEditIndex,\n\t      data: shipmentToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      scope.shipmentToEdit = {};\n\t      $('#editShipmentModal').modal('hide');\n\t      notie.alert(1, 'Shipment updated', 1.5);\n\t    }).catch(function (error) {\n\t      console.log(error);\n\t      notie.alert(2, 'An error has occurred, please check your input', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.showShipmentModal = function () {\n\t    $('#shipmentModal').modal('show');\n\t  };\n\t\n\t  scope.showEditShipmentModal = function (shipment, index) {\n\t    scope.shipmentToEdit = shipment;\n\t    scope.shipmentToEditIndex = index;\n\t\n\t    $('#editShipmentModal').modal('show');\n\t  };\n\t\n\t  scope.showPaymentModal = function () {\n\t    $('#paymentModal').modal('show');\n\t  };\n\t\n\t  scope.orderToCSV = function () {};\n\t\n\t  scope.createPDFInvoice = function () {\n\t    if (!scope.order.invoice_id) {\n\t      return console.log('Order withouth invoice');\n\t    }\n\t\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/invoices/' + scope.order.invoice_id + '/pdf',\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      var invoiceUrl = response.data.data.url;\n\t      Object.assign(document.createElement('a'), { target: '_blank', href: invoiceUrl }).click();\n\t    }).catch(function (error) {\n\t      alert('error');\n\t      console.log(error);\n\t    });\n\t  };\n\t\n\t  scope.createPDFCreditNote = function (refund) {\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/refunds/' + refund.id + '/pdf',\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      var refundUrl = response.data.data.url;\n\t      Object.assign(document.createElement('a'), { target: '_blank', href: refundUrl }).click();\n\t    }).catch(function (error) {\n\t      alert('error');\n\t      console.log(error);\n\t    });\n\t  };\n\t\n\t  scope.savePayment = function () {\n\t    http({\n\t      method: 'POST',\n\t      url: window.API_BASE_URL + '/orders/' + scope.order.id + '/payments',\n\t      data: scope.newPayment,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      $('#paymentModal').modal('hide');\n\t      notie.alert(1, 'Payment saved', 1.5);\n\t      // var orderPayments = response.data.data.payments\n\t      scope.order.payments = response.data.data.payments;\n\t\n\t      scope.newPayment = {};\n\t\n\t      if (scope.savePaymentAndSetToProcessing === true) {\n\t        scope.setToProcessing();\n\t      }\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t      $('#paymentModal').modal('hide');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditProductTranslationsController', EditProductTranslationsController);\n\t\n\t  EditProductTranslationsController.$inject = ['$scope', '$marketcloud', 'product', '$http', '$application', '$location', 'LocalesFactory'];\n\t\n\t  function EditProductTranslationsController(scope, $marketcloud, product, $http, $application, $location, locales) {\n\t    // If the current application does not have additional locales\n\t    // we redirect the user to the locales settings.\n\t    //\n\t    // We might want to prompt the user and ask them\n\t    // Go to settings or stay in the previous page?\n\t    if ($application.getAvailableLocaleCodes().length === 0) {\n\t      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2);\n\t      return $location.path('/system/localization');\n\t    }\n\t\n\t    // Injecting resolve data into the controller\n\t    scope.product = product.data.data;\n\t\n\t    // This is fetched from the app's config\n\t    scope.availableLocales = [];\n\t\n\t    // mocking the retrieval of locales\n\t    // THese are ALL the locals available in the world\n\t    scope.locales = locales;\n\t\n\t    // available locales\n\t    // Fetched from app settings,\n\t    // THese are the locals that the store owner wants for this app.\n\t    scope.availableLocales = [];\n\t\n\t    scope.availableLocales = $application.get().locales.split(',').map(function (code) {\n\t      return scope.locales[code];\n\t    });\n\t\n\t    // Which locale we are currently editing\n\t    // We already know that we have at least 1 locale\n\t    scope.currentLocale = scope.availableLocales[0];\n\t\n\t    // This will hold custom properties for further processing\n\t    scope.customPropertiesData = {};\n\t\n\t    // mapping non-core attributes into scope.customPropertiesData\n\t    var coreProperties = Models.Product.getPropertyNames();\n\t\n\t    // Should we be able to edit the slug? this is a on/off\n\t    scope.unsafeSlug = false;\n\t\n\t    coreProperties.push('id', 'variants', 'variantsDefinition', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t    'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    // Handling variants\n\t    // The locale will look like this\n\t    /*\n\t      {\n\t        locales : {\n\t          \"it-IT\" : {\n\t            ..\n\t            variants : {\n\t              colors : {\n\t                label : \"colori\",\n\t                values: {\n\t                  \"red\"  : \"rosso\",\n\t                  \"yellow\" : \"giallo\"\n\t                  ...\n\t                }\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t    */\n\t\n\t    if (product.type === 'product_with_variants') {\n\t      for (var localeName in scope.product.locales) {\n\t        var locale = scope.product.locales[localeName];\n\t        if (!locale.hasOwnProperty('variants')) {\n\t          // Let's initialize the variants in the locale!\n\t          locale.variants = {};\n\t\n\t          for (v_name in scope.product.variantsDefinition) {\n\t            // We want to initialize the values translation table\n\t            var variant_values_translations = {};\n\t            var variant_values = scope.product.variantsDefinition[v_name];\n\t            variant_values.forEach(function (v) {\n\t              variant_values_translations[v] = '';\n\t            });\n\t            locale.variants[v_name] = {\n\t              label: '',\n\t              values: variant_values_translations\n\t            };\n\t          }\n\t        }\n\t      }\n\t    }\n\t\n\t    // Init locales object\n\t    if (!scope.product.hasOwnProperty('locales')) {\n\t      scope.product.locales = {};\n\t    }\n\t\n\t    scope.customPropertiesDataLocales = {};\n\t\n\t    // Checking that the product has initialized every locale sub object\n\t    scope.availableLocales.forEach(function (locale) {\n\t      // Se il prodotto.locales non ha il locale, creo l'oggetto\n\t      if (!scope.product.locales.hasOwnProperty(locale.code)) {\n\t        scope.product.locales[locale.code] = {};\n\t      }\n\t\n\t      // Initializing the container for custom properties translations\n\t      scope.customPropertiesDataLocales[locale.code] = {};\n\t\n\t      for (var k in scope.customPropertiesData) {\n\t        scope.customPropertiesDataLocales[locale.code][k] = getTranslatedValueForCustomProperty(k, locale);\n\t      }\n\t\n\t      function getTranslatedValueForCustomProperty(k, locale) {\n\t        if (typeof scope.product.locales[locale.code][k] !== 'undefined') {\n\t          return scope.product.locales[locale.code][k];\n\t        }\n\t\n\t        return {\n\t          value: scope.customPropertiesData[k],\n\t          label: k\n\t        };\n\t      }\n\t    });\n\t\n\t    scope.getFlagClassName = function () {\n\t      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase();\n\t    };\n\t\n\t    scope.isRichText = function (str) {\n\t      if (typeof str !== 'string') return false;\n\t\n\t      var doc = new DOMParser().parseFromString(str, \"text/html\");\n\t      return [].slice.call(doc.body.childNodes).some(function (node) {\n\t        return node.nodeType === 1;\n\t      });\n\t    };\n\t\n\t    function getSlugFromString(v) {\n\t      return v.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    }\n\t\n\t    scope.updateSlug = function () {\n\t      scope.product.locales[scope.currentLocale.code].slug = getSlugFromString(scope.product.locales[scope.currentLocale.code].name);\n\t    };\n\t\n\t    scope.updateTranslations = function () {\n\t      var payload = {\n\t        locales: angular.copy(scope.product.locales)\n\t      };\n\t\n\t      for (var locale in scope.customPropertiesDataLocales) {\n\t        // Custom properties of locale \"l\"\n\t        var customPropertiesForSingleLocale = scope.customPropertiesDataLocales[locale];\n\t\n\t        for (var k in customPropertiesForSingleLocale) {\n\t          payload.locales[locale][k] = customPropertiesForSingleLocale[k];\n\t        }\n\t      }\n\t\n\t      $marketcloud.products.update(scope.product.id, payload).then(function (response) {\n\t        notie.alert(1, 'All updates have been saved.', 2);\n\t      }).catch(function (error) {\n\t        notie.alert(3, 'An error has occurred, please try again', 2);\n\t      });\n\t    };\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.typeof = function (y) {\n\t      return typeof y === 'undefined' ? 'undefined' : _typeof(y);\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditBundledProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  if (!scope.product.hasOwnProperty()) {\n\t    var product_ids = [];\n\t  }\n\t\n\t  scope.product.lists.forEach(function (list) {\n\t    var this_list_ids = list.items.map(function (item) {\n\t      return item.product_id;\n\t    });\n\t    product_ids = product_ids.concat(this_list_ids);\n\t  });\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewList = function () {\n\t    scope.product.lists.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeList = function (index) {\n\t    scope.product.lists.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToListModal = function (list) {\n\t    scope.currentList = list;\n\t    $('#addProductsToListModal').modal('show');\n\t  };\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    response.data.data.forEach(function (i) {\n\t      p_map[i.id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the bundled product\n\t    scope.product.lists.map(function (opt) {\n\t      opt.items = opt.items.map(function (item) {\n\t        return p_map[item.product_id];\n\t      });\n\t      return opt;\n\t    });\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'lists');\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t  });\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var update = angular.copy(scope.product);\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      update[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    update.lists.forEach(function (list) {\n\t      list.items = list.items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    });\n\t\n\t    $marketcloud.products.update(update.id, update).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewBundledProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.catch = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewList = function () {\n\t    scope.product.lists.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeList = function (index) {\n\t    scope.product.lists.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToListModal = function (list) {\n\t    scope.currentList = list;\n\t    $('#addProductsToListModal').modal('show');\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'bundled_product',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    media: [],\n\t    has_variants: false,\n\t    published: true,\n\t    lists: []\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.catch = null;\n\t    scope.catchField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (skipSaving) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var to_save = angular.copy(scope.product);\n\t\n\t    for (var k in to_save.lists) {\n\t      to_save.lists[k].items = to_save.lists[k].items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    }\n\t\n\t    if (skipSaving === true) {\n\t      return;\n\t    }\n\t    $marketcloud.products.save(to_save).then(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditConfigurableProductController', ['$scope', '$marketcloud', 'product', '$http', function (scope, $marketcloud, product, $http) {\n\t  scope.customPropertiesData = {};\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  if (!scope.product.hasOwnProperty()) {\n\t    var product_ids = [];\n\t  }\n\t\n\t  scope.product.options.forEach(function (option) {\n\t    var this_option_ids = option.items.map(function (item) {\n\t      return item.product_id;\n\t    });\n\t    product_ids = product_ids.concat(this_option_ids);\n\t  });\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewOption = function () {\n\t    scope.product.options.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeOption = function (index) {\n\t    scope.product.options.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToOptionModal = function (option) {\n\t    scope.currentOption = option;\n\t    $('#addProductsToOptionModal').modal('show');\n\t  };\n\t\n\t  $marketcloud.products.list({\n\t    id: product_ids.join(',')\n\t  }).then(function (response) {\n\t    var p_map = {};\n\t\n\t    response.data.data.forEach(function (i) {\n\t      p_map[i.id] = i;\n\t    });\n\t\n\t    // We fetch the products data, then we must add the properties\n\t    // related to them being in the bundled product\n\t    scope.product.options.map(function (opt) {\n\t      opt.items = opt.items.map(function (item) {\n\t        return p_map[item.product_id];\n\t      });\n\t      return opt;\n\t    });\n\t  }).catch(function (error) {\n\t    notie.alert(3, 'An error has occurred', 1.5);\n\t  });\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'options');\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading categories', 1.5);\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t  });\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{ name: 'String', value: 'string' }, { name: 'Number', value: 'number' }, { name: 'Boolean', value: 'boolean' }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var update = angular.copy(scope.product);\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      update[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    update.options.forEach(function (option) {\n\t      option.items = option.items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    });\n\t\n\t    $marketcloud.products.update(update.id, update).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewConfigurableProductController', ['$scope', '$http', '$location', '$marketcloud', function (scope, $http, location, $marketcloud) {\n\t  scope.categories = [];\n\t  scope.catch = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  function getSlugFromString(v) {\n\t    return v.split(' ').map(function (item) {\n\t      return item.replace(/\\W/g, '');\n\t    }).map(function (item) {\n\t      return item.toLowerCase();\n\t    }).join('-');\n\t  }\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      console.log('An error has occurred while loading categories');\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 1.5);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.addProductsCardConfig = {\n\t    additionalFields: []\n\t  };\n\t  scope.addNewOption = function () {\n\t    scope.product.options.unshift({\n\t      name: '',\n\t      required: false,\n\t      items: []\n\t    });\n\t  };\n\t\n\t  scope.removeOption = function (index) {\n\t    scope.product.options.splice(index, 1);\n\t  };\n\t\n\t  scope.showAddProductsToOptionModal = function (option) {\n\t    scope.currentOption = option;\n\t    $('#addProductsToOptionModal').modal('show');\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'configurable_product',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    media: [],\n\t    has_variants: false,\n\t    published: true,\n\t    options: []\n\t\n\t  };\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.catch = null;\n\t    scope.catchField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (skipSaving) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // Custom properties cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.GroupedProduct.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var to_save = angular.copy(scope.product);\n\t\n\t    for (var k in to_save.options) {\n\t      to_save.options[k].items = to_save.options[k].items.map(function (item) {\n\t        return { product_id: item.id };\n\t      });\n\t    }\n\t\n\t    if (skipSaving === true) {\n\t      return;\n\t    }\n\t    $marketcloud.products.save(to_save).then(function (response) {\n\t      notie.alert(1, 'Product saved', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tangular.module('DataDashboard').controller('ListProductsController', ['$scope', '$location', '$marketcloud', '$http', '$q', 'products', '$route', '$rootScope', 'StormConfiguration', '$utils', '$models', function (scope, $location, $marketcloud, http, $q, resources, $route, $rootScope, StormConfiguration, $utils, $models) {\n\t  'use strict';\n\t\n\t  // This array will hold our data\n\t\n\t  scope.products = [];\n\t\n\t  // Bulk control\n\t  // Here we place selected prodocuts for bulk actions\n\t  scope.selected = [];\n\t\n\t  // BUlk operations buttons\n\t  scope.showBulkControls = false;\n\t\n\t  // Keeping track of which resources are selected\n\t  scope.selections = {};\n\t\n\t  // The main resource\n\t  scope.products = resources.data.data;\n\t\n\t  // The columns we are showing\n\t  // Loading from config or initializing\n\t  scope.showing_attributes = StormConfiguration.get('products_list_showing_attributes') || [];\n\t\n\t  // Attributes not togglable in view\n\t  scope.reserved_attributes = ['name', 'type', 'price', 'inventory', 'published'];\n\t\n\t  // Initializing pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // The query object to filter results from the api\n\t  };scope.query = {\n\t    per_page: 20,\n\t    page: scope.pagination.currentPage\n\t\n\t    // Parsing URL parameters, if provided\n\t    // Applying Url query\n\t  };var urlQuery = {};\n\t  try {\n\t    urlQuery = JSON.parse($route.current.params.query);\n\t  } catch (e) {\n\t    urlQuery = {};\n\t  }\n\t\n\t  for (var k in urlQuery) {\n\t    scope.query[k] = urlQuery[k];\n\t  }\n\t\n\t  /************************************************************\n\t   *                         COLUMNS\n\t   **************************************************************/\n\t\n\t  // We assign to available_attributes\n\t  // those keys of products\n\t  scope.available_attributes = [];\n\t\n\t  // Building the available_attributes array\n\t  scope.products.forEach(function (p) {\n\t    // Attributes to add to available_attributes\n\t    var new_attributes = Object.keys(p).filter(function (key) {\n\t      // It must not be in reserved list\n\t      return scope.reserved_attributes.indexOf(key) === -1;\n\t    }).filter(function (key) {\n\t      // must be something we can render\n\t      var types = ['number', 'string', 'boolean'];\n\t      return types.indexOf(_typeof(p[key])) > -1;\n\t    }).filter(function (key) {\n\t      // must not be a duplicate\n\t      return scope.available_attributes.indexOf(key) === -1;\n\t    });\n\t    scope.available_attributes = scope.available_attributes.concat(new_attributes);\n\t  });\n\t\n\t  /*\n\t      For legacy reasons, some products may have overwritten the type property\n\t      so we infer it again here\n\t   */\n\t\n\t  scope.products.forEach(function (product) {\n\t    if (product.type === 'simple_product' || product.type === 'product_with_variants') {\n\t      return;\n\t    }\n\t\n\t    if (product.hasOwnProperty('variants') && product.hasOwnProperty('variantsDefinition')) {\n\t      product.type = 'product_with_variants';\n\t    } else {\n\t      product.type = 'simple_product';\n\t    }\n\t  });\n\t\n\t  /*\n\t   *    Shows or hides a column by name\n\t   *    @param {String} name The name of the column to show/hide\n\t   */\n\t  scope.toggleColumn = function (name) {\n\t    var i = scope.showing_attributes.indexOf(name);\n\t    if (i > -1) {\n\t      scope.showing_attributes.splice(i, 1);\n\t    } else {\n\t      scope.showing_attributes.push(name);\n\t    }\n\t\n\t    StormConfiguration.set('products_list_showing_attributes', scope.showing_attributes);\n\t  };\n\t\n\t  scope.filterColumnNamesPattern = '';\n\t  scope.filterColumnNames = function (item) {\n\t    return item.indexOf(scope.filterColumnNamesPattern) > -1;\n\t  };\n\t\n\t  /************************************************************\n\t   *                         FILTERS\n\t   **************************************************************/\n\t\n\t  // We want to be able to filter also by reserved attributes\n\t  scope.filterAttributes = scope.reserved_attributes.concat(scope.available_attributes);\n\t\n\t  scope.applyFilters = function (filters) {\n\t    filters.forEach(function (filter) {\n\t      scope.query[filter.name] = filter.value;\n\t    });\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.applySorting = function () {\n\t    scope.loadData();\n\t    $(\"#sortingModal\").modal('hide');\n\t  };\n\t\n\t  scope.sortByColumn = function (columnName) {\n\t\n\t    var order = null;\n\t\n\t    if (scope.query.sort_order === 'DESC') order = 'ASC';else order = 'DESC';\n\t\n\t    scope.query.sort_by = columnName;\n\t\n\t    scope.query.sort_order = order;\n\t\n\t    scope.loadData();\n\t  };\n\t\n\t  /************************************************************\n\t   *                         MULTIPLE/BULK SELECTION\n\t   **************************************************************/\n\t\n\t  // Holding query fields\n\t  // When listing data this oobject is sent\n\t\n\t  scope.isItemSelected = function (item) {\n\t    return scope.selected.indexOf(item.id) > -1;\n\t  };\n\t\n\t  scope.toggleItemSelection = function (item) {\n\t    // If is not selected, we select it\n\t    if (!scope.isItemSelected(item)) {\n\t      return scope.selected.push(item.id);\n\t    }\n\t\n\t    // If selected we find it and remove it\n\t    for (var i = scope.selected.length - 1; i >= 0; i--) {\n\t      if (scope.selected[i] === item.id) {\n\t        scope.selected.splice(i, 1);\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    if (scope.selectAll === false) {\n\t      scope.selected = [];\n\t    } else {\n\t      scope.selected = scope.products.map(function (product) {\n\t        return product.id;\n\t      });\n\t    }\n\t  };\n\t\n\t  scope.$watch('selected', function (newValue, oldValue) {\n\t    // Have to recaulcate scope.selections\n\t    var tmp = {};\n\t    scope.selected.forEach(function (id) {\n\t      tmp[id] = true;\n\t    });\n\t    scope.selections = tmp;\n\t  });\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.products.filter(function (p) {\n\t      return scope.isItemSelected(p);\n\t    });\n\t  };\n\t\n\t  scope.bulkSetPublishing = function (flag) {\n\t    // flag must be boolean\n\t\n\t    var defer = $q.defer();\n\t\n\t    var promises = [];\n\t\n\t    scope.getSelectedItems().forEach(function (product) {\n\t      promises.push($marketcloud.products.update(product.id, {\n\t        published: flag\n\t      }));\n\t    });\n\t\n\t    $q.all(promises).then(function () {\n\t      notie.alert(1, 'All products have been updated', 1.5);\n\t      scope.loadPage(scope.pagination.currentPage);\n\t    });\n\t\n\t    return defer.promise;\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' products?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (product) {\n\t        promises.push($marketcloud.products.delete(product.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All products have been deleted', 1.5);\n\t        scope.loadPage(scope.pagination.currentPage);\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.products);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.bulkCSVExport = function () {\n\t    var _data = scope.getSelectedItems();\n\t\n\t    // If there are no selected items, we export the whole current view\n\t    if (_data.length === 0) _data = scope.products;\n\t\n\t    var bucket = [];\n\t\n\t    _data.forEach(function (product) {\n\t      if (\"simple_product\" === product.type) {\n\t        bucket.push(product);\n\t      } else if (\"product_with_variants\" === product.type) {\n\t\n\t        var productWithoutVariants = angular.copy(product);\n\t        delete productWithoutVariants.variants;\n\t        bucket.push(productWithoutVariants);\n\t\n\t        var variantNames = [];\n\t\n\t        product.variants.forEach(function (i) {\n\t          i.type = \"variant\";\n\t          bucket.push(i);\n\t        });\n\t      } else {\n\t        bucket.push(product);\n\t      }\n\t    });\n\t\n\t    _data = bucket;\n\t\n\t    console.log(\"Prima di flatten\", angular.copy(_data));\n\t\n\t    _data = _data.map($utils.flatten);\n\t\n\t    console.log(\"Dopo di flatten\", angular.copy(_data));\n\t\n\t    var _csv = $utils.JSONToCSV(_data);\n\t\n\t    console.log(\"IL CSV\", angular.copy(_csv));\n\t    return $utils.exportAsCSV(_csv);\n\t  };\n\t\n\t  /************************************************************\n\t   *                         IMPORT/EXPORT\n\t   **************************************************************/\n\t  scope.importProducts = function () {\n\t    notie.alert(4, 'Contact us at info@marketcloud.it with import subject', 1.5);\n\t  };\n\t\n\t  // Shows the file selector dialog\n\t  scope.chooseJSONFile = function () {\n\t    scope.importMode = 'JSON';\n\t    document.querySelector(\"#JSONFileInput\").click();\n\t  };\n\t  scope.chooseCSVFile = function () {\n\t    scope.importMode = 'CSV';\n\t    document.querySelector(\"#CSVFileInput\").click();\n\t  };\n\t\n\t  // Updates the local copy of file contents\n\t  scope.JSONFileChanged = function () {\n\t\n\t    var file = document.getElementById(\"JSONFileInput\").files[0];\n\t\n\t    //Resetting the file input so we can re-try uploads\n\t    // of the same file and still detect changes\n\t    document.getElementById(\"JSONFileInput\").value = \"\";\n\t\n\t    if (file) {\n\t      var reader = new FileReader();\n\t      reader.readAsText(file, \"UTF-8\");\n\t      reader.onload = function (evt) {\n\t\n\t        // TODO add try catch to manage invalid json\n\t        try {\n\t          var jsonLines = JSON.parse(evt.target.result);\n\t        } catch (e) {\n\t          return Alert.error({\n\t            message: 'Invalid JSON file, please check file syntax'\n\t          });\n\t        }\n\t\n\t        scope.importJSON(jsonLines);\n\t      };\n\t      reader.onerror = function (evt) {\n\t        notie.alert(3, \"error reading file\", 2);\n\t      };\n\t    }\n\t  };\n\t\n\t  scope.CSVFileChanged = function () {\n\t\n\t    var file = document.getElementById(\"CSVFileInput\").files[0];\n\t\n\t    //Resetting the file input so we can re-try uploads\n\t    // of the same file and still detect changes\n\t    document.getElementById(\"CSVFileInput\").value = \"\";\n\t\n\t    if (file) {\n\t      var reader = new FileReader();\n\t      reader.readAsText(file, \"UTF-8\");\n\t      reader.onload = function (evt) {\n\t\n\t        // TODO add try catch to manage invalid json\n\t        var csvFileContent = evt.target.result;\n\t\n\t        var productsToImport = $utils.CSVToJSON(csvFileContent);\n\t\n\t        // Sacrifice brevity in the name of clarity for the greater good\n\t        // We flatten jsons before exporting to CSV so now we must unflatten them\n\t        productsToImport = productsToImport.map($utils.unflatten);\n\t\n\t        scope.importJSON(productsToImport);\n\t\n\t        // JSON is an array\n\t      };\n\t      reader.onerror = function (evt) {\n\t        notie.alert(3, \"error reading file\", 2);\n\t      };\n\t    }\n\t  };\n\t\n\t  // Upload json content\n\t  scope.uploadJSON = function () {\n\t    // Importing as json this file\n\t    var jsonLines = JSON.parse(scope.fileContent);\n\t    console.log(\"jsonLines  \", jsonLines);\n\t    scope.importJSON(jsonLines);\n\t  };\n\t\n\t  // Upload ccsv content\n\t  scope.uploadCSV = function () {\n\t    // Importing as json this file\n\t    // TODO CSV TO JSON\n\t    //var jsonLines = JSON.parse(scope.fileContent);\n\t    //scope.importJSON(jsonLines);\n\t    console.log(\"To implement...\");\n\t  };\n\t\n\t  // Import json\n\t  scope.importJSON = function (lines) {\n\t    var productsToImport = [];\n\t    var invalidItemIndex = null;\n\t    var invalidItems = [];\n\t\n\t    for (var i = 0; i < lines.length; i++) {\n\t      var line = lines[i];\n\t      if (line.type === \"simple_product\") {\n\t\n\t        var validation = $models.Product.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t          break;\n\t        }\n\t        productsToImport.push(line);\n\t      } else if (line.type === \"product_with_variants\") {\n\t\n\t        var validation = $models.ProductWithVariants.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t          break;\n\t        } else {\n\t          productsToImport.push(line);\n\t        }\n\t      } else if (line.type === \"variant\") {\n\t        if (!productsToImport[productsToImport.length - 1].variants) productsToImport[productsToImport.length - 1].variants = [];\n\t\n\t        var validation = $models.Variant.validate(line);\n\t        if (false === validation.valid) {\n\t          //notie.alert(3,\"Please check your CSV, line \"+i+\" is invalid.\",2);\n\t          Alert.error({\n\t            message: 'Please check your import file. Element number ' + String(i + 1) + ' is invalid.'\n\t          });\n\t          invalidItems.push(line);\n\t\n\t          break;\n\t        } else {\n\t          productsToImport[productsToImport.length - 1].variants.push(line);\n\t        }\n\t      } else {\n\t        notie.alert(3, \"Invalid data\", 2);\n\t      }\n\t    }\n\t\n\t    if (0 === invalidItems.length) {\n\t      // No invalid items, we can proceed\n\t      console.log(\"Ecco cosa importare\", productsToImport);\n\t      importData(productsToImport);\n\t    } else {\n\t      console.log(\"validation\", validation);\n\t      console.log(\"Import aborted due to invalid items\", invalidItems);\n\t    }\n\t  };\n\t\n\t  function importData(items) {\n\t    console.log(\"GOING TO IMPORT \" + items.length + \" PRODUCTS FROM FILE\");\n\t    var defer = $q.defer();\n\t    var promises = [];\n\t\n\t    var failures = [];\n\t\n\t    function push(r) {\n\t      promises.push(r);\n\t    }\n\t    function noop(r) {\n\t      failures.push(r);\n\t    }\n\t\n\t    function noop2(i) {\n\t      failures.push(i);\n\t      return function (error) {};\n\t    }\n\t\n\t    items.forEach(function (product) {\n\t      if (\"simple_product\" === product.type) promises.push($marketcloud.products.save(product).then(push).catch(function (error) {\n\t        failures.push(product);\n\t      }));\n\t\n\t      if (\"product_with_variants\" === product.type) {\n\t\n\t        var productWithoutVariants = angular.copy(product);\n\t        delete productWithoutVariants.variants;\n\t\n\t        var newPromise = $q(function (resolve, reject) {\n\t\n\t          return $marketcloud.products.save(productWithoutVariants).then(function (response) {\n\t            var product_id = response.data.data.id;\n\t            return $marketcloud.variants.save(product_id, product.variants);\n\t          }).then(resolve).catch(reject);\n\t        });\n\t\n\t        promises.push(newPromise.then(push).catch(function (error) {\n\t          failures.push(product);\n\t        }));\n\t      }\n\t    });\n\t\n\t    $q.all(promises).then(function (data) {\n\t\n\t      if (failures.length > 0) {\n\t        console.log(\"FAILURES\", failures);\n\t        var msg = '<p>Not every item was imported. Import failed for ' + failures.length + ' items:</p><ul>';\n\t\n\t        failures.forEach(function (item) {\n\t          msg += '<li class=\"text-left\">' + item.name + '</lI>';\n\t        });\n\t        msg += '</ul>';\n\t        Alert.warning({\n\t          message: msg\n\t        });\n\t      } else {\n\t        Alert.success({\n\t          message: 'All items were imported'\n\t        });\n\t      }\n\t      scope.loadPage(1);\n\t    }).catch(function () {\n\t      console.log(\"ALL FINISHED WITH ERROR\");\n\t      console.log(\"Failures\", failures);\n\t      notie.alert(2, \"Import succeded partially, Only the first \");\n\t      scope.loadPage(1);\n\t    });\n\t\n\t    return defer.promise;\n\t  }\n\t\n\t  /************************************************************\n\t   *                        DUPLICATE\n\t   **************************************************************/\n\t  scope.cloneProduct = function (product_to_duplicate) {\n\t    var product_to_save = angular.copy(product_to_duplicate);\n\t    delete product_to_save.id;\n\t    delete product_to_save.product_id;\n\t    delete product_to_save.variant_id;\n\t    delete product_to_save._id;\n\t\n\t    product_to_save.name += ' (Copy)';\n\t    product_to_save.published = false;\n\t\n\t    switch (product_to_save.stock_type) {\n\t      case 'track':\n\t        delete product_to_save['stock_status'];\n\t        break;\n\t      case 'status':\n\t        delete product_to_save['stock_level'];\n\t        break;\n\t      case 'infinite':\n\t        delete product_to_save['stock_level'];\n\t        delete product_to_save['stock_status'];\n\t        break;\n\t    }\n\t\n\t    // NOTE this uses client side info. it is a utility\n\t    //\n\t    delete product_to_save.variants;\n\t\n\t    $marketcloud.products.save(product_to_save).then(function (response) {\n\t      console.log(\"RESPONSATI\", response);\n\t      if (product_to_save.has_variants === true || product_to_save.type === 'product_with_variants') {\n\t        return http({\n\t          method: 'POST',\n\t          url: API_BASE_URL + '/products/' + response.data.data.id + '/variants',\n\t          data: product_to_duplicate.variants,\n\t          headers: {\n\t            Authorization: window.public_key + ':' + window.token\n\t          }\n\t        });\n\t      }\n\t    }).then(function (response) {\n\t      scope.loadPage(scope.pagination.currentPage);\n\t      notie.alert(1, 'Product successfully cloned', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\n\t   *                         QUERY OPERATIONS\n\t   **************************************************************/\n\t  scope.setPublishing = function (prod) {\n\t    $marketcloud.products.update(prod.id, {\n\t      published: prod.published\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.alterColumnNames = function (name) {\n\t    if (name === 'stock_level') {\n\t      return 'Inventory';\n\t    } else {\n\t      return name;\n\t    }\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t\n\t    if (scope.query.q === '') {\n\t      delete scope.query.q;\n\t    }\n\t\n\t    if (query) {\n\t      if (\"object\" !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new TypeError(\"loadData(query) query must be an object of filters\");\n\t\n\t      for (var k in query) {\n\t        scope.query[k] = query[k];\n\t      }\n\t    }\n\t\n\t    return $marketcloud.products.list(scope.query).then(function (response) {\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t\n\t        // This little trick allows us to get back to the latest state of the view when we hit a back button.\n\t        // We don't use $location because it has a weird behaviour appending #/#/path\n\t      };window.history.pushState(scope.query, \"List products\", '#/products?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\n\t\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteProduct = function (prod_id, index) {\n\t    http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + prod_id,\n\t      headers: {\n\t\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t\n\t    }).then(function (response) {\n\t      scope.loadPage(scope.pagination.currentPage);\n\t      notie.alert(1, 'Product deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditProductWithVariantsController', ['$scope', '$marketcloud', 'product', '$http', '$utils', function (scope, $marketcloud, product, $http, $utils) {\n\t  scope.customPropertiesData = {};\n\t\n\t  // Injecting resolve data into the controller\n\t  scope.product = product.data.data;\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('id', 'currencies', 'display_price', 'display_price_discount', 'has_variants', 'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'variants', 'variantsDefinition', 'product_id', 'variant_id', 'application_id');\n\t\n\t  for (var k in scope.product) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.product[k];\n\t      delete scope.product[k];\n\t    }\n\t  }\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.categories = [];\n\t  // Loading categories\n\t  $marketcloud.categories.list().then(function (response) {\n\t    scope.categories = response.data.data;\n\t  }).catch(function () {\n\t    console.error('An error has occurred while loading categories');\n\t  });\n\t\n\t  scope.brands = [];\n\t  // Loading brands\n\t\n\t  $marketcloud.brands.list().then(function (response) {\n\t    scope.brands = response.data.data;\n\t  }).catch(function () {\n\t    console.error('An error has occurred while loading brands');\n\t  });\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.newAttribute = {\n\t    name: null,\n\t    value: null,\n\t    type: null\n\t  };\n\t  scope.newAttribute.type = 'string';\n\t  scope.availableTypes = [{\n\t    name: 'String',\n\t    value: 'string'\n\t  }, {\n\t    name: 'Number',\n\t    value: 'number'\n\t  }, {\n\t    name: 'Boolean',\n\t    value: 'boolean'\n\t  }];\n\t\n\t  scope.filterNotNullProperties = function (item) {\n\t    var result = {};\n\t    for (var k in item) {\n\t      if (item[k]) {\n\t        result[k] = item[k];\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t\n\t  scope.newVariant = {};\n\t  scope.saveNewVariant = function () {\n\t    var variantToSave = angular.copy(scope.product);\n\t    // Removing useless stuff in the variant\n\t    delete variantToSave['variants'];\n\t    delete variantToSave['type'];\n\t    delete variantToSave['variantsDefinition'];\n\t    delete variantToSave['is_master'];\n\t    delete variantToSave['has_variants'];\n\t    delete variantToSave['published'];\n\t\n\t    for (var k in scope.newVariant) {\n\t      if (scope.product.variantsDefinition[k].indexOf(scope.newVariant[k]) < 0) {\n\t        scope.product.variantsDefinition[k].push(scope.newVariant[k]);\n\t      }\n\t      variantToSave[k] = scope.newVariant[k];\n\t    }\n\t\n\t    // Devo aggiornare products perch variants definition  cambiato\n\t    // poi salvo la variante\n\t\n\t    scope.updateProduct().then(function (response) {\n\t      return $http({\n\t        method: 'POST',\n\t        url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n\t        data: variantToSave,\n\t        headers: {\n\t          Authorization: window.public_key + ':' + window.token\n\t        }\n\t      });\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant successfully created', 1);\n\t      scope.product = response.data.data;\n\t      $('#addVariantModal').modal('hide');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Variants not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.deleteVariant = function (variant, i) {\n\t    return $http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant deleted', 1.5);\n\t      scope.product.variants.splice(i, 1);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.updateProduct = function () {\n\t    var payload = angular.copy(scope.product);\n\t\n\t    // let's re-assemble the product first.\n\t    for (var k in scope.customPropertiesData) {\n\t      payload[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    switch (payload.stock_type) {\n\t      case 'infinite':\n\t        delete payload.stock_level;\n\t        delete payload.stock_status;\n\t        break;\n\t\n\t      case 'status':\n\t        delete payload.stock_level;\n\t        break;\n\t\n\t      case 'track':\n\t        delete payload.stock_status;\n\t        break;\n\t    }\n\t\n\t    return $marketcloud.products.update(payload.id, payload).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'Update failed', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewProductWithVariantsController', ['$scope', '$http', '$location', '$marketcloud', '$utils', function (scope, $http, location, $marketcloud, $utils) {\n\t  scope.categories = [];\n\t  scope.error = null;\n\t  scope.newCategory = {};\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  // Temporary storage for variants\n\t  // while theyre being built\n\t  scope.addedVariants = {};\n\t\n\t  // mapping non-core attributes into scope.customPropertiesData\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t  coreProperties.push('id', 'display_price', 'display_price_discount', 'has_variants', 'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'variants', 'variantsDefinition', 'product_id', 'variant_id', 'application_id');\n\t\n\t  scope.isBoolean = function (d) {\n\t    return typeof d === 'boolean';\n\t  };\n\t\n\t  scope.isString = function (d) {\n\t    return typeof d === 'string';\n\t  };\n\t\n\t  scope.isNumber = function (d) {\n\t    return typeof d === 'number';\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.loadCategories = function () {\n\t    $marketcloud.categories.list({}).then(function (response) {\n\t      scope.categories = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading categories', 2);\n\t    });\n\t  };\n\t\n\t  // Initializing the categories array\n\t  scope.loadCategories();\n\t\n\t  scope.query = {\n\t    // The product must be simple_product as this\n\t    type: 'product_with_variants'\n\t  };\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.applyTemplate = function (product) {\n\t    var tpl = angular.copy(product);\n\t\n\t    console.log(\"====================\", \"Vado ad applicare questo template\", angular.copy(tpl), \"==========================\");\n\t\n\t    delete tpl['id'];\n\t\n\t    scope.addedVariants2 = [];\n\t\n\t    for (var k in tpl.variantsDefinition) {\n\t      var newAddedVariant = {\n\t        name: k,\n\t        values: tpl.variantsDefinition[k].map(function (v) {\n\t          return { text: v };\n\t        })\n\t      };\n\t      scope.addedVariants2.push(newAddedVariant);\n\t    }\n\t\n\t    scope.computedVariants = tpl.variants.map(function (item) {\n\t      var v = angular.copy(item);\n\t      delete v[\"id\"];\n\t      delete v[\"product_id\"];\n\t      delete v[\"variant_id\"];\n\t      return v;\n\t    });\n\t\n\t    console.log(\"Ora computedVariants \", angular.copy(scope.computedVariants));\n\t\n\t    delete tpl.variants;\n\t\n\t    scope.product = tpl;\n\t\n\t    // Making sure that inventory is initialized\n\t    scope.product.stock_type = tpl.stock_type || \"status\";\n\t    scope.product.stock_status = tpl.stock_status || \"in_stock\";\n\t\n\t    console.log(\"Applicato questo template\", tpl);\n\t\n\t    //scope.updateVariantsConfiguration()\n\t\n\t    console.log(\"Dopo updateVariantsConfiguration\", angular.copy(scope.computedVariants));\n\t    // Taking care of variants\n\t\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  // Loading products right away\n\t  scope.loadProducts();\n\t\n\t  scope.saveCategory = function () {\n\t    $marketcloud.categories.save(scope.newCategory).then(function (response) {\n\t      $('#newCategoryModal').modal('hide');\n\t      scope.categories.push(scope.newCategory);\n\t      scope.newCategory = {};\n\t    }).catch(function (response) {\n\t      $('#newCategoryModal').hide();\n\t      notie.alert(3, 'An error has occurred. Category not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.loadBrands = function () {\n\t    $marketcloud.brands.list({}).then(function (response) {\n\t      scope.brands = response.data.data;\n\t    }).catch(function () {\n\t      notie.alert(2, 'An error has occurred while loading brands', 2);\n\t    });\n\t  };\n\t  // Initializing the brands array\n\t  scope.loadBrands();\n\t  window.inspect = function () {\n\t    console.log(angular.copy(scope.product));\n\t  };\n\t\n\t  scope.saveBrand = function () {\n\t    $marketcloud.brands.save(scope.newBrand).then(function (response) {\n\t      $('#newBrandModal').modal('hide');\n\t      scope.brands.push(scope.newBrand);\n\t      scope.newBrand = {};\n\t    }).catch(function (response) {\n\t      $('#newBrandModal').hide();\n\t      notie.alert(3, 'An error has occurred. Brand not saved', 1);\n\t    });\n\t  };\n\t\n\t  scope.product = {\n\t    type: 'product_with_variants',\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    stock_status: 'in_stock',\n\t    images: [],\n\t    variants: {},\n\t    published: false,\n\t    has_variants: true // Flag for legacy compatibility\n\t  };\n\t\n\t  scope.customPropertiesData = {};\n\t  // This contains validation Errors\n\t\n\t  // Array of new properties's names (strings)\n\t  scope.customPropertiesNames = [];\n\t\n\t  scope.computedVariants = [];\n\t\n\t  // Each tyme the parent's stock type is changed, the variants must be updated\n\t  scope.updateStockManagementForVariants = function () {\n\t    var stock_type = scope.product.stock_type;\n\t\n\t    if (stock_type === 'track') {\n\t      delete scope.product.stock_status;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_status'];\n\t      });\n\t      return;\n\t    }\n\t\n\t    if (stock_type === 'status') {\n\t      delete scope.product.stock_level;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_level'];\n\t      });\n\t      return;\n\t    }\n\t\n\t    if (stock_type === 'infinite') {\n\t      delete scope.product.stock_status;\n\t      delete scope.product.stock_level;\n\t      scope.computedVariants.forEach(function (v) {\n\t        delete v['stock_level'];\n\t        delete v['stock_status'];\n\t      });\n\t      return;\n\t    }\n\t  };\n\t\n\t  scope.properties_to_inherit = ['price', 'sku', 'stock_level', 'stock_type', 'stock_status'\n\t  // Add here more props you want to override now!\n\t  // e.g. stock_level\n\t\n\t  ];\n\t\n\t  function transformVariantObject(o) {\n\t    var buf = [];\n\t    for (var k in o) {\n\t      buf.push({\n\t        name: k,\n\t        values: o[k].map(function (a) {\n\t          return a.text;\n\t        })\n\t      });\n\t    }\n\t    return buf;\n\t  }\n\t\n\t  function getArrayOfVariants(arrayOfVariants) {\n\t    if (arrayOfVariants.length === 0) {\n\t      return [];\n\t    }\n\t    if (arrayOfVariants.length === 1) {\n\t      var v = arrayOfVariants[0];\n\t      var buf = [];\n\t      v.values.forEach(function (e) {\n\t        var o = {};\n\t        o[v.name] = e;\n\t        buf.push(o);\n\t      });\n\t      return buf;\n\t    }\n\t    var output = arrayOfVariants.reduce(function (a, b) {\n\t      if (!(a instanceof Array)) {\n\t        // Se non  un array,  la prima botta di reduce,\n\t        // fatta con la prima variante (el 0 di arrayOfVariants)\n\t        var buf = [];\n\t        a.values.forEach(function (el_a) {\n\t          b.values.forEach(function (el_b) {\n\t            var o = {};\n\t            o[a.name] = el_a;\n\t            o[b.name] = el_b;\n\t            buf.push(o);\n\t          });\n\t        });\n\t        return buf;\n\t      } else {\n\t        // Se  un array, allora non  la prima botta di reduce\n\t        // Quindi per ogni elemento dell''array finale, aggiungo pezzi di variante\n\t        var buf = [];\n\t        b.values.forEach(function (el_b) {\n\t          // Ad ogni elemento dell array di varianti costruito al passo\n\t          // precedente aggiungo un pezzo di nuova variante\n\t          a.forEach(function (el_a) {\n\t            var o = JSON.parse(JSON.stringify(el_a));\n\t            o[b.name] = el_b;\n\t            buf.push(o);\n\t          });\n\t        });\n\t        return buf;\n\t      }\n\t    });\n\t    return output;\n\t  }\n\t\n\t  function attachInheritedProperties(variants) {\n\t    return variants.map(function (variant) {\n\t      console.log(\"ATTACHO LE INHERITED PROPERTIES DA \", angular.copy(scope.product));\n\t      scope.properties_to_inherit.forEach(function (i, index) {\n\t\n\t        if (scope.product[i]) {\n\t\n\t          variant[i] = scope.product[i];\n\t        }\n\t      });\n\t      return variant;\n\t    });\n\t  }\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.properties_to_inherit.indexOf(k) < 0 && k !== 'save') {\n\t        // The property k is not an inherited property but a variant\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t  };\n\t\n\t  // Return a subset of the object in which only variant related\n\t  // keys are kept\n\t  scope.filterVariantProps = function (o) {\n\t    var variantNames = scope.addedVariants2.map(function (v) {\n\t      return v.name;\n\t    });\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (variantNames.indexOf(k) > -1) {\n\t        // The property k is not an inherited property but a variant\n\t        p[k] = o[k];\n\t      }\n\t    }\n\t    return p;\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': 'red'\n\t    }, {\n\t      'color': 'green'\n\t    }, {\n\t      'color': 'blue'\n\t    }, {\n\t      'color': 'pink'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  /*\n\t    variants Array<{name :\"size\", values : [\"cl\",\"l\",\"s\"]}\n\t  */\n\t  function getArrayOfVariants2(variants) {\n\t    variants = variants.filter(function (v) {\n\t      return v.values.length > 0;\n\t    });\n\t\n\t    if (variants.length === 0) {\n\t      return [];\n\t    }\n\t\n\t    if (variants.length === 1) {\n\t      var result = [];\n\t      variants[0].values.forEach(function (v) {\n\t        var o = {};\n\t        o[variants[0].name] = v;\n\t        result.push(o);\n\t      });\n\t      return result;\n\t    }\n\t\n\t    var combine = function combine(v1, v2) {\n\t      var output = [];\n\t\n\t      // 2 cases, one is that v1 is a {name,values}\n\t      // other case is that v1 is the already created bag\n\t      // [{size:x, color : red}]\n\t      if (v1 instanceof Array) {\n\t        var _out = [];\n\t        v1.forEach(function (variant) {\n\t          v2.values.forEach(function (value) {\n\t            var o = angular.copy(variant);\n\t            o[v2.name] = value;\n\t            _out.push(o);\n\t          });\n\t        });\n\t        return _out;\n\t      }\n\t\n\t      v1.values.forEach(function (val1) {\n\t        v2.values.forEach(function (val2) {\n\t          var o = {};\n\t          o[v1.name] = val1;\n\t          o[v2.name] = val2;\n\t\n\t          output.push(o);\n\t        });\n\t      });\n\t      return output;\n\t    };\n\t\n\t    var counter = 0;\n\t    var out = [];\n\t\n\t    while (variants[counter + 1]) {\n\t      out = combine(variants[counter], variants[counter + 1]);\n\t      variants[counter + 1] = out;\n\t      counter++;\n\t    }\n\t\n\t    return out;\n\t  }\n\t\n\t  scope.deleteVariant = function (variantName, $index) {\n\t    scope.addedVariants2.splice($index, 1);\n\t    scope.updateVariantsConfiguration();\n\t  };\n\t\n\t  scope.addedVariants2 = [];\n\t  scope.addEmptyVariant = function () {\n\t    scope.addedVariants2.push({\n\t      name: '',\n\t      values: []\n\t    });\n\t  };\n\t\n\t  scope.updateVariantsConfiguration = function () {\n\t    // Transforming addedVariants2\n\t    scope.computedVariants = [];\n\t    scope.addedVariants = {};\n\t    scope.addedVariants2.forEach(function (variant) {\n\t      scope.addedVariants[variant.name] = variant.values.map(function (i) {\n\t        return i.text;\n\t      });\n\t\n\t      variant.values = variant.values.map(function (i) {\n\t        return i.text;\n\t      });\n\t    });\n\t\n\t    var temp_ComputedVariants = getArrayOfVariants2(angular.copy(scope.addedVariants2));\n\t\n\t    scope.computedVariants = temp_ComputedVariants;\n\t    scope.computedVariants = attachInheritedProperties(temp_ComputedVariants);\n\t\n\t    scope.computedVariants.forEach(function (v) {\n\t      v.save = true;\n\t    });\n\t\n\t    // Ricalcolo le variants definition, le added sono scope.addedVariants\n\t    scope.product.variantsDefinition = scope.addedVariants;\n\t  };\n\t\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-default', 'label-info', 'label-success', 'label-warning', 'label-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (overwrites) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    scope.product.variants = [];\n\t\n\t    // Custom properties and variants cannot be validated through Schematic.\n\t    var props_to_validate = {};\n\t    var known_props = Models.Product.getPropertyNames();\n\t    for (var k in scope.product) {\n\t      if (known_props.indexOf(k) > -1) {\n\t        props_to_validate[k] = scope.product[k];\n\t      }\n\t    }\n\t    var validation = Models.Product.validate(props_to_validate);\n\t\n\t    if (validation.valid === false) {\n\t      scope.errorField = validation.invalidPropertyName;\n\t\n\t      if (validation.failedValidator === 'required') {\n\t        scope.error = 'The ' + scope.errorField + ' field is required';\n\t      } else if (validation.failedValidator === 'min') {\n\t        if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n\t          scope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\n\t        } else {\n\t          scope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t        }\n\t      } else if (validation.failedValidator === 'max') {\n\t        if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n\t          scope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\n\t        } else {\n\t          scope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t        }\n\t      } else {\n\t        scope.error = 'The ' + scope.errorField + ' field has an invalid value (' + props_to_validate[scope.errorField] + ')';\n\t      }\n\t      return;\n\t    }\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.product[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    var variantsToSave = angular.copy(scope.computedVariants.filter(function (variant) {\n\t      return variant.save === true;\n\t    }).map(function (variant) {\n\t      var obj = angular.copy(scope.product);\n\t\n\t      // Removing useless stuff in the variant\n\t      delete obj['variants'];\n\t      delete obj['variantsDefinition'];\n\t      delete obj['is_master'];\n\t      delete obj['has_variants'];\n\t      delete obj['published'];\n\t\n\t      for (var k in variant) {\n\t        obj[k] = variant[k];\n\t      }\n\t\n\t      // Remove the flag used to distinguish\n\t      // between variants to save and not to save\n\t      delete variant['save'];\n\t\n\t      return obj;\n\t    }));\n\t\n\t    for (var k in overwrites) {\n\t      scope.product[k] = overwrites[k];\n\t    }\n\t    $marketcloud.products.save(scope.product).then(function (response) {\n\t      // Now i must save variants.\n\t\n\t      // Ogni variante deve essere pretrattata\n\t      // Ad esempio devo aggiungere il campo is_variant e images\n\t      /* if ('undefined' !== mixpanel)\n\t        mixpanel.track('products.create') */\n\t\n\t      var savedProduct = response.data.data;\n\t\n\t      $http({\n\t        method: 'POST',\n\t        url: API_BASE_URL + '/products/' + savedProduct.id + '/variants',\n\t        data: variantsToSave,\n\t        headers: {\n\t          Authorization: window.public_key + ':' + window.token\n\t        }\n\t      }).then(function (response) {\n\t        notie.alert(1, 'Product successfully created', 1);\n\t        location.path('/products');\n\t      }).catch(function (response) {\n\t        notie.alert(2, 'An error has occurred. Variants not saved', 1);\n\t      });\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').controller('EditSimpleProductController', EditSimpleProductController);\n\t\n\t  EditSimpleProductController.$inject = ['$scope', '$marketcloud', 'product', '$http', '$utils', '$validation'];\n\t\n\t  function EditSimpleProductController(scope, $marketcloud, product, $http, $utils, $validation) {\n\t    // Injecting resolve data into the controller\n\t    scope.product = product.data.data;\n\t\n\t    // This will hold custom properties for further processing\n\t    scope.customPropertiesData = {};\n\t\n\t    // Should we be able to edit the slug? this is a on/off\n\t    scope.unsafeSlug = false;\n\t\n\t    // mapping non-core attributes into scope.customPropertiesData\n\t    var coreProperties = Models.Product.getPropertyNames();\n\t\n\t    scope.schema = Models.Product.schema;\n\t\n\t    coreProperties.push('id', 'currencies', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t    'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.updateSlug = function () {\n\t      scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t    };\n\t\n\t    scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n\t      var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\n\t\n\t      // We ensure that the indexes exist\n\t      if (fromIndex > target.length - 1) {\n\t        return;\n\t      }\n\t\n\t      // First we remove the element to move\n\t      target.splice(fromIndex, 1);\n\t\n\t      // Then we add it to the desired position\n\t      target.splice(toIndex, 0, toMove);\n\t    };\n\t\n\t    // This method must be implemented in order to\n\t    // make the media manager work\n\t    scope.getImagesContainer = function () {\n\t      return scope.product.images;\n\t    };\n\t\n\t    scope.removeImage = function (i) {\n\t      scope.product.images.splice(i, 1);\n\t    };\n\t\n\t    scope.newAttribute = {\n\t      name: null,\n\t      value: null,\n\t      type: null\n\t    };\n\t    scope.newAttribute.type = 'string';\n\t    scope.availableTypes = [{\n\t      name: 'String',\n\t      value: 'string'\n\t    }, {\n\t      name: 'Number',\n\t      value: 'number'\n\t    }, {\n\t      name: 'Boolean',\n\t      value: 'boolean'\n\t    }];\n\t\n\t    scope.filterNotNullProperties = function (item) {\n\t      var result = {};\n\t      for (var k in item) {\n\t        if (item[k]) {\n\t          result[k] = item[k];\n\t        }\n\t      }\n\t      return result;\n\t    };\n\t\n\t    scope.updateProduct = function () {\n\t      // let's re-assemble the product first.\n\t      for (var k in scope.customPropertiesData) {\n\t        scope.product[k] = scope.customPropertiesData[k];\n\t      }\n\t\n\t      switch (scope.product.stock_type) {\n\t        case 'status':\n\t          delete scope.product.stock_level;\n\t          break;\n\t\n\t        case 'track':\n\t          delete scope.product.stock_status;\n\t          break;\n\t      }\n\t\n\t      $marketcloud.products.update(scope.product.id, scope.product).then(function (response) {\n\t        notie.alert(1, 'Update Succeded', 1.5);\n\t      }).catch(function (error) {\n\t        console.log(\"erore\", error);\n\t        if (400 === error.status) {\n\t\n\t          notie.alert(2, 'Please check the data you entered', 1.5);\n\t\n\t          var validation = error.data.errors[0];\n\t          var invalidPropertyName = \"product.\" + validation.invalidPropertyName;\n\t\n\t          var element = angular.element('[ng-model=\"' + invalidPropertyName + '\"]').parent();\n\t\n\t          $validation.showErrorMessage(validation, '[ng-model=\"' + invalidPropertyName + '\"]');\n\t        } else notie.alert(3, 'Update failed', 1.5);\n\t      });\n\t    };\n\t  }\n\t})();\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('NewSimpleProductController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$models', function (scope, $http, location, $marketcloud, $utils, Models) {\n\t  scope.error = null;\n\t\n\t  scope.brands = [];\n\t  scope.newBrand = {};\n\t\n\t  scope.validation = {\n\t    valid: true\n\t\n\t    // mapping non-core attributes into scope.customPropertiesData\n\t  };console.log(\"Cerco qui le core propseties\", Models.Product, Models);\n\t  var coreProperties = Models.Product.getPropertyNames();\n\t\n\t  coreProperties.push('id', 'display_price_discount', 'display_price', 'has_variants', // for legacy reasons\n\t  'type', 'media', 'tax_id', 'locales', 'seo', 'requires_shipping', 'product_id', 'variant_id', 'application_id');\n\t\n\t  scope.product = {\n\t    price: null,\n\t    name: '',\n\t    description: '',\n\t    stock_type: 'status',\n\t    images: [],\n\t    media: [],\n\t    published: false,\n\t    type: 'simple_product'\n\t\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product.images.splice(i, 1);\n\t  };\n\t\n\t  scope.unsafeSlug = false;\n\t\n\t  scope.updateSlug = function () {\n\t    scope.product.slug = $utils.getSlugFromString(scope.product.name);\n\t  };\n\t\n\t  scope.applyTemplate = function (product) {\n\t    var tpl = angular.copy(product);\n\t\n\t    delete tpl['id'];\n\t\n\t    scope.product = tpl;\n\t\n\t    for (var k in scope.product) {\n\t      if (coreProperties.indexOf(k) < 0) {\n\t        scope.customPropertiesData[k] = scope.product[k];\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.query = {\n\t    // The product must be simple_product as this\n\t    type: 'simple_product'\n\t  };\n\t  scope.prepareRegex = function () {\n\t    scope.query.name.$options = 'i';\n\t  };\n\t\n\t  scope.showTheList = false;\n\t  scope.showList = function () {\n\t    scope.showTheList = true;\n\t  };\n\t  scope.hideList = function () {\n\t    window.setTimeout(function () {\n\t      scope.showTheList = false;\n\t      scope.$apply();\n\t    }, 200);\n\t  };\n\t\n\t  scope.loadProducts = function (query) {\n\t    query = query || scope.query;\n\t\n\t    $marketcloud.products.list(query).then(function (response) {\n\t      scope.products = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  // Loading products right away\n\t  scope.loadProducts();\n\t\n\t  scope.productError = null;\n\t  scope.newCustomProperty = {};\n\t  scope.customPropertiesData = {};\n\t  // This contains validation Errors\n\t  scope.Forms = {};\n\t  scope.Forms.newCustomProperty = {\n\t    name: null,\n\t    value: null\n\t\n\t    // Array of new properties's names (strings)\n\t  };scope.customPropertiesNames = [];\n\t\n\t  scope.properties_to_inherit = ['price', 'sku', 'stock_level', 'stock_type', 'stock_status'\n\t  // Add here more props you want to override now!\n\t  // e.g. stock_level\n\t\n\t  ];\n\t\n\t  scope.hideErrors = function () {\n\t    scope.error = null;\n\t    scope.errorField = null;\n\t  };\n\t\n\t  scope.saveProduct = function (overwrites) {\n\t    for (var k in scope.product) {\n\t      if (scope.product[k] === null) {\n\t        delete scope.product[k];\n\t      }\n\t    }\n\t\n\t    scope.hideErrors();\n\t\n\t    // this scope properti is bound to the error-message component\n\t    // TODO schematic needs custom validator, so i can do something like\n\t\n\t    scope.validation = Models.Product.validate(scope.product);\n\t\n\t    if (scope.validation.valid === false) {\n\t      return;\n\t    }\n\t\n\t    for (var kk in scope.customPropertiesData) {\n\t      scope.product[kk] = scope.customPropertiesData[kk];\n\t    }\n\t\n\t    for (var key in scope.product) {\n\t      if (scope.product[key] === null) {\n\t        delete scope.product[key];\n\t      }\n\t    }\n\t\n\t    for (var k in overwrites) {\n\t      scope.product[k] = overwrites[k];\n\t    }\n\t\n\t    $marketcloud.products.save(scope.product).then(function (response) {\n\t      notie.alert(1, 'Product saved successfully.', 1.5);\n\t      location.path('/products');\n\t    }).catch(function (error) {\n\t\n\t      if (error.status === 400) {\n\t        scope.validation = error.data.errors[0];\n\t        return;\n\t      }\n\t\n\t      notie.alert(2, 'An error has occurred. Product not saved', 1);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditPromotionController', ['$scope', '$http', '$marketcloud', 'promotion', function (scope, http, $marketcloud, promotion) {\n\t  scope.promotion = promotion.data.data;\n\t  // Initializing stuff\n\t  scope.newCondition = {};\n\t  scope.newEffect = {};\n\t\n\t  scope.save = function () {\n\t    scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion);\n\t    if (scope.$promotionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    $marketcloud.promotions.update(scope.promotion.id, scope.promotion).then(function (response) {\n\t      notie.alert(1, 'Promotion saved', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Promotion not saved', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition);\n\t    if (scope.$newConditionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.removeCondition = function (i) {\n\t    scope.promotion.conditions.splice(i, 1);\n\t  };\n\t  scope.removeEffect = function (i) {\n\t    scope.promotion.effects.splice(i, 1);\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect);\n\t\n\t    if (scope.$newEffectValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t}]);\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('NewPromotionController', ['$scope', '$http', '$marketcloud', '$location', function (scope, http, $marketcloud, location) {\n\t  // Defaults\n\t  scope.promotion = {\n\t    name: null,\n\t    conditions: [],\n\t    effects: [],\n\t    active: false,\n\t    priority: 0\n\t  };\n\t  scope.newCondition = {};\n\t  scope.newEffect = {};\n\t\n\t  scope.save = function () {\n\t    scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion);\n\t    if (scope.$promotionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    $marketcloud.promotions.save(scope.promotion).then(function (response) {\n\t      notie.alert(1, 'Promotion saved', 1.5);\n\t      location.path('/promotions');\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Promotion not saved', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.addCondition = function () {\n\t    scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition);\n\t    if (scope.$newConditionValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.conditions.push(scope.newCondition);\n\t    scope.newCondition = {};\n\t  };\n\t  scope.removeCondition = function (i) {\n\t    scope.promotion.conditions.splice(i, 1);\n\t  };\n\t  scope.removeEffect = function (i) {\n\t    scope.promotion.effects.splice(i, 1);\n\t  };\n\t  scope.addEffect = function () {\n\t    scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect);\n\t\n\t    if (scope.$newEffectValidation.valid !== true) {\n\t      return;\n\t    }\n\t\n\t    scope.promotion.effects.push(scope.newEffect);\n\t    scope.newEffect = {};\n\t  };\n\t}]);\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('ListResourcesController', ['$scope', 'resources', 'resourceName', '$q', '$marketcloud', 'dependencies', '$utils', function (scope, resources, resource_name, $q, $marketcloud, $dependencies, $utils) {\n\t  scope.resources = resources.data.data;\n\t  scope.dependencies = {};\n\t\n\t  scope.$dependencies = $dependencies;\n\t\n\t  scope.pagination = $utils.getPaginationFromHTTPResponse(resources);\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.prepareRegex = function () {\n\t    for (var k in scope.query) {\n\t      if (_typeof(scope.query[k]) === 'object' && scope.query[k].hasOwnProperty('$regex')) {\n\t        scope.query[k]['$options'] = 'i';\n\t      }\n\t    }\n\t  };\n\t\n\t  scope.toggleAll = function () {\n\t    scope.resources.forEach(function (p) {\n\t      p.selected = scope.selectAll;\n\t    });\n\t  };\n\t\n\t  scope.getSelectedItems = function () {\n\t    return scope.resources.filter(function (p) {\n\t      return p.selected === true;\n\t    });\n\t  };\n\t\n\t  scope.update = function (id, update) {\n\t    return $marketcloud[resource_name].update(id, update).then(function (response) {\n\t      notie.alert(1, 'Item updated.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.bulkDelete = function () {\n\t    notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud[resource_name].delete(item.id));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been deleted', 1.5);\n\t        scope.loadData();\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t  scope.bulkUpdate = function (update) {\n\t    notie.confirm('Update ' + scope.getSelectedItems().length + ' items?', 'Update', 'Cancel', function () {\n\t      var defer = $q.defer();\n\t\n\t      var promises = [];\n\t\n\t      scope.getSelectedItems().forEach(function (item) {\n\t        promises.push($marketcloud[resource_name].update(item.id, update));\n\t      });\n\t\n\t      $q.all(promises).then(function () {\n\t        notie.alert(1, 'All items have been updated', 1.5);\n\t        scope.loadData();\n\t      });\n\t\n\t      return defer.promise;\n\t    });\n\t  };\n\t\n\t  scope.bulkJSONExport = function () {\n\t    // If there are no selected items, we export the whole current view\n\t    if (scope.getSelectedItems().length === 0) return $utils.exportAsJSON(scope.resources);\n\t\n\t    $utils.exportAsJSON(scope.getSelectedItems());\n\t  };\n\t\n\t  scope.toggle = function (resource) {\n\t    $marketcloud[resource_name].update(resource.id, resource).then(function (response) {\n\t      notie.alert(1, 'Update successful', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = page_number;\n\t    return scope.loadData();\n\t  };\n\t\n\t  scope.resetQuery = function () {\n\t    var currentPage = scope.query.page || 1;\n\t    scope.query = {\n\t      per_page: 20,\n\t      page: currentPage\n\t    };\n\t  };\n\t  scope.loadData = function (query) {\n\t\n\t    if (query) {\n\t      if (\"object\" !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new TypeError(\"loadData(query) query must be an object of filters\");\n\t\n\t      for (var k in query) {\n\t        scope.query[k] = query[k];\n\t      }\n\t    }\n\t\n\t    if ($dependencies.queryOverrides) {\n\t      for (var k in $dependencies.queryOverrides) {\n\t        scope.query[k] = $dependencies.queryOverrides[k];\n\t      }\n\t    }\n\t\n\t    return $marketcloud[resource_name].list(scope.query).then(function (response) {\n\t\n\t      scope.resources = response.data.data;\n\t\n\t      scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.delete = function (resource_id, index) {\n\t    $marketcloud[resource_name].delete(resource_id).then(function (response) {\n\t      scope.loadData();\n\t      notie.alert(1, 'Item deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\n\t   *                        DUPLICATE\n\t   **************************************************************/\n\t  scope.clone = function (instance) {\n\t\n\t    var toSave = angular.copy(instance);\n\t    delete toSave.id;\n\t    delete toSave._id;\n\t\n\t    if (toSave.name) toSave.name += ' (Copy)';else if (toSave.title) toSave.title += ' (Copy)';\n\t\n\t    $marketcloud[resource_name].save(toSave).then(function (response) {\n\t      scope.loadData();\n\t      notie.alert(1, \"Item successfully cloned\", 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SettingsController', ['$scope', '$http', 'Currencies', 'Timezones', 'Countries', '$application', function (scope, http, currencies, timezones, countries, $application) {\n\t  scope.countries = countries;\n\t  scope.timezones = timezones;\n\t  scope.application = $application.get();\n\t\n\t  scope.images = [];\n\t\n\t  scope.application.apply_discounts_before_taxes = Boolean(scope.application.apply_discounts_before_taxes);\n\t\n\t  scope.currencies = Object.keys(currencies).map(function (c) {\n\t    return currencies[c];\n\t  }).map(function (c) {\n\t    c.label = c.name + ' (' + c.symbol + ')';\n\t    return c;\n\t  }).sort(function (a, b) {\n\t    a = a.name;\n\t    b = b.name;\n\t    if (a > b) {\n\t      return 1;\n\t    } else if (b > a) {\n\t      return -1;\n\t    } else {\n\t      return 0;\n\t    }\n\t  });\n\t\n\t  scope.tax_options = [{\n\t    value: 'nothing',\n\t    label: 'Don\\'t tax'\n\t  }, {\n\t    value: 'products_only',\n\t    label: 'Tax products only'\n\t  }, {\n\t    value: 'shipping_only',\n\t    label: 'Tax shipping only'\n\t  }, {\n\t    value: 'all',\n\t    label: 'Tax shipping and products'\n\t  }];\n\t\n\t  scope.refreshApplicationData = function () {\n\t    $http({\n\t      url: '/applications/list/' + Number(scope.application.id),\n\t      method: 'GET'\n\t    }).then(function (response) {\n\t      $application.set(response.data.data);\n\t    }).catch(function (error) {\n\t      notie.alert(3, \"An error has occurred while reloading application's data. Refreshing the page...\");\n\t      window.location.reload();\n\t    });\n\t  };\n\t\n\t  scope.updateSettings = function () {\n\t    var payload = {\n\t      name: scope.application.name,\n\t      url: scope.application.url,\n\t      timezone: scope.application.timezone,\n\t      currency_code: scope.application.currency_code,\n\t      tax_rate: scope.application.tax_rate,\n\t      tax_type: scope.application.tax_type,\n\t      apply_discounts_before_taxes: scope.application.apply_discounts_before_taxes,\n\t      email_address: scope.application.email_address,\n\t      company_name: scope.application.company_name,\n\t      company_taxid: scope.application.company_taxid,\n\t      company_country: scope.application.company_country,\n\t      company_state: scope.application.company_state,\n\t      company_city: scope.application.company_city,\n\t      company_address: scope.application.company_address,\n\t      company_postalcode: scope.application.company_postalcode,\n\t      invoices_prefix: scope.application.invoices_prefix\n\t    };\n\t\n\t    if (scope.images.length >= 1) {\n\t      payload.logo = scope.images[0];\n\t    }\n\t\n\t    http({\n\t      method: 'PUT',\n\t      url: window.API_BASE_URL + '/application',\n\t      data: payload,\n\t      headers: {\n\t        'Content-Type': 'application/json',\n\t        'Authorization': window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Application successfully updated', 1);\n\t    }).catch(function (err) {\n\t      notie.alert(3, 'An error has occurred.');\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tvar controller = null;\n\tapp.controller('EditShippingController', ['$scope', '$http', '$location', 'Countries', 'shipping', '$marketcloud', '$validation', '$models', function (scope, http, location, countries, shippingRequest, $marketcloud, $validation, $models) {\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function () {\n\t    var o = {};\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(scope.shipping[k]);\n\t      }\n\t    }\n\t    return o;\n\t  };\n\t\n\t  scope.howManyRules = function (o) {\n\t    var count = 0;\n\t\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        count++;\n\t      }\n\t    }\n\t    return count;\n\t  };\n\t\n\t  scope.countries = angular.copy(countries);\n\t  scope.countries.unshift({\n\t    name: 'All countries',\n\t    code: 'ALL'\n\t  }, {\n\t    name: 'Europe',\n\t    code: 'EUROPE'\n\t  });\n\t\n\t  scope.shipping = {\n\t    availability: 'ALL',\n\t    base_cost: 0,\n\t    per_item_cost: 0,\n\t    zones: []\n\t  };\n\t\n\t  scope.shipping = shippingRequest.data.data;\n\t\n\t  scope.shipping.zones = scope.shipping.zones || [];\n\t\n\t  scope.newRule = {};\n\t  scope.addRule = function () {\n\t    scope.shipping[scope.newRule.name] = scope.newRule.value;\n\t\n\t    scope.newRule = {};\n\t  };\n\t\n\t  scope.removeRule = function (name) {\n\t    scope.shipping[name] = null;\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.newZone = {};\n\t  scope.addZone = function () {\n\t    scope.shipping.zones.push(scope.newZone);\n\t    scope.newZone = null;\n\t  };\n\t  scope.removeZone = function ($index) {\n\t    scope.shipping.zones.splice($index, 1);\n\t  };\n\t\n\t  scope.updateShipping = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.shippings.update(scope.shipping.id, scope.shipping).then(function (response) {\n\t      notie.alert(1, 'Shipping updated', 2);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"shipping.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Shipping.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('ShippingsController', ['$scope', '$http', '$location', 'Countries', 'shippings', '$marketcloud', '$utils', function (scope, http, location, countries, shippings, $marketcloud, $utils) {\n\t\n\t  scope.shippings = shippings.data.data;\n\t\n\t  scope.countries = countries;\n\t\n\t  scope.pagination = $utils.getPaginationFromHTTPResponse(shippings);\n\t\n\t  // Holding query fields\n\t  // When listing data this oobject is sent\n\t  scope.query = {\n\t    per_page: 20\n\t  };\n\t\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function (shipping) {\n\t    var o = {};\n\t    for (var k in shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(shipping[k]);\n\t      }\n\t    }\n\t\n\t    console.log(\"Le shipping rules\", o);\n\t    return o;\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.loadData = function () {\n\t    if (scope.query.q === '') {\n\t      delete scope.query.q;\n\t    }\n\t\n\t    return $marketcloud.shippings.list(scope.query).then(function (response) {\n\t      scope.shippings = response.data.data;\n\t      scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n\t    }).error(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadPage = function (page_number) {\n\t    scope.query.page = Number(page_number);\n\t    scope.loadData();\n\t  };\n\t\n\t  scope.deleteShipping = function (id) {\n\t    $marketcloud.shippings.delete(id).then(function (response) {\n\t      notie.alert(1, 'Shipping method successfully deleted', 1.5);\n\t      scope.loadPage();\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred', 1.5);\n\t    });\n\t  };\n\t\n\t  /************************************************************\n\t   *                        DUPLICATE\n\t   **************************************************************/\n\t  scope.clone = function (shippingRule) {\n\t    console.log(\"Cloning\");\n\t\n\t    var toSave = angular.copy(shippingRule);\n\t    delete shippingRule.id;\n\t    delete toSave._id;\n\t\n\t    toSave.name += ' (Copy)';\n\t\n\t    $marketcloud.shippings.save(toSave).then(function (response) {\n\t      scope.loadPage();\n\t      notie.alert(1, \"Shipping rule successfully cloned\", 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateShippingController', ['$scope', '$http', '$location', 'Countries', '$marketcloud', '$validation', '$models', function (scope, http, location, countries, $marketcloud, $validation, $models) {\n\t  scope.availableRules = ['max_value', 'min_value', 'max_weight', 'min_weight', 'max_height', 'min_height', 'max_depth', 'min_depth', 'max_width', 'min_width'];\n\t\n\t  scope.getShippingRules = function () {\n\t    var o = {};\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        o[k] = angular.copy(scope.shipping[k]);\n\t      }\n\t    }\n\t    return o;\n\t  };\n\t  scope.howManyRules = function (o) {\n\t    var count = 0;\n\t\n\t    for (var k in scope.shipping) {\n\t      if (scope.availableRules.indexOf(k) > -1) {\n\t        count++;\n\t      }\n\t    }\n\t    return count;\n\t  };\n\t\n\t  scope.countries = angular.copy(countries);\n\t\n\t  scope.filterCountries = function (query) {\n\t    var data = scope.countries.filter(function (country) {\n\t      return country.name.indexOf(query) > -1;\n\t    }).sort(function (a, b) {\n\t      return a.name > b.name;\n\t    });\n\t    return {\n\t      data: data\n\t    };\n\t  };\n\t\n\t  // Adding a handy \"all\" destination\n\t  scope.countries.unshift({\n\t    name: 'All countries',\n\t    code: 'ALL'\n\t  });\n\t\n\t  scope.shipping = {\n\t    name: '',\n\t    base_cost: 0,\n\t    per_item_cost: 0,\n\t    zones: []\n\t  };\n\t\n\t  scope.newRule = {};\n\t  scope.addRule = function () {\n\t    scope.shipping[scope.newRule.name] = scope.newRule.value;\n\t\n\t    scope.newRule = {};\n\t  };\n\t\n\t  scope.removeRule = function (name) {\n\t    delete scope.shipping[name];\n\t  };\n\t\n\t  scope.ruleNameToDescription = function (name) {\n\t    return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum');\n\t  };\n\t\n\t  scope.newZone = {};\n\t  scope.addZone = function () {\n\t    scope.shipping.zones.push(scope.newZone);\n\t    scope.newZone = null;\n\t  };\n\t  scope.removeZone = function ($index) {\n\t    scope.shipping.zones.splice($index, 1);\n\t  };\n\t\n\t  scope.saveShipping = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.shippings.save(scope.shipping).then(function (response) {\n\t      notie.alert(1, 'Shipping saved.', 1.5);\n\t      location.path('/shippings');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"shipping.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Shipping.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('SidebarController', ['$scope', '$http', '$routeParams', '$location', '$rootScope', '$route', function ($scope, $http, $params, $location, $root, $route) {\n\t  $scope.showingSubSidebar = false;\n\t\n\t  $scope.currentSidebarSection = null;\n\t\n\t  $scope.currentSection = null;\n\t\n\t  $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t    // Intercepting the new section event\n\t    if (args.section) {\n\t      $scope.currentSection = args.section.split('.')[0];\n\t\n\t      $root.currentSection = args.section.split('.')[0];\n\t      $root.currentSubsection = args.section.split('.')[1] || null;\n\t\n\t      if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n\t        $scope.hideSubSidebar();\n\t      }\n\t    }\n\t  });\n\t\n\t  $scope.switchToApp = function (app_id) {\n\t    var current_app_id = window.current_application.id;\n\t    // We just need to swap the current urls with the desired app id\n\t    var url = '/applications/' + app_id + '/dashboard#/';\n\t\n\t    window.location.href = url;\n\t  };\n\t\n\t  $scope.subEntriesGroupToShow = null;\n\t\n\t  $scope.subSideBars = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t  $scope.showSubEntries = function (id) {\n\t    $scope.subEntriesGroupToShow = id;\n\t  };\n\t\n\t  $scope.subEntriesGroupShown = {\n\t    inventory: false,\n\t    system: false\n\t  };\n\t\n\t  $scope.toggleSubEntries = function (group_id) {\n\t    // group_id is the name of the dashboard section\n\t    // a section is a group of logical views\n\t    // e.g. inventory is a group of views related to inventory management\n\t    $scope.currentSection = group_id;\n\t\n\t    $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id];\n\t  };\n\t  $scope.showSubSidebar = function (id) {\n\t    $scope.showingSubSidebar = true;\n\t\n\t    var sidebars = ['inventory', 'system', 'contents'];\n\t\n\t    if (sidebars.indexOf(id) < 0) {\n\t      return false;\n\t    }\n\t\n\t    $scope.currentSidebarSection = id;\n\t  };\n\t\n\t  $scope.hideSubSidebar = function () {\n\t    $scope.showingSubSidebar = false;\n\t  };\n\t}]);\n\t\n\tapp.controller('NavbarController', ['$scope', '$http', '$routeParams', '$location', function ($scope, $http, $params, $location) {}]);\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateStaticContentController', ['$scope', '$http', '$location', '$marketcloud', '$utils', '$validation', '$models', function (scope, http, location, $marketcloud, $utils, $validation, $models) {\n\t\n\t  scope.content = {\n\t    name: '',\n\t    content: ''\n\t\n\t    // This function is invoked when a seo property\n\t    // changes.\n\t  };scope.computeSeoTags = function () {};\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t  scope.saveContent = function () {\n\t    $validation.hideErrors();\n\t    $marketcloud.staticContents.save(scope.content).then(function (response) {\n\t      // title text author\n\t      notie.alert(1, 'Static content saved', 2);\n\t      location.path('/contents/static');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.StaticContent.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditStaticContentController', ['$scope', '$http', 'content', '$location', '$marketcloud', 'moment', '$utils', '$validation', '$models', function (scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n\t  scope.content = content.data.data;\n\t\n\t  scope.unsafeSlug = false;\n\t  scope.updateSlug = function () {\n\t    scope.content.slug = $utils.getSlugFromString(scope.content.title);\n\t  };\n\t\n\t  scope.getImagesContainer = function () {\n\t    return scope.content.author.images;\n\t  };\n\t\n\t  scope.updateContent = function () {\n\t    $marketcloud.staticContents.update(scope.content.id, scope.content).then(function (response) {\n\t      notie.alert(1, 'Content updated with success', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.StaticContent.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('EditTaxController', ['$scope', '$http', '$marketcloud', '$location', 'Countries', 'tax', 'TaxRates', '$validation', '$models', function (scope, http, $marketcloud, location, countries, tax, tax_rates, $validation, $models) {\n\t\n\t  scope.tax_rates = tax_rates;\n\t\n\t  scope.countriesWithTaxRates = scope.tax_rates.map(function (r) {\n\t    return r.country;\n\t  }).filter(function (item, pos, self) {\n\t    return self.indexOf(item) == pos;\n\t  });\n\t\n\t  scope.countries = countries;\n\t  scope.countries.unshift({\n\t    name: '*'\n\t  });\n\t\n\t  // Cache of states lists\n\t  scope.states = {};\n\t\n\t  // Whenever the country changes,\n\t  // the list of states must be updated\n\t  scope.tax = tax.data.data;\n\t\n\t  scope.addRate = function () {\n\t    scope.tax.rates.push({\n\t      name: '',\n\t      country: '',\n\t      state: '',\n\t      postcode: '',\n\t      city: '',\n\t      rate: 0,\n\t      priority: 0\n\t    });\n\t  };\n\t\n\t  scope.deleteRate = function (index) {\n\t    scope.tax.rates.splice(index, 1);\n\t  };\n\t\n\t  scope.updateCity = function (rate) {\n\t    if (rate.postcode.indexOf('*') > -1) {\n\t      rate.city = '*';\n\t    }\n\t  };\n\t  scope.updatePostcode = function (rate) {\n\t    if (rate.state === '*') {\n\t      rate.postcode = '*';\n\t    }\n\t  };\n\t\n\t  scope.updateStates = function (rate) {\n\t    if (rate.country === '*') {\n\t      rate.state = '*';\n\t      rate.city = '*';\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + rate.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.states[rate.country] = response.data;\n\t      scope.states[rate.country].unshift({\n\t        name: '*'\n\t      });\n\t    }).catch(function (error) {\n\t      var type = error.data.errors[0].type;\n\t      scope.states[rate.country] = [{\n\t        name: '*'\n\t      }];\n\t\n\t      // We show an empty text input if its not available\n\t      // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\t\n\t      if (type !== 'StatesListNotAvailable') {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.saveTax = function () {\n\t    $marketcloud.taxes.update(scope.tax.id, scope.tax).then(function (response) {\n\t      notie.alert(1, 'Tax saved', 1.5);\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Tax.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.directive('customOnChange', function () {\n\t  return {\n\t    restrict: 'A',\n\t    link: function link(scope, element, attrs) {\n\t      var onChangeHandler = scope.$eval(attrs.customOnChange);\n\t      element.bind('change', onChangeHandler);\n\t    }\n\t  };\n\t});\n\t\n\tfunction csvToJson(csv) {\n\t  var lines = csv.split('\\n');\n\t\n\t  var result = [];\n\t\n\t  var headers = lines[0].split(',');\n\t\n\t  for (var i = 1; i < lines.length; i++) {\n\t    var obj = {};\n\t    var currentline = lines[i].split(',');\n\t\n\t    for (var j = 0; j < headers.length; j++) {\n\t      obj[headers[j]] = currentline[j];\n\t    }\n\t\n\t    result.push(obj);\n\t  }\n\t\n\t  return result;\n\t}\n\t\n\tfunction validateTaxRates(rates) {\n\t  var testFunction = function testFunction(rate) {\n\t    return rate.country && rate.state && rate.postcode && rate.city && rate.rate && rate.hasOwnProperty('priority') // it can be 0 and would fail the simple test\n\t    ;\n\t  };\n\t\n\t  // Check that every item pass the test function\n\t  return rates.every(testFunction);\n\t}\n\t\n\tfunction Rate(config) {\n\t  this.state = '*';\n\t  this.postcode = '*';\n\t  this.city = '*';\n\t  this.priority = 0;\n\t\n\t  for (var k in config) {\n\t    this[k] = config[k];\n\t  }\n\t\n\t  // We store rates as strings in our default country list\n\t  if (this.rate) {\n\t    this.rate = Number(this.rate);\n\t  }\n\t}\n\t\n\tapp.controller('CreateTaxController', ['$scope', '$http', '$marketcloud', '$location', 'Countries', 'TaxRates', '$validation', '$models', function (scope, http, $marketcloud, location, countries, tax_rates, $validation, $models) {\n\t  scope.countries = countries;\n\t  scope.tax_rates = tax_rates;\n\t\n\t  scope.countriesWithTaxRates = scope.tax_rates.map(function (r) {\n\t    return r.country;\n\t  }).filter(function (item, pos, self) {\n\t    return self.indexOf(item) == pos;\n\t  });\n\t\n\t  scope.countries.unshift({\n\t    name: '*'\n\t  });\n\t\n\t  // Cache of states lists\n\t  scope.states = {};\n\t\n\t  // Whenever the country changes,\n\t  // the list of states must be updated\n\t  scope.tax = {\n\t    rates: []\n\t  };\n\t\n\t  scope.updateCity = function (rate) {\n\t    if (rate.postcode.indexOf('*') > -1) {\n\t      rate.city = '*';\n\t    }\n\t  };\n\t  scope.updatePostcode = function (rate) {\n\t    if (rate.state === '*') {\n\t      rate.postcode = '*';\n\t    }\n\t  };\n\t\n\t  scope.importCSV = function () {\n\t    $('#chooseFileButton').trigger('click');\n\t  };\n\t  scope.handleFileSelect = function (evt) {\n\t    var files = $('#chooseFileButton')[0].files; // FileList object\n\t\n\t    // use the 1st file from the list\n\t    var f = files[0];\n\t\n\t    // HTML5 API\n\t    var reader = new FileReader();\n\t\n\t    // Closure to capture the file information.\n\t    reader.onload = function (theFile) {\n\t      return function (e) {\n\t        // Grabbing the file\n\t        var csv_file = e.target.result;\n\t\n\t        // Converting to JSON\n\t        var new_rates = csvToJson(csv_file);\n\t\n\t        if (validateTaxRates(new_rates) === false) {\n\t          notie.alert(2, 'The provided CSV file is not in a valid format', 2);\n\t          return;\n\t        }\n\t\n\t        // Transforming into a Rate object to handle defaults\n\t        new_rates = new_rates.map(function (rate) {\n\t          return new Rate(rate);\n\t        });\n\t\n\t        // Pushing new stuff to the bottom\n\t        scope.tax.rates = scope.tax.rates.concat(new_rates);\n\t\n\t        // Calling apply, since Angular is not aware of this async operation\n\t        scope.$apply();\n\t      };\n\t    }(f);\n\t\n\t    // Read in the image file as a data URL.\n\t    reader.readAsText(f);\n\t  };\n\t\n\t  scope.loadRatesFromCountry = function (country) {\n\t    var new_rates = scope.tax_rates.filter(function (rate) {\n\t      return rate.country === country;\n\t    }).map(function (rate) {\n\t      rate.country = country;\n\t      return new Rate(rate);\n\t    });\n\t    scope.tax.rates = scope.tax.rates.concat(new_rates);\n\t  };\n\t\n\t  scope.updateStates = function (rate) {\n\t    if (rate.country === '*') {\n\t      rate.state = '*';\n\t      rate.city = '*';\n\t      return;\n\t    }\n\t\n\t    http({\n\t      method: 'GET',\n\t      url: '/countries/' + rate.country.toLowerCase()\n\t    }).then(function (response) {\n\t      scope.states[rate.country] = response.data;\n\t      scope.states[rate.country].unshift({\n\t        name: '*'\n\t      });\n\t    }).catch(function (error) {\n\t      var type = error.data.errors[0].type;\n\t      scope.states[rate.country] = '*';\n\t\n\t      // We show an empty text input if its not available\n\t      // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\t\n\t      if (type !== 'StatesListNotAvailable') {\n\t        notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t      }\n\t    });\n\t  };\n\t\n\t  scope.addRate = function () {\n\t    scope.tax.rates.push({\n\t      name: '',\n\t      country: '',\n\t      state: '',\n\t      postcode: '',\n\t      city: '',\n\t      rate: 0,\n\t      priority: 0\n\t    });\n\t  };\n\t\n\t  scope.deleteRate = function (index) {\n\t    scope.tax.rates.splice(index, 1);\n\t  };\n\t\n\t  scope.saveTax = function () {\n\t\n\t    $validation.hideErrors();\n\t\n\t    $marketcloud.taxes.save(scope.tax).then(function (response) {\n\t      notie.alert(1, 'Tax saved', 1.5);\n\t      location.path('/system/taxes');\n\t    }).catch(function (response) {\n\t\n\t      if (response.status === 400) {\n\t        notie.alert(2, 'The data you entered has some errors', 1.5);\n\t\n\t        var validation = response.data.errors[0];\n\t        var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\t\n\t        if (angular.element(selector).length === 0) selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t        $validation.showErrorMessage(validation, $models.Tax.schema, selector);\n\t      } else notie.alert(3, 'An error has occurred.', 2);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t/* globals angular */\n\t\n\tvar app = angular.module('DataDashboard');\n\tJSON.flatten = function (data) {\n\t\tvar result = {};\n\t\tfunction recurse(cur, prop) {\n\t\t\tif (Object(cur) !== cur) {\n\t\t\t\tresult[prop] = cur;\n\t\t\t} else if (Array.isArray(cur)) {\n\t\t\t\tfor (var i = 0, l = cur.length; i < l; i++) {\n\t\t\t\t\trecurse(cur[i], prop + \"[\" + i + \"]\");\n\t\t\t\t}if (l == 0) result[prop] = [];\n\t\t\t} else {\n\t\t\t\tvar isEmpty = true;\n\t\t\t\tfor (var p in cur) {\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\trecurse(cur[p], prop ? prop + \".\" + p : p);\n\t\t\t\t}\n\t\t\t\tif (isEmpty && prop) result[prop] = {};\n\t\t\t}\n\t\t}\n\t\trecurse(data, \"\");\n\t\treturn result;\n\t};\n\tapp.controller('TranslationsController', ['$scope', 'resource', 'resourceType', function (scope, resource, type) {\n\t\n\t\t// The resource to translate\n\t\tscope.resource = resource.data.data;\n\t\t// Init locales\n\t\tif (!scope.resource.hasOwnProperty('locales')) {\n\t\t\tscope.resource.locales = {};\n\t\t\tscope.availableLocales.forEach(function (locale) {\n\t\t\t\tscope.resource.locales[locale] = {};\n\t\t\t});\n\t\t} else {\n\t\t\t// Let''s just be sure the locals object has every locale \n\t\t\t// initialized to an empty object\n\t\t\tscope.availableLocales.forEach(function (locale) {\n\t\t\t\tif (!scope.resource.locales.hasOwnProperty(locale)) scope.resource.locales[locale] = {};\n\t\t\t});\n\t\t}\n\t\n\t\t// The type of the resource, product, category, etc...\n\t\tscope.type = type;\n\t\n\t\tscope.getTranslatableProperties = function () {\n\t\t\treturn Object.keys(JSON.flatten(scope.resource)).filter(function (k) {\n\t\t\t\treturn k.indexOf('variant') === -1 && k.indexOf('locale') === -1;\n\t\t\t});\n\t\t};\n\t\n\t\tscope.translatables = scope.getTranslatableProperties();\n\t\n\t\tvar props_to_translate = {\n\t\t\tproducts: [\"name\", \"description\"],\n\t\t\tcategories: [\"name\", \"description\"],\n\t\t\tbrands: [\"name\", \"description\"],\n\t\t\tcollections: [\"name\", \"description\"]\n\t\t};\n\t\n\t\tscope.save = function () {};\n\t}]);\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('UsersController', ['$scope', '$marketcloud', 'users', function (scope, $marketcloud, resources) {\n\t  scope.users = resources.data.data;\n\t\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t  };\n\t\n\t  scope.query = {\n\t    per_page: 20\n\t\n\t    // Util\n\t  };scope.timestampToDate = function (t) {\n\t    var a = new Date(t);\n\t    var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\t    var str = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear();\n\t    return str;\n\t  };\n\t\n\t  scope.loadPage = function (p) {\n\t    scope.query.page = Number(p);\n\t    return scope.loadData(scope.query);\n\t  };\n\t\n\t  scope.delete = function (user) {\n\t    $marketcloud.users.delete(user.id).then(function (response) {\n\t      notie.alert(1, 'User deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.users.list(query).then(function (response) {\n\t      scope.users = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tvar NewUserController = function NewUserController(scope, $marketcloud, http, location, Countries) {\n\t  scope.user = {\n\t    name: \"\",\n\t    password: \"\",\n\t    registered_with: 'email',\n\t    billing_address: {},\n\t    shipping_address: {}\n\t  };\n\t  scope.countries = Countries;\n\t  scope.customPropertiesData = {};\n\t\n\t  scope.copyShippingAddressToBillingAddress = function () {\n\t    for (var k in scope.user.shipping_address) {\n\t      scope.user.billing_address[k] = scope.user.shipping_address[k];\n\t    }\n\t  };\n\t\n\t  scope.saveUser = function () {\n\t\n\t    // Joining user object with custom properties\n\t    for (var k in scope.customPropertiesData) {\n\t      scope.user[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    console.log(\"Saving this\", scope.user);\n\t    $marketcloud.users.save(scope.user).then(function (response) {\n\t      notie.alert(1, 'User saved', 2);\n\t      location.path('/users');\n\t    }).catch(function (response) {\n\t      notie.alert(2, 'An error has occurred. Please check the data you entered', 2);\n\t    });\n\t  };\n\t\n\t  // We need to load Roles\n\t  http({\n\t    method: 'GET',\n\t    url: '/applications/' + scope.application.id + '/roles'\n\t  }).then(function (response) {\n\t    scope.roles = response.data.data;\n\t  }).catch(function (response) {\n\t    notie.alert(2, 'An error has occurred while reloading roles.', 1);\n\t  });\n\t\n\t  scope.addCustomProperty = function () {\n\t    if (scope.user.hasOwnProperty(scope.newAttributeName)) {\n\t      scope.userError = 'CUSTOM_PROPERTY_NAME_ALREADY_EXISTS';\n\t    } else {\n\t      scope.customPropertiesData[scope.newAttributeName] = scope.newAttributeValue;\n\t      scope.newAttributeValue = null;\n\t      scope.newAttributeName = null;\n\t    }\n\t  };\n\t\n\t  scope.deleteCustomProperty = function (property_name) {\n\t    delete scope.customPropertiesData[property_name];\n\t  };\n\t};\n\t\n\tNewUserController.$inject = ['$scope', '$marketcloud', '$http', '$location', 'Countries'];\n\t\n\tapp.controller('NewUserController', NewUserController);\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('UserController', ['$scope', '$http', '$routeParams', 'user', '$marketcloud', 'Countries', '$utils', function (scope, http, params, user, $marketcloud, countries, $utils) {\n\t  // Injecting the resolve's data\n\t  scope.user = user.data.data;\n\t\n\t  scope.carts = [];\n\t  scope.addresses = [];\n\t\n\t  scope.newAddress = {\n\t    email: scope.user.email || '',\n\t    user_id: scope.user.id\n\t\n\t    // This is a list of countries used by the countries autocomplete\n\t  };scope.countries = countries;\n\t\n\t  scope.update = function () {\n\t    var payload = angular.copy(scope.user);\n\t\n\t    for (var k in scope.customPropertiesData) {\n\t      payload[k] = scope.customPropertiesData[k];\n\t    }\n\t\n\t    delete payload['id'];\n\t    delete payload['application_id'];\n\t\n\t    $marketcloud.users.update(scope.user.id, payload).then(function (response) {\n\t      notie.alert(1, 'Update Succeded', 2);\n\t    }).catch(function (errpr) {\n\t      notie.alert(3, 'An error has occurred, please try again', 2);\n\t    });\n\t  };\n\t\n\t  scope.toggleAddressVisibility = function (address) {\n\t    address.expanded = !address.expanded;\n\t  };\n\t\n\t  scope.saveAddress = function () {\n\t    $marketcloud.addresses.save(scope.newAddress).then(function (response) {\n\t      notie.alert(1, 'Address created', 2);\n\t      scope.newAddress = {\n\t        email: scope.user.email || '',\n\t        user_id: scope.user.id\n\t      };\n\t      $(\"#addAddressModal\").modal(\"hide\");\n\t      return $marketcloud.addresses.list({\n\t        user_id: scope.user.id\n\t      });\n\t    }).then(function (response) {\n\t      scope.addresses = response.data.data;\n\t    }).catch(function (error) {\n\t      notie.alert(2, 'An error has occurred, please check the data you entered', 2);\n\t    });\n\t  };\n\t\n\t  // Getting the set of core properties from models\n\t  var coreProperties = Models.User.getPropertyNames();\n\t\n\t  // id is a core property often not inside models\n\t  coreProperties.push('id', 'role', 'application_id', 'registered_with', 'created_at', 'updated_at', 'shipping_address', 'billing_address');\n\t\n\t  // Here we store custom properties\n\t  scope.customPropertiesData = {};\n\t\n\t  for (var k in scope.user) {\n\t    if (coreProperties.indexOf(k) < 0) {\n\t      scope.customPropertiesData[k] = scope.user[k];\n\t      delete scope.user[k];\n\t    }\n\t  }\n\t\n\t  $marketcloud.orders.list({\n\t    \"user.id\": params.userId,\n\t    \"per_page\": 10\n\t  }).then(function (response) {\n\t\n\t    scope.orders = response.data.data;\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t\n\t  $marketcloud.carts.list({\n\t    user_id: params.userId,\n\t    per_page: 10\n\t  }).then(function (response) {\n\t\n\t    scope.carts = response.data.data;\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t\n\t  $marketcloud.addresses.list({\n\t    user_id: params.userId,\n\t    per_page: 5\n\t  }).then(function (response) {\n\t\n\t    // We want to \"compress\" the view\n\t    scope.addresses = response.data.data.map(function (address, index) {\n\t      if (0 === index) address.expanded = true;else address.expanded = false;\n\t      return address;\n\t    });\n\t  }).catch(function (response) {\n\t\n\t    notie.alert(2, 'An error has occurred. Please try again.', 2);\n\t  });\n\t}]);\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('EditVariableController', ['$scope', '$http', '$location', '$marketcloud', 'variable', function (scope, http, location, $marketcloud, variable) {\n\t  scope.variable = variable.data.data;\n\t\n\t  function isURL(s) {\n\t    if (typeof s !== 'string') {\n\t      return false;\n\t    }\n\t    if (typeof s.indexOf !== 'function') {\n\t      return false;\n\t    }\n\t    return s.indexOf('http://') === 0;\n\t  }\n\t\n\t  if (isURL(scope.variable.value)) {\n\t    scope.variable.type = 'URL';\n\t  }\n\t\n\t  scope.containerForNewMediaAttribute = [];\n\t\n\t  scope.containersForExistingMediaAttributes = {};\n\t\n\t  scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t    if (scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]) {\n\t      scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t    }\n\t  });\n\t\n\t  if (isURL(scope.variable.value) === true) {\n\t    scope.containersForExistingMediaAttributes['value'] = [scope.variable.value];\n\t    scope.$watchCollection('containersForExistingMediaAttributes.value', function () {\n\t      // If the value is null, it means that we just deleted it, so we don't have to re-update it\n\t      if (scope.variable.value === null) {\n\t        return;\n\t      }\n\t      if (scope.containersForExistingMediaAttributes['value']) {\n\t        scope.variable.value = scope.containersForExistingMediaAttributes['value'][scope.containersForExistingMediaAttributes['value'].length - 1];\n\t      }\n\t    });\n\t  }\n\t\n\t  scope.availableTypes = [{ type: 'string', label: 'String' }, { type: 'number', label: 'Number' }, { type: 'URL', label: 'Url / Media' }, { type: 'boolean', label: 'True/False' }];\n\t\n\t  scope.invalidPropertyName = null;\n\t  scope.validationMessage = null;\n\t  scope.validate = function () {};\n\t\n\t  scope.update = function () {\n\t    var payload = angular.copy(scope.variable);\n\t\n\t    if (payload.type === 'URL') {\n\t      payload.type = 'string';\n\t    }\n\t    $marketcloud.variables.update(scope.variable.id, payload).then(function (response) {\n\t      notie.alert(1, 'Variable successfully saved.', 1.5);\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('VariablesController', ['$scope', '$http', 'variables', '$marketcloud', function (scope, http, resources, $marketcloud) {\n\t  // Pagination\n\t  scope.pagination = {\n\t    currentPage: resources.data.page,\n\t    numberOfPages: resources.data.pages,\n\t    nextPage: resources.data._links.next || null,\n\t    previousPage: resources.data._links.prev || null,\n\t    count: resources.data.count\n\t\n\t    // Query\n\t  };scope.query = {\n\t    per_page: 20\n\t\n\t    // Initial data resolved from the router\n\t  };scope.variables = resources.data.data;\n\t\n\t  scope.loadPage = function (p) {\n\t    return scope.loadData({\n\t      page: p\n\t    });\n\t  };\n\t  scope.loadData = function (query) {\n\t    if (!query) {\n\t      query = scope.query;\n\t    }\n\t\n\t    $marketcloud.variables.list(query).then(function (response) {\n\t      scope.variables = response.data.data;\n\t\n\t      scope.pagination = {\n\t        currentPage: response.data.page,\n\t        numberOfPages: response.data.pages,\n\t        nextPage: response.data._links.next || null,\n\t        previousPage: response.data._links.prev || null,\n\t        count: response.data.count\n\t      };\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t  scope.setPublishing = function (variable) {\n\t\n\t    $marketcloud.variables.update(variable.id, {\n\t      published: variable.published\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Updated!', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.deleteVariable = function (variable_id, index) {\n\t    $marketcloud.variables.delete(variable_id).then(function (response) {\n\t      scope.loadData({\n\t        page: 1\n\t      });\n\t      notie.alert(1, 'Variable deleted', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred.Please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.controller('CreateVariableController', ['$scope', '$http', '$location', '$marketcloud', function (scope, http, location, $marketcloud) {\n\t  scope.variable = {\n\t    type: 'string',\n\t    value: '',\n\t    name: ''\n\t  };\n\t\n\t  scope.containerForNewMediaAttribute = [];\n\t\n\t  scope.containersForExistingMediaAttributes = {};\n\t\n\t  scope.$watchCollection('containerForNewMediaAttribute', function () {\n\t    scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1];\n\t  });\n\t\n\t  scope.availableTypes = [{ type: 'string', label: 'String' }, { type: 'number', label: 'Number' }, { type: 'URL', label: 'Url / Media' }, { type: 'boolean', label: 'True/False' }];\n\t\n\t  scope.invalidPropertyName = null;\n\t  scope.validationMessage = null;\n\t  scope.validate = function () {};\n\t\n\t  scope.save = function () {\n\t    var payload = angular.copy(scope.variable);\n\t    if (payload.type === 'URL') {\n\t      payload.type = 'string';\n\t    }\n\t    $marketcloud.variables.save(payload).then(function (response) {\n\t      notie.alert(1, 'Variable successfully saved.', 1.5);\n\t      location.path('/variables');\n\t    }).catch(function (error) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t}]);\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('EditVariantController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct', function (scope, $marketcloud, params, $http, resolvedProduct) {\n\t  scope.product = resolvedProduct.data.data;\n\t\n\t  var originalVariantData = null;\n\t\n\t  scope.variant = null;\n\t\n\t  // This object holds the actual properties of the variant\n\t  // computed by variant + parent\n\t  scope.product_merge_variant = {};\n\t\n\t  // When saving the variant, only what does not match with the parent\n\t  // is saved inside the variant object\n\t  scope.customPropertiesData = {};\n\t\n\t  // These cannot be touched\n\t  scope.variantDefiningProperties = {};\n\t\n\t  scope.currentVariantId = null;\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = k + ': ' + String(o[k]);\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  // This method must be implemented in order to\n\t  // make the media manager work\n\t  scope.getImagesContainer = function () {\n\t    return scope.product_merge_variant.images;\n\t  };\n\t\n\t  scope.removeImage = function (i) {\n\t    scope.product_merge_variant.images.splice(i, 1);\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t    // ]\n\t    var r = ['label-info', 'label-danger', 'label-warning', 'label-success'];\n\t    return r[i % r.length];\n\t  };\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t\n\t  scope.getVariantClass = function (i) {\n\t    var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger'];\n\t    return 'label solid ' + classes[i % classes.length];\n\t  };\n\t\n\t  scope.updateVariant = function () {\n\t\n\t    // We take only some stuff from the main product\n\t    var variantProperties = [\n\t    // Le eliino queste due perch altrimenti, se metto un prezzo nel parent\n\t    // e nel figlio metto lo stesso, non me lo salva\n\t    //'price',\n\t    //'price_discount',\n\t    'category_id', 'description', 'stock_type', 'stock_status', 'stock_level', 'sku', 'barcode', 'images', 'requires_shipping', 'width', 'depth', 'height', 'weight'];\n\t\n\t    var toSend = angular.copy(scope.variant);\n\t\n\t    for (var k in scope.product_merge_variant) {\n\t\n\t      // Se la property della variante \n\t      // deiversa da ci che sta in product_merge_variant\n\t      // e la properiet  presente in variantProperties\n\t      if (toSend[k] !== scope.product_merge_variant[k] && variantProperties.indexOf(k) > -1) {\n\t\n\t        toSend[k] = scope.product_merge_variant[k];\n\t      }\n\t\n\t      if (k === \"price_discount\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n\t        console.log(k + \" dovrebbe passare da \" + originalVariantData[k] + \" a \" + scope.product_merge_variant[k]);\n\t        toSend.price_discount = scope.product_merge_variant[k];\n\t      }\n\t\n\t      if (k === \"price\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n\t        toSend.price = scope.product_merge_variant[k];\n\t      }\n\t    }\n\t\n\t    console.log(\"product_merge_variant\", angular.copy(scope.product_merge_variant));\n\t    console.log(\"toSend\", angular.copy(toSend));\n\t\n\t    $http({\n\t      method: 'PUT',\n\t      url: API_BASE_URL + '/products/' + params.productId + '/variants/' + scope.variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      },\n\t      data: toSend\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant successfully updated', 1.5);\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred. Please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.setCurrentVariant = function (variant_id) {\n\t    scope.currentVariantId = variant_id;\n\t    scope.product.variants.forEach(function (v) {\n\t      if (Number(v.id) === Number(variant_id)) {\n\t        scope.variant = v;\n\t        originalVariantData = angular.copy(v);\n\t      }\n\t    });\n\t    for (var k in scope.product) {\n\t      scope.product_merge_variant[k] = scope.product[k];\n\t    }\n\t    for (var j in scope.variant) {\n\t      scope.product_merge_variant[j] = scope.variant[j];\n\t    }\n\t  };\n\t\n\t  scope.setCurrentVariant(Number(params.variantId));\n\t\n\t  scope.product = resolvedProduct.data.data;\n\t}]);\n\n/***/ }),\n/* 111 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').controller('ListVariantsController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct', function (scope, $marketcloud, params, $http, resolvedProduct) {\n\t\n\t  scope.product = resolvedProduct.data.data;\n\t\n\t  // These cannot be touched\n\t  scope.variantDefiningProperties = {};\n\t\n\t  scope.deleteVariant = function (variant) {\n\t    return $http({\n\t      method: 'DELETE',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, 'Variant deleted', 1.5);\n\t      scope.product = response.data.data;\n\t    }).catch(function (response) {\n\t      notie.alert(3, 'An error has occurred, please try again.', 1.5);\n\t    });\n\t  };\n\t\n\t  scope.clone = function (variant) {\n\t    var variantToSave = angular.copy(variant);\n\t    // Removing useless stuff in the variant\n\t    delete variantToSave['id'];\n\t\n\t    return $http({\n\t      method: 'POST',\n\t      url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n\t      data: variantToSave,\n\t      headers: {\n\t        Authorization: window.public_key + ':' + window.token\n\t      }\n\t    }).then(function (response) {\n\t      notie.alert(1, \"Variant successfully cloned\", 2);\n\t    }).catch(function (response) {\n\t      notie.alert(2, \"An error has occurred, please try again\", 2);\n\t    });\n\t  };\n\t\n\t  scope.filterVariantProps = function (o) {\n\t    var p = {};\n\t    for (var k in o) {\n\t      // if its not an inherited property, then it's a variant property name\n\t      if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n\t        p[k] = k + ': ' + String(o[k]);\n\t      }\n\t    }\n\t    return p;\n\t\n\t    // return o\n\t  };\n\t\n\t  scope.getVariantStyle = function (i) {\n\t    var r = [{\n\t      'color': '#c0392b'\n\t    }, {\n\t      'color': '#27ae60'\n\t    }, {\n\t      'color': '#2c3e50'\n\t    }, {\n\t      'color': '#d35400'\n\t    }];\n\t    return r[i % r.length];\n\t  };\n\t}]);\n\n/***/ }),\n/* 112 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.controller('WebhooksController', ['$scope', '$http', '$location', 'webhooks', function (scope, http, location, webhooks) {\n\t\n\t\tscope.mode = null;\n\t\n\t\tscope.webhooks = [{\n\t\t\tevent: 'products.create',\n\t\t\tmethod: 'POST',\n\t\t\turl: 'mybackend.herokuapp.com/newproduct',\n\t\t\theaders: {}\n\t\t}];\n\t\n\t\tscope.webhooks = webhooks.data.data;\n\t\n\t\tscope.events = ['products.create', 'products.delete', 'products.update', 'brands.create', 'brands.delete', 'brands.update', 'categories.create', 'categories.delete', 'categories.update', 'orders.create', 'orders.delete', 'orders.update', 'carts.create', 'carts.delete', 'carts.update', 'payments.create', 'payments.delete', 'payments.update', 'shippings.create', 'shippings.delete', 'shippings.update'];\n\t\tscope.load = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks'\n\t\t\t}).then(function (response) {\n\t\t\t\tscope.webhooks = response.data.data;\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(2, 'An error has occurred while reloading webhooks.', 1);\n\t\t\t});\n\t\t};\n\t\n\t\tscope.edit = function (hook) {\n\t\t\tscope.newWebhook = hook;\n\t\t\tscope.showUpdateModal();\n\t\t};\n\t\tscope.showUpdateModal = function () {\n\t\t\tscope.mode = 'update';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\t\n\t\tscope.showCreateModal = function () {\n\t\t\tscope.mode = 'create';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\t\n\t\tscope.saveWebhook = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks',\n\t\t\t\tdata: scope.newWebhook\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly created', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t\t$('#newWebhookModal').modal('hide');\n\t\t\t\tscope.load();\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not created', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t});\n\t\t};\n\t\n\t\tscope.updateWebhook = function () {\n\t\t\thttp({\n\t\t\t\tmethod: 'PUT',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks/' + scope.newWebhook.id,\n\t\t\t\tdata: scope.newWebhook\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly updated', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not updated', 1);\n\t\t\t\tscope.newWebhook = {};\n\t\t\t});\n\t\t};\n\t\n\t\tscope.delete = function (hook) {\n\t\t\thttp({\n\t\t\t\tmethod: 'DELETE',\n\t\t\t\turl: '/applications/' + window.current_application.id + '/webhooks/' + hook.id\n\t\t\t}).then(function (response) {\n\t\t\t\tnotie.alert(1, 'Webhook correctly deleted', 1);\n\t\t\t\tscope.load();\n\t\t\t}).catch(function (response) {\n\t\t\t\tnotie.alert(3, 'An error has occurred, webhook not deleted', 1);\n\t\t\t});\n\t\t};\n\t}]);\n\n/***/ }),\n/* 113 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\t\n\tapp.directive('avatar', [function () {\n\t\n\t    return {\n\t        restrict: 'AE',\n\t        replace: true,\n\t        transclude: true,\n\t        scope: {\n\t            initials: '@initials',\n\t            width: '@width',\n\t            bgcolor: '@bgColor',\n\t            textColor: '@textColor',\n\t            wrapper: '=wrapper',\n\t            pictureResolution: '@pictureResolution',\n\t            pixelated: '=pixelated',\n\t            roundShape: '=roundShape',\n\t            class: '@class',\n\t            imgClass: '@imgClass',\n\t            style: '@style',\n\t            string: '@string',\n\t            cornerRadius: '@cornerRadius',\n\t            pictureFormat: '@pictureFormat',\n\t            colorsPalette: '=colorsPalette',\n\t            autoColor: '=autoColor',\n\t            fontWeight: '@fontWeight',\n\t            fontScale: '@fontScale',\n\t            textShadow: '=textShadow',\n\t            bind: '=bind',\n\t            maxLength: '@maxLength',\n\t            upperCase: '=upperCase'\n\t        },\n\t        link: function link(scope, element, attrs) {\n\t\n\t            var _long = 45,\n\t                _picture_resolution = 256,\n\t                _wrapper = true,\n\t                _str = \"\",\n\t                //scope.initials || \"\",\n\t            _bgcolor = \"#000\",\n\t                _textcolor = \"#fff\",\n\t                _pixelated = false,\n\t                _img_styling = \"vertical-align:top;\",\n\t                _roundShape = false,\n\t                _wrapper_styling = \"border-radius:0; display:block; overflow:hidden;\",\n\t                _extra_classes = \"\",\n\t                _extra_img_classes = \"\",\n\t                _extra_styles = \"\",\n\t                _corner_radius = \"0\",\n\t                _picture_format = \"png\",\n\t                _colors_palette = [\"#bdc3c7\", \"#6f7b87\", \"#2c3e50\", \"#2f3193\", \"#662d91\", \"#922790\", \"#ec2176\", \"#ed1c24\", \"#f36622\", \"#f8941e\", \"#fab70f\", \"#fdde00\", \"#d1d219\", \"#8ec73f\", \"#00a650\", \"#00aa9c\", \"#00adef\", \"#0081cd\", \"#005bab\"],\n\t                _autoColor = false,\n\t                _font_weight = 100,\n\t                _font_scale = 100,\n\t                _text_shadow = false,\n\t                _bind = false,\n\t                _img_width = \"100%\",\n\t                _upperCase = false;\n\t\n\t            // We randomize the bgcolor\n\t            var mc_palette = ['#1abc9c', '#16a085', '#f1c40f', '#f39c12', '#2ecc71', '#27ae60', '#27ae60', '#e67e22', '#d35400', '#3498db', '#2980b9', '#c0392b', '#e74c3c', '#9b59b6', '#8e44ad'];\n\t\n\t            if (scope.initials.length === 0) scope.initials = \"??\";\n\t\n\t            var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y'];\n\t\n\t            var position = dict.indexOf(scope.initials.substr(0, 1).toLowerCase());\n\t\n\t            var chosenColorPosition = position % mc_palette.length;\n\t\n\t            if (chosenColorPosition === -1) chosenColorPosition = 0;\n\t\n\t            var chosenColor = mc_palette[chosenColorPosition];\n\t\n\t            _bgcolor = chosenColor;\n\t\n\t            function checkValues() {\n\t\n\t                if (scope.bind != undefined) {\n\t                    _bind = scope.bind;\n\t                }\n\t\n\t                if (scope.textColor != undefined) {\n\t                    _textcolor = scope.textColor;\n\t                }\n\t\n\t                if (scope.pictureResolution != undefined) {\n\t                    _picture_resolution = scope.pictureResolution;\n\t                }\n\t\n\t                if (scope.width != undefined) {\n\t                    _long = scope.width;\n\t                }\n\t\n\t                if (scope.wrapper != undefined) {\n\t                    _wrapper = scope.wrapper;\n\t                    if (_wrapper === false) {\n\t                        _img_width = _long;\n\t                    }\n\t                }\n\t\n\t                if (scope.pixelated != undefined) {\n\t                    _pixelated = scope.pixelated;\n\t                    if (_pixelated === true) {\n\t                        _img_styling += \"image-rendering:pixelated; image-rendering:-moz-crisp-edges;\";\n\t                    }\n\t                }\n\t\n\t                if (scope.roundShape != undefined) {\n\t                    _roundShape = scope.roundShape;\n\t                    if (_roundShape) _wrapper_styling += \"border-radius: \" + _long + \"px;\";\n\t                } else {\n\t                    if (scope.cornerRadius != undefined) {\n\t                        _corner_radius = scope.cornerRadius;\n\t                        _wrapper_styling += \"border-radius: \" + _corner_radius + \"px;\";\n\t                    }\n\t                }\n\t\n\t                if (scope.class != undefined) {\n\t                    _extra_classes = scope.class;\n\t                }\n\t\n\t                if (scope.imgClass != undefined) {\n\t                    _extra_img_classes = scope.imgClass;\n\t                }\n\t\n\t                if (scope.style != undefined) {\n\t                    _extra_styles = scope.style;\n\t                }\n\t\n\t                if (scope.initials != undefined) {\n\t                    _str = scope.initials;\n\t                }\n\t\n\t                if (scope.string != undefined) {\n\t                    _str = getInitialsFromString(scope.string);\n\t                }\n\t\n\t                if (scope.maxLength != undefined) {\n\t                    _str = _str.substr(0, scope.maxLength);\n\t                }\n\t\n\t                if (scope.pictureFormat === 'jpeg') {\n\t                    _picture_format = \"jpeg\";\n\t                }\n\t\n\t                if (scope.colorsPalette != undefined) {\n\t                    _colors_palette = scope.colorsPalette;\n\t                }\n\t\n\t                if (scope.bgcolor != undefined) {\n\t                    _bgcolor = scope.bgcolor;\n\t                } else {\n\t\n\t                    if (scope.autoColor != undefined) {\n\t\n\t                        _autoColor = scope.autoColor;\n\t                        if (_autoColor === true) {\n\t                            var i,\n\t                                lon = _str.length,\n\t                                charIndex = 0,\n\t                                colorIndex;\n\t                            for (i = 0; i < lon; i++) {\n\t                                charIndex = _str.charCodeAt(i);\n\t                            }colorIndex = charIndex % _colors_palette.length;\n\t                            _bgcolor = _colors_palette[colorIndex];\n\t                        }\n\t                    }\n\t                }\n\t\n\t                if (scope.fontWeight != undefined) {\n\t                    _font_weight = scope.fontWeight;\n\t                }\n\t\n\t                if (scope.fontScale != undefined) {\n\t                    _font_scale = scope.fontScale;\n\t                }\n\t\n\t                if (scope.textShadow != undefined) {\n\t                    _text_shadow = scope.textShadow;\n\t                }\n\t\n\t                if (scope.upperCase === true) {\n\t                    _str = _str.toUpperCase();\n\t                }\n\t            }\n\t\n\t            function generateAvatar(name, w, h, bgcolor, textcolor, bgImage) {\n\t                var WIDTH = 256,\n\t                    HEIGHT = 256,\n\t                    canvas,\n\t                    ctx,\n\t                    _font_size;\n\t\n\t                if (w != undefined && w > 0) {\n\t                    if (h != undefined && h > 0) {\n\t                        WIDTH = w;\n\t                        HEIGHT = h;\n\t                    }\n\t                }\n\t\n\t                canvas = document.createElement('canvas');\n\t                canvas.id = \"ngAvatar-\" + Date.now();\n\t                canvas.width = WIDTH;\n\t                canvas.height = HEIGHT;\n\t\n\t                ctx = canvas.getContext('2d');\n\t                ctx.fillStyle = bgcolor;\n\t                ctx.fillRect(0, 0, WIDTH, HEIGHT);\n\t\n\t                _font_size = WIDTH / (2 / (_font_scale / 100));\n\t                ctx.font = _font_weight + \" \" + _font_size + \"px sans-serif\";\n\t\n\t                if (_text_shadow === true) {\n\t                    ctx.shadowColor = \"black\";\n\t                    ctx.shadowOffsetX = 0;\n\t                    ctx.shadowOffsetY = 0;\n\t                    ctx.shadowBlur = 5;\n\t                }\n\t\n\t                ctx.textAlign = \"center\";\n\t                ctx.fillStyle = textcolor;\n\t                //ctx.fillText(_str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) + 5 );\n\t                ctx.fillText(_str, WIDTH / 2, HEIGHT - HEIGHT / 2 + _font_size / 3);\n\t\n\t                return canvas.toDataURL(\"image/\" + _picture_format);\n\t            }\n\t\n\t            function getInitialsFromString(str) {\n\t\n\t                var output = \"\",\n\t                    i = 0,\n\t                    str = str.split(\" \"),\n\t                    len = str.length;\n\t\n\t                for (i; i < len; i++) {\n\t                    if (str[i] != \"\") output += str[i][0];\n\t                } //.toUpperCase();\n\t                return output;\n\t            }\n\t\n\t            var currentElement = element;\n\t\n\t            function render() {\n\t                var imgData = generateAvatar(_str, _picture_resolution, _picture_resolution, _bgcolor, _textcolor, null);\n\t\n\t                var html = '';\n\t                if (_wrapper) html += '<div class=\"avatar-wrapper ' + _extra_classes + '\" style=\"' + _wrapper_styling + ' width:' + _long + 'px; height:' + _long + 'px; ' + _extra_styles + '\">';\n\t                html += '<img src=\"' + imgData + '\" class=\"avatar-picture ' + _extra_img_classes + '\" style=\"' + _img_styling + '\" width=\"' + _img_width + '\" height=\"\" />';\n\t                if (_wrapper) html += '</div>';\n\t\n\t                var replacementElement = angular.element(html);\n\t                currentElement.replaceWith(replacementElement);\n\t                currentElement = replacementElement;\n\t            }\n\t\n\t            checkValues();\n\t            if (_bind === true) {\n\t\n\t                scope.$watch('string', function (value) {\n\t\n\t                    checkValues();\n\t                    render();\n\t                });\n\t\n\t                scope.$watch('initials', function (value) {\n\t\n\t                    checkValues();\n\t                    render();\n\t                });\n\t\n\t                /*\n\t                scope.$watch( 'bgcolor', function ( value ) {\n\t                    checkValues();\n\t                    render();\n\t                });\n\t                */\n\t            } else {\n\t\n\t                render();\n\t            }\n\t        }\n\t    };\n\t}]);\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t  \"use strict\";\n\t\n\t  app.directive('contenteditable', function () {\n\t    return {\n\t      restrict: 'A', // only activate on element attribute\n\t      require: '?ngModel', // get a hold of NgModelController\n\t      link: function link(scope, element, attrs, ngModel) {\n\t        if (!ngModel) return; // do nothing if no ng-model\n\t\n\t        // Specify how UI should be updated\n\t        ngModel.$render = function () {\n\t          element.html(ngModel.$viewValue || '');\n\t        };\n\t\n\t        // Listen for change events to enable binding\n\t        element.on('blur keyup change', function () {\n\t          scope.$apply(read);\n\t        });\n\t        read(); // initialize\n\t\n\t        // Write data to the model\n\t        function read() {\n\t          var html = element.html();\n\t          // When we clear the content editable the browser leaves a <br> behind\n\t          // If strip-br attribute is provided then we strip this out\n\t          if (attrs.stripBr && html == '<br>') {\n\t            html = '';\n\t          }\n\t          ngModel.$setViewValue(html);\n\t        }\n\t      }\n\t    };\n\t  });\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('dropdown', function ($document) {\n\t  return {\n\t    restrict: \"C\",\n\t    link: function link(scope, elem, attr) {\n\t\n\t      // Handling nested dropdowns\n\t      angular.element('.dropdown-submenu > a.dropdown-submenu-toggle').on(\"click\", function (e) {\n\t\n\t        // We get a pointer to the submenu\n\t        var submenu = angular.element(this).next('ul');\n\t\n\t        angular.element(submenu).toggle();\n\t\n\t        // Preventing further event handling\n\t        e.stopImmediatePropagation();\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t      });\n\t    }\n\t  };\n\t});\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('fallbackSrc', function () {\n\t\treturn {\n\t\t\tlink: function link(scope, element, attrs) {\n\t\t\t\telement.bind('error', function () {\n\t\t\t\t\tif (attrs.src !== attrs.fallbackSrc) {\n\t\t\t\t\t\tattrs.$set('src', attrs.fallbackSrc);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t  app.directive('fileModel', ['$parse', function ($parse) {\n\t    return {\n\t      restrict: 'A',\n\t      link: function link(scope, element, attrs) {\n\t        var model = $parse(attrs.fileModel);\n\t        var modelSetter = model.assign;\n\t\n\t        element.bind('change', function () {\n\t          scope.$apply(function () {\n\t            if (attrs.multiple) {\n\t              modelSetter(scope, element[0].files);\n\t            } else {\n\t              modelSetter(scope, element[0].files[0]);\n\t            }\n\t          });\n\t        });\n\t      }\n\t    };\n\t  }]);\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 118 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.directive('focusOnShow', function ($timeout) {\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: function link($scope, $element, $attr) {\n\t\t\t\tif ($attr.ngShow) {\n\t\t\t\t\t$scope.$watch($attr.ngShow, function (newValue) {\n\t\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif ($attr.ngHide) {\n\t\t\t\t\t$scope.$watch($attr.ngHide, function (newValue) {\n\t\t\t\t\t\tif (!newValue) {\n\t\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  /**\n\t   * Heavily adapted from the `type=\"number\"` directive in Angular's\n\t   * /src/ng/directive/input.js\n\t   */\n\t\n\t  var NUMBER_REGEXP = /^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/;\n\t  var DEFAULT_PRECISION = 2;\n\t\n\t  angular.module('DataDashboard').directive('money', [\"$parse\", function ($parse) {\n\t    function link(scope, el, attrs, ngModelCtrl) {\n\t      var minVal, maxVal, precision, lastValidViewValue;\n\t      var isDefined = angular.isDefined;\n\t      var isUndefined = angular.isUndefined;\n\t      var isNumber = angular.isNumber;\n\t\n\t      /**\n\t       * Returns a rounded number in the precision setup by the directive\n\t       * @param  {Number} num Number to be rounded\n\t       * @return {Number}     Rounded number\n\t       */\n\t      function round(num) {\n\t        var d = Math.pow(10, precision);\n\t        return Math.round(num * d) / d;\n\t      }\n\t\n\t      /**\n\t       * Returns a string that represents the rounded number\n\t       * @param  {Number} value Number to be rounded\n\t       * @return {String}       The string representation\n\t       */\n\t      function formatPrecision(value) {\n\t        return parseFloat(value).toFixed(precision);\n\t      }\n\t\n\t      function isPrecisionValid() {\n\t        return !isNaN(precision) && precision > -1;\n\t      }\n\t\n\t      function isValueValid(value) {\n\t        return angular.isNumber(value) && !isNaN(value);\n\t      }\n\t\n\t      function updateValuePrecision() {\n\t        var modelValue = ngModelCtrl.$modelValue;\n\t\n\t        if (isValueValid(modelValue) && isPrecisionValid()) {\n\t          ngModelCtrl.$modelValue = round(modelValue);\n\t          $parse(attrs.ngModel).assign(scope, ngModelCtrl.$modelValue);\n\t          changeViewValue(formatPrecision(modelValue));\n\t\n\t          // Save the rounded view value\n\t          lastValidViewValue = ngModelCtrl.$viewValue;\n\t        }\n\t      }\n\t\n\t      function changeViewValue(value) {\n\t        ngModelCtrl.$viewValue = value;\n\t        ngModelCtrl.$commitViewValue();\n\t        ngModelCtrl.$render();\n\t      }\n\t\n\t      ngModelCtrl.$parsers.push(function (value) {\n\t        if (ngModelCtrl.$isEmpty(value)) {\n\t          lastValidViewValue = value;\n\t          return null;\n\t        }\n\t\n\t        // Handle leading decimal point, like \".5\"\n\t        if (value.indexOf('.') === 0) {\n\t          value = '0' + value;\n\t        }\n\t\n\t        // Allow \"-\" inputs only when min < 0\n\t        if (value.indexOf('-') === 0) {\n\t          if (minVal >= 0) {\n\t            changeViewValue('');\n\t            return null;\n\t          } else if (value === '-' || value === '-.') {\n\t            return null;\n\t          }\n\t        }\n\t\n\t        if (NUMBER_REGEXP.test(value)) {\n\t          // Save as valid view value if it's a number\n\t          lastValidViewValue = value;\n\t          return parseFloat(value);\n\t        } else {\n\t          // Render the last valid input in the field\n\t          changeViewValue(lastValidViewValue);\n\t          return lastValidViewValue;\n\t        }\n\t      });\n\t\n\t      // Min validation\n\t      ngModelCtrl.$validators.min = function (value) {\n\t        return ngModelCtrl.$isEmpty(value) || isUndefined(minVal) || value >= minVal;\n\t      };\n\t      if (isDefined(attrs.min) || attrs.ngMin) {\n\t        attrs.$observe('min', function (val) {\n\t          if (isDefined(val) && !isNumber(val)) {\n\t            val = parseFloat(val, 10);\n\t          }\n\t          minVal = isNumber(val) && !isNaN(val) ? val : undefined;\n\t          ngModelCtrl.$validate();\n\t        });\n\t      } else {\n\t        minVal = 0;\n\t      }\n\t\n\t      // Max validation\n\t      if (isDefined(attrs.max) || attrs.ngMax) {\n\t        ngModelCtrl.$validators.max = function (value) {\n\t          return ngModelCtrl.$isEmpty(value) || isUndefined(maxVal) || value <= maxVal;\n\t        };\n\t\n\t        attrs.$observe('max', function (val) {\n\t          if (isDefined(val) && !isNumber(val)) {\n\t            val = parseFloat(val, 10);\n\t          }\n\t          maxVal = isNumber(val) && !isNaN(val) ? val : undefined;\n\t          ngModelCtrl.$validate();\n\t        });\n\t      }\n\t\n\t      // Round off (disabled by \"-1\")\n\t      if (isDefined(attrs.precision)) {\n\t        attrs.$observe('precision', function (value) {\n\t          precision = parseInt(value, 10);\n\t\n\t          updateValuePrecision();\n\t        });\n\t      } else {\n\t        precision = DEFAULT_PRECISION;\n\t      }\n\t\n\t      ngModelCtrl.$parsers.push(function (value) {\n\t        if (value) {\n\t          // Round off value to specified precision\n\t          value = isPrecisionValid() ? round(value) : value;\n\t        }\n\t        return value;\n\t      });\n\t\n\t      ngModelCtrl.$formatters.push(function (value) {\n\t        if (isDefined(value)) {\n\t          return isPrecisionValid() && isValueValid(value) ? formatPrecision(value) : value;\n\t        } else {\n\t          return '';\n\t        }\n\t      });\n\t\n\t      // Auto-format precision on blur\n\t      el.bind('blur', function () {\n\t        ngModelCtrl.$commitViewValue();\n\t        updateValuePrecision();\n\t      });\n\t    }\n\t\n\t    return {\n\t      restrict: 'A',\n\t      require: 'ngModel',\n\t      link: link\n\t    };\n\t  }]);\n\t})();\n\n/***/ }),\n/* 120 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('Marketcloud.Shared').directive('ngThumb', ['$window', function ($window) {\n\t\tvar helper = {\n\t\t\tsupport: !!($window.FileReader && $window.CanvasRenderingContext2D),\n\t\t\tisFile: function isFile(item) {\n\t\t\t\treturn angular.isObject(item) && item instanceof $window.File;\n\t\t\t},\n\t\t\tisImage: function isImage(file) {\n\t\t\t\tvar type = '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n\t\t\t\treturn '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n\t\t\t}\n\t\t};\n\t\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '<canvas/>',\n\t\t\tlink: function link(scope, element, attributes) {\n\t\t\t\tif (!helper.support) return;\n\t\n\t\t\t\tvar params = scope.$eval(attributes.ngThumb);\n\t\n\t\t\t\tif (!helper.isFile(params.file)) return;\n\t\t\t\tif (!helper.isImage(params.file)) return;\n\t\n\t\t\t\tvar canvas = element.find('canvas');\n\t\t\t\tvar reader = new FileReader();\n\t\n\t\t\t\treader.onload = onLoadFile;\n\t\t\t\treader.readAsDataURL(params.file);\n\t\n\t\t\t\tfunction onLoadFile(event) {\n\t\t\t\t\tvar img = new Image();\n\t\t\t\t\timg.onload = onLoadImage;\n\t\t\t\t\timg.src = event.target.result;\n\t\t\t\t}\n\t\n\t\t\t\tfunction onLoadImage() {\n\t\t\t\t\tvar width = params.width || this.width / this.height * params.height;\n\t\t\t\t\tvar height = params.height || this.height / this.width * params.width;\n\t\t\t\t\tcanvas.attr({ width: width, height: height });\n\t\t\t\t\t//canvas.attr({ width: canvas.parent().width, height: canvas.parent().height });\n\t\t\t\t\tcanvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}]);\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t\tapp.directive('ngEnter', function () {\n\t\t\treturn function (scope, element, attrs) {\n\t\t\t\telement.bind('keydown keypress', function (event) {\n\t\t\t\t\tif (event.which === 13) {\n\t\t\t\t\t\tscope.$apply(function () {\n\t\t\t\t\t\t\tscope.$eval(attrs.ngEnter);\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('DataDashboard').directive('onChangeAsync', function ($timeout) {\n\t  return {\n\t    restrict: 'A',\n\t    require: 'ngModel',\n\t    link: function link(scope, element, attr, ctrl) {\n\t      ctrl.$viewChangeListeners.push(function () {\n\t        $timeout(function () {\n\t          scope.$eval(attr.onChangeAsync);\n\t        });\n\t      });\n\t    }\n\t  };\n\t});\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function (app) {\n\t\n\t  app.directive('onFileChange', function () {\n\t    return {\n\t      restrict: 'A',\n\t      link: function link(scope, element, attrs) {\n\t        var onChangeHandler = scope.$eval(attrs.onFileChange);\n\t        element.bind('change', onChangeHandler);\n\t      }\n\t    };\n\t  });\n\t})(angular.module('DataDashboard'));\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$account', ['$http', '$q', AccountFactory]);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles writes and reads\n\t   *   for the account object.\n\t   *\n\t   *   This avoids the use of the window object;\n\t   *   \n\t   */\n\t  function AccountFactory($http, $q) {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    // This holds the account data\n\t    //Factory.data = window.user\n\t    Factory.data = {};\n\t\n\t    /*\n\t     *  @param {string} key The name of the property to get\n\t     *  @return {Promise} Promised response\n\t     */\n\t    /*Factory.get = function() {\n\t      if (null === Factory.data) {\n\t        return $http({\n\t          method: 'GET',\n\t          url: '/account/get',\n\t        })\n\t        .then(function(response){\n\t          Factory.data = response.data.data;\n\t          return $q.when({data : Factory.data});\n\t        })\n\t      } else {\n\t        return $q.when({data : Factory.data});\n\t      }\n\t    }*/\n\t\n\t    /*\n\t     * @param {string} key The name of the property to get\n\t     */\n\t    Factory.get = function (key) {\n\t      if (key) return Factory.data[key];else return Factory.data;\n\t    };\n\t\n\t    /*\n\t     * @param {String} key The name of the property to set\n\t     * @param {Mixed} value The value of the property to set\n\t     */\n\t    Factory.set = function (key, value) {\n\t\n\t      if (\"string\" === typeof key && !!value) {\n\t        Factory.data[key] = value;\n\t      }\n\t\n\t      if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key)) && !value) {\n\t        Factory.data = key;\n\t      }\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 125 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$application', ApplicationFactory);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles writes and reads\n\t   *   for the application object.\n\t   *\n\t   *   This avoids the use of the window object;\n\t   *   \n\t   */\n\t  function ApplicationFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {\n\t      data: {}\n\t    };\n\t\n\t    /*// This holds the application data\n\t    Factory.data = {};\n\t    */\n\t\n\t    /*\n\t     * @param {string} key The name of the property to get\n\t     */\n\t    Factory.get = function (key) {\n\t      if (key) return Factory.data[key];else return Factory.data;\n\t    };\n\t\n\t    /*\n\t     * @param {String} key The name of the property to set\n\t     * @param {Mixed} value The value of the property to set\n\t     */\n\t    Factory.set = function (key, value) {\n\t\n\t      if (\"string\" === typeof key && !!value) {\n\t        Factory.data[key] = value;\n\t      }\n\t\n\t      if (\"object\" === (typeof key === 'undefined' ? 'undefined' : _typeof(key)) && !value) {\n\t        Factory.data = key;\n\t      }\n\t    };\n\t\n\t    /*\n\t     * @return {Array<String>} Returns an array of locale codes.\n\t     */\n\t    Factory.getAvailableLocaleCodes = function () {\n\t\n\t      if (!Factory.data.locales) {\n\t        return [];\n\t      }\n\t\n\t      return Factory.data.locales.split(\",\").filter(function (localeCode) {\n\t        // When splitting an empty string, we get [\"\"]\n\t        return localeCode !== \"\";\n\t      });\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$cache', [CacheFactory]);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles writes and reads\n\t   *   for the account object.\n\t   *\n\t   *   This avoids the use of the window object;\n\t   *   \n\t   */\n\t  function CacheFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    // This holds the account data\n\t    //Factory.data = window.user\n\t    Factory.data = {};\n\t\n\t    Factory.set = function (key, value) {\n\t      this.data[key] = value;\n\t    };\n\t\n\t    Factory.get = function (key) {\n\t      return this.data[key];\n\t    };\n\t\n\t    Factory.del = function (key) {\n\t      delete this.data[key];\n\t    };\n\t\n\t    /*\n\t    *  @param {String} pattern\n\t     *  Deletes all keys matching pattern\n\t    */\n\t    Factory.delByPattern = function (pattern) {\n\t      for (var k in this.data) {\n\t        if (k.indexOf(pattern) > -1) {\n\t          console.info(\"Deleting cache for \" + k);\n\t          delete this.data[k];\n\t        }\n\t      }\n\t    };\n\t\n\t    Factory.has = function (key) {\n\t      return this.data.hasOwnProperty(key);\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tangular.module('DataDashboard').factory('LocalesFactory', LocalesFactory);\n\t\n\t\tfunction LocalesFactory($http) {\n\t\t\treturn {\n\t\t\t\t\"af-ZA\": {\n\t\t\t\t\t\"code\": \"af-ZA\",\n\t\t\t\t\t\"original\": \"Afrikaans\",\n\t\t\t\t\t\"name\": \"Afrikaans\"\n\t\t\t\t},\n\t\t\t\t\"ar\": {\n\t\t\t\t\t\"code\": \"ar\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Arabic\"\n\t\t\t\t},\n\t\t\t\t\"bg-BG\": {\n\t\t\t\t\t\"code\": \"bg-BG\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Bulgarian\"\n\t\t\t\t},\n\t\t\t\t\"ca-AD\": {\n\t\t\t\t\t\"code\": \"ca-AD\",\n\t\t\t\t\t\"original\": \"Catal\",\n\t\t\t\t\t\"name\": \"Catalan\"\n\t\t\t\t},\n\t\t\t\t\"cs-CZ\": {\n\t\t\t\t\t\"code\": \"cs-CZ\",\n\t\t\t\t\t\"original\": \"etina\",\n\t\t\t\t\t\"name\": \"Czech\"\n\t\t\t\t},\n\t\t\t\t\"cy-GB\": {\n\t\t\t\t\t\"code\": \"cy-GB\",\n\t\t\t\t\t\"original\": \"Cymraeg\",\n\t\t\t\t\t\"name\": \"Welsh\"\n\t\t\t\t},\n\t\t\t\t\"da-DK\": {\n\t\t\t\t\t\"code\": \"da-DK\",\n\t\t\t\t\t\"original\": \"Dansk\",\n\t\t\t\t\t\"name\": \"Danish\"\n\t\t\t\t},\n\t\t\t\t\"de-AT\": {\n\t\t\t\t\t\"code\": \"de-AT\",\n\t\t\t\t\t\"original\": \"Deutsch (sterreich)\",\n\t\t\t\t\t\"name\": \"German (Austria)\"\n\t\t\t\t},\n\t\t\t\t\"de-CH\": {\n\t\t\t\t\t\"code\": \"de-CH\",\n\t\t\t\t\t\"original\": \"Deutsch (Schweiz)\",\n\t\t\t\t\t\"name\": \"German (Switzerland)\"\n\t\t\t\t},\n\t\t\t\t\"de-DE\": {\n\t\t\t\t\t\"code\": \"de-DE\",\n\t\t\t\t\t\"original\": \"Deutsch (Deutschland)\",\n\t\t\t\t\t\"name\": \"German (Germany)\"\n\t\t\t\t},\n\t\t\t\t\"el-GR\": {\n\t\t\t\t\t\"code\": \"el-GR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Greek\"\n\t\t\t\t},\n\t\t\t\t\"en-GB\": {\n\t\t\t\t\t\"code\": \"en-GB\",\n\t\t\t\t\t\"original\": \"English (UK)\",\n\t\t\t\t\t\"name\": \"English (UK)\",\n\t\t\t\t\t\"alpha2\": \"GB\"\n\t\t\t\t},\n\t\t\t\t\"en-US\": {\n\t\t\t\t\t\"code\": \"en-US\",\n\t\t\t\t\t\"original\": \"English (US)\",\n\t\t\t\t\t\"name\": \"English (US)\"\n\t\t\t\t},\n\t\t\t\t\"es-CL\": {\n\t\t\t\t\t\"code\": \"es-CL\",\n\t\t\t\t\t\"original\": \"Espaol (Chile)\",\n\t\t\t\t\t\"name\": \"Spanish (Chile)\"\n\t\t\t\t},\n\t\t\t\t\"es-ES\": {\n\t\t\t\t\t\"code\": \"es-ES\",\n\t\t\t\t\t\"original\": \"Espaol (Espaa)\",\n\t\t\t\t\t\"name\": \"Spanish (Spain)\"\n\t\t\t\t},\n\t\t\t\t\"es-MX\": {\n\t\t\t\t\t\"code\": \"es-MX\",\n\t\t\t\t\t\"original\": \"Espaol (Mxico)\",\n\t\t\t\t\t\"name\": \"Spanish (Mexico)\"\n\t\t\t\t},\n\t\t\t\t\"et-EE\": {\n\t\t\t\t\t\"code\": \"et-EE\",\n\t\t\t\t\t\"original\": \"Eesti\",\n\t\t\t\t\t\"name\": \"Estonian\"\n\t\t\t\t},\n\t\t\t\t\"eu\": {\n\t\t\t\t\t\"code\": \"eu\",\n\t\t\t\t\t\"original\": \"Euskara\",\n\t\t\t\t\t\"name\": \"Basque\"\n\t\t\t\t},\n\t\t\t\t\"fa-IR\": {\n\t\t\t\t\t\"code\": \"fa-IR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Persian\"\n\t\t\t\t},\n\t\t\t\t\"fi-FI\": {\n\t\t\t\t\t\"code\": \"fi-FI\",\n\t\t\t\t\t\"original\": \"Suomi\",\n\t\t\t\t\t\"name\": \"Finnish\"\n\t\t\t\t},\n\t\t\t\t\"fr-CA\": {\n\t\t\t\t\t\"code\": \"fr-CA\",\n\t\t\t\t\t\"original\": \"Franais (Canada)\",\n\t\t\t\t\t\"name\": \"French (Canada)\"\n\t\t\t\t},\n\t\t\t\t\"fr-FR\": {\n\t\t\t\t\t\"code\": \"fr-FR\",\n\t\t\t\t\t\"original\": \"Franais (France)\",\n\t\t\t\t\t\"name\": \"French (France)\"\n\t\t\t\t},\n\t\t\t\t\"he-IL\": {\n\t\t\t\t\t\"code\": \"he-IL\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Hebrew\"\n\t\t\t\t},\n\t\t\t\t\"hr-HR\": {\n\t\t\t\t\t\"code\": \"hr-HR\",\n\t\t\t\t\t\"original\": \"Hrvatski\",\n\t\t\t\t\t\"name\": \"Croatian\"\n\t\t\t\t},\n\t\t\t\t\"hu-HU\": {\n\t\t\t\t\t\"code\": \"hu-HU\",\n\t\t\t\t\t\"original\": \"Magyar\",\n\t\t\t\t\t\"name\": \"Hungarian\"\n\t\t\t\t},\n\t\t\t\t\"id-ID\": {\n\t\t\t\t\t\"code\": \"id-ID\",\n\t\t\t\t\t\"original\": \"Bahasa Indonesia\",\n\t\t\t\t\t\"name\": \"Indonesian\"\n\t\t\t\t},\n\t\t\t\t\"is-IS\": {\n\t\t\t\t\t\"code\": \"is-IS\",\n\t\t\t\t\t\"original\": \"slenska\",\n\t\t\t\t\t\"name\": \"Icelandic\"\n\t\t\t\t},\n\t\t\t\t\"it-IT\": {\n\t\t\t\t\t\"code\": \"it-IT\",\n\t\t\t\t\t\"original\": \"Italiano\",\n\t\t\t\t\t\"name\": \"Italian\"\n\t\t\t\t},\n\t\t\t\t\"ja-JP\": {\n\t\t\t\t\t\"code\": \"ja-JP\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Japanese\"\n\t\t\t\t},\n\t\t\t\t\"km-KH\": {\n\t\t\t\t\t\"code\": \"km-KH\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Khmer\"\n\t\t\t\t},\n\t\t\t\t\"ko-KR\": {\n\t\t\t\t\t\"code\": \"ko-KR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Korean\"\n\t\t\t\t},\n\t\t\t\t\"lt-LT\": {\n\t\t\t\t\t\"code\": \"lt-LT\",\n\t\t\t\t\t\"original\": \"Lietuvi\",\n\t\t\t\t\t\"name\": \"Lithuanian\"\n\t\t\t\t},\n\t\t\t\t\"lv-LV\": {\n\t\t\t\t\t\"code\": \"lv-LV\",\n\t\t\t\t\t\"original\": \"Latvieu\",\n\t\t\t\t\t\"name\": \"Latvian\"\n\t\t\t\t},\n\t\t\t\t\"mn-MN\": {\n\t\t\t\t\t\"code\": \"mn-MN\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Mongolian\"\n\t\t\t\t},\n\t\t\t\t\"nb-NO\": {\n\t\t\t\t\t\"code\": \"nb-NO\",\n\t\t\t\t\t\"original\": \"Norsk bokml\",\n\t\t\t\t\t\"name\": \"Norwegian (Bokml)\"\n\t\t\t\t},\n\t\t\t\t\"nl-NL\": {\n\t\t\t\t\t\"code\": \"nl-NL\",\n\t\t\t\t\t\"original\": \"Nederlands\",\n\t\t\t\t\t\"name\": \"Dutch\"\n\t\t\t\t},\n\t\t\t\t\"nn-NO\": {\n\t\t\t\t\t\"code\": \"nn-NO\",\n\t\t\t\t\t\"original\": \"Norsk nynorsk\",\n\t\t\t\t\t\"name\": \"Norwegian (Nynorsk)\"\n\t\t\t\t},\n\t\t\t\t\"pl-PL\": {\n\t\t\t\t\t\"code\": \"pl-PL\",\n\t\t\t\t\t\"original\": \"Polski\",\n\t\t\t\t\t\"name\": \"Polish\"\n\t\t\t\t},\n\t\t\t\t\"pt-BR\": {\n\t\t\t\t\t\"code\": \"pt-BR\",\n\t\t\t\t\t\"original\": \"Portugus (Brasil)\",\n\t\t\t\t\t\"name\": \"Portuguese (Brazil)\"\n\t\t\t\t},\n\t\t\t\t\"pt-PT\": {\n\t\t\t\t\t\"code\": \"pt-PT\",\n\t\t\t\t\t\"original\": \"Portugus (Portugal)\",\n\t\t\t\t\t\"name\": \"Portuguese (Portugal)\"\n\t\t\t\t},\n\t\t\t\t\"ro-RO\": {\n\t\t\t\t\t\"code\": \"ro-RO\",\n\t\t\t\t\t\"original\": \"Romn\",\n\t\t\t\t\t\"name\": \"Romanian\"\n\t\t\t\t},\n\t\t\t\t\"ru-RU\": {\n\t\t\t\t\t\"code\": \"ru-RU\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Russian\"\n\t\t\t\t},\n\t\t\t\t\"sk-SK\": {\n\t\t\t\t\t\"code\": \"sk-SK\",\n\t\t\t\t\t\"original\": \"Slovenina\",\n\t\t\t\t\t\"name\": \"Slovak\"\n\t\t\t\t},\n\t\t\t\t\"sl-SI\": {\n\t\t\t\t\t\"code\": \"sl-SI\",\n\t\t\t\t\t\"original\": \"Slovenina\",\n\t\t\t\t\t\"name\": \"Slovenian\"\n\t\t\t\t},\n\t\t\t\t\"sr-RS\": {\n\t\t\t\t\t\"code\": \"sr-RS\",\n\t\t\t\t\t\"original\": \" / Srpski\",\n\t\t\t\t\t\"name\": \"Serbian\"\n\t\t\t\t},\n\t\t\t\t\"sv-SE\": {\n\t\t\t\t\t\"code\": \"sv-SE\",\n\t\t\t\t\t\"original\": \"Svenska\",\n\t\t\t\t\t\"name\": \"Swedish\"\n\t\t\t\t},\n\t\t\t\t\"th-TH\": {\n\t\t\t\t\t\"code\": \"th-TH\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Thai\"\n\t\t\t\t},\n\t\t\t\t\"tr-TR\": {\n\t\t\t\t\t\"code\": \"tr-TR\",\n\t\t\t\t\t\"original\": \"Trke\",\n\t\t\t\t\t\"name\": \"Turkish\"\n\t\t\t\t},\n\t\t\t\t\"uk-UA\": {\n\t\t\t\t\t\"code\": \"uk-UA\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Ukrainian\"\n\t\t\t\t},\n\t\t\t\t\"vi-VN\": {\n\t\t\t\t\t\"code\": \"vi-VN\",\n\t\t\t\t\t\"original\": \"Ting Vit\",\n\t\t\t\t\t\"name\": \"Vietnamese\"\n\t\t\t\t},\n\t\t\t\t\"zh-CN\": {\n\t\t\t\t\t\"code\": \"zh-CN\",\n\t\t\t\t\t\"original\": \" ()\",\n\t\t\t\t\t\"name\": \"Chinese (PRC)\"\n\t\t\t\t},\n\t\t\t\t\"zh-TW\": {\n\t\t\t\t\t\"code\": \"zh-TW\",\n\t\t\t\t\t\"original\": \" ()\",\n\t\t\t\t\t\"name\": \"Chinese (Taiwan)\"\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t})();\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tfunction jsonToQueryString(json) {\n\t\t\treturn '?' + Object.keys(json).map(function (key) {\n\t\t\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(json[key]);\n\t\t\t}).join('&');\n\t\t}\n\t\n\t\tangular.module('DataDashboard').factory('$marketcloud', MarketcloudFactory);\n\t\n\t\tMarketcloudFactory.$inject = ['$http', '$q', '$cache', '$account', '$application'];\n\t\n\t\tfunction MarketcloudFactory($http, $q, $cache, $account, $application) {\n\t\n\t\t\tvar request = function request(method, endpoint, data, options) {\n\t\n\t\t\t\tvar role = $application.get('role');\n\t\n\t\t\t\t// Guests users cannot perform requests\n\t\t\t\tif (role === 'guest' && method !== \"GET\") {\n\t\t\t\t\tnotie.alert(2, \"Action not allowed since your role is 'guest'.\", 2);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar url = window.API_BASE_URL + '/' + endpoint;\n\t\n\t\t\t\tif (\"GET\" === method) {\n\t\t\t\t\tvar cacheKey = endpoint + jsonToQueryString(data || {});\n\t\t\t\t\t// We invoke cache only for GET requests\n\t\t\t\t\tif ($cache.has(cacheKey)) {\n\t\t\t\t\t\treturn $q.when($cache.get(cacheKey));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar config = {\n\t\t\t\t\tmethod: method,\n\t\t\t\t\turl: url,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Authorization': window.public_key + ':' + window.token\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\toptions = options || {};\n\t\n\t\t\t\tif ('GET' === method) config.params = data || {};else {\n\t\n\t\t\t\t\tconfig.data = data || {};\n\t\t\t\t}\n\t\n\t\t\t\treturn $http(config).then(function (response) {\n\t\n\t\t\t\t\tif ('GET' === method) {\n\t\t\t\t\t\t$cache.set(endpoint, response);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('PUT' === method || 'PATCH' === method) {\n\t\t\t\t\t\t// Devo invalidare la cache della risorsa e della collection\n\t\t\t\t\t\t// ex /resource/:id\n\t\t\t\t\t\t//  /resource/:id/subresources\n\t\t\t\t\t\t// /resource\n\t\t\t\t\t\t// Endpoint  qualcosa del tipo sopra,\n\t\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating GET cache to this resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('POST' === method) {\n\t\t\t\t\t\t$cache.delByPattern(endpoint); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif ('DELETE' === method) {\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn $q.when(response);\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\treturn $q.reject(error);\n\t\t\t\t});\n\t\t\t};\n\t\n\t\t\tvar resourceFactory = function resourceFactory(resource_name) {\n\t\t\t\treturn {\n\t\t\t\t\tlist: function list(query, options) {\n\t\t\t\t\t\tquery = query || {};\n\t\t\t\t\t\tif ('object' !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new Error('$marketcloud.' + resource_name + '.list(query) query must be object');\n\t\t\t\t\t\treturn request('GET', resource_name, query, options);\n\t\t\t\t\t},\n\t\t\t\t\tgetById: function getById(id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + id, options);\n\t\t\t\t\t},\n\t\t\t\t\tsave: function save(data, options) {\n\t\t\t\t\t\tif ('object' !== (typeof data === 'undefined' ? 'undefined' : _typeof(data))) throw new Error('$marketcloud.' + resource_name + '.save(data) data must be object');\n\t\t\t\t\t\treturn request('POST', resource_name, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function update(id, data, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\t\treturn request('PUT', resource_name + '/' + id, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tdelete: function _delete(id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\t\treturn request('DELETE', resource_name + '/' + id, options);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tvar subResourceFactory = function subResourceFactory(resource_name, sub_resource_name) {\n\t\t\t\treturn {\n\t\t\t\t\tlist: function list(parent_id, query, options) {\n\t\t\t\t\t\tquery = query || {};\n\t\t\t\t\t\tif ('object' !== (typeof query === 'undefined' ? 'undefined' : _typeof(query))) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.list(query) query must be object');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name, query, options);\n\t\t\t\t\t},\n\t\t\t\t\tgetById: function getById(parent_id, id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t\t},\n\t\t\t\t\tsave: function save(parent_id, data, options) {\n\t\t\t\t\t\tif ('object' !== (typeof data === 'undefined' ? 'undefined' : _typeof(data))) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.save(data) data must be object, got ' + (typeof data === 'undefined' ? 'undefined' : _typeof(data)));\n\t\t\t\t\t\treturn request('POST', resource_name + '/' + parent_id + '/' + sub_resource_name, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tupdate: function update(parent_id, id, data, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\t\treturn request('PUT', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, data, options);\n\t\t\t\t\t},\n\t\t\t\t\tdelete: function _delete(parent_id, id, options) {\n\t\t\t\t\t\tif (isNaN(id)) throw new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\t\treturn request('DELETE', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\n\t\t\tvar resources = ['addresses', 'brands', 'categories', 'collections', 'events', 'coupons', 'carts', 'products', 'orders', 'invoices', 'users', 'contents', 'staticContents', 'media', 'notifications', 'promotions', 'shippings', 'payments', 'taxes', 'paymentMethods', 'variables'];\n\t\n\t\t\tvar factory = {};\n\t\n\t\t\tresources.forEach(function (resource_name) {\n\t\t\t\tfactory[resource_name] = resourceFactory(resource_name);\n\t\t\t});\n\t\n\t\t\tfactory.variants = subResourceFactory('products', 'variants');\n\t\n\t\t\tfactory.refunds = subResourceFactory('orders', 'refunds');\n\t\t\tfactory.payments = subResourceFactory('orders', 'payments');\n\t\t\tfactory.shipments = subResourceFactory('orders', 'shipments');\n\t\n\t\t\treturn factory;\n\t\t}\n\t})();\n\n/***/ }),\n/* 129 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$models', ['$http', '$q', ModelsFactory]);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles writes and reads\n\t   *   for the application object.\n\t   *\n\t   *   This avoids the use of the window object;\n\t   *   \n\t   */\n\t  function ModelsFactory($http, $q) {\n\t\n\t    if (!Schematic) throw new Error('Models factory requires Schematic library');\n\t\n\t    // Container object we will return\n\t    var Types = {};\n\t\n\t    Types.Notifications = {};\n\t\n\t    Types.Notifications[\"orders.create\"] = new Schematic.Schema('orders.create', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order: {\n\t        required: true,\n\t        type: 'object'\n\t      }\n\t    });\n\t    Types.Notifications[\"orders.update.processing\"] = new Schematic.Schema('orders.update.processing', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order_id: {\n\t        required: true,\n\t        type: 'number'\n\t      }\n\t    });\n\t    Types.Notifications[\"orders.update.completed\"] = new Schematic.Schema('orders.update.completed', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      order_id: {\n\t        required: true,\n\t        type: 'number'\n\t      }\n\t    });\n\t    Types.Notifications[\"users.create\"] = new Schematic.Schema('users.create', {\n\t      type: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      application: {\n\t        required: true,\n\t        type: 'object'\n\t      },\n\t      user: {\n\t        required: true,\n\t        type: 'object'\n\t      }\n\t    });\n\t\n\t    Types.Bundle = new Schematic.Schema('Bundle', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: \"number\"\n\t        },\n\t        required: true\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t    Types.Payment = new Schematic.Schema('Payment', {\n\t      payment_method_id: {\n\t        required: false,\n\t        type: \"number\"\n\t      },\n\t      method: {\n\t        required: true,\n\t        type: \"string\"\n\t      },\n\t      order_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      amount: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      data: {\n\t        type: \"object\"\n\t      }\n\t    });\n\t    Types.PaymentMethod = new Schematic.Schema('PaymentMethod', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 100\n\t      },\n\t      description: {\n\t        type: \"string\",\n\t        min: 0,\n\t        max: 500\n\t      },\n\t      cost_type: {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: ['no_cost', 'fixed_fee', 'percentage_fee', 'fixed_plus_percentage']\n\t      },\n\t      fixed_fee: {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      percentage_fee: {\n\t        type: \"number\",\n\t        min: 0\n\t      }\n\t    });\n\t    Types.PromotionCondition = new Schematic.Schema('PromotionCondition', {\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: ['MIN_NUMBER_OF_PRODUCTS', 'MIN_CART_VALUE', 'CART_HAS_ITEM'],\n\t        required: true\n\t      },\n\t      \"value\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t    Types.PromotionEffect = new Schematic.Schema('PromotionEffect', {\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: ['CART_VALUE_PERCENTAGE_REDUCTION', 'CART_VALUE_NET_REDUCTION', 'CART_ITEMS_NET_REDUCTION', // price reduction to apply on each item price\n\t        'CART_ITEMS_PERCENTAGE_REDUCTION', // price reduction to apply on each item price\n\t        'FREE_SHIPPING'],\n\t        required: true\n\t      },\n\t      \"value\": {\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Promotion = new Schematic.Schema('Promotion', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 130,\n\t        required: true\n\t      },\n\t      \"active\": {\n\t        type: \"boolean\",\n\t        required: true\n\t      },\n\t      \"conditions\": {\n\t        type: 'array',\n\t        elements: {\n\t          type: Types.PromotionCondition\n\t        }\n\t      },\n\t      \"effects\": {\n\t        type: 'array',\n\t        required: true,\n\t        elements: {\n\t          type: Types.PromotionEffect\n\t        }\n\t      }\n\t    });\n\t\n\t    Types.BundleEntry = new Schematic.Schema('BundleEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"bundle_price\": {},\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Bundle = new Schematic.Schema('Bundle', {\n\t      name: {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 140,\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      },\n\t      items: {\n\t        type: \"array\",\n\t        required: true,\n\t        elements: {\n\t          type: Types.BundleEntry\n\t        }\n\t      },\n\t      pricing_rule: {\n\t        type: \"string\",\n\t        whitelist: [\"fixed\", \"inherit\"]\n\t      }\n\t    });\n\t\n\t    Types.Category = new Schematic.Schema('Category', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 1400\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      },\n\t      \"parent_id\": {\n\t        type: \"number\",\n\t        required: false\n\t      }\n\t\n\t    });\n\t\n\t    Types.CategoryNew = new Schematic.Schema('Category', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 2,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 1400\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      },\n\t      \"path\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"parent\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.CollectionEntry = new Schematic.Schema('CollectionEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Collection = new Schematic.Schema('Collection', {\n\t      name: {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 140,\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      },\n\t      items: {\n\t        type: \"array\",\n\t        required: true,\n\t        elements: {\n\t          type: Types.CollectionEntry\n\t        }\n\t      }\n\t    });\n\t\n\t    Types.ContentAuthor = new Schematic.Schema('ContentAuthor', {\n\t      image_url: {\n\t        type: \"string\"\n\t      },\n\t      name: {\n\t        type: \"string\"\n\t      },\n\t      id: {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Content = new Schematic.Schema('Content', {\n\t      title: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      text: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      author: {\n\t        type: \"object\"\n\t      },\n\t      date: {\n\t        type: \"string\"\n\t      },\n\t      published: {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.StaticContent = new Schematic.Schema('StaticContent', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      content: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      published: {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.CartEntry = new Schematic.Schema('CartEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t    Types.CartUpdateEntry = new Schematic.Schema('CartUpdateEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"variant_id\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Cart = new Schematic.Schema('Cart', {\n\t      \"items\": {\n\t        type: 'array',\n\t        elements: {\n\t          type: Types.CartEntry\n\t        },\n\t        required: true\n\t      },\n\t      \"user_id\": {\n\t        type: 'number'\n\t      }\n\t    });\n\t\n\t    Types.CartUpdate = new Schematic.Schema('CartUpdate', {\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: \"object\"\n\t        },\n\t        required: true\n\t      },\n\t      \"op\": {\n\t        type: \"string\",\n\t        whitelist: [\"add\", \"remove\", \"update\"]\n\t      }\n\t    });\n\t\n\t    Types.Coupon = new Schematic.Schema('Coupon', {\n\t      \"code\": {\n\t        type: \"string\",\n\t        min: \"1\",\n\t        max: \"30\",\n\t        required: true\n\t      },\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: \"1\",\n\t        max: \"30\",\n\t        required: true\n\t      },\n\t      \"target_type\": {\n\t        type: \"string\",\n\t        whitelist: ['CART_COUPON', 'PRODUCT_COUPON', 'CATEGORY_COUPON', 'PRODUCTS_COUPON'],\n\t        required: true\n\t      },\n\t      \"target_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"discount_type\": {\n\t        type: \"string\",\n\t        whitelist: ['NET_REDUCTION', 'PERCENTAGE_REDUCTION'],\n\t        required: true\n\t      },\n\t      \"discount_value\": {\n\t        type: \"number\",\n\t        min: 0,\n\t        required: true\n\t      },\n\t      \"active\": {\n\t        type: \"boolean\",\n\t        required: true\n\t      },\n\t      \"usages_left\": {\n\t        type: \"number\",\n\t        required: false\n\t      },\n\t      \"expiration_date\": {\n\t        type: \"string\",\n\t        required: false\n\t      }\n\t    });\n\t\n\t    Types.Brand = new Schematic.Schema('Brand', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 50,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"url\": {\n\t        type: \"string\"\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.File = new Schematic.Schema('File', {\n\t      file: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      filename: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      name: {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      slug: {\n\t        type: \"string\",\n\t        max: 140\n\t      },\n\t      description: {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.Notification = new Schematic.Schema('Notification', {\n\t      event: {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: ['custom', //Custom defined events, can only be sent programmaticaly\n\t        'order.create', // Sent automatically by the system\n\t        'order.paid', // Sent automatically by the system\n\t        'user.create' // Sent automatically by the system\n\t        ]\n\t      },\n\t      from_name: {\n\t        type: \"string\"\n\t      },\n\t      from_email: {\n\t        type: \"string\"\n\t      },\n\t      subject: {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.User = new Schematic.Schema('User', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 1,\n\t        max: 255\n\t      },\n\t      \"email\": {\n\t        type: \"string\",\n\t        min: 4,\n\t        max: 255\n\t      },\n\t      \"password\": {\n\t        type: \"string\",\n\t        min: 4,\n\t        max: 255\n\t      },\n\t      \"image_url\": {\n\t        type: \"string\"\n\t      }\n\t    });\n\t\n\t    Types.TaxRate = new Schematic.Schema('TaxRate', {\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"postcode\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"rate\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0,\n\t        max: 100\n\t      },\n\t      \"priority\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      }\n\t    });\n\t    Types.Tax = new Schematic.Schema('Tax', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\",\n\t        max: 600\n\t      },\n\t      \"rates\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.TaxRate\n\t        }\n\t      }\n\t    });\n\t    Types.Currency = new Schematic.Schema('Currency', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        min: 3,\n\t        max: 30,\n\t        required: true\n\t      },\n\t      \"formatting\": {\n\t        type: \"string\",\n\t        min: 0,\n\t        max: 3,\n\t        required: true\n\t      }\n\t    });\n\t    Types.Product = new Schematic.Schema('Product', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"type\": {\n\t        type: \"string\",\n\t        required: true,\n\t        whitelist: [\"simple_product\", \"product_with_variants\", \"grouped_product\", \"bundled_product\"]\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"stock_type\": {\n\t        type: \"string\",\n\t        whitelist: [\"infinite\", \"track\", \"status\"],\n\t        required: true\n\t      },\n\t      \"stock_status\": {\n\t        type: \"string\",\n\t        whitelist: [\"in_stock\", \"out_of_stock\"]\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"weigth\": {\n\t        type: \"number\"\n\t      },\n\t      \"height\": {\n\t        type: \"number\"\n\t      },\n\t      \"depth\": {\n\t        type: \"number\"\n\t      },\n\t      \"width\": {\n\t        type: \"number\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      }\n\t    });\n\t\n\t    Types.Variant = new Schematic.Schema('Variant', {\n\t      variant_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      product_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"stock_type\": {\n\t        type: \"string\",\n\t        whitelist: [\"infinite\", \"track\", \"status\"],\n\t        required: true\n\t      },\n\t      \"stock_status\": {\n\t        type: \"string\",\n\t        whitelist: [\"in_stock\", \"out_of_stock\"]\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.InvoiceLineItem = new Schematic.Schema('InvoiceLineItem', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 140\n\t      },\n\t      description: {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      price: {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      quantity: {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      }\n\t    });\n\t    Types.Invoice = new Schematic.Schema('Invoice', {\n\t      number: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      order_id: {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      customer: {\n\t        type: \"object\",\n\t        required: true\n\t      },\n\t      company: {\n\t        type: \"object\",\n\t        required: true\n\t      },\n\t      lineItems: {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.InvoiceLineItem\n\t        }\n\t      }\n\t    });\n\t    Types.GroupedProductEntry = new Schematic.Schema('GroupedProductEntry', {\n\t      \"product_id\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"quantity\": {\n\t        type: \"number\",\n\t        required: true\n\t      }\n\t    });\n\t    Types.GroupedProduct = new Schematic.Schema('GroupedProduct', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        elements: {\n\t          type: Types.GroupedProductEntry\n\t        },\n\t        min: 1\n\t      },\n\t      \"pricing_method\": {\n\t        type: \"string\",\n\t        whitelist: [\"dynamic_pricing\", \"fixed_pricing\"],\n\t        required: true\n\t      },\n\t      \"price\": {\n\t        type: \"number\"\n\t      },\n\t      \"price_discount\": {\n\t        type: \"number\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      },\n\t      \"type\": {\n\t        type: \"string\",\n\t        whitelist: [\"grouped_product\"]\n\t      }\n\t    });\n\t\n\t    Types.ProductWithVariants = new Schematic.Schema('Product', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 2\n\t      },\n\t      \"category_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"sku\": {\n\t        type: \"string\"\n\t      },\n\t      \"price\": {\n\t        type: \"number\",\n\t        required: true\n\t      },\n\t      \"stock_level\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"weigth\": {\n\t        type: \"number\"\n\t      },\n\t      \"height\": {\n\t        type: \"number\"\n\t      },\n\t      \"width\": {\n\t        type: \"number\"\n\t      },\n\t      \"depth\": {\n\t        type: \"number\"\n\t      },\n\t      \"brand_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"images\": {\n\t        type: \"array\"\n\t      },\n\t      \"slug\": {\n\t        type: \"string\"\n\t      },\n\t      \"published\": {\n\t        type: \"boolean\"\n\t      }\n\t    });\n\t\n\t    Types.Order = new Schematic.Schema('Order', {\n\t      \"status\": {\n\t        type: \"string\",\n\t        whitelist: [\"created\", \"processing\", \"evaded\", \"shipped\"]\n\t      },\n\t      \"shipping_address_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"billing_address_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"items_total\": {\n\t        type: \"number\"\n\t      },\n\t      \"display_items_total\": {\n\t        type: \"string\"\n\t      },\n\t      \"total\": {\n\t        type: \"number\"\n\t      },\n\t      \"display_total\": {\n\t        type: \"string\"\n\t      },\n\t      \"items\": {\n\t        type: \"array\",\n\t        required: true\n\t      },\n\t      \"currency\": {\n\t        type: \"string\",\n\t        whitelist: [\"USD\", \"CAD\", \"EUR\", \"AED\", \"AFN\", \"ALL\", \"AMD\", \"ARS\", \"AUD\", \"AZN\", \"BAM\", \"BDT\", \"BGN\", \"BHD\", \"BIF\", \"BND\", \"BOB\", \"BRL\", \"BWP\", \"BYR\", \"BZD\", \"CDF\", \"CHF\", \"CLP\", \"CNY\", \"COP\", \"CRC\", \"CVE\", \"CZK\", \"DJF\", \"DKK\", \"DOP\", \"DZD\", \"EEK\", \"EGP\", \"ERN\", \"ETB\", \"GBP\", \"GEL\", \"GHS\", \"GNF\", \"GTQ\", \"HKD\", \"HNL\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"INR\", \"IQD\", \"IRR\", \"ISK\", \"JMD\", \"JOD\", \"JPY\", \"KES\", \"KHR\", \"KMF\", \"KRW\", \"KWD\", \"KZT\", \"LBP\", \"LKR\", \"LTL\", \"LVL\", \"LYD\", \"MAD\", \"MDL\", \"MGA\", \"MKD\", \"MMK\", \"MOP\", \"MUR\", \"MXN\", \"MYR\", \"MZN\", \"NAD\", \"NGN\", \"NIO\", \"NOK\", \"NPR\", \"NZD\", \"OMR\", \"PAB\", \"PEN\", \"PHP\", \"PKR\", \"PLN\", \"PYG\", \"QAR\", \"RON\", \"RSD\", \"RUB\", \"RWF\", \"SAR\", \"SDG\", \"SEK\", \"SGD\", \"SOS\", \"SYP\", \"THB\", \"TND\", \"TOP\", \"TRY\", \"TTD\", \"TWD\", \"TZS\", \"UAH\", \"UGX\", \"UYU\", \"UZS\", \"VEF\", \"VND\", \"XAF\", \"XOF\", \"YER\", \"ZAR\", \"ZMK\"]\n\t      },\n\t      \"store_id\": {\n\t        type: \"number\"\n\t      },\n\t      \"notes\": {\n\t        type: \"string\",\n\t        max: 500\n\t      },\n\t      \"shipping_fee\": {\n\t        type: \"number\",\n\t        min: 0\n\t      }\n\t    });\n\t\n\t    Types.Address = new Schematic.Schema('Address', {\n\t      \"full_name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        max: 140\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      \"address1\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 250\n\t      },\n\t      \"address2\": {\n\t        type: \"string\",\n\t        max: 250\n\t      },\n\t      \"postal_code\": {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 20\n\t      },\n\t      phone_number: {\n\t        type: \"string\",\n\t        max: 30\n\t      },\n\t      email: {\n\t        type: \"string\",\n\t        required: true,\n\t        max: 140\n\t      },\n\t      alternate_phone_number: {\n\t        type: \"string\",\n\t        max: 140\n\t      }\n\t    });\n\t\n\t    // This resemble a taxrate\n\t    Types.ShippingZone = new Schematic.Schema('ShippingZone', {\n\t      \"country\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"state\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"postcode\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"city\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Shipping = new Schematic.Schema('Shipping', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 3\n\t      },\n\t      \"base_cost\": {\n\t        type: \"number\",\n\t        required: true,\n\t        min: 0\n\t      },\n\t      \"per_item_cost\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"min_price\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"max_price\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"min_weight\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"max_weight\": {\n\t        type: \"number\",\n\t        min: 0\n\t      },\n\t      \"zones\": {\n\t        type: \"array\"\n\t      }\n\t    });\n\t\n\t    Types.Store = new Schematic.Schema('Store', {\n\t      \"name\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"owner_email\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"string\"\n\t      },\n\t      \"custom_attributes\": {\n\t        type: \"object\"\n\t      }\n\t    });\n\t\n\t    Types.Customer = new Schematic.Schema('Customer', {\n\t      \"full_name\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"shipping_address\": {\n\t        type: Types.Address,\n\t        required: true\n\t      },\n\t      \"billing_address\": {\n\t        type: Types.Address,\n\t        required: true\n\t      },\n\t      \"email\": {\n\t        type: \"string\",\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Variable = new Schematic.Schema('Variable', {\n\t      name: {\n\t        type: \"string\",\n\t        required: true,\n\t        min: 1,\n\t        max: 500\n\t      },\n\t      type: {\n\t        type: \"string\",\n\t        required: false,\n\t        whitelist: ['string', 'number', 'boolean', 'object', 'array']\n\t      },\n\t      value: {\n\t        required: true\n\t      }\n\t    });\n\t\n\t    Types.Shipment = new Schematic.Schema('Shipment', {\n\t      \"date\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"delivery_date\": {\n\t        type: \"string\",\n\t        required: true\n\t      },\n\t      \"description\": {\n\t        type: \"text\"\n\t      },\n\t      \"method\": {\n\t        type: Types.Shipping\n\t      }\n\t\n\t    });\n\t\n\t    return Types;\n\t  }\n\t})();\n\n/***/ }),\n/* 130 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\tangular.module('DataDashboard').factory('NotificationsPresetsFactory', NotificationsPresetsFactory);\n\t\n\t\tfunction NotificationsPresetsFactory() {\n\t\n\t\t\tvar presets = {};\n\t\n\t\t\tpresets['invoices.create'] = {\n\t\t\t\tname: 'An order is created',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\t\tsubject: 'Your invoice',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Your invoice',\n\t\t\t\t\tmessage: 'Attached to this email you can find your most recent invoice for your order at {{application.name}}'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.create'] = {\n\t\t\t\tname: 'An order is created',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\t\tsubject: 'We received your order!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\t\tintroduction: 'Your order has been received and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['users.create'] = {\n\t\t\t\tname: 'New customer account',\n\t\t\t\tdescription: 'This notification is sent to the customer who creates an account',\n\t\t\t\tsubject: 'Welcome!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Welcome to {{application.name}}!',\n\t\t\t\t\tintroduction: 'Thank you for creating an account with us!',\n\t\t\t\t\tbuttonLabel: 'Visit our store'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['users.recoverPassword'] = {\n\t\t\t\tname: 'Password recovery',\n\t\t\t\tdescription: 'This notification is sent to the customer who requests a password recovery',\n\t\t\t\tsubject: 'Password recovery',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Recover your password',\n\t\t\t\t\tintroduction: 'Hello, we sent you this email because you requested to recover your password. If it\\'s not the case, please ignore this email.',\n\t\t\t\t\tredirect_url: 'http://example.com/passwordrecovery'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.update.processing'] = {\n\t\t\t\tname: 'An order is paid',\n\t\t\t\tdescription: 'This notification is sent to the customer who paid an order',\n\t\t\t\tsubject: 'Your order is confirmed!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\t\tintroduction: 'Your order has been confirmed and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.update.completed'] = {\n\t\t\t\tname: 'An order is shipped',\n\t\t\t\tdescription: 'This notification is sent to the customer when his/her order is shipped.',\n\t\t\t\tsubject: 'We shipped your order!',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Your order is on the way',\n\t\t\t\t\tintroduction: 'We are happy to inform you that we shipped your order #{{order.id}} !',\n\t\t\t\t\ttracking_code_introduction: 'You can click on the following tracking number to track your package on the carrier\\'s website.',\n\t\t\t\t\tproductLabel: 'Items',\n\t\t\t\t\tpriceLabel: 'Price',\n\t\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tpresets['orders.refund'] = {\n\t\t\t\tname: 'An order is refunded',\n\t\t\t\tdescription: 'This notification is sent to the customer when his/her order is refunded.',\n\t\t\t\tsubject: 'Refund for order {{order.id}}',\n\t\t\t\tlocales: {},\n\t\t\t\ttemplate: {\n\t\t\t\t\ttitle: 'Refund for order {{order.id}}',\n\t\t\t\t\tintroduction: 'A refund was recently created for your order. Details are shown below for your reference.',\n\t\t\t\t\tproductLabel: 'Items'\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\treturn presets;\n\t\t}\n\t})();\n\n/***/ }),\n/* 131 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$pagination', PaginationFactory);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles the pagination object\n\t   *   \n\t   */\n\t  function PaginationFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    /*\n\t     * @param {HTTPResponse} httpResponse The response object\n\t     */\n\t    Factory.fromHTTPResponse = function (httpResponse) {\n\t      return {\n\t        currentPage: httpResponse.data.page,\n\t        numberOfPages: httpResponse.data.pages,\n\t        nextPage: httpResponse.data._links.next || null,\n\t        previousPage: httpResponse.data._links.prev || null,\n\t        count: httpResponse.data.count\n\t      };\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 132 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar app = angular.module('DataDashboard');\n\tapp.factory('rolePresets', function () {\n\t    function getCommonPublicProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getAllTrueProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        };\n\t    }\n\t\n\t    function getAllFalseProfile() {\n\t        return {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getCommonUserProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        };\n\t    }\n\t\n\t    function getCommonAdminProfile() {\n\t        return {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        };\n\t    }\n\t\n\t    var publicAccessMap = {\n\t        addresses: getAllFalseProfile(),\n\t        brands: getCommonPublicProfile(),\n\t        carts: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: true,\n\t            patch: true,\n\t            create: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: false\n\t        },\n\t        categories: getCommonPublicProfile(),\n\t        collections: getCommonPublicProfile(),\n\t        contents: getCommonPublicProfile(),\n\t        coupons: getAllFalseProfile(),\n\t        promotions: getCommonPublicProfile(),\n\t        currencies: getCommonPublicProfile(),\n\t        orders: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: true,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        paymentMethods: getCommonPublicProfile(),\n\t        invoices: getAllFalseProfile(),\n\t        products: getCommonPublicProfile(),\n\t        shippings: getCommonPublicProfile(),\n\t        stores: getCommonPublicProfile(),\n\t        taxes: getCommonPublicProfile(),\n\t        users: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: true,\n\t            update: false,\n\t            delete: false,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonPublicProfile()\n\t    };\n\t\n\t    var userAccessMap = {\n\t        addresses: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        brands: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        carts: {\n\t            list: true,\n\t            findOne: false,\n\t            getById: true,\n\t            patch: true,\n\t            create: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: true\n\t        },\n\t        categories: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        collections: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        contents: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        coupons: getAllFalseProfile(),\n\t        promotions: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        currencies: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        orders: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        paymentMethods: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true, // I can order stuff on sites even if i'm not authenticated\n\t            update: false,\n\t            delete: false\n\t        },\n\t        products: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        shippings: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        stores: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        taxes: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        invoices: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: false,\n\t            create: false,\n\t            update: false,\n\t            delete: false\n\t        },\n\t        users: {\n\t            list: false,\n\t            findOne: false,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonUserProfile()\n\t    };\n\t\n\t    var adminAccessMap = {\n\t        addresses: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        invoices: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        brands: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        carts: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            patch: true,\n\t            update: true,\n\t            checkout: true,\n\t            delete: true\n\t        },\n\t        categories: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        collections: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        contents: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        coupons: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        promotions: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        currencies: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t\n\t        orders: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        paymentMethods: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        products: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        shippings: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        stores: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        taxes: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true\n\t        },\n\t        users: {\n\t            list: true,\n\t            findOne: true,\n\t            getById: true,\n\t            create: true,\n\t            update: true,\n\t            delete: true,\n\t            authenticate: true\n\t        },\n\t        variables: getCommonAdminProfile()\n\t    };\n\t\n\t    return {\n\t        public: publicAccessMap,\n\t        user: userAccessMap,\n\t        admin: adminAccessMap\n\t    };\n\t});\n\n/***/ }),\n/* 133 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('StormConfiguration', StormConfigurationFactory);\n\t\n\t  StormConfigurationFactory.$inject = ['$window', '$application'];\n\t\n\t  /*\n\t  *   AngularJS Factory that handles writes and reads from\n\t  *   localStorage (or similar backend) for managing Storm user preferences.\n\t  *\n\t  *   For example it can be used to save default filters on a certain view\n\t  * \n\t  *   It can also be used to save some custom behaviour.\n\t  *\n\t  *   The main feature should be that it wraps all the configs in a json object\n\t  *   which gets written to storage and read every time as a whole.\n\t  */\n\t  function StormConfigurationFactory($window, $application) {\n\t\n\t    var Factory = {};\n\t\n\t    console.info(\"Loading Storm configuration information from localStorage\");\n\t\n\t    var LOCALSTORAGE_KEY = 'Marketcloud.Storm.Configuration.' + ($application.get('id') || \"unkownAppId\");\n\t\n\t    function loadFromStorage() {\n\t      var storedJson = window.localStorage.getItem(LOCALSTORAGE_KEY);\n\t      if (storedJson) Factory._data = JSON.parse(storedJson);else Factory._data = {};\n\t    }\n\t\n\t    function persistToStorage() {\n\t      var s = JSON.stringify(Factory._data);\n\t      console.log(\"Persisting to storage with key \" + LOCALSTORAGE_KEY, s);\n\t      window.localStorage.setItem(LOCALSTORAGE_KEY, s);\n\t    }\n\t\n\t    Factory._data = {};\n\t\n\t    Factory.loadFromStorage = loadFromStorage;\n\t    Factory.persistToStorage = persistToStorage;\n\t\n\t    Factory.loadFromStorage();\n\t\n\t    Factory.get = function (key) {\n\t\n\t      if (\"undefined\" !== typeof key) return this._data[key];else return this._data;\n\t    };\n\t\n\t    Factory.set = function (key, value, persist) {\n\t\n\t      persist = persist || true;\n\t\n\t      if (\"string\" !== typeof key) throw new Error(\"StormConfigurationFactory.set(key,value) 'key' must be String\");\n\t\n\t      this._data[key] = value;\n\t\n\t      if (persist === true) Factory.persistToStorage();\n\t    };\n\t\n\t    Factory.applyTheme = function (theme) {\n\t\n\t      // Checking\n\t      if (!theme) return;\n\t\n\t      // Sanitizing the theme filename\n\t      if (theme.indexOf('.theme.css') === -1) {\n\t        theme = theme + '.theme.css';\n\t      }\n\t\n\t      var url = '/modules/data_dashboard/css/themes/' + theme;\n\t\n\t      // Removing previously loaded themes\n\t      $(\".storm-theme-definition\").remove();\n\t\n\t      // Appending the theme to the Document\n\t      $('<link rel=\"stylesheet\" class=\"storm-theme-definition\" type=\"text/css\" href=\"' + url + '\" >').appendTo(\"head\");\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 134 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('TableManager', TableManagerFactory);\n\t\n\t  TableManagerFactory.$inject = [];\n\t\n\t  /*\n\t  *   AngularJS Factory that handles the configuration\n\t  *   of data tables\n\t  */\n\t  function TableManagerFactory() {\n\t\n\t    var factory = {};\n\t\n\t    // This is to avoid to overflow controllers with shared functionality\n\t    function attachTableManagerFunctions(scope) {\n\t\n\t      if (!scope.hasOwnProperty(\"visibleColumns\")) {\n\t        scope.visibleColumns = [];\n\t      }\n\t    }\n\t\n\t    return factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 135 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tangular.module('Marketcloud.Shared').factory('TaxRates', function () {\n\t\n\t  return [{\n\t    \"country\": \"Australia\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"10.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"AU\"\n\t  }, {\n\t    \"country\": \"Bangladesh\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"15.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"BD\"\n\t  }, {\n\t    \"country\": \"Belgium\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"BTW\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"BE\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"British Columbia\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"BC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Saskatchewan\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"SK\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Manitoba\",\n\t    \"rate\": \"8.0000\",\n\t    \"name\": \"PST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"MB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Quebec\",\n\t    \"rate\": \"9.975\",\n\t    \"name\": \"QST\",\n\t    \"shipping\": false,\n\t    \"priority\": 2,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"QC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Ontario\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"ON\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Newfoundland and Labrador\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NL\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"New Brunswick\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Prince Edward Island\",\n\t    \"rate\": \"14.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"PE\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Nova Scotia\",\n\t    \"rate\": \"15.0000\",\n\t    \"name\": \"HST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NS\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Alberta\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"AB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"British Columbia\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"BC\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Northwest Territories\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NT\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Nunavut\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"NU\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Yukon\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"YT\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Saskatchewan\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"SK\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Manitoba\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"MB\"\n\t  }, {\n\t    \"country\": \"Canada\",\n\t    \"state\": \"Quebec\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"GST\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"CA\",\n\t    \"state_code\": \"QC\"\n\t  }, {\n\t    \"country\": \"Finland\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"24.0000\",\n\t    \"name\": \"ALV\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"FI\"\n\t  }, {\n\t    \"country\": \"France\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"20.0000\",\n\t    \"name\": \"TVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"FR\"\n\t  }, {\n\t    \"country\": \"Germany\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"19.0000\",\n\t    \"name\": \"Mwst.\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"DE\"\n\t  }, {\n\t    \"country\": \"Hungary\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"27.0000\",\n\t    \"name\": \"FA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"HU\"\n\t  }, {\n\t    \"country\": \"Italy\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"22.0000\",\n\t    \"name\": \"IVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"IT\"\n\t  }, {\n\t    \"country\": \"Japan\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"8.0000\",\n\t    \"name\": \"Consumption tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"JP\"\n\t  }, {\n\t    \"country\": \"Nepal\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"13.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NP\"\n\t  }, {\n\t    \"country\": \"Netherlands\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NL\"\n\t  }, {\n\t    \"country\": \"Norway\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"25.0000\",\n\t    \"name\": \"MVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"NO\"\n\t  }, {\n\t    \"country\": \"Poland\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"23.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"PL\"\n\t  }, {\n\t    \"country\": \"Romania\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"19.0000\",\n\t    \"name\": \"TVA\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"RO\"\n\t  }, {\n\t    \"country\": \"South Africa\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"14.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"ZA\"\n\t  }, {\n\t    \"country\": \"Spain\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"21.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"ES\"\n\t  }, {\n\t    \"country\": \"Thailand\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"TH\"\n\t  }, {\n\t    \"country\": \"Turkey\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"18.0000\",\n\t    \"name\": \"KDV\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"TR\"\n\t  }, {\n\t    \"country\": \"United Kingdom\",\n\t    \"state\": \"*\",\n\t    \"rate\": \"20.0000\",\n\t    \"name\": \"VAT\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"GB\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Alabama\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Arizona\",\n\t    \"rate\": \"5.6000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AZ\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Arkansas\",\n\t    \"rate\": \"6.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"AR\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"California\",\n\t    \"rate\": \"7.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Colorado\",\n\t    \"rate\": \"2.9000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CO\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Connecticut\",\n\t    \"rate\": \"6.3500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"CT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"District of Columbia\",\n\t    \"rate\": \"5.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"DC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Florida\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"FL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Georgia\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"GA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Guam\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"GU\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Hawaii\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"HI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Idaho\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ID\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Illinois\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IL\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Indiana\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Iowa\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"IA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Kansas\",\n\t    \"rate\": \"6.1500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"KS\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Kentucky\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"KY\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Louisiana\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"LA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Maine\",\n\t    \"rate\": \"5.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ME\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Maryland\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MD\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Massachusetts\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Michigan\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Minnesota\",\n\t    \"rate\": \"6.8750\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Mississippi\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MS\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Missouri\",\n\t    \"rate\": \"4.225\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"MO\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Nebraska\",\n\t    \"rate\": \"5.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NE\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Nevada\",\n\t    \"rate\": \"6.8500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NV\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New Jersey\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NJ\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New Mexico\",\n\t    \"rate\": \"5.1250\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NM\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"New York\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NY\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"North Carolina\",\n\t    \"rate\": \"4.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"NC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"North Dakota\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"ND\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Ohio\",\n\t    \"rate\": \"5.7500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"OH\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Oklahoma\",\n\t    \"rate\": \"4.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"OK\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Pennsylvania\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"PA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Puerto Rico\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"PR\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Rhode Island\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"RI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"South Carolina\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"SC\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"South Dakota\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"SD\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Tennessee\",\n\t    \"rate\": \"7.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"TN\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Texas\",\n\t    \"rate\": \"6.2500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"TX\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Utah\",\n\t    \"rate\": \"5.9500\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"UT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Vermont\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"VT\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Virginia\",\n\t    \"rate\": \"5.3000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": false,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"VA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Washington\",\n\t    \"rate\": \"6.5000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WA\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"West Virginia\",\n\t    \"rate\": \"6.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WV\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Wisconsin\",\n\t    \"rate\": \"5.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WI\"\n\t  }, {\n\t    \"country\": \"United States\",\n\t    \"state\": \"Wyoming\",\n\t    \"rate\": \"4.0000\",\n\t    \"name\": \"State Tax\",\n\t    \"shipping\": true,\n\t    \"country_code\": \"US\",\n\t    \"state_code\": \"WY\"\n\t  }];\n\t});\n\n/***/ }),\n/* 136 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$utils', UtilsFactory);\n\t\n\t  /*\n\t   *   AngularJS Factory that handles the pagination object\n\t   *   \n\t   */\n\t  function UtilsFactory() {\n\t\n\t    // Container object we will return\n\t    var Factory = {};\n\t\n\t    var flatten = function flatten(data) {\n\t      var result = {};\n\t\n\t      function recurse(cur, prop) {\n\t        if (Object(cur) !== cur) {\n\t          result[prop] = cur;\n\t        } else if (Array.isArray(cur)) {\n\t          for (var i = 0, l = cur.length; i < l; i++) {\n\t            recurse(cur[i], prop + \"[\" + i + \"]\");\n\t          }if (l === 0) result[prop] = [];\n\t        } else {\n\t          var isEmpty = true;\n\t          for (var p in cur) {\n\t            isEmpty = false;\n\t            recurse(cur[p], prop ? prop + \".\" + p : p);\n\t          }\n\t          if (isEmpty && prop) result[prop] = {};\n\t        }\n\t      }\n\t      recurse(data, \"\");\n\t      return result;\n\t    };\n\t\n\t    var unflatten = function unflatten(data) {\n\t      \"use strict\";\n\t\n\t      if (Object(data) !== data || Array.isArray(data)) return data;\n\t      var regex = /\\,?([^.\\[\\]]+)|\\[(\\d+)\\]/g,\n\t          resultholder = {};\n\t      for (var p in data) {\n\t        var cur = resultholder,\n\t            prop = \"\",\n\t            m;\n\t        while (m = regex.exec(p)) {\n\t          cur = cur[prop] || (cur[prop] = m[2] ? [] : {});\n\t          prop = m[2] || m[1];\n\t        }\n\t        cur[prop] = data[p];\n\t      }\n\t      return resultholder[\"\"] || resultholder;\n\t    };\n\t\n\t    Factory.flatten = flatten;\n\t    Factory.unflatten = unflatten;\n\t\n\t    /*\n\t     * @param {String} str The input string\n\t     * @return {String} The slug--ified version of the string\n\t     */\n\t    Factory.getSlugFromString = function (str) {\n\t      return str.split(' ').map(function (item) {\n\t        return item.replace(/\\W/g, '');\n\t      }).map(function (item) {\n\t        return item.toLowerCase();\n\t      }).join('-');\n\t    };\n\t\n\t    /*\n\t     * @param {HTTPResponse} httpResponse The response object\n\t     */\n\t    Factory.getPaginationFromHTTPResponse = function (httpResponse) {\n\t      return {\n\t        currentPage: httpResponse.data.page,\n\t        numberOfPages: httpResponse.data.pages,\n\t        nextPage: httpResponse.data._links.next || null,\n\t        previousPage: httpResponse.data._links.prev || null,\n\t        count: httpResponse.data.count\n\t      };\n\t    };\n\t\n\t    // Exports an array of objects or an object to a JSON file\n\t    function JSONExport(data, title) {\n\t      if (!title) title = 'Marketcloud_export_' + String(Date.now()) + '.json';\n\t\n\t      var encodedUri = encodeURI('data:application/json;charset=utf-8,' + JSON.stringify(data));\n\t      var link = document.createElement('a');\n\t      link.setAttribute('href', encodedUri);\n\t      link.setAttribute('download', title);\n\t      document.body.appendChild(link); // Required for FF\n\t\n\t      link.click(); // This will download the data file named \"my_data.csv\".\n\t    }\n\t\n\t    Factory.exportAsJSON = JSONExport;\n\t\n\t    // Exports an array of objects or an object to a JSON file\n\t    function CSVExport(data, title) {\n\t      if (!title) title = 'Marketcloud_export_' + String(Date.now()) + '.csv';\n\t\n\t      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + data);\n\t      var link = document.createElement('a');\n\t      link.setAttribute('href', encodedUri);\n\t      link.setAttribute('download', title);\n\t      document.body.appendChild(link); // Required for FF\n\t\n\t      link.click(); // This will download the data file named \"my_data.csv\".\n\t    }\n\t\n\t    Factory.exportAsCSV = CSVExport;\n\t\n\t    /*\n\t     * Simple and UN-SAFE hash function\n\t     *\n\t     * @param {String} str the input string\n\t     * @return {String} the hashed string\n\t     */\n\t    function strhash(str) {\n\t      if (str.length % 32 > 0) {\n\t        str += Array(33 - str.length % 32).join(\"z\");\n\t      }\n\t      var hash = '';\n\t      var bytes = [];\n\t      var i = 0;\n\t      var j = 0;\n\t      var k = 0;\n\t      var a = 0;\n\t      var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n\t\n\t      for (i = 0; i < str.length; i++) {\n\t        var ch = str.charCodeAt(i);\n\t        bytes[j++] = ch < 127 ? ch & 0xFF : 127;\n\t      }\n\t\n\t      var chunk_len = Math.ceil(bytes.length / 32);\n\t      for (i = 0; i < bytes.length; i++) {\n\t        j += bytes[i];\n\t        k++;\n\t        if (k == chunk_len || i == bytes.length - 1) {\n\t          a = Math.floor(j / k);\n\t          if (a < 32) hash += '0';else if (a > 126) hash += 'z';else hash += dict[Math.floor((a - 32) / 2.76)];\n\t          j = k = 0;\n\t        }\n\t      }\n\t      return hash;\n\t    }\n\t\n\t    Factory.hash = strhash;\n\t\n\t    // Given a csv file (in string form)\n\t    // returns an array of objects\n\t    Factory.CSVToJSON = function (csv) {\n\t      var rows = csv.split(\"\\n\");\n\t\n\t      var header = rows[0];\n\t      var header_fields = header.split(\",\");\n\t\n\t      var objects = [];\n\t\n\t      for (var i = 1; i < rows.length; i++) {\n\t        var o = {};\n\t        var row_fields = rows[i].split(\",\");\n\t\n\t        for (var k = 0; k < header_fields.length; k++) {\n\t          if (row_fields[k] !== \"\") {\n\t            o[header_fields[k]] = row_fields[k];\n\t\n\t            if (\"true\" === o[header_fields[k]] || \"false\" === o[header_fields[k]]) o[header_fields[k]] = Boolean(o[header_fields[k]]);else if (!isNaN(o[header_fields[k]])) {\n\t              // Keeping the else-if otherwise\n\t              // test will fail converting a boolean to number\n\t              o[header_fields[k]] = Number(o[header_fields[k]]);\n\t            }\n\t          }\n\t        }\n\t\n\t        objects.push(o);\n\t      }\n\t\n\t      return objects;\n\t    };\n\t\n\t    Factory.JSONToCSV = function (json) {\n\t      if (!Array.isArray(json)) json = [json];\n\t\n\t      var fields = [];\n\t\n\t      json.forEach(function (row) {\n\t        for (var k in row) {\n\t          if (fields.indexOf(k) < 0) fields.push(k);\n\t        }\n\t      });\n\t\n\t      var firstRow = fields.join(',');\n\t\n\t      var buf = firstRow + \"\\n\";\n\t\n\t      json.forEach(function (row) {\n\t        fields.forEach(function (field) {\n\t          if (row.hasOwnProperty(field) && row[field] !== null) buf += row[field] + \",\";else buf += \",\";\n\t        });\n\t        buf += \"\\n\";\n\t      });\n\t\n\t      // lets remove the last newline\n\t      buf = buf.replace(/\\n$/, \"\");\n\t\n\t      return buf;\n\t    };\n\t\n\t    return Factory;\n\t  }\n\t})();\n\n/***/ }),\n/* 137 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t(function () {\n\t  'use strict';\n\t\n\t  angular.module('DataDashboard').factory('$validation', ValidationService);\n\t\n\t  /*\n\t   *   AngularJS Service that handles the pagination object\n\t   *   \n\t   */\n\t  function ValidationService() {\n\t\n\t    // Container object we will return\n\t    var Service = {};\n\t\n\t    Service.showErrorMessage = function (validation, schema, selector) {\n\t\n\t      Service.hideErrors();\n\t\n\t      selector = selector || '[ng-model=\"' + validation.invalidPropertyName + '\"]';\n\t\n\t      if (0 === angular.element(selector).length) {\n\t        console.log(\"COuld now match selector \" + selector + \" to show error message, exiting\");\n\t        return;\n\t      }\n\t\n\t      var element = angular.element(selector);\n\t\n\t      var errorMessage = Service.getErrorMessage(validation, schema);\n\t\n\t      var parent = element.parent();\n\t\n\t      if (parent.hasClass('input-group')) parent = parent.parent();\n\t\n\t      parent.append('<div class=\"error-message\">' + errorMessage + '</div>');\n\t      parent.addClass(\"has-error\");\n\t\n\t      $('html, body').animate({\n\t        scrollTop: element.offset().top - 200\n\t      }, 500);\n\t    };\n\t\n\t    Service.getErrorMessage = function (validation, schema) {\n\t\n\t      switch (validation.failedValidator) {\n\t        case \"required\":\n\t          return \"This field is required\";\n\t\n\t        case \"type\":\n\t          return \"This field must be a \" + schema[validation.invalidPropertyName].type;\n\t\n\t        case \"min\":\n\t          if (\"number\" === schema[validation.invalidPropertyName].type) return \"Minimum value is \" + schema[validation.invalidPropertyName].min;else if (\"string\" === schema[validation.invalidPropertyName].type) return \"Minimum length is \" + schema[validation.invalidPropertyName].min;else if (\"array\" === schema[validation.invalidPropertyName].type) return \"Minimum number of elements is is \" + schema[validation.invalidPropertyName].min;else return \"Minimum is \" + schema[validation.invalidPropertyName].min;\n\t\n\t        case \"max\":\n\t          if (\"number\" === schema[validation.invalidPropertyName].type) return \"Maxiumum value is \" + schema[validation.invalidPropertyName].max;else if (\"string\" === schema[validation.invalidPropertyName].type) return \"Maxiumum length is \" + schema[validation.invalidPropertyName].max;else if (\"array\" === schema[validation.invalidPropertyName].type) return \"Maxiumum number of elements is is \" + schema[validation.invalidPropertyName].max;else return \"Maxiumum is \" + schema[validation.invalidPropertyName].max;\n\t          break;\n\t\n\t        default:\n\t          return \"This field is invalid\";\n\t          break;\n\t      }\n\t    };\n\t\n\t    Service.hideErrors = function () {\n\t      angular.element('.error-message').remove();\n\t      angular.element('.has-error').removeClass('has-error');\n\t    };\n\t\n\t    return Service;\n\t  }\n\t})();\n\n/***/ })\n/******/ ])));\n\n\n// WEBPACK FOOTER //\n// app.bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f9bc2424be2481880b14","//require('./src/app.js');\n\nfunction requireAll(requireContext) {\n  return requireContext.keys().map(requireContext);\n}\n\n\n// Require all JS files, including subdirectories\n// This will require every controller/factory/service/component\nvar modules = requireAll(require.context(\"./src\", true, /\\.js/));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/main.js","var map = {\n\t\"./app.js\": 2,\n\t\"./components/activeFilters/activeFilters.component.js\": 3,\n\t\"./components/addProductsCard/addProductsCard.component.js\": 4,\n\t\"./components/addressForm/addressForm.component.js\": 5,\n\t\"./components/application/application.component.js\": 6,\n\t\"./components/autocomplete/autocomplete.component.js\": 7,\n\t\"./components/backButton/backButton.component.js\": 8,\n\t\"./components/brandsSelector/brandsSelector.component.js\": 9,\n\t\"./components/categoriesSelector/categoriesSelector.component.js\": 10,\n\t\"./components/customAttributes/customAttributes.component.js\": 11,\n\t\"./components/dashboardBreadcrumb/dashboardBreadcrumb.component.js\": 12,\n\t\"./components/dashboardSectionNavbar/dashboardSectionNavbar.component.js\": 13,\n\t\"./components/dataTable/dataTable.component.js\": 14,\n\t\"./components/errorMessages/errorMessages.component.js\": 15,\n\t\"./components/flagIcon/flagIcon.component.js\": 16,\n\t\"./components/imageSelector/imageSelector.component.js\": 17,\n\t\"./components/imageThumbnail/imageThumbnail.component.js\": 18,\n\t\"./components/imagesCard/imagesCard.component.js\": 19,\n\t\"./components/linkHelpText/linkHelpText.component.js\": 20,\n\t\"./components/navbar/navbar.component.js\": 21,\n\t\"./components/paginationNav/paginationNav.component.js\": 22,\n\t\"./components/paginationSelector/paginationSelector.component.js\": 23,\n\t\"./components/resourcePicker/resourcePicker.component.js\": 24,\n\t\"./components/seoForm/seoForm.component.js\": 25,\n\t\"./components/sidebar/sidebar.component.js\": 26,\n\t\"./components/sortingSelector/sortingSelector.component.js\": 27,\n\t\"./components/switch/switch.component.js\": 28,\n\t\"./components/taxesSelector/taxesSelector.component.js\": 29,\n\t\"./components/toolbarSearch/toolbarSearch.component.js\": 30,\n\t\"./controllers/PaymentMethods.controller.js\": 31,\n\t\"./controllers/analytics.controller.js\": 32,\n\t\"./controllers/application/acl.controller.js\": 33,\n\t\"./controllers/application/application.new.controller.js\": 34,\n\t\"./controllers/application/applications.list.controller.js\": 35,\n\t\"./controllers/application/billing.controller.js\": 36,\n\t\"./controllers/application/collaborators.controller.js\": 37,\n\t\"./controllers/application/deploy.controller.js\": 38,\n\t\"./controllers/application/integrations.controller.js\": 39,\n\t\"./controllers/application/navigation.controller.js\": 40,\n\t\"./controllers/application/overview.controller.js\": 41,\n\t\"./controllers/application/settings.controller.js\": 42,\n\t\"./controllers/application/webhooks.controller.js\": 43,\n\t\"./controllers/brandTranslations.controller.js\": 44,\n\t\"./controllers/brands/brands.edit.js\": 45,\n\t\"./controllers/brands/brands.list.js\": 46,\n\t\"./controllers/brands/brands.new.js\": 47,\n\t\"./controllers/categories/categories.edit.js\": 48,\n\t\"./controllers/categories/categories.list.js\": 49,\n\t\"./controllers/categories/categories.new.js\": 50,\n\t\"./controllers/categoryTranslations.controller.js\": 51,\n\t\"./controllers/collectionTranslations.controller.js\": 52,\n\t\"./controllers/collections/collections.controller.js\": 53,\n\t\"./controllers/collections/collections.create.js\": 54,\n\t\"./controllers/collections/collections.edit.js\": 55,\n\t\"./controllers/collections/collections.new.js\": 56,\n\t\"./controllers/contentTranslations.controller.js\": 57,\n\t\"./controllers/contents/content.edit.js\": 58,\n\t\"./controllers/contents/content.new.js\": 59,\n\t\"./controllers/contents/contents.list.js\": 60,\n\t\"./controllers/contents/groupedProducts.edit.js\": 61,\n\t\"./controllers/contents/groupedProducts.new.js\": 62,\n\t\"./controllers/coupons/coupon.edit.js\": 63,\n\t\"./controllers/coupons/coupons.new.js\": 64,\n\t\"./controllers/deploy.js\": 65,\n\t\"./controllers/home.js\": 66,\n\t\"./controllers/integrations.js\": 67,\n\t\"./controllers/invoices/invoice.new.js\": 68,\n\t\"./controllers/invoices/invoices.edit.js\": 69,\n\t\"./controllers/localization.controller.js\": 70,\n\t\"./controllers/media.list.js\": 71,\n\t\"./controllers/media_manager.controller.js\": 72,\n\t\"./controllers/notifications/notifications.edit.js\": 73,\n\t\"./controllers/notifications/notifications.js\": 74,\n\t\"./controllers/notifications/notifications.new.js\": 75,\n\t\"./controllers/notifications/notifications.preview.js\": 76,\n\t\"./controllers/notifications/notifications.translations.js\": 77,\n\t\"./controllers/orders/orders.list.js\": 78,\n\t\"./controllers/orders/orders.new.js\": 79,\n\t\"./controllers/orders/orders.view.js\": 80,\n\t\"./controllers/productTranslations.controller.js\": 81,\n\t\"./controllers/products/bundledProduct.edit.js\": 82,\n\t\"./controllers/products/bundledProduct.new.js\": 83,\n\t\"./controllers/products/configurableProduct.edit.js\": 84,\n\t\"./controllers/products/configurableProduct.new.js\": 85,\n\t\"./controllers/products/products.list.js\": 86,\n\t\"./controllers/products/productsWithVariants.edit.js\": 87,\n\t\"./controllers/products/productsWithVariants.new.js\": 88,\n\t\"./controllers/products/simpleProduct.edit.js\": 89,\n\t\"./controllers/products/simpleProduct.new.js\": 90,\n\t\"./controllers/promotions/promotions.edit.js\": 91,\n\t\"./controllers/promotions/promotions.new.js\": 92,\n\t\"./controllers/resource.list.js\": 93,\n\t\"./controllers/settings.controller.js\": 94,\n\t\"./controllers/shippingMethods/shipping.edit.js\": 95,\n\t\"./controllers/shippingMethods/shippings.list.js\": 96,\n\t\"./controllers/shippingMethods/shippings.new.js\": 97,\n\t\"./controllers/sidebar.js\": 98,\n\t\"./controllers/staticContents/staticContent.new.js\": 99,\n\t\"./controllers/staticContents/staticContents.edit.js\": 100,\n\t\"./controllers/taxes/taxes.edit.js\": 101,\n\t\"./controllers/taxes/taxes.new.js\": 102,\n\t\"./controllers/translations.js\": 103,\n\t\"./controllers/users/users.list.js\": 104,\n\t\"./controllers/users/users.new.js\": 105,\n\t\"./controllers/users/users.view.js\": 106,\n\t\"./controllers/variables/variables.edit.js\": 107,\n\t\"./controllers/variables/variables.list.js\": 108,\n\t\"./controllers/variables/variables.new.js\": 109,\n\t\"./controllers/variants.edit.js\": 110,\n\t\"./controllers/variants/variants.list.controller.js\": 111,\n\t\"./controllers/webhooks.js\": 112,\n\t\"./directives/avatar.directive.js\": 113,\n\t\"./directives/contenteditable.directive.js\": 114,\n\t\"./directives/dropdown.directive.js\": 115,\n\t\"./directives/fallback_src.js\": 116,\n\t\"./directives/fileModel.directive.js\": 117,\n\t\"./directives/focusOnShow.directive.js\": 118,\n\t\"./directives/money.directive.js\": 119,\n\t\"./directives/ng-thumb.directive.js\": 120,\n\t\"./directives/ng_enter.js\": 121,\n\t\"./directives/onChangeAsync.directive.js\": 122,\n\t\"./directives/onFileChange.directive.js\": 123,\n\t\"./factories/account.factory.js\": 124,\n\t\"./factories/application.factory.js\": 125,\n\t\"./factories/cache.factory.js\": 126,\n\t\"./factories/locales.factory.js\": 127,\n\t\"./factories/marketcloud.factory.js\": 128,\n\t\"./factories/models.factory.js\": 129,\n\t\"./factories/notificationsPresets.factory.js\": 130,\n\t\"./factories/pagination.factory.js\": 131,\n\t\"./factories/rolesPresets.factory.js\": 132,\n\t\"./factories/stormConfiguration.factory.js\": 133,\n\t\"./factories/tableManager.factory.js\": 134,\n\t\"./factories/taxrates.factory.js\": 135,\n\t\"./factories/utils.factory.js\": 136,\n\t\"./factories/validation.service.js\": 137\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/modules/data_dashboard/src \\.js\n// module id = 1\n// module chunks = 0","(function() {\n  'use strict';\n  /* globals angular, marketcloud, notie, API_BASE_URL */\n\n\n\n  /**\n   * The dashboard version, this is used for reporting\n   * @type {String}\n   */\n  window.VERSION = '1.9.1';\n\n\n  /**\n   * [The base url for api calls]\n   * @type {String}\n   */\n  window.API_BASE_URL = '/api/v0';\n\n\n\n  /**\n   *  Error reporting facility\n   **/\n  window.LAST_ERROR = null;\n\n  /**\n   * Angular Selectize2\n   * https://github.com/machineboy2045/angular-selectize\n   **/\n\n\n\n  var app = angular\n    .module('DataDashboard', [\n      'ngRoute',\n      'ngMessages',\n      'ngTagsInput',\n      'angular-loading-bar',\n      'frapontillo.bootstrap-switch',\n      'ngSanitize',\n      'angularFileUpload',\n      'Marketcloud.Shared',\n      'angularMoment',\n      'chart.js',\n      'trumbowyg-ng',\n      'moment-picker',\n      'dndLists'\n    ]);\n\n\n  /*\n   *  Since angular 1.6.0 The default location hashPrefix is the hashBang\n   *  In order to keep our links we set it to '' empty string.\n   */\n  app.config(['$locationProvider', function($locationProvider) {\n    $locationProvider.hashPrefix('');\n  }]);\n\n  app.config(['$compileProvider', function($compileProvider) {\n    $compileProvider.debugInfoEnabled(false);\n  }]);\n\n\n  app.run(function() {\n    notie.setOptions({\n\n      colorSuccess: '#27ae60',\n      colorWarning: '#f39c12',\n      colorError: '#c0392b',\n      colorInfo: '#2980b9',\n      colorNeutral: '#95a5a6',\n      colorText: '#FFFFFF',\n      dateMonths: ['Januar', 'Februar', 'Mrz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'], // For other languages\n      animationDelay: 300, // Be sure to also change \"transition: all 0.3s ease\" variable in .scss file\n      backgroundClickDismiss: true\n    });\n  });\n\n    app.run(['StormConfiguration','$http', function(Configuration, $http) {\n      var theme = Configuration.get('theme');\n      Configuration.applyTheme(theme);\n      return;\n\n    }]);\n\n\n\n  /*\n    This is for sending complex JSON params\n  */\n  app.config(['$httpProvider', function($httpProvider) {\n    $httpProvider.defaults.paramSerializer = '$httpParamSerializerJQLike';\n  }]);\n\n\n  /*\n    Catching angular errors and sending them to the server\n   */\n  app.factory('$exceptionHandler', ['$injector', function($injector) {\n\n\n    return function myExceptionHandler(exception, cause) {\n\n      var $http = $injector.get('$http')\n      var $log = $injector.get('$log');\n      var $getBrowser = $injector.get('GetBrowser');\n\n      $log.error(exception);\n\n      // Not logging the same error over and over for each session\n      if (window.LAST_ERROR === exception.toString()) {\n        console.info('Not logging this error instance, because it was already logged.');\n        return;\n      }\n\n      window.LAST_ERROR = exception.toString();\n      $http({\n          method: 'POST',\n          url: '/logs',\n          data: {\n            type: 'frontend-error',\n            source: 'data-dashboard',\n            browser: $getBrowser(),\n            url: window.location.href,\n            error: {\n              error: exception.toString(),\n              stack: exception.stack || null,\n              cause: cause || null\n            }\n          }\n        })\n        .then(function(response) {\n          $log.warn('An error was logged.');\n        })\n        .catch(function(response) {\n          $log.warn('Unable to log errors, if you see this message, please contact us at info@marketcloud.it .Thank you.');\n        });\n      return true;\n    };\n  }]);\n\n\n\n  app.run([\n    '$rootScope',\n    '$route',\n    '$application',\n    '$account',\n    '$location',\n    function($rootScope, $route, $application, $account, $location) {\n\n    $rootScope.application = window.current_application;\n    $rootScope.user = window.user;\n\n\n    $application.set(window.current_application);\n    $account.set(window.user);\n\n    $rootScope.$on('$routeChangeStart', function(event, next, current){\n      \n      var nextRouteName = next.$$route.name;\n      var currentUserRole = $application.get(\"role\");\n\n      // Admins and owners have all powers\n      if (currentUserRole == 'admin' || currentUserRole === 'owner')\n        return;\n\n\n      // Checking for explicit denyrules\n      if (next.$$route.acl){\n        var deniedRoles = next.$$route.acl.deny || [];\n\n        \n        if (deniedRoles.indexOf(currentUserRole) > -1) {\n          notie.alert(2,\"Access restricted for users with role \"+currentUserRole,2);\n          \n          // We also hide the loading animation to prevent the view from\n          // being hidden\n          $rootScope.$evalAsync(function() {\n            $rootScope.showLoadingAnimation = false;\n\n            // If the entry point is an invalid route, we must\n            // send them to home, otherwise they will not see any route.\n            if (!current)\n              $location.path('/')\n          });\n\n          // Cancel the route change event\n          event.preventDefault();\n\n        } \n\n      }\n\n      console.log(\"Next route is \"+nextRouteName+\" and your role is \"+currentUserRole);\n    })\n\n\n\n    $rootScope.$on('$routeChangeStart', function(event, next, current) {\n      $rootScope.showLoadingAnimation = true;\n    });\n    $rootScope.$on('$routeChangeError', function() {\n      $rootScope.showLoadingAnimation = false;\n    });\n    $rootScope.$on('$routeChangeSuccess', function() {\n\n      // if ($application.announcementWasSeenInThisSession !== true) {\n      //   notie.alert(4,'Please take time to review our <a href=\"/announcement\" target=\"_blank\" style=\"color:white;text-decoration:underline\">important announcement</a>')\n      // }\n      // $application.announcementWasSeenInThisSession = true\n      var _route = angular.copy($route.current.$$route);\n\n      // Fallback route name\n      var routeName = 'unknown';\n\n      if (_route && _route.name)\n        routeName = _route.name;\n\n      $rootScope.showLoadingAnimation = false;\n\n      // Sidebar controller listens for this event (sidebar.js)\n      $rootScope.$broadcast('$dashboardSectionChange', {\n        section: routeName\n      });\n\n\n    });\n  }]);\n\n\n  app.run(['$window', '$rootScope', function($window, $rootScope) {\n\n    $rootScope.online = navigator.onLine;\n\n    $window.addEventListener('offline', function() {\n      notie.alert(2, 'You are currently offline. Waiting for connection..');\n      $rootScope.$apply(function() {\n        $rootScope.online = false;\n      });\n    }, false);\n\n    $window.addEventListener('online', function() {\n      notie.alertHide();\n      $rootScope.$apply(function() {\n        $rootScope.online = true;\n      });\n    }, false);\n\n  }]);\n\n  /*\n    This interceptor makes sure that if the token expires,\n    the browser reloads to get a new one.\n\n    We  might consider to expose a \"refresh token\" endpoint\n    but for now... we keep it simple\n   */\n  app\n    .service('authInterceptor', ['$q', function($q) {\n      var service = this;\n\n      service.responseError = function(response) {\n        if (response.status === 401) {\n          notie.alert(4, 'Session expired, reloading page...');\n          window.location.reload();\n        }\n        return $q.reject(response);\n      };\n    }])\n    .config(['$httpProvider', function($httpProvider) {\n      $httpProvider.interceptors.push('authInterceptor');\n    }]);\n\n  app.run(['$rootScope', '$location', function($root, $location) {\n    $root.$on('$routeChangeError', function(event, route, args, response) {\n\n\n      if (response.status >= 500)\n        $location.path('/error');\n      else if (response.status === 400) {\n        notie.alert(2, 'An error has occurred. Please check the data you entered', 1);\n      } else {\n        console.log(\"$routeChangeError\", response)\n        notie.alert(2, 'An error has occurred.', 1);\n      }\n\n    });\n  }]);\n\n\n\n  app.config(['$routeProvider',\n    function($routeProvider) {\n      $routeProvider\n        .when('/applications/list', {\n          name: 'applications',\n          templateUrl: '/modules/data_dashboard/templates/list_applications.html',\n          controller: 'ListApplicationsController'\n        })\n        .when('/applications/new', {\n          name: 'applications.new',\n          templateUrl: '/modules/data_dashboard/templates/new_application.html',\n          controller: 'CreateApplicationController'\n        })\n        .when('/analytics', {\n          name: 'analytics',\n          templateUrl: '/modules/data_dashboard/templates/analytics.html',\n          controller: 'AnalyticsController',\n          resolve: {\n            analytics: ['$marketcloud','$location', function($marketcloud, $location) {\n\n              var range = $location.search().range || \"this month\";\n\n              var _from = null\n              var _to = null;\n\n              switch (range) {\n                case \"today\":\n                  var _from = new Date();\n                  _from.setHours(0,0,0,0);\n                break;\n                case \"yesterday\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 1)\n                  _from.setHours(0,0,0,0);\n\n                  var _to = new Date();\n                  _to.setHours(0,0,0,0);          \n                break;\n                case \"this week\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 7)\n                  _from.setHours(0,0,0,0);\n                break;\n                default :\n                  var _from = new Date();\n                  _from.setMonth(_from.getMonth() - 1);\n                  _from.setHours(0, 0, 0, 0);\n\n                break;\n              }\n\n              \n\n              if (!_to)\n                _to = new Date();\n\n\n\n              return $marketcloud.orders.list({\n                $created_at_gt : _from.getTime(),\n                $created_at_lt : _to.getTime(),\n                per_page :9999\n              })\n            }]\n          ,\n          customers : ['$marketcloud','$location', function($marketcloud, $location) {\n             \n\n            var range = $location.search().range || \"this month\";\n\n              var _from = null\n              var _to = null;\n\n              switch (range) {\n                case \"today\":\n                  var _from = new Date();\n                  _from.setHours(0,0,0,0);\n                break;\n                case \"yesterday\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 1)\n                  _from.setHours(0,0,0,0);\n\n                  var _to = new Date();\n                  _to.setHours(0,0,0,0);          \n                break;\n                case \"this week\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 7)\n                  _from.setHours(0,0,0,0);\n                break;\n                default :\n                  var _from = new Date();\n                  _from.setMonth(_from.getMonth() - 1);\n                  _from.setHours(0, 0, 0, 0);\n\n                break;\n              }\n\n              \n\n              if (!_to)\n                _to = new Date();\n\n            return $marketcloud.users.list({\n              $created_at_gt : _from.toISOString(),\n              $created_at_lt : _to.toISOString(),\n              per_page :9999\n            })\n          }],\n          carts : ['$marketcloud','$location', function($marketcloud, $location) {\n             \n\n            var range = $location.search().range || \"this month\";\n\n              var _from = null\n              var _to = null;\n\n              switch (range) {\n                case \"today\":\n                  var _from = new Date();\n                  _from.setHours(0,0,0,0);\n                break;\n                case \"yesterday\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 1)\n                  _from.setHours(0,0,0,0);\n\n                  var _to = new Date();\n                  _to.setHours(0,0,0,0);          \n                break;\n                case \"this week\":\n                  var _from = new Date();\n                  _from.setDate(_from.getDate() - 7)\n                  _from.setHours(0,0,0,0);\n                break;\n                default :\n                  var _from = new Date();\n                  _from.setMonth(_from.getMonth() - 1);\n                  _from.setHours(0, 0, 0, 0);\n\n                break;\n              }\n\n              \n\n              if (!_to)\n                _to = new Date();\n\n            return $marketcloud.carts.list({\n              $created_at_gt : _from.toISOString(),\n              $created_at_lt : _to.toISOString(),\n              per_page :9999\n            })\n          }]\n        }\n        })\n        .when('/', {\n          name: 'home',\n          templateUrl: '/modules/data_dashboard/templates/home.html',\n          controller: 'HomeController',\n          resolve: {\n            analytics: ['$http', function($http) {\n\n              var one_month_ago = new Date();\n              one_month_ago.setMonth(one_month_ago.getMonth() - 1);\n              one_month_ago.setHours(0, 0, 0, 0);\n\n              return $http({\n                method: 'GET',\n                url: API_BASE_URL + '/orders',\n\n                params: {\n                  $created_at_gt: one_month_ago.getTime(),\n                  per_page: 99999\n                },\n                headers: {\n                  Authorization: window.public_key + ':' + window.token\n                }\n              });\n            }]\n          }\n        })\n        .when('/error', {\n          templateUrl: '/modules/data_dashboard/templates/error.html',\n        })\n        .when('/bundled_product/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\n          controller: 'NewBundledProductController'\n        })\n        .when('/bundled_product/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\n          controller: 'EditBundledProductController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        /*\n        .when('/groupedProducts/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_grouped_product.html',\n          controller: 'NewGroupedProductController'\n        })\n        .when('/groupedProducts/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_grouped_product.html',\n          controller: 'EditGroupedProductController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/bundled_product/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_bundled_product.html',\n          controller: 'NewBundledProductController'\n        })\n        .when('/bundled_product/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_bundled_product.html',\n          controller: 'EditBundledProductController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/configurable_product/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_configurable_product.html',\n          controller: 'NewConfigurableProductController'\n        })\n        .when('/configurable_product/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_configurable_product.html',\n          controller: 'EditConfigurableProductController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        }))*/\n        .when('/products', {\n          name: 'products.list',\n          templateUrl: '/modules/data_dashboard/templates/products.html',\n          controller: 'ListProductsController',\n          reloadOnSearch : false,\n          resolve: {\n            products: ['$marketcloud', 'StormConfiguration','$route','$location',\n                       function($marketcloud, configuration, $route, $location) {\n\n\n\n              // Fetching filters from storage\n              var filters = configuration.get(\"products_list_active_filters\") || [];\n\n              // Default query to products endpoint\n              var query = {\n                page: 1\n              };\n\n              // Adding filters to query\n              filters.forEach(function(filter) {\n                query[filter.name] = filter.value;\n              })\n\n              // Applying Url query\n              var urlQuery = {}\n              try {\n                urlQuery = JSON.parse($location.search().query)\n              } catch(e) {\n                urlQuery = {};\n              }\n\n\n              for (var k in urlQuery){\n                query[k] = urlQuery[k];\n              }\n\n              // Executing the query\n              return $marketcloud.products.list(query);\n            }]\n          }\n        })\n        .when('/product_with_variants/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_productWithVariants.html',\n          controller: 'NewProductWithVariantsController'\n        })\n        .when('/product_with_variants/create2', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_productWithVariants2.html',\n          controller: 'NewProductWithVariantsController'\n        })\n        .when('/simple_product/create', {\n          name: 'products.create',\n          templateUrl: '/modules/data_dashboard/templates/new_simple_product.html',\n          controller: 'NewSimpleProductController'\n        })\n        .when('/simple_product/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_simple_product.html',\n          controller: 'EditSimpleProductController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/product_with_variants/:productId/edit', {\n          name: 'products.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_productWithVariants.html',\n          controller: 'EditProductWithVariantsController',\n          resolve: {\n            product: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/products/:productId/variants', {\n          name: 'products.variants.list',\n          templateUrl: '/modules/data_dashboard/templates/list_variants.html',\n          controller: 'ListVariantsController',\n          resolve: {\n            resolvedProduct: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/products/:productId/variants/:variantId', {\n          name: 'products.variants.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n          controller: 'EditVariantController',\n          resolve: {\n            resolvedProduct: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/resource/:resourceName', {\n          name: '',\n          templateUrl: function(params) {\n            return '/modules/data_dashboard/templates/resources.html';\n          },\n          //templateUrl: '/modules/data_dashboard/templates/edit_variant.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud[$route.current.params.resourceName].list();\n            }],\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n\n          }\n        })\n        .when('/products/:productId/translations', {\n          name: 'products.translation.edit',\n          templateUrl: '/modules/data_dashboard/templates/product_translations.html',\n          controller: 'EditProductTranslationsController',\n          resolve: {\n            product: ['$marketcloud', '$route', '$q', '$location', function($marketcloud, $route, $q, $location) {\n              return $marketcloud.products.getById($route.current.params.productId);\n            }]\n          }\n        })\n        .when('/categories/:id/translations', {\n          name: 'categories.translation.edit',\n          templateUrl: '/modules/data_dashboard/templates/category_translations.html',\n          controller: 'EditCategoryTranslationsController',\n          resolve: {\n            category: ['$marketcloud', '$route', function($marketcloud, $route, ) {\n              return $marketcloud.categories.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/brands/:id/translations', {\n          name: 'brands.translation.edit',\n          templateUrl: '/modules/data_dashboard/templates/brand_translations.html',\n          controller: 'EditBrandTranslationsController',\n          resolve: {\n            brand: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.brands.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/collections/:id/translations', {\n          name: 'collections.translation.edit',\n          templateUrl: '/modules/data_dashboard/templates/collection_translations.html',\n          controller: 'EditCollectionTranslationsController',\n          resolve: {\n            collection: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.collections.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/contents/:id/translations', {\n          name: 'contents.translation.edit',\n          templateUrl: '/modules/data_dashboard/templates/content_translations.html',\n          controller: 'EditContentTranslationsController',\n          resolve: {\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.contents.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/invoices/create/:orderId?', {\n          name: 'invoices.create',\n          templateUrl: '/modules/data_dashboard/templates/new_invoice.html',\n          controller: 'NewInvoiceController',\n          resolve: {\n            parentOrder: ['$marketcloud', '$route', function($marketcloud, $route) {\n              if ($route.current.params.orderId)\n                return $marketcloud.orders.getById($route.current.params.orderId);\n              else\n                return {};\n            }],\n            orders: ['$marketcloud', function($marketcloud){\n              return $marketcloud.orders.list({per_page:5})\n            }]\n          }\n        })\n        .when('/invoices/:invoiceId/edit', {\n          name: 'invoices.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_invoice.html',\n          controller: 'EditInvoiceController',\n          resolve: {\n            invoice: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.invoices.getById($route.current.params.invoiceId);\n            }]\n          }\n        })\n        .when('/invoices/', {\n          name: 'invoices.list',\n          templateUrl: '/modules/data_dashboard/templates/invoices.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', function($marketcloud) {\n              return $marketcloud.invoices.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'invoices';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/payments/', {\n          name: 'payments.list',\n          templateUrl: '/modules/data_dashboard/templates/payments.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', function($marketcloud) {\n              return $marketcloud.payments.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'payments';\n            },\n            dependencies: ['$q', '$marketcloud', function($q, $marketcloud) {\n              return $q.all({\n                events: $marketcloud.events.list({\n                  \"request.path\": \"/v0/payments\"\n                })\n              })\n            }]\n          }\n        })\n        .when('/payments/alerts', {\n          name: 'payments.alerts.list',\n          templateUrl: '/modules/data_dashboard/templates/payments_alerts.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$http', function($http) {\n              return $http({\n                method: 'GET',\n                url: window.API_BASE_URL + '/payments/alerts',\n                headers: {\n                  'Content-Type': 'application/json',\n                  Authorization: window.public_key + ':' + window.token\n                }\n              });\n            }],\n            resourceName: function() {\n              return 'events';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/orders', {\n          name: 'orders.list',\n          templateUrl: '/modules/data_dashboard/templates/orders.html',\n          controller: 'OrdersController',\n          reloadOnSearch : false,\n          resolve: {\n            ordersResponse: [\n              '$marketcloud',\n              '$route',\n              '$location',\n              'StormConfiguration',\n              function($marketcloud, $route, $location, configuration) {\n\n              // Fetching filters from storage\n              var filters = configuration.get(\"orders_list_active_filters\") || [];\n\n              // Default query to products endpoint\n              var query = {\n                page: 1\n              };\n\n              // Adding filters to query\n              filters.forEach(function(filter) {\n                query[filter.name] = filter.value;\n              })\n\n              // Applying Url query\n              var urlQuery = {}\n              try {\n                urlQuery = JSON.parse($location.search().query)\n              } catch(e) {\n                urlQuery = {};\n              }\n\n\n              for (var k in urlQuery){\n                query[k] = urlQuery[k];\n              }\n\n\n              return $marketcloud.orders.list(query);\n            }]\n          }\n        })\n        .when('/orders/create', {\n          name: 'orders.create',\n          templateUrl: '/modules/data_dashboard/templates/new_order.html',\n          controller: 'NewOrderController'\n        })\n        .when('/orders/:orderId/view', {\n          name: 'orders.edit',\n          templateUrl: '/modules/data_dashboard/templates/order.html',\n          controller: 'OrderController',\n          resolve: {\n            order: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.orders.getById($route.current.params.orderId);\n            }],\n            shippingMethods: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.shippings.list();\n            }],\n            paymentMethods: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.paymentMethods.list();\n            }]\n          }\n        })\n        .when('/users', {\n          name: 'users.list',\n          templateUrl: '/modules/data_dashboard/templates/users.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.users.list({\n                page : 1,\n                per_page : 20,\n                expand : 'orders'\n              })\n            }],\n            resourceName: function() {\n              return 'users';\n            },\n            dependencies: ['$q', function($q) {\n              \n              return $q.when({});\n\n            }]\n          }\n        })\n        .when('/users/create', {\n          name: 'users.create',\n          templateUrl: '/modules/data_dashboard/templates/new_user.html',\n          controller: 'NewUserController'\n        })\n        .when('/users/:userId/view', {\n          name: 'users.view',\n          templateUrl: '/modules/data_dashboard/templates/user.html',\n          controller: 'UserController',\n          resolve: {\n            user: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.users.getById($route.current.params.userId);\n            }],\n          }\n        })\n        .when('/categories', {\n          name: 'categories.list',\n          templateUrl: '/modules/data_dashboard/templates/categories.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.categories.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'categories';\n            },\n            dependencies: ['$q', function($q) {\n              \n\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/categories/:categoryId/edit', {\n          name: 'categories.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_category.html',\n          controller: 'EditCategoryController',\n          resolve: {\n            category: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.categories.getById($route.current.params.categoryId);\n            }]\n          }\n        })\n        .when('/categories/create', {\n          name: 'categories.create',\n          templateUrl: '/modules/data_dashboard/templates/new_category.html',\n          controller: 'CategoryController'\n        })\n        .when('/brands', {\n          name: 'brands.list',\n          templateUrl: '/modules/data_dashboard/templates/brands.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.brands.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'brands';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n\n      .when('/brands/:brandId/edit', {\n          name: 'brands.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_brand.html',\n          controller: 'EditBrandController',\n          resolve: {\n            brand: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.brands.getById($route.current.params.brandId);\n            }]\n          }\n        })\n        .when('/brands/create', {\n          name: 'brands.create',\n          templateUrl: '/modules/data_dashboard/templates/new_brand.html',\n          controller: 'BrandController'\n        })\n        .when('/collections', {\n          name: 'collections.list',\n          templateUrl: '/modules/data_dashboard/templates/collections.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.collections.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'collections';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/collections/:collectionId/edit', {\n          name: 'collections.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_collection.html',\n          controller: 'EditCollectionController',\n          resolve: {\n            collection: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.collections.getById($route.current.params.collectionId);\n            }]\n          }\n        })\n        .when('/collections/create', {\n          name: 'collections.create',\n          templateUrl: '/modules/data_dashboard/templates/new_collection.html',\n          controller: 'CreateCollectionController'\n        })\n        .when('/integrations', {\n          name: 'integrations.list',\n          templateUrl: '/modules/data_dashboard/templates/integrations.html',\n          controller: 'IntegrationsController'\n        })\n        .when('/integrations/braintree', {\n          name: 'integrations.braintree',\n          templateUrl: '/modules/data_dashboard/templates/integration_braintree.html',\n          controller: 'IntegrationBraintreeController',\n          resolve: {\n            BraintreeIntegration: ['$http', function($http) {\n\n              return $http({\n                  method: 'GET',\n                  url: API_BASE_URL + '/integrations/braintree',\n                  headers: {\n                    Authorization: window.public_key + ':' + window.token\n                  }\n                })\n                .then(function(response) {\n\n                  return new Promise(function(resolve) {\n                    resolve(response);\n                  });\n                })\n                .catch(function() {\n                  return new Promise(function(resolve) {\n                    resolve(null);\n                  });\n                });\n            }]\n          }\n        })\n        .when('/integrations/stripe', {\n          name: 'integrations.stripe',\n          templateUrl: '/modules/data_dashboard/templates/integration_stripe.html',\n          controller: 'IntegrationStripeController',\n          resolve: {\n            StripeIntegration: ['$http', function($http) {\n\n              return $http({\n                  method: 'GET',\n                  url: API_BASE_URL + '/integrations/stripe',\n                  headers: {\n                    Authorization: window.public_key + ':' + window.token\n                  }\n                })\n                .then(function(response) {\n\n                  return new Promise(function(resolve) {\n                    resolve(response);\n                  });\n                })\n                .catch(function() {\n                  return new Promise(function(resolve) {\n                    resolve(null);\n                  });\n                });\n            }]\n          }\n        })\n        .when('/contents', {\n          name: 'contents.list',\n          templateUrl: '/modules/data_dashboard/templates/contents.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', function($marketcloud) {\n              return $marketcloud.contents.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'contents';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/contents/create', {\n          name: 'contents.create',\n          templateUrl: '/modules/data_dashboard/templates/new_content.html',\n          controller: 'ContentController'\n        })\n        .when('/contents/:contentId/edit', {\n          name: 'contents.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_content.html',\n          controller: 'EditContentController',\n          resolve: {\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.contents.getById($route.current.params.contentId);\n            }]\n          }\n        })\n\n\n\n        .when('/contents/static', {\n          name: 'staticContents.list',\n          templateUrl: '/modules/data_dashboard/templates/staticContents/staticContents.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', function($marketcloud) {\n              return $marketcloud.staticContents.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'staticContents';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/contents/static/create', {\n          name: 'staticContents.create',\n          templateUrl: '/modules/data_dashboard/templates/staticContents/new_staticContent.html',\n          controller: 'CreateStaticContentController'\n        })\n        .when('/contents/static/:contentId/edit', {\n          name: 'staticContents.edit',\n          templateUrl: '/modules/data_dashboard/templates/staticContents/edit_staticContents.html',\n          controller: 'EditStaticContentController',\n          resolve: {\n            content: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.staticContents.getById($route.current.params.contentId);\n            }]\n          }\n        })\n\n\n        .when('/events', {\n          name: 'events.list',\n          templateUrl: '/modules/data_dashboard/templates/events.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.events.list();\n            }],\n            resourceName: function() {\n              return 'events';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/variables', {\n          name: 'variables.list',\n          templateUrl: '/modules/data_dashboard/templates/variables.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.variables.list();\n            }],\n            resourceName: function() {\n              return 'variables';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/variables/create', {\n          name: 'variables.create',\n          templateUrl: '/modules/data_dashboard/templates/new_variable.html',\n          controller: 'CreateVariableController'\n        })\n        .when('/variables/:variableId/edit', {\n          name: 'variables.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_variable.html',\n          controller: 'EditVariableController',\n          resolve: {\n            variable: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.variables.getById($route.current.params.variableId);\n            }]\n          }\n        })\n        .when('/media', {\n          name: 'media.list',\n          templateUrl: '/modules/data_dashboard/templates/media.html',\n          controller: 'MediaListController',\n          resolve: {\n            media: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.media.list();\n            }]\n          }\n\n        })\n        .when('/promotions', {\n          name: 'promotions.list',\n          templateUrl: '/modules/data_dashboard/templates/promotions.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.promotions.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'promotions';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/promotions/create', {\n          name: 'promotions.create',\n          templateUrl: '/modules/data_dashboard/templates/new_promotion.html',\n          controller: 'NewPromotionController',\n        })\n        .when('/promotions/:id/edit', {\n          name: 'promotions.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_promotion.html',\n          controller: 'EditPromotionController',\n          resolve: {\n            promotion: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.promotions.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/coupons', {\n          name: 'coupons.list',\n          templateUrl: '/modules/data_dashboard/templates/coupons.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.coupons.list({\n                page: 1\n              });\n            }],\n            resourceName: function() {\n              return 'coupons';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n          }\n        })\n        .when('/coupons/create', {\n          name: 'coupons.create',\n          templateUrl: '/modules/data_dashboard/templates/new_coupon.html',\n          controller: 'NewCouponController',\n        })\n        .when('/coupons/:id/edit', {\n          name: 'coupons.create',\n          templateUrl: '/modules/data_dashboard/templates/edit_coupon.html',\n          controller: 'EditCouponController',\n          resolve: {\n            coupon: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.coupons.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/shippings', {\n          redirectTo: '/system/shippings'\n        })\n        .when('/shippings/create', {\n          redirectTo: '/system/shippings/create'\n        })\n        .when('/shippings/:shippingId/edit', {\n          redirectTo: '/system/shippings/:shippingId/edit'\n        })\n        .when('/system/taxes', {\n          name: 'system.taxes.list',\n          templateUrl: '/modules/data_dashboard/templates/taxes.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.taxes.list();\n            }],\n            resourceName: function() {\n              return 'taxes';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n\n          }\n        })\n        .when('/system/taxes/create', {\n          name: 'system.taxes.create',\n          templateUrl: '/modules/data_dashboard/templates/new_tax.html',\n          controller: 'CreateTaxController'\n        })\n        .when('/system/taxes/:id/edit', {\n          name: 'system.taxes.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_tax.html',\n          controller: 'EditTaxController',\n          resolve: {\n            tax: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.taxes.getById($route.current.params.id);\n            }]\n          }\n        })\n        .when('/system/shippings', {\n          name: 'system.shippings.list',\n          templateUrl: '/modules/data_dashboard/templates/shippings.html',\n          controller: 'ListResourcesController',\n          resolve: {\n            resources: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.shippings.list();\n            }],\n            resourceName: function() {\n              return 'shippings';\n            },\n            dependencies: ['$q', function($q) {\n              return $q.when({});\n            }]\n\n          }\n        })\n        .when('/system/shippings/create', {\n          name: 'system.shippings.create',\n          templateUrl: '/modules/data_dashboard/templates/new_shipping.html',\n          controller: 'CreateShippingController'\n        })\n        .when('/system/shippings/:shippingId/edit', {\n          name: 'system.shippings.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_shipping.html',\n          controller: 'EditShippingController',\n          resolve: {\n            shipping: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.shippings.getById($route.current.params.shippingId);\n            }]\n          }\n        })\n        .when('/system/settings', {\n          name: 'system.settings',\n          templateUrl: '/modules/data_dashboard/templates/settings.html',\n          controller: 'SettingsController'\n        })\n        .when('/system/localization', {\n          name: 'system.localization',\n          templateUrl: '/modules/data_dashboard/templates/localization.html',\n          controller: 'LocalizationController'\n        })\n        .when('/system/payments', {\n          name: 'system.payments',\n          templateUrl: '/modules/data_dashboard/templates/paymentMethods.html',\n          controller: 'PaymentMethodsController',\n          resolve: {\n            paymentMethods: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.paymentMethods.list();\n            }]\n          }\n        })\n        .when('/notifications', {\n          name: 'notifications',\n          templateUrl: '/modules/data_dashboard/templates/notifications.html',\n          controller: 'NotificationsController',\n          resolve: {\n            notifications: ['$marketcloud', '$route', function($marketcloud) {\n              return $marketcloud.notifications.list();\n            }]\n          }\n        })\n        .when('/notifications/:notificationId/edit', {\n          name: 'notifications.edit',\n          templateUrl: '/modules/data_dashboard/templates/edit_notification.html',\n          controller: 'EditNotificationController',\n          resolve: {\n            notification: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.notifications.getById($route.current.params.notificationId);\n            }]\n          }\n        })\n        .when('/notifications/:notificationId/translations', {\n          name: 'notifications.translation',\n          templateUrl: '/modules/data_dashboard/templates/notifications_translation.html',\n          controller: 'TranslateNotificationController',\n          resolve: {\n            notification: ['$marketcloud', '$route', function($marketcloud, $route) {\n              return $marketcloud.notifications.getById($route.current.params.notificationId);\n            }]\n          }\n        })\n\n      .when('/notifications/create', {\n          name: 'notifications.create',\n          templateUrl: '/modules/data_dashboard/templates/new_notification.html',\n          controller: 'NewNotificationController'\n        })\n        .when('/notifications/preview/:data', {\n          name: 'notifications.preview',\n          templateUrl: '/modules/data_dashboard/templates/notifications_preview.html',\n          controller: 'PreviewNotificationController',\n          resolve: {\n            notification: ['$route', function($route) {\n              return atob($route.current.params.data);\n            }]\n          }\n        })\n        .when('/application/billing', {\n          name: 'application.billing',\n          templateUrl: '/modules/data_dashboard/templates/application/application_billing.html',\n          controller: 'ApplicationBillingController',\n          resolve: {\n            account: ['$http', function(http) {\n              return http({\n                method: 'GET',\n                url: '/account/get',\n              })\n            }]\n          }\n        })\n        .when('/application', {\n          redirectTo: '/application/overview',\n          acl : {\n            deny : ['guest']\n          }\n        })\n        .when('/application/overview', {\n          name: 'application.overview',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_overview.html',\n          controller: 'ApplicationOverviewController'\n        })\n\n      .when('/application/settings', {\n          name: 'application.settings',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_settings.html',\n          controller: 'ApplicationSettingsController',\n        })\n        .when('/application/deploy', {\n          name: 'application.deploy',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_deploy.html',\n          controller: 'DeployController'\n        })\n        .when('/application/integrations', {\n          name: 'application.integrations',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_integrations.html',\n          controller: 'IntegrationsController'\n        })\n\n      .when('/application/webhooks', {\n          name: 'application.webhooks',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_webhooks.html',\n          controller: 'WebhooksController',\n          resolve: {\n            webhooks: ['$http', '$route', '$application', function($http, $route, $application) {\n              return $http({\n                method: 'GET',\n                url: '/applications/' + $application.get(\"id\") + '/webhooks'\n              })\n            }]\n          }\n        })\n        .when('/application/collaborators', {\n          name: 'application.collaborators',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/application_collaborators.html',\n          controller: 'CollaboratorsController',\n          resolve: {\n            collaborators: ['$http', '$route', '$application', function($http, $route, $application) {\n              return $http({\n                method: 'GET',\n                url: '/applications/' + $application.get('id') + '/collaborators'\n              })\n            }]\n          }\n        })\n        .when('/application/acl', {\n          name: 'application.acl',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/roles.html',\n          controller: 'ACLController',\n          resolve: {\n            roles: ['$http', '$route', '$application', function($http, $route, $application) {\n              return $http({\n                method: 'GET',\n                url: '/applications/' + $application.get('id') + '/roles'\n              })\n            }]\n          }\n        })\n        .when('/application/acl/new', {\n          name: 'application.acl',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/new_role.html',\n          controller: 'NewRoleController'\n        })\n        .when('/application/acl/:roleId/edit', {\n          name: 'application.acl',\n          acl : {\n            deny : ['guest']\n          },\n          templateUrl: '/modules/data_dashboard/templates/application/edit_role.html',\n          controller: 'EditRoleController',\n          resolve: {\n            role: ['$route', '$http', '$application', function($route, $http, $application) {\n              return $http({\n                method: 'GET',\n                url: '/applications/' + $application.get('id') + '/roles/' + $route.current.params.roleId\n              })\n            }]\n          }\n        })\n      .otherwise({\n        redirectTo: '/'\n      });\n    }\n  ]);\n\n  module.exports = app;\n\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/app.js","var app = angular.module('DataDashboard')\napp.controller('ActiveFiltersController', [\n  '$scope',\n  'StormConfiguration',\n  function(scope, StormConfiguration) {\n\n    var ctrl = this;\n\n    \n\n\n\n    scope.newFilter = {\n      name: '',\n      value: null\n    }\n\n    var notFilters = [\n      'per_page',\n      'page',\n      'sort_by',\n      'sort_order'\n    ]\n    \n\n    this.$onInit = function() {\n\n\n      scope.ctrl = this;\n\n      scope.ctrl.query = this.query || {};\n\n      // An array of attributes name from the parent controller\n      scope.filterAttributes = this.filterAttributes;\n\n\n      // Initializing filters\n      scope.filters = StormConfiguration.get('products_list_active_filters') || []\n\n\n\n\n      for (var k in ctrl.query) {\n        if (notFilters.indexOf(k) === -1) {\n          scope.filters.push({\n            name: k,\n            value: ctrl.query[k]\n          })\n        }\n      }\n\n      scope.persistFilters = StormConfiguration.get('products_list_persist_filters') || false;\n      scope.persistFilters = Boolean(scope.persistFilter);\n      \n\n\n    }\n\n\n    /*\n     *  This function returns the guessed type for a property found in products\n     *\n     *  @param {String} Product key name to test\n     *\n     *  @return {String} THe name of the guessed type for the specified key\n     */\n    var inferFilterType = function(key) {\n      if (typeof scope.ctrl.resources === 'undefined') {\n        return null\n      }\n\n      var _resource = scope.ctrl.resources.find(function(item) {\n          return item.hasOwnProperty(key)\n        })\n        // Key is the property name we should analyze on the model\n\n      if (_resource) {\n        return typeof _resource[key]\n      } else {\n        return null\n      }\n    }\n\n    scope.isFilterSet = function(key) {\n      return scope.filters\n        .filter(function(filter) {\n          return filter.name === key\n        }).length > 0\n    }\n\n    /*\n     *  Filters out empty filters. Means that we will not show filters that are half created.\n     */\n    scope.filterIsNotEmpty = function(item, index, array) {\n      return item.name !== '' && item.value !== null\n    }\n\n    /*\n     *    View function that selects which control to show for this particular filter\n     *\n     *  @return {String} A string label identifying the type of input\n     */\n    scope.getControlForFilter = function(filter) {\n\n      \n      if (filter.name === 'type') {\n        return 'productTypeSelector'\n      }\n\n      if (filter.name === 'category_id') {\n        return 'categorySelectorInput'\n      }\n\n      if (filter.name === 'brand_id') {\n        return 'brandSelectorInput'\n      }\n\n      if (inferFilterType(filter.name) === 'number') {\n        return 'numberInput'\n      }\n\n      if (inferFilterType(filter.name) === 'string') {\n        return 'textInput'\n      }\n\n      if (inferFilterType(filter.name) === 'boolean') {\n        return 'booleanInput'\n      }\n\n      // else\n\n      return 'disabledInput'\n    }\n\n    /*\n     *  Adds an empty filter\n     */\n    scope.addFilter = function(filter) {\n      if (!filter)\n        scope.filters.push({\n          name: '',\n          value: null\n        })\n      else\n        scope.filters.push(filter);\n    }\n\n    scope.saveNewFilterAndApply = function() {\n      scope.addFilter(scope.newFilter);\n      console.log(\"Saving this new filters\",scope.newFilter);\n      scope.applyFilters();\n      scope.newFilter = {\n        name: '',\n        value: null\n      }\n      $('#singleFilterModal').modal('hide');\n    }\n\n    scope.humanReadableFilterValue = function(filter) {\n\n      if ('object' === typeof filter.value) {\n        if (filter.value.hasOwnProperty('$regex')) {\n          return filter.value.$regex;\n        }\n\n      }\n\n      if ('type' === filter.name) {\n        return filter.value.replace(/\\_/g, \" \");\n      }\n\n      // If we don't know how to handle it:\n      return filter.value;\n    }\n\n    /*\n     *  @param {Number} index The position of the filter to remove\n     *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\n     */\n    scope.removeFilter = function(index, applyToQuery) {\n      if (typeof applyToQuery === 'undefined') {\n        applyToQuery = true\n      }\n\n      var filterToRemove = scope.filters.splice(index, 1)\n\n      filterToRemove = filterToRemove[0]\n\n      delete scope.ctrl.query[filterToRemove.name]\n\n      if (applyToQuery === true) {\n        scope.applyFilters()\n      }\n    }\n\n    scope.applyFilters = function() {\n      scope.filters.forEach(function(filter) {\n        scope.ctrl.query[filter.name] = filter.value\n      })\n\n      ctrl.onUpdate({\n        filters : scope.filters\n      })\n      $('#filtersModal').modal('hide')\n\n      //if (scope.persistFilters === true)\n      StormConfiguration.set('products_list_active_filters', scope.filters)\n    }\n\n\n  }\n])\napp\n  .component('activeFilters', {\n    templateUrl: '/modules/data_dashboard/src/components/activeFilters/activeFilters.component.html',\n    controller: 'ActiveFiltersController',\n    bindings: {\n      query: '=', // We need access to the controller's query\n      filterAttributes: '=', // We need a list of property names to be sued as filters\n      onUpdate: '&', // THis will notify the controller that filters changed\n      resources: '=' // We need the list of resources to be able to infer which filters to display\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/activeFilters/activeFilters.component.js","var app = angular.module('DataDashboard')\n\n/*\n* @attribute overrides {object} set of overrides to apply\n          when querying marketcloud\n*\n*/\napp.controller('addProductsCardController', [\n  '$scope', '$element', '$attrs', '$marketcloud',\n  function (scope, $element, $attrs, $marketcloud) {\n\n    \n    this.$onInit = function () {\n      scope.ctrl = this\n\n      scope.config = this.config || {\n        additionalFields: [\n          // {name : \"quantity\", type : \"number\", required : true}\n        ]\n      }\n\n      scope.swapArrayItemPosition = function(sourceIndex,destinationIndex, arr){\n        if (!arr[sourceIndex] || !arr[destinationIndex])\n          return;\n\n        var temp = angular.copy(arr[destinationIndex]);\n        arr[destinationIndex] = arr[sourceIndex];\n        arr[sourceIndex] = temp;\n\n      }\n\n      // Flag to show/hide the list\n      scope.showTheList = false\n\n      // Object to hold the query data\n      scope.query = {}\n\n      // Here we save the products we get from marketcloud\n      scope.products = []\n    }\n\n    scope.prepareRegex = function () {\n      scope.query.name.$options = 'i'\n    }\n\n    // Shows the list of choices\n    scope.showList = function () {\n      scope.showTheList = true\n    }\n\n    // Hides the list of choices\n    scope.hideList = function () {\n      window.setTimeout(function () {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n\n    /*\n     *  Pushes an item into the array of selected items and resets the search regex\n     */\n    scope.addProduct = function (product) {\n      scope.ctrl.items.push(product)\n      scope.query.name.$regex = ''\n      scope.products = []\n    }\n\n    scope.removeProduct = function (i) {\n      scope.ctrl.items.splice(i, 1)\n    }\n    scope.loadProducts = function (query) {\n      query = query || scope.query\n\n      // We only want to fetch simple products here\n      // TODO, this should be an attribute\n      if (scope.ctrl.overrides) {\n        for (var k in scope.ctrl.overrides) {\n          query[k] = scope.ctrl.overrides[k]\n        }\n      }\n\n      $marketcloud.products.list(query)\n        .then(function (response) {\n          scope.products = response.data.data\n            .filter(function (item) {\n              return scope.ctrl.items\n                .map(function (i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function (response) {\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\n        })\n    }\n  }\n])\napp\n  .component('addProductsCard', {\n    templateUrl: '/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.html',\n    controller: 'addProductsCardController',\n    bindings: {\n      items: '=',\n      config: '=',\n      overrides: '=', // overrides to the query\n      title: '@',\n      onUpdate: '&'\n    }\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/addProductsCard/addProductsCard.component.js","var app = angular.module('DataDashboard')\n\napp.controller('AddressFormController',[\n  '$scope',\n  'Countries',\n  function($scope, Countries){\n\n  this.$onInit = function () {\n\n    // Initializing the array of countries taken from the service\n    $scope.countries = Countries;\n\n    // Linking the local address object to the parent scope object\n    $scope.address = this.address;\n  }\n\n}])\n\napp\n  .component('addressForm', {\n    templateUrl: '/modules/data_dashboard/src/components/addressForm/addressForm.component.html',\n    controller: 'AddressFormController',\n    bindings: {\n      address: '='\n    }\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/addressForm/addressForm.component.js","var app = angular.module('DataDashboard');\n\n  var ApplicationController = ['$scope',function(scope){\n    \n    \n\n    /*\n    * Due to https://github.com/angular/angular.js/commit/bcd0d4d896d0dfdd988ff4f849c1d40366125858\n    *\n    * From AngularJS >= 1.6.x pre-assigning bindings on controller instances is disabled by default.\n    */\n    this.$onInit = function() {\n      scope.application = this.applicationData;\n    }\n\n    scope.percentage = function(app) {\n        var v = app.api_calls_quota_left;\n        var t = app.api_calls_quota_max;\n        return (v/t)*100\n    }\n  \n  }]\n\n  app.component('application',{\n    templateUrl : '/modules/data_dashboard/src/components/application/application.component.html',\n    controller : ApplicationController,\n    bindings : {\n      applicationData : '='\n    }\n  });\n\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/application/application.component.js","var app = angular.module('DataDashboard')\napp.controller('autocompleteController', [\n  '$scope', '$element', '$attrs',\n  function(scope, $element, $attrs) {\n    // Since angular 1.6 component initialization must be inside the $onInit call\n    // to allow the use of ES6 classes as component controllers\n    this.$onInit = function() {\n      scope.ctrl = this\n\n\n      // The list of values\n      scope.ctrl.suggestionList = angular.copy(scope.ctrl.items)\n\n      // Flag to toggle the suggestion list\n      scope.showTheList = false;\n\n\n\n      // Here ww handle the initial selection if the model already has a value\n      var initiallySelected = scope.ctrl.suggestionList.filter(function(item) {\n        if (item === scope.ctrl.myModel)\n          return true;\n        if (item[scope.ctrl.value] === scope.ctrl.myModel)\n          return true\n\n        return false;\n      })\n\n      if (initiallySelected.length > 0) {\n\n        scope.selectItem(initiallySelected[0])\n      }\n\n\n    }\n\n    /*\n     * Filters the suggestion list by query. This updates the suggestion list showing\n     * only those results that are matching the query.\n     */\n    scope.filter = function() {\n\n      var toMatch = scope.ctrl.selectedLabel.toLowerCase();\n\n      scope.ctrl.items = scope.ctrl.suggestionList\n        .filter(function(i) {\n\n\n          // If the value attribute is provided we use it to look for a particular property\n          if (scope.ctrl.value) {\n\n            return i[scope.ctrl.value].toLowerCase().indexOf(toMatch) > -1\n\n          } else {\n\n            return i.toLowerCase().indexOf(toMatch) > -1\n\n          }\n        })\n    }\n\n    /*\n     * Makes the suggestion list visible\n     */\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n\n    /*\n     * Makes the suggestion list invisible\n     */\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n\n    scope.handleNewItems = function() {\n      if (scope.ctrl.allowNewElements) {\n\n        scope.ctrl.myModel = scope.ctrl.selectedLabel;\n        scope.hideList();\n      }\n    }\n\n    /**\n     * Selects the clicked item as a chosen value\n     */\n    scope.selectItem = function(item) {\n\n      console.log(\"selectItem called on \", item);\n\n      // If the component has a label attribute, we want to show that label\n      // insteand of the actually chosen value\n      if (scope.ctrl.label) {\n        scope.ctrl.selectedLabel = item[scope.ctrl.label];\n      } else {\n        // Otherwise we want to select the actual value.\n        scope.ctrl.selectedLabel = item;\n      }\n\n\n      if (scope.ctrl.value) {\n        scope.ctrl.myModel = item[scope.ctrl.value]\n      } else {\n        scope.ctrl.myModel = item\n      }\n\n      // update the query to reflect the model value\n      // scope.ctrl.myModel = scope.ctrl.myModel;\n\n      // After the choice, we hide the list\n      scope.showTheList = false\n\n      // Fucking AngularJS ng-changes triggers before the update cycle is complete\n      window.setTimeout(scope.ctrl.onSelected, 1)\n    }\n  }\n])\napp\n  .component('autocomplete', {\n    templateUrl: '/modules/data_dashboard/src/components/autocomplete/autocomplete.component.html',\n    controller: 'autocompleteController',\n    bindings: {\n      allowNewElements: '@',\n      myModel: '=', // The model\n      items: '=', // The source for autocomplete suggestions\n      onSelected: '&', // Hook called when an item is selected\n      label: '@', // The property to use as a label for suggestions,\n      value: '@', // The property to use as a value for suggestions,\n      inputClasses: '@' // Classes to add to the input\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/autocomplete/autocomplete.component.js","\nvar app = angular.module('DataDashboard')\n\napp.controller('BackButtonController',\n  ['$scope', '$element', '$attrs',\n    function (scope, $element, $attrs) {\n      scope.goBack = function () {\n        history.back()\n      }\n    }])\n\napp\n.component('backButton', {\n  template: '<a class=\"link pull-right\" ng-click=\"goBack()\"><i class=\"fa fa-long-arrow-left\"></i> <span class=\"xs-hidden\">Back</span></a>',\n  controller: 'BackButtonController',\n  bindings: {}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/backButton/backButton.component.js","angular\n  .module('DataDashboard')\n  .controller('BrandsSelectorController', BrandsSelectorController)\n  .component('brandsSelector', {\n    templateUrl: '/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.html',\n    controller: 'BrandsSelectorController',\n    bindings: {\n      brand: '=',\n      enableCreateBrand: '@',\n      onError: '&'\n    }\n  })\n\nBrandsSelectorController.$inject = ['$marketcloud', '$scope', '$element']\n\nfunction BrandsSelectorController($marketcloud, scope, $elem) {\n  var ctrl = null\n\n  this.$onInit = function() {\n    ctrl = this\n    scope.ctrl = ctrl\n\n    scope.newBrand = {}\n\n    ctrl.modal = $($elem).find('.modal')[0]\n\n    scope.enableCreateBrand = this.enableCreateBrand || true\n\n    scope.ctrl.query = {\n      name: {\n        $regex: '',\n        $options: 'i'\n      }\n    }\n  }\n\n  scope.showModal = function() {\n    $(ctrl.modal).modal('show')\n  }\n\n  scope.saveBrand = function() {\n    $marketcloud.brands.save(scope.newBrand)\n      .then(function(response) {\n        scope.ctrl.brands.push(response.data.data)\n        scope.newBrand = {}\n        scope.ctrl.brand = response.data.data.id\n        return $marketcloud.brands.list()\n      })\n      .then(function(response) {\n        scope.ctrl.brands = response.data.data\n        $(ctrl.modal).modal('hide')\n      })\n      .catch(function(response) {\n        $(ctrl.modal).hide()\n        notie.alert(3, 'An error has occurred. Brand not saved', 1)\n      })\n  }\n\n  scope.setSelectedBrand = function(brand) {\n    scope.brand = brand\n    scope.ctrl.brand = brand.id\n    scope.ctrl.onChange({\n      brand: brand.id\n    })\n  }\n\n  // Uses the input box in the component to filter the wanted brand\n  scope.filterBrands = function() {\n    $marketcloud.brands.list(scope.ctrl.query)\n      .then(function(response) {\n        ctrl.brands = response.data.data\n      })\n      .catch(function(error) {\n        notie.alert(2, 'An error has occurred while fetching brands, please retry.', 2)\n      })\n  }\n\n  function initializeData() {\n    // Initial fetch of brands\n    $marketcloud.brands.list()\n      .then(function(response) {\n        ctrl.brands = response.data.data\n\n        var currentBrand = null\n          // Look for the currently selected brand, if any\n        ctrl.brands.forEach(function(brand) {\n          if (brand.id === scope.ctrl.brand) {\n            currentBrand = brand\n          }\n        })\n\n        // If found, we initialize the current brand\n        if (currentBrand !== null) {\n          scope.brand = currentBrand\n        } else {\n          // Otherwise we must fetch it\n          return $marketcloud.brands.getById(scope.ctrl.brand)\n        }\n      })\n      .then(function(response) {\n        if (response.data.data) {\n          scope.brand = response.data.data\n        }\n      })\n      .catch(function(response) {\n        ctrl.onError(response)\n      })\n  }\n\n  initializeData()\n}\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/brandsSelector/brandsSelector.component.js","'use strict'\n\nangular\n  .module('DataDashboard')\n  .controller('CategoriesSelectorController', CategoriesSelectorController)\n  .component('categoriesSelector', {\n    templateUrl: '/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.html',\n    controller: 'CategoriesSelectorController',\n    bindings: {\n      enableCreateCategory: '@',\n      category: '=',\n      onError: '&',\n      onChange: '&'\n    }\n  })\n\nCategoriesSelectorController.$inject = ['$marketcloud', '$scope', '$element']\n\nfunction CategoriesSelectorController($marketcloud, scope, $elem) {\n  var ctrl = null\n  this.$onInit = function() {\n    ctrl = this\n    scope.ctrl = this;\n    scope.newCategory = {}\n    ctrl.modal = $($elem).find('.modal')[0];\n\n    scope.enableCreateCategory = ctrl.enableCreateCategory || true;\n\n\n    scope.ctrl.query = {\n      name: {\n        $regex: \"\",\n        $options: 'i'\n      }\n    }\n\n\n  }\n\n\n\n\n\n  scope.showModal = function() {\n    $(ctrl.modal).modal('show')\n  }\n\n\n  function initializeData() {\n\n  \n    // Initial fetch of categories\n    $marketcloud.categories.list()\n    .then(function(response) {\n      ctrl.categories = response.data.data;\n\n      var currentCategory = null;\n      // Look for the currently selected category, if any\n      ctrl.categories.forEach( function(category){\n        if (category.id === scope.ctrl.category)\n          currentCategory = category;\n      })\n\n      // If found, we initialize the current category\n      if (null !== currentCategory) {\n        scope.category = currentCategory;\n      } else {\n        // Otherwise we must fetch it\n        return $marketcloud.categories.getById(scope.ctrl.category);\n      }\n\n    })\n    .then(function(response){\n      if (response.data.data){\n        scope.category = response.data.data;\n      }\n    })\n    .catch(function(response) {\n      ctrl.onError(response)\n    })\n\n  }\n\n  initializeData();\n\n\n  scope.setSelectedCategory = function(category) {\n    scope.category = category;\n    scope.ctrl.category = category.id;\n    scope.ctrl.onChange({\n      category: category.id\n    })\n  }\n\n\n\n  // Uses the input box in the component to filter the wanted category\n  scope.filterCategories = function() {\n    $marketcloud.categories.list(scope.ctrl.query)\n      .then(function(response) {\n        ctrl.categories = response.data.data;\n      })\n      .catch(function(error) {\n        notie.alert(2, 'An error has occurred while fetching categories, please retry.', 2)\n      })\n  }\n\n\n  // Saves a new category \n  scope.saveCategory = function() {\n    $marketcloud.categories.save(scope.newCategory)\n      .then(function(response) {\n        ctrl.categories.push(response.data.data)\n        scope.newCategory = {}\n        ctrl.category = response.data.data.id\n        return $marketcloud.categories.list()\n      })\n      .then(function(response) {\n        ctrl.categories = response.data.data\n        $(ctrl.modal).modal('hide')\n      })\n      .catch(function(response) {\n        $(ctrl.modal).hide()\n        notie.alert(3, 'An error has occurred. Category not saved', 1)\n      })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/categoriesSelector/categoriesSelector.component.js","var app = angular.module('DataDashboard')\napp.controller('CustomAttributesFormController', [\n  '$scope',\n  '$element',\n  '$attrs',\n  'moment',\n  function (scope, $element, $attrs, $moment) {\n    this.$onInit = function () {\n      scope.ctrl = this\n\n      scope.resource = this.resource\n\n      scope.properties = this.properties || {}\n\n      // Keeping a reference for nesting\n      scope.rootObject = scope.properties\n\n      scope.newAttribute = {\n        name: null,\n        value: null,\n        type: null\n      }\n\n      // Initializing propertyTypes object\n      computePropertiesTypes()\n\n      scope.resetNewAttributeValue = function () {\n        switch (scope.newAttribute.type) {\n          case 'string':\n            scope.newAttribute.value = ''\n            return\n          case 'number':\n            scope.newAttribute.value = 0\n            return\n          case 'boolean':\n            scope.newAttribute.value = true\n        }\n      }\n\n      scope.newAttribute.type = 'string'\n\n      scope.availableTypes = [{\n        name: 'String',\n        value: 'string'\n      }, {\n        name: 'Number',\n        value: 'number'\n      }, {\n        name: 'Boolean',\n        value: 'boolean'\n      },\n      {\n        name: 'RichText',\n        value: 'richtext'\n      },\n      {\n        name: 'URL/Media',\n        value: 'URL'\n      }]\n    }\n\n    scope.containerForNewMediaAttribute = []\n\n    scope.containersForExistingMediaAttributes = {}\n\n    scope.$watchCollection('containerForNewMediaAttribute', function () {\n      scope.newAttribute.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\n    })\n\n    scope.propertiesTypes = {}\n\n    function computePropertiesTypes () {\n      for (var k in scope.properties) {\n        scope.propertiesTypes[k] = typeof scope.properties[k]\n\n        if (scope.isNull(k) === true) {\n          scope.propertiesTypes[k] = 'null'\n        }\n\n        if (scope.isRichText(scope.properties[k]) === true) {\n          scope.propertiesTypes[k] = 'richtext'\n        }\n\n        if (scope.isURL(scope.properties[k]) === true) {\n          scope.propertiesTypes[k] = 'URL'\n          scope.containersForExistingMediaAttributes[k] = [scope.properties[k]]\n          scope.$watchCollection('containersForExistingMediaAttributes.' + k, function () {\n            // If the value is null, it means that we just deleted it, so we don't have to re-update it\n            if (scope.properties[k] === null) {\n              return\n            }\n            if (scope.containersForExistingMediaAttributes[k]) {\n              scope.properties[k] = scope.containersForExistingMediaAttributes[k][scope.containersForExistingMediaAttributes[k].length - 1]\n            }\n          })\n        }\n      }\n    }\n\n    scope.isBoolean = function (d) {\n      return typeof d === 'boolean'\n    }\n\n    scope.isString = function (d) {\n      return typeof d === 'string' && !scope.isRichText(d) && !scope.isURL(d)\n    }\n\n    scope.isNull = function (key) {\n      return scope.properties[key] === null\n    }\n\n    scope.isURL = function (d) {\n      if (!d || typeof d.indexOf !== 'function') {\n        return false\n      }\n      return d.indexOf('http://') === 0 || d.indexOf('https://') === 0\n    }\n\n    scope.isRichText = function (str) {\n      if (typeof str !== 'string') { return false }\n\n      var doc = new DOMParser().parseFromString(str, 'text/html')\n      return [].slice.call(doc.body.childNodes).some(function (node) {\n        return node.nodeType === 1\n      })\n    }\n\n    scope.isNumber = function (d) {\n      return typeof d === 'number'\n    }\n\n    scope.isObject = function (d) {\n      if (d === null) { return false }\n\n      return typeof d === 'object'\n    }\n\n    scope.typeof = function (o) {\n      return typeof o\n    }\n\n    scope.hasCustomProperties = function () {\n      return Object.keys(scope.properties).length > 0\n    }\n\n    scope.addCustomProperty = function () {\n      scope.errorMessage = null\n      if (scope.resource.hasOwnProperty(scope.newAttribute.name)) {\n        // scope.productError = \"CUSTOM_PROPERTY_NAME_ALREADY_EXISTS\";\n        scope.errorMessage = 'Name already exists'\n      } else if (!scope.newAttribute.name) {\n        scope.errorMessage = 'Please, enter a valid property name'\n      } else {\n        scope.properties[scope.newAttribute.name] = scope.newAttribute.value\n        scope.newAttribute.value = null\n        scope.newAttribute.name = null\n        // Re-calculating types\n        computePropertiesTypes()\n      }\n    }\n\n    scope.deleteCustomProperty = function (propertyName) {\n      // delete scope.properties[propertyName]\n\n      scope.properties[propertyName] = null\n      // Re-calculating types\n      computePropertiesTypes()\n    }\n\n    scope.propertiesStack = []\n\n    // Goes inside the properties object to show nested properties\n    scope.showRecursiveObjectEditor = function (propertyName) {\n      // Pushing the new level into the stack\n      scope.propertiesStack.push(propertyName)\n\n      // Getting the pointer to the root of the object\n      scope.properties = scope.rootObject\n\n      // Digging into the object's nested properties to find the wanted\n      for (var i = 0; i < scope.propertiesStack.length; i++) {\n        if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) {\n          scope.properties = scope.properties[scope.propertiesStack[i]]\n        } else {\n          break\n        }\n      }\n\n      // Recalculating the propertiesTypes object for the current properties object\n      computePropertiesTypes()\n    }\n    // Goes to a specific nested level\n    scope.goToNestedStep = function (index) {\n      // Getting the pointer to the root of the object\n      scope.properties = scope.rootObject\n\n      // Adjusting the stack to the wanted level\n      scope.propertiesStack = scope.propertiesStack.slice(0, index)\n\n      for (var i = 0; i < index; i++) {\n        if (scope.properties.hasOwnProperty(scope.propertiesStack[i])) { scope.properties = scope.properties[scope.propertiesStack[i]] } else { break }\n      }\n      // Re-calculating types\n      computePropertiesTypes()\n    }\n  }\n])\n\napp\n  .component('customAttributesForm', {\n    templateUrl: '/modules/data_dashboard/src/components/customAttributes/customAttributes.component.html',\n    controller: 'CustomAttributesFormController',\n    bindings: {\n      properties: '=',\n      resource: '=',\n      onError: '&',\n      disableAdd: '=',\n      removeCardFrame: '@?'\n    }\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/customAttributes/customAttributes.component.js","var app = angular.module('DataDashboard')\n\napp.controller('DashboardBreadcrumbController', ['$scope', '$element', '$attrs',\n  function (scope, $element, $attrs) {\n    scope.goBack = function () {\n      history.back()\n    }\n  }\n])\n\n\napp\n\t.component('dashboardBreadcrumb', {\n  template: '<a href=\"#\" class=\"link pull-right\"><i class=\"fa fa-long-arrow-left\"></i> Back</a>',\n  controller: 'DashboardBreadcrumbController',\n  bindings: {\n    resourceName: '='\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/dashboardBreadcrumb/dashboardBreadcrumb.component.js","var app = angular.module('DataDashboard')\n\napp.controller('McDataTableController', ['$scope',\n  function (scope) {\n    this.$onInit = function () {\n      var ctrl = this\n      scope.ctrl = ctrl\n\n      scope.columns = ctrl.columns || Object.keys(scope.ctrl.data[0])\n    }\n  }\n])\n\napp\n  .component('mcDataTable', {\n  templateUrl: '/modules/data_dashboard/src/components/dataTable/dataTable.component.html',\n  controller: 'McDataTableController',\n  bindings: {\n    data: '=',\n    columns: '=?'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/dataTable/dataTable.component.js","\nangular\n  .module('DataDashboard')\n  .controller('ErrorMessagesController', ErrorMessagesController)\n  .component('errorMessages', {\n  templateUrl: '/modules/data_dashboard/src/components/errorMessages/errorMessages.component.html',\n  controller: 'ErrorMessagesController',\n  bindings: {\n    validation: '<',\n    propertyName: '@',\n    modelName: '@',\n    onError: '&',\n\n    messageMin: '@',\n    messageMax: '@',\n    messageRequired: '@',\n    messageType: '@'\n  }\n})\n\nErrorMessagesController.$inject = ['$scope', '$models']\n\nfunction ErrorMessagesController (scope, Models) {\n  if (!Models) { throw new Error('ErrorMessages Component requires Models factory. errorMessages.component.js') }\n\n  var ctrl = null\n\n  this.$onInit = function () {\n    ctrl = this\n    scope.ctrl = ctrl\n\n    if (ctrl.modelName) {\n      if (!Models.hasOwnProperty(ctrl.modelName)) {\n        throw new Error('Cannot find model with name ' + ctrl.modelName)\n      }\n\n\n      ctrl.schema = angular.copy(Models[ctrl.modelName].schema)\n      if (!ctrl.schema){\n        console.log(\"Lo schema non ha il mio model \"+ctrl.modelName, Models);\n      }\n    }\n  }\n\n  this.$onChanges = function(changes) {\n    var validation = changes.validation.currentValue;\n\n    if (validation.invalidPropertyName === this.propertyName)\n        $('html, body').animate({\n          scrollTop: $(\"[property-name='\"+validation.invalidPropertyName+\"']\").offset().top - 200\n        }, 500);\n\n\n  }\n\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/errorMessages/errorMessages.component.js","var app = angular.module('DataDashboard')\n\napp.controller('FlagIconController', ['$scope', 'Countries',\n  function(scope, countries) {\n    var ctrl = this;\n\n    this.$onInit = function() {\n      var countryObject = countries.find(function(item) {\n        return item.name.toLowerCase() === ctrl.country.toLowerCase();\n      })\n\n      if (!countryObject)\n        ctrl.countryCode = ctrl.country;\n      else\n        ctrl.countryCode = countryObject.code;\n    }\n\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + ctrl.countryCode.toLowerCase()\n    }\n  }\n])\n\napp\n  .component('flagIcon', {\n    template: '<span class=\"flag-icon\" ng-class=\"getFlagClassName()\"></span>',\n    controller: 'FlagIconController',\n    bindings: {\n      country: '@'\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/flagIcon/flagIcon.component.js","var ImageSelectorControllerDependencies = [\n  '$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'\n]\n\nvar ImageSelectorController = function (scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n  var ctrl = null\n  this.$onInit = function () {\n    // Reference to the controller\n    ctrl = this\n\n    // List of image urls\n    ctrl.images = ctrl.images || []\n\n    // List of image objects\n    // ctrl.media = ctrl.media || [];\n\n    scope.closeOnUploadComplete = $attrs.closeOnUploadComplete\n\n    /* Component configuration from attributes */\n    // The classes used to style the button\n    scope.buttonClass = $attrs.buttonClass\n\n    // The text displayed on the button\n    scope.buttonText = $attrs.buttonText\n\n    // The icon displayed on the button\n    scope.buttonIcon = $attrs.buttonIcon || null\n\n    var tabs = $attrs.tabs || 'library,from_disk,from_url'\n\n    // This will hold an array of tab names\n    // The component will show only those tabs\n    // whose name is in this array\n    //\n    // The first tab will be the active one.\n    // TODO to improve this, we can add an attribute \"activeTab\"\n\n    scope.tabs = tabs.split(',')\n\n    // This is the name of the parent function which will return a reference to the image container\n    // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n  }\n\n  /* Uploader configuration */\n  scope.uploader = new FileUploader({\n    url: window.API_BASE_URL + '/media',\n    arrayKey: '',\n    headers: {\n      'Authorization': window.public_key + ':' + window.token\n    },\n    filters: []\n  })\n\n  // When closeDialog is called from within the component\n  // we notify the parent component/controller by calling the on-close-dialog\n  // callback\n  scope.closeDialog = function () {\n    ctrl.onCloseDialog()\n  }\n\n  scope.openDialog = function () {\n    ctrl.onOpenDialog()\n  }\n\n  scope.uploadImages = function () {\n    ctrl.onUploadImages()\n  }\n\n  scope.image = {}\n  scope.media_files = []\n  scope.loadingMediaFiles = false\n\n  // Used to keep filters and pagination state\n  scope.query = {}\n\n  // Initializing the pagination object to null\n  // This allows for convenient check on view pagination === null => dont show pagination\n  scope.pagination = null\n\n  scope.loadMedias = function (query) {\n    scope.media_files = []\n    scope.loadingMediaFiles = true\n    /* $http({\n        method: 'GET',\n        url: window.API_BASE_URL + '/media',\n        headers: {\n          Authorization: window.public_key\n        }\n      }) */\n    $marketcloud.media.list(query || {})\n      .then(function (response) {\n        scope.loadingMediaFiles = false\n        scope.media_files = response.data.data\n\n        scope.pagination = {\n          currentPage: response.data.page,\n          numberOfPages: response.data.pages,\n          nextPage: response.data._links.next || null,\n          previousPage: response.data._links.prev || null,\n          count: response.data.count\n        }\n      })\n      .catch(function (response) {\n        scope.loadingMediaFiles = false\n        notie.alert(2, 'An error has occurred, please retry.', 1.5)\n      })\n  }\n\n  scope.loadPage = function (page_number) {\n    scope.query.page = page_number\n    return scope.loadData()\n  }\n\n  scope.loadMore = function () {\n    var pageToFetch = scope.media_files.length / 20 + 1\n    $marketcloud.media.list({ page: pageToFetch })\n      .then(function (response) {\n        scope.loadingMediaFiles = false\n\n        scope.media_files = scope.media_files.concat(response.data.data)\n      })\n      .catch(function (response) {\n        scope.loadingMediaFiles = false\n        notie.alert(2, 'An error has occurred, please retry.', 1.5)\n      })\n  }\n  scope.loadData = function (query) {\n    scope.media_files = []\n    scope.loadingMediaFiles = true\n\n    if (!query) { query = scope.query || {} }\n\n    $marketcloud.media\n      .list(query)\n      .then(function (response) {\n        scope.loadingMediaFiles = false\n        scope.media_files = response.data.data\n\n        scope.pagination = {\n          currentPage: response.data.page,\n          numberOfPages: response.data.pages,\n          nextPage: response.data._links.next || null,\n          previousPage: response.data._links.prev || null,\n          count: response.data.count\n        }\n      })\n      .catch(function (response) {\n        scope.loadingMediaFiles = false\n        notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n      })\n  }\n\n  // Calling it right now because we want to initialize the media library\n  if (scope.media_files.length === 0) {\n    scope.loadMedias()\n  }\n\n  scope.showProgressBar = false\n  scope.uploadingImages = false\n\n  scope.howManySelectedMedia = function () {\n    return ctrl.images.length\n  }\n\n  scope.addSelectedFromLibrary = function () {\n    var modal = $element.find('#ImageSelectorModal')\n    $(modal).modal('hide')\n    /* $('#ImageSelectorModal').modal('hide') */\n  }\n\n  scope.isImageSelected = function (image) {\n    return ctrl.images.indexOf(image.url) > -1\n  }\n  scope.selectImage = function (image) {\n    ctrl.image = image.url\n    scope.closeDialog()\n    var modal = $element.find('#ImageSelectorModal')\n    $(modal).modal('hide')\n  }\n\n  var removeImage = function (image) {\n    // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n    var pos = ctrl.images.indexOf(image.url)\n    if (pos > -1) {\n      ctrl.images.splice(pos, 1)\n    }\n\n    // Rimuovo il media\n    /* for (var i =0; i< ctrl.media.length;i++) {\n      if (ctrl.media[i].url === image.url)\n        ctrl.media.splice(i,1);\n    } */\n  }\n\n  scope.uploader.onCompleteAll = function () {\n    scope.loadMedias()\n    scope.showProgressBar = false\n    scope.uploadingImages = false\n    scope.uploader.clearQueue()\n\n    // Checking if we need to close the dialog\n    if (scope.closeOnUploadComplete === 'true') {\n      scope.closeDialog()\n      /* $('#ImageSelectorModal').modal('hide') */\n      var modal = $element.find('#ImageSelectorModal')\n      $(modal).modal('hide')\n    }\n\n    if (ctrl.onUploadComplete) {\n      ctrl.onUploadComplete()\n    }\n  }\n\n  scope.uploader.onProgressAll = function (progress) {\n\n  }\n\n  scope.uploader.onErrorItem = function (item, response, status, headers) {\n    var err = new Error('Error uploading an item')\n    err.response = response\n    err.status = status\n    err.headers = headers\n    $exceptionHandler(err)\n  }\n\n  scope.chooseFileFromStorage = function () {\n    $('#chooseFileFromStorageButton').trigger('click')\n  }\n\n  scope.uploadSelectedImages = function () {\n    scope.showProgressBar = true\n    scope.uploadingImages = true\n    scope.uploader.uploadAll()\n  }\n\n  scope.addImageFromUrl = function () {\n    ctrl.images.push(scope.image.url)\n    // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n    scope.image.url = null\n  }\n\n  scope.showImageSelectorModal = function () {\n    /* $('#ImageSelectorModal').modal('show') */\n    var modal = $element.find('#ImageSelectorModal')\n    $(modal).modal('show')\n\n    // Notifying the parent\n    scope.openDialog()\n  }\n}\n\nImageSelectorController.$inject = ImageSelectorControllerDependencies\n\nangular.module('DataDashboard')\n  .controller('ImageSelectorController', ImageSelectorController)\n\nangular.module('DataDashboard')\n  .component('imageSelector', {\n    templateUrl: '/modules/data_dashboard/src/components/imageSelector/imageSelector.component.html',\n    controller: 'ImageSelectorController',\n    bindings: {\n      onCloseDialog: '&',\n      onOpenDialog: '&',\n      onUploadComplete: '&',\n      image: '=?',\n      buttonClass: '@',\n      buttonIcon: '@',\n      buttonText: '@',\n      closeOnUploadComplete: '@'\n    }\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imageSelector/imageSelector.component.js","\nvar app = angular.module('DataDashboard')\napp.controller('ImageThumbnailController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n  this.$onInit = function () {\n    scope.ctrl = this\n\n    // Boolean flag to control display/hide of the overlay\n    scope.ctrl.showOverlay = false\n  }\n\n  scope.edit = function () {\n    scope.ctrl.onEdit()\n    $element.find('#editImageModal').modal('show')\n  }\n  scope.delete = function () {\n    scope.ctrl.onDelete()\n  }\n\n  scope.zoom = function () {\n    $element.find('#zoomImageModal').modal('show')\n  }\n\n  scope.showOverlay = function () {\n    scope.ctrl.showOverlay = true\n  }\n  scope.hideOverlay = function () {\n    scope.ctrl.showOverlay = false\n  }\n\n  scope.toggleEditImageModal = function (image) {\n    $element.find('#editImageModal').modal('hide')\n  }\n}])\napp\n.component('imageThumbnail', {\n  templateUrl: '/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.html',\n  controller: 'ImageThumbnailController',\n  bindings: {\n    imageSrc: '=',\n    image: '=',\n    onEdit: '&',\n    onDelete: '&'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imageThumbnail/imageThumbnail.component.js","\n\nfunction ImagesCardController(scope) {\n  var ctrl = null\n\n  this.$onInit = function() {\n    ctrl = this\n    scope.ctrl = ctrl\n\n  }\n\n  scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n    var toMove = JSON.parse(JSON.stringify(target[fromIndex]));\n\n    // We ensure that the indexes exist\n    if (fromIndex > target.length - 1)\n      return;\n\n    // First we remove the element to move\n    target.splice(fromIndex, 1);\n\n    // Then we add it to the desired position\n    target.splice(toIndex, 0, toMove);\n\n  }\n\n  scope.removeImage = function(i) {\n    var removed = scope.ctrl.items.splice(i, 1);\n    scope.ctrl.onRemove(removed[0]);\n  };\n}\n\nImagesCardController.$inject = ['$scope']\n\nangular\n  .module('DataDashboard')\n  .controller('ImagesCardController', ImagesCardController)\n  .component('imagesCard', {\n    templateUrl: '/modules/data_dashboard/src/components/imagesCard/imagesCard.component.html',\n    controller: 'ImagesCardController',\n    bindings: {\n      items: '=',\n      onRemove: '&',\n      removeCardFrame: '@?'\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/imagesCard/imagesCard.component.js","\nvar app = angular.module('DataDashboard')\napp.controller('LinkHelpTextController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n  this.$onInit = function () {\n    scope.ctrl = this\n\n    // The text to display\n    scope.ctrl.text = this.text\n\n    // The label to display\n    scope.ctrl.label = this.label\n\n    scope.showHelpText = false\n  }\n\n  scope.toggleHelpText = function () {\n    scope.showHelpText = !scope.showHelpText\n  }\n}])\napp\n.component('linkHelpText', {\n  templateUrl: '/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.html',\n  controller: 'LinkHelpTextController',\n  bindings: {\n    text: '@',\n    label: '@'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/linkHelpText/linkHelpText.component.js","\n\nvar app = angular.module('DataDashboard')\n\napp.controller('NavbarController',\n  [\n  '$scope',\n  '$application',\n  '$account',\n    function ($scope, $application, $account) {\n\n      $scope.application = $application.get()\n      $scope.user = $account.get();\n\n    }\n  ])\n\n\napp\n.component('navbar', {\n  templateUrl: '/modules/data_dashboard/src/components/navbar/navbar.component.html',\n  controller: 'NavbarController',\n  bindings: {}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/navbar/navbar.component.js","var app = angular.module('DataDashboard')\napp.controller('PaginationNavController', ['$scope', '$element', '$attrs', '$marketcloud',\n  function(scope, $element, $attrs, $marketcloud) {\n    this.$onInit = function() {\n      scope.ctrl = this\n    }\n\n    scope.loadPage = function(page_number) {\n      scope.ctrl.onChangePage({\n        page: page_number\n      })\n    }\n\n    scope.getListOfPages = function() {\n      var np = scope.ctrl.pagination.numberOfPages;\n      var cp = scope.ctrl.pagination.currentPage\n\n      var arr = []\n      var initialPage = cp - 2\n      if (initialPage <= 0) {\n        initialPage = 1\n      }\n      var lastPage = cp + 2\n      if (lastPage > np) {\n        lastPage = np\n      }\n\n      for (var i = initialPage; i < lastPage; i++) {\n        arr.push(i)\n      }\n\n      return arr\n    }\n  }\n])\napp\n  .component('paginationNav', {\n    templateUrl: '/modules/data_dashboard/src/components/paginationNav/paginationNav.component.html',\n    controller: 'PaginationNavController',\n    bindings: {\n      pagination: '=',\n      onChangePage: '&'\n\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/paginationNav/paginationNav.component.js","var app = angular.module('DataDashboard')\napp.controller('PaginationSelectorController', ['$scope',\n  function(scope) {\n\n    var ctrl = this;\n\n    this.$onInit = function() {\n\n      scope.ctrl = this;\n      scope.ctrl.perPage = this.perPage || this.config.defaultPageSize\n      scope.ctrl.page = this.page || this.config.defaultPageNumber\n\n      this.updatePageCounters();\n\n    }\n\n    // If the parent controller's pagination changes\n    // we have to update our reference\n    this.$onChanges = function(changes) {\n\n      // Whenever the parent controller refreshes data updating the query\n      // we must update our reference to pagination\n      if (changes.pagination) {\n        ctrl.pagination = changes.pagination.currentValue;\n\n        // We have to be sure that scope is already there\n        if (scope && scope.ctrl){\n          ctrl.updatePageCounters();\n        }\n      }\n    }\n\n  \n\n   this.updatePageCounters = function() {\n      scope.pages = [];\n      for (var i = 1; i <= this.pagination.numberOfPages; i++) {\n        scope.pages.push(i);\n      }\n\n      // We find the positions of the first and the last displayed item\n      scope.first = (scope.ctrl.page -1) * scope.ctrl.perPage + 1;\n      scope.last = ((scope.ctrl.page) * scope.ctrl.perPage) -1 ;\n\n      // If there are less items than the perPage value, we adjust the \"last\" value\n      if (scope.last > scope.ctrl.pagination.count) {\n        scope.last = scope.ctrl.pagination.count;\n      }\n    }\n\n    this.config = {\n      availablePageSizes: [10, 20, 50, 100],\n      defaultPageSize: 20,\n      defaultPageNumber: 1\n    }\n\n\n\n    // this function triggers the callback specified as onChangePageSize\n    scope.setPageSize = function(pageSize) {\n\n      var newSize = scope.ctrl.perPage;\n\n      if (pageSize)\n        newSize = pageSize;\n\n\n      scope.ctrl.onChangePageSize({\n        per_page: newSize\n      })\n      .then( function(){\n        ctrl.updatePageCounters();\n      })\n\n    }\n\n    scope.setPageNumber = function(pageNumber) {\n\n      if (pageNumber <= 0){\n        console.info(\"Cannot set page <= 0. Ignoring setPageNumber() call.\")\n        return;\n      }\n\n\n      if (pageNumber > scope.ctrl.pagination.numberOfPages ){\n        console.info(\"Cannot set page > pagination.numberOfPages. Ignoring setPageNumber() call.\")\n        return;\n      }\n\n\n      scope.ctrl.onChangePageNumber({\n        page: pageNumber\n      })\n      .then( function(){\n        ctrl.updatePageCounters();\n      })\n    }\n\n\n  }\n])\napp\n  .component('paginationSelector', {\n    templateUrl: '/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.html',\n    controller: 'PaginationSelectorController',\n    bindings: {\n      perPage: '=',\n      page: '=',\n      pagination: '<', // We don't need to modify this, we just use it to listen for changes and read data\n      onChangePageSize: '&',\n      onChangePageNumber: '&'\n\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/paginationSelector/paginationSelector.component.js","\nvar app = angular.module('DataDashboard')\napp.controller('SEOFormController', ['$scope', '$element', '$attrs', function (scope, $element, $attrs) {\n  this.$onInit = function () {\n    scope.ctrl = this\n\n    // The SEO object holds all SEO related data\n    scope.ctrl.seo = this.seo\n\n    // The active tab key\n    scope.activeSeoTab = 'meta'\n  }\n\n  scope.showSeoTab = function (tabname) {\n    scope.activeSeoTab = tabname\n  }\n}])\napp\n.component('seoForm', {\n  templateUrl: '/modules/data_dashboard/src/components/seoForm/seoForm.component.html',\n  controller: 'SEOFormController',\n  bindings: {\n    seo: '=',\n    removeCardFrame: '@?'\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/seoForm/seoForm.component.js","\nvar app = angular.module('DataDashboard')\n\napp.controller('SidebarController',\n  [\n  '$scope', \n  '$http', \n  '$routeParams', \n  '$location', \n  '$rootScope', \n  '$route',\n  '$application',\n  '$window',\n  'StormConfiguration',\n  function($scope, $http, $params, $location, $root, $route, $application, $window, Configuration) {\n    $scope.showingSubSidebar = false\n\n    $scope.currentSidebarSection = null\n\n    $scope.currentSection = null\n\n    $scope.sidebarIsExpanded = true;\n\n    $scope.subEntriesGroupToShow = null\n\n    $scope.subSideBars = {\n      inventory: false,\n      system: false\n    }\n\n    $scope.StormConfiguration = {};\n    $scope.StormConfiguration = Configuration.get();\n\n\n\n    $scope.$on('$dashboardSectionChange', function($event, args) {\n      // Intercepting the new section event\n      if (args.section) {\n        \n        $scope.currentSection = args.section.split('.')[0]\n        $scope.currentSubsection = args.section.split('.')[1] || null\n\n        $root.currentSection = args.section.split('.')[0]\n        $root.currentSubsection = args.section.split('.')[1] || null\n\n        if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n          $scope.hideSubSidebar()\n        }\n      }\n    })\n\n\n\n    $scope.switchToApp = function(app_id) {\n      var current_app_id = $application.get().id\n        // We just need to swap the current urls with the desired app id\n      var url = '/applications/' + app_id + '/dashboard#/'\n\n      window.location.href = url\n    }\n\n   \n    $scope.showSubEntries = function(id) {\n      $scope.subEntriesGroupToShow = id\n    }\n    $scope.hideAllSubEntries = function() {\n      for (var k in $scope.subEntriesGroupShown)\n        $scope.subEntriesGroupShown[k] = false;\n    }\n\n    $scope.subEntriesGroupShown = {\n      inventory: false,\n      system: false\n    }\n\n    // find workaround with $window, since currently using $window doesnt work\n    this.mql = window.matchMedia('screen and (max-width:1000px)');\n\n    this.mql.addListener( function(mq){\n      console.log(\"matchMedia Listener\")\n      if (mq.matches) {\n        if (true === $scope.sidebarIsExpanded) {\n          $scope.toggleSidebar();\n        }\n      } else {\n          // When the screen size grows bigger, we expand the sidebar,\n          // not required but probably wanted by the user\n          if (false === $scope.sidebarIsExpanded) {\n          $scope.toggleSidebar();\n        }\n        }\n    })\n\n    \n\n\n    $scope.toggleSidebar = function() {\n\n\n      var movement = \"-=200\";\n      var duration = 500;\n\n      if ($scope.sidebarIsExpanded === false) {\n        movement = '+=200';\n\n        // if we are closing the sidebar, we also close sub-sections in it\n        $scope.hideAllSubEntries();\n      }\n\n      $(\"#page-wrapper\").animate({\n        \"margin-left\": movement\n      }, {\n        duration: duration,\n        queue: false\n      });\n\n      $(\".dashboard-section-header\").animate({\n        \"left\": movement\n      }, {\n        duration: duration,\n        queue: false\n      });\n\n      $(\".sidebar-footer\").animate({\n        \"left\": movement\n      }, {\n        duration: duration,\n        queue: false\n      });\n\n      $(\".sidebar\").not('.sub-sidebar').animate({\n        left: movement\n      }, {\n        duration: duration,\n        queue: false,\n        done: function() {\n\n\n\n          if (true === $scope.sidebarIsExpanded) {\n            $(\"a.entry .fa\").addClass(\"pull-right\");\n            $scope.sidebarIsExpanded = false;\n          } else {\n            $scope.sidebarIsExpanded = true;\n            $(\"a.entry .fa\").removeClass(\"pull-right\");\n          }\n\n\n\n          $scope.$apply();\n        }\n      })\n\n    }\n\n    $scope.toggleSidebar = function() {\n\n      if (true === $scope.sidebarIsExpanded) {\n        angular.element('.sidebar').addClass('collapsed');\n        angular.element('.sidebar').removeClass('expanded');\n        angular.element('#page-wrapper').addClass('expanded');\n        angular.element('#page-wrapper').removeClass('collapsed');\n        $scope.hideAllSubEntries();\n        $scope.sidebarIsExpanded = false;\n      } else {\n        angular.element('.sidebar').addClass('expanded');\n        angular.element('.sidebar').removeClass('collapsed');\n        angular.element('#page-wrapper').addClass('collapsed');\n        angular.element('#page-wrapper').removeClass('expanded');\n        $scope.sidebarIsExpanded = true;\n      }\n\n\n    }\n\n    $scope.toggleSubEntries = function(group_id) {\n      // group_id is the name of the dashboard section\n      // a section is a group of logical views\n      // e.g. inventory is a group of views related to inventory management\n      $scope.currentSection = group_id\n\n      if (false === $scope.sidebarIsExpanded)\n        $scope.toggleSidebar();\n\n\n      $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id]\n    }\n\n\n    $scope.saveStormConfiguration = function(){\n\n      for (var k in $scope.StormConfiguration) {\n        Configuration.set(k, $scope.StormConfiguration[k], true);\n      }\n\n      if ($scope.StormConfiguration.hasOwnProperty(\"theme\"))\n        Configuration.applyTheme($scope.StormConfiguration.theme)\n    }\n\n\n    $scope.showSubSidebar = function(id) {\n\n      $scope.showingSubSidebar = true\n\n      var sidebars = [\n        'inventory',\n        'system',\n        'contents'\n      ]\n\n      if (sidebars.indexOf(id) < 0) {\n        return false\n      }\n\n      $scope.currentSidebarSection = id\n    }\n\n    $scope.hideSubSidebar = function() {\n      $scope.showingSubSidebar = false\n    }\n  }\n])\n\napp\n.component('sidebar', {\n  templateUrl: '/modules/data_dashboard/src/components/sidebar/sidebar.component.html',\n  controller: 'SidebarController',\n  bindings: {}\n})\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/sidebar/sidebar.component.js","var app = angular.module('DataDashboard');\n\n\napp.controller('sortingSelectorController', \n  [\n  '$scope',\n  function(scope) {\n\n    var ctrl = this;\n\n    this.$onInit = function() {\n      scope.ctrl = this;\n      scope.ctrl.query = this.query || {};\n\n      \n      if (!scope.ctrl.query.sort_by)\n        scope.ctrl.query.sort_by = 'id';\n      if (!scope.ctrl.query.sort_order)\n        scope.ctrl.query.sort_order = 'DESC';\n\n      scope.ctrl.resourceAttributes = this.resourceAttributes || [];\n    }\n\n\n    scope.applySorting = function(){\n      console.log(\"sortingSelector.applySorting\",{\n        sort_by : scope.ctrl.query.sort_by,\n        sort_order: scope.ctrl.query.sort_order\n      })\n      scope.ctrl.onUpdate({\n        sort_by : scope.ctrl.query.sort_by,\n        sort_order: scope.ctrl.query.sort_order\n      })\n\n      $(\"#sortingModal\").modal('hide');\n\n    }\n\n\n  }\n])\n\napp\n  .component('sortingSelector', {\n    templateUrl: '/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.html',\n    controller: 'sortingSelectorController',\n    bindings: {\n      query: '=',\n      resourceAttributes: '=',\n      onUpdate : '&'\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/sortingSelector/sortingSelector.component.js","var app = angular.module('DataDashboard')\napp.controller('SwitchController', [\n  '$scope', '$element', '$attrs',\n  function (scope, $element, $attrs) {\n    this.$onInit = function () {\n      scope.ctrl = this\n\n      scope.ctrl.value = this.value\n\n      // Theme is success danger info primary warning default\n      scope.ctrl.theme = $attrs.theme || 'info'\n\n      scope.ctrl.align = $attrs.align || ''\n    }\n\n    $element.on('click', function () {\n      if (scope.ctrl.readOnly === true) {\n        return\n      }\n\n      scope.ctrl.value = !scope.ctrl.value\n\n      // Params must be wrapped in an object\n      // then when using the on-update attribute i can write\n      // on-update=\"somfunc(params)\"\n\n      scope.$apply()\n\n      scope.ctrl.onUpdate()\n    })\n  }\n])\napp\n  .component('switch', {\n    templateUrl: '/modules/data_dashboard/src/components/switch/switch.component.html',\n    controller: 'SwitchController',\n    bindings: {\n      value: '=',\n      onUpdate: '&',\n      class: '@',\n      align: '@',\n      readOnly: '@'\n    }\n  })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/switch/switch.component.js","'use strict'\n\nangular\n  .module('DataDashboard')\n  .controller('TaxesSelectorController', TaxesSelectorController)\n  .component('taxesSelector', {\n  templateUrl: '/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.html',\n  controller: 'TaxesSelectorController',\n  bindings: {\n    tax: '=',\n    onError: '&',\n    onChange: '&'\n  }\n})\n\nTaxesSelectorController.$inject = ['$marketcloud', '$scope']\n\nfunction TaxesSelectorController ($marketcloud, scope) {\n  this.$onInit = function () {\n    scope.ctrl = this\n  }\n\n  $marketcloud.taxes.list()\n    .then(function (response) {\n  scope.ctrl.taxes = response.data.data\n})\n    .catch(function (response) {\n  scope.ctrl.onError(response)\n})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/taxesSelector/taxesSelector.component.js","var app = angular.module('DataDashboard');\n\n\napp.controller('ToolbarSearchController', \n  [\n  '$scope',\n  function(scope) {\n\n    var ctrl = this;\n    scope.searchWord = '';\n\n    this.$onInit = function() {\n      scope.ctrl = this;\n      \n      scope.ctrl.query = {}\n\n      if (!this.propertyName)\n        this.propertyName = \"name\";\n\n      scope.ctrl.query[ctrl.propertyName] = {\n        $options : 'i',\n        $regex : ''\n      };\n      \n    }\n\n\n    scope.onQueryChange = function(){\n\n      scope.ctrl.query[ctrl.propertyName][\"$regex\"] = scope.searchWord\n      return scope.ctrl.onUpdate({\n        query : scope.ctrl.query\n      })\n    }\n\n\n\n  }\n])\n\napp\n  .component('toolbarSearch', {\n    templateUrl: '/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.html',\n    controller: 'ToolbarSearchController',\n    bindings: {\n      onUpdate : '&',\n      propertyName : '@'\n    }\n  })\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/components/toolbarSearch/toolbarSearch.component.js","var app = angular.module('DataDashboard')\napp.controller('PaymentMethodsController', ['$scope', '$http', '$marketcloud', '$location', 'paymentMethods',\n  function(scope, http, $marketcloud, location, paymentMethods) {\n    scope.paymentMethods = paymentMethods.data.data\n      /* scope.integrations = integrations.data.data; */\n    scope.modalMode = 'update'\n    scope.paymentMethod = {\n      name: '',\n      description: '',\n      active: false\n\n    }\n\n    scope.loadPaymentMethods = function() {\n      $marketcloud.paymentMethods.list()\n        .then(function(response) {\n          scope.paymentMethods = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An erro has occurred. Please try again.', 1.5)\n        })\n    }\n\n    scope.availableChargeOptions = [{\n      label: 'No additional charge',\n      value: 'no_cost'\n    }, {\n      label: 'Fixed fee',\n      value: 'fixed_fee'\n    }, {\n      label: 'Percentage based fee',\n      value: 'percentage_fee'\n    }, {\n      label: 'Fixed plus percentage',\n      value: 'fixed_plus_percentage'\n    }]\n\n    scope.delete = function(payment) {\n\n      payment = payment || scope.payment;\n\n      \n      $marketcloud.paymentMethods.delete(payment.id)\n        .then(function(response) {\n          notie.alert(1, 'Payment method deleted.', 1.5)\n          scope.payment = {}\n          return $marketcloud.paymentMethods.list()\n        })\n        .then(function(response) {\n          scope.paymentMethods = response.data.data\n          $('#addManualPaymentMethodModal').modal('hide')\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, please try again.')\n        })\n    }\n\n    scope.save = function() {\n      $marketcloud.paymentMethods.save(scope.payment)\n        .then(function(response) {\n          notie.alert(1, 'Payment method created.', 1.5)\n          scope.payment = {}\n          return $marketcloud.paymentMethods.list()\n        })\n        .then(function(response) {\n          scope.paymentMethods = response.data.data\n          $('#addManualPaymentMethodModal').modal('hide')\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, please try again.')\n        })\n    }\n    scope.createPayment = function() {\n      scope.modalMode = 'create'\n      scope.payment = {}\n      $('#addManualPaymentMethodModal').modal('show')\n    }\n    scope.editPayment = function(payment) {\n      scope.modalMode = 'update'\n\n      scope.payment = payment\n\n      $('#addManualPaymentMethodModal').modal('show')\n    }\n\n    scope.update = function(updates) {\n      var payload = updates || scope.payment\n\n      $marketcloud.paymentMethods.update(scope.payment.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'Payment method updated.', 1.5)\n          return $marketcloud.paymentMethods.list()\n        })\n        .then(function(response) {\n          scope.paymentMethods = response.data.data\n          $('#addManualPaymentMethodModal').modal('hide')\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, please try again.')\n        })\n    }\n\n    scope.togglePaymentMethod = function(paymentMethod) {\n      $marketcloud.paymentMethods.update(paymentMethod.id, paymentMethod)\n        .then(function(response) {\n          notie.alert(1, 'Update successful', 1.5)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/PaymentMethods.controller.js","'use strict'\n/* globals angular */\nvar app = angular.module('DataDashboard')\n\napp.controller('AnalyticsController', [\n  '$scope',\n  '$http',\n  '$routeParams',\n  'analytics',\n  'moment',\n  'carts',\n  'customers',\n  '$location',\n  function(scope, http, params,  analytics, moment, carts,customers, $location) {\n\n\n    scope.currentRange = \"This month\";\n    if ($location.search().range)\n      scope.currentRange = $location.search().range;\n\n\n\n   \n\n    var today = new Date()\n    today.setHours(0, 0, 0, 0)\n    today = today.getTime()\n\n    var yesterday = new Date()\n    yesterday.setDate(yesterday.getDate() - 1)\n    yesterday.setHours(0, 0, 0, 0)\n    yesterday = yesterday.getTime()\n\n\n    var oneWeekAgo = new Date();\n    oneWeekAgo.setDate(oneWeekAgo.getDate()  - 7);\n    oneWeekAgo.setHours(0, 0, 0, 0);\n    oneWeekAgo = oneWeekAgo.getTime();\n\n    var orders = analytics.data.data\n\n\n   \n\n    var salesVolumePerDay = {}\n\n    var numberOfOrdersPerDay = {}\n\n\n\n\n    orders\n      .filter(function(x) {\n        // We consider only orders not canceled or refunded or failed for the analytics\n        var invalid_orders = ['failed', 'canceled', 'refunded']\n        return invalid_orders.indexOf(x.status) < 0\n      })\n      .map(function(x) {\n        return {\n          created_at: x.created_at,\n          total: x.total\n        }\n      })\n      .forEach(function(x) {\n        var d = new Date(x.created_at)\n        var month = String(d.getMonth() + 1)\n        if (month.length < 2) {\n          month = '0' + month\n        }\n        var day = d.getFullYear() + '-' + month + '-' + d.getDate()\n\n\n        if (!salesVolumePerDay[day]) {\n          salesVolumePerDay[day] = 0\n        }\n\n        salesVolumePerDay[day] += x.total\n\n\n        if (!numberOfOrdersPerDay[day])\n          numberOfOrdersPerDay[day] = 0;\n\n        numberOfOrdersPerDay[day]++;\n\n      })\n\n\n    var goodOrders = orders\n      .filter(function(x) {\n        // We consider only orders not canceled or refunded or failed for the analytics\n        var invalid_orders = ['failed', 'canceled', 'refunded']\n        return invalid_orders.indexOf(x.status) < 0\n    })\n\n\n    // Given a date object\n    // returns yyyy-mm-dd\n    function getDateKeyFromDate(d) {\n      var month = String(d.getMonth() + 1)\n      \n      if (month.length < 2)\n          month = '0' + month\n      \n      var day = d.getFullYear() + '-' + month + '-' + d.getDate()\n\n      \n      return day;\n    }\n\n    \n    var ordersPerDay = {};\n\n    // We have to prefill days labels\n\n    \n    var d = new Date();\n    switch(scope.currentRange.toLowerCase()) {\n      case \"this month\":\n        for (var i =1; i <30; i++){\n          var key = getDateKeyFromDate(d);\n          ordersPerDay[key] = [];\n          d.setDate(d.getDate() - i);\n        }\n      break;\n\n      case \"this week\":\n      for (var i =1; i <7; i++){\n          var key = getDateKeyFromDate(d);\n          ordersPerDay[key] = [];\n          d.setDate(d.getDate() - i);\n        }\n      break;\n\n      case \"yesterday\":\n        var yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        var key = getDateKeyFromDate(yesterday);\n        ordersPerDay[key] = [];\n      break;\n\n      case \"today\":\n        var today = new Date();\n        var key = getDateKeyFromDate(today);\n        ordersPerDay[key] = [];\n      break;\n    }\n\n    goodOrders.forEach(function(order){\n      var d = new Date(order.created_at);\n      \n      var day = getDateKeyFromDate(d);\n\n      if (ordersPerDay[day])\n        ordersPerDay[day].push(order);\n      else\n        ordersPerDay[day] = [order];\n    })\n\n    scope.dateLabels = Object.keys(ordersPerDay);\n    scope.formattedDateLabels = scope.dateLabels.map(function(label){\n      return moment(label, 'YYYY-M-DD').format('MMM Do')\n    })\n\n    scope.ordersVolumePerDay = []\n    scope.ordersCountPerDay = []\n\n    scope.dateLabels.forEach(function(date){\n      var numberOfOrdersThisDate = ordersPerDay[date].length;\n      var salesThisDate = ordersPerDay[date].map( function(order){\n        return order.total\n      })\n      .reduce(function(a,b){\n        return a+b\n      },0)\n\n      scope.ordersCountPerDay.push(numberOfOrdersThisDate)\n      scope.ordersVolumePerDay.push(salesThisDate)\n    })\n\n    scope.totalOrdersValue = \n      goodOrders\n      .map(function(order) {\n        return order.total;\n      })\n      .reduce(function(a,b){\n        return a + b\n      },0).toFixed(2)\n\n\n    scope.totalOrdersCount = goodOrders.length;\n    /*\n     *\tHere we feed the Chart.js chart on the dashboard homepage\n     *\n     *\tThis chart shows orders volume for this month (last 30 days)\n     */\n\n\n\n    \n    scope.chartOptions = {\n      scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n    }\n\n    scope.chartOptions = {\n      scales: {\n         xAxes : [ {\n            gridLines : {\n                display : false\n            }\n        } ],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: scope.application.currency_code\n          }\n        }]\n      }\n    }\n\n\n\n    carts = carts.data.data;\n\n    customers =customers.data.data;\n\n\n    scope.totalCustomersCount = customers.length\n\n\n    var totalCartsCount = carts.length;\n    scope.totalCartsCount = totalCartsCount\n\n    // Carts with item inside\n    var abandonedCarts = carts.filter( function(cart){return cart.status === \"open\" && cart.items.length > 0});\n    var abandonedCartsCount = abandonedCarts.length;\n\n    // Empty carts\n    var emptyCartsCount = carts.filter( function(cart){return cart.status === \"open\" && cart.items.length === 0}).length;\n\n    //\n    var convertedCartsCount = carts.filter( function(cart){ return cart.status === \"closed\"}).length;\n\n\n    scope.abandonedCartsTotalValue = abandonedCarts.map(function(cart){\n      return cart.total;\n    })\n    .reduce(function(a,b){\n      return a + b;\n    },0)\n\n\n    scope.CartsDatasets = [\n      abandonedCartsCount,\n      emptyCartsCount,\n      convertedCartsCount\n    ]\n\n\n\n\n    scope.CartsLabels = [\n    'Abandoned',\n    'Empty',\n    'Converted'\n    ]\n\n    scope.CartsChartOptions = {\n      legend: {\n            display: true,\n            position: 'bottom'\n        }\n\n    }\n\n    \n\n    scope.setCurrentTimeRange = function(range) {\n\n      range = range.toLowerCase();\n\n      scope.currentRange = range;\n\n      return $location.path('/analytics').search(\"range\",range);\n\n\n    }\n\n\n\n    var totalCartValue = carts\n    .map(function(cart) { return cart.total })\n    .reduce(function(a,b){\n      return a+b\n    },0)\n\n\n    scope.averageCartValue = 0;\n\n    if (totalCartValue > 0)\n      scope.averageCartValue = (totalCartValue / carts.length).toFixed(2)\n\n\n    var totalOrdersValue = orders.map( function(order){\n      return order.total\n    })\n    .reduce(function(a,b){\n      return a + b;\n    },0)\n\n\n    scope.averageOrderValue = 0;\n\n    if (totalOrdersValue > 0)\n      scope.averageOrderValue = (totalOrdersValue / orders.length).toFixed(2);\n    \n\n  }\n\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/analytics.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('EditRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', 'role', '$location',\n  function (scope, http, $application, rootScope, rolePresets, role, location) {\n    var application = $application.get()\n    scope.application = application\n    rootScope.currentSection = 'application.collaborators'\n\n    scope.role = role.data.data\n\n    scope.preset_name = 'public'\n    scope.errors = {}\n\n    scope.presets = rolePresets\n    scope.applyPreset = function () {\n      if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n        return\n      }\n\n      for (var k in (scope.presets[scope.preset_name])) {\n        scope.role.endpoints[k] = scope.presets[scope.preset_name][k]\n      }\n    }\n    scope.clearErrors = function () {\n      scope.errors = {}\n    }\n    scope.formHasErrors = function () {\n      return Object.keys(scope.errors).length > 0\n    }\n    var validateRole = function () {\n      scope.clearErrors()\n      if (scope.role.name.length > 253) {\n        scope.errors.name = 'Name too long'\n\n        return false\n      }\n\n      if (scope.role.name.length < 1) {\n        scope.errors.name = 'Name too short'\n        return false\n      }\n\n      return true\n    }\n    scope.updateRole = function () {\n      if (!validateRole()) {\n        return\n      }\n      http({\n        method: 'PUT',\n        url: '/applications/' + scope.application.id + '/roles/' + scope.role.id,\n        data: scope.role\n      })\n        .then(function (response) {\n          notie.alert(1, 'Role successfuly created.', 1.5)\n          location.path('#/application/acl')\n        }).catch(function (error) {\n          notie.alert(2, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n  }])\n\napp.controller('NewRoleController', ['$scope', '$http', '$application', '$rootScope', 'rolePresets', '$location',\n  function (scope, http, $application, rootScope, rolePresets, location) {\n    var application = $application.get()\n    scope.application = application\n    rootScope.currentSection = 'application.acl'\n\n    scope.preset_name = 'public'\n    scope.errors = {}\n    scope.newRole = {\n      name: '',\n      description: '',\n      endpoints: angular.copy(rolePresets.public)\n    }\n    scope.presets = rolePresets\n    scope.applyPreset = function () {\n      if (!scope.presets.hasOwnProperty(scope.preset_name)) {\n        return\n      }\n\n      for (var k in (scope.presets[scope.preset_name])) {\n        scope.newRole.endpoints[k] = scope.presets[scope.preset_name][k]\n      }\n    }\n    scope.clearErrors = function () {\n      scope.errors = {}\n    }\n    scope.formHasErrors = function () {\n      return Object.keys(scope.errors).length > 0\n    }\n    var validateRole = function () {\n      scope.clearErrors()\n      if (scope.newRole.name.length > 253) {\n        scope.errors.name = 'Name too long'\n\n        return false\n      }\n\n      if (scope.newRole.name.length < 1) {\n        scope.errors.name = 'Name too short'\n        return false\n      }\n\n      return true\n    }\n    scope.saveRole = function () {\n      if (!validateRole()) {\n        return\n      }\n      http({\n        method: 'POST',\n        url: '/applications/' + scope.application.id + '/roles',\n        data: scope.newRole\n      })\n        .then(function (response) {\n          notie.alert(1, 'Role successfuly created.', 1.5)\n          location.path('/applications/' + scope.application.id + '/acl')\n        }).catch(function (error) {\n          notie.alert(2, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n  }])\n\napp.controller('ACLController', ['$scope', '$http', 'roles', '$application', '$rootScope',\n  function (scope, http, roles, $application, rootScope) {\n    var application = $application.get()\n    scope.application = application\n    rootScope.currentSection = 'application.acl'\n\n    scope.roles = roles.data.data\n\n    scope.load = function () {\n      http({\n        method: 'GET',\n        url: '/applications/' + scope.application.id + '/roles'\n      })\n        .then(function (response) {\n          scope.roles = response.data.data\n        })\n        .catch(function (response) {\n          notie.alert(2, 'An error has occurred while reloading roles.', 1)\n        })\n    }\n\n    scope.delete = function (role) {\n      http({\n        method: 'DELETE',\n        url: '/applications/' + scope.application.id + '/roles/' + role.id\n      })\n        .then(function (response) {\n          notie.alert(1, 'Role correctly deleted', 1)\n          scope.load()\n        })\n        .catch(function (response) {\n          notie.alert(3, 'An error has occurred, role not deleted', 1)\n        })\n    }\n  }])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/acl.controller.js"," \nvar app = angular.module('DataDashboard');\napp.controller('CreateApplicationController', ['$scope', '$http', '$location', '$rootScope',\n        function(scope, http, location, $rootScope) {\n\n\n            scope.application = {};\n\n\n            scope.create = function() {\n                scope._invalid = null;\n                var validation = window.Models.Application.validate(scope.application);\n                if (false === validation.valid) {\n                    scope._invalid = validation.invalidPropertyName;\n                }\n                http({\n                        method: 'POST',\n                        url: '/applications',\n                        data: scope.application\n                    })\n                    .then(function(response) {\n                        notie.alert(1, \"Application created\", 1.5);\n                        location.path('#/applications/list')\n\n                    })\n                    .catch(function(error) {\n                        notie.alert(3, \"An error has occurred, please try again\", 1.5);\n                    })\n            }\n\n\n        }\n    ]);\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/application.new.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('ListApplicationsController', ['$scope',\n  function (scope) {\n    \n    scope.applications = window.applications;\n\n\n  }])\n\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/applications.list.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('ApplicationBillingController', [\n  '$scope',\n  '$http',\n  '$rootScope',\n  '$application',\n  '$account',\n  function(scope, http, rootScope, $application, $account) {\n    var application = $application.get()\n    scope.application = application\n\n    rootScope.currentSection = 'application.billing'\n\n    // The form's step\n    scope.step = 1\n\n    // The selected plan\n    scope.selected_plan = null\n\n    // the error message\n    scope.error = null\n\n    scope.invalidPropertyName = null\n\n    // holds the card data\n    scope.card = {}\n\n    // idle, processing, error, success\n    scope.creditCardFormState = 'idle'\n\n    scope.showYearlyPlans = false\n\n    scope.goToStep = function(step) {\n      scope.step = step\n    }\n\n    // Loads the current user information like profile and billing\n    scope.account = $account.get();\n\n\n\n    scope.selectPlan = function(plan_id) {\n      scope.plans.forEach(function(plan) {\n        if (plan.id === plan_id) {\n          scope.selected_plan = plan\n        }\n      })\n      console.log('selected_plan', scope.selected_plan)\n      scope.goToStep(2)\n    }\n\n    var validateCard = function() {\n      scope.error = null\n\n      if (!Stripe.card.validateExpiry(scope.card.exp_month, scope.card.exp_year)) {\n        scope.error = 'The card\\'s expiration is invalid'\n        scope.invalidPropertyName = 'card.expiry'\n      }\n\n      if (!Stripe.card.validateCVC(scope.card.cvc)) {\n        scope.error = 'The card\\'s cvc is invalid'\n        scope.invalidPropertyName = 'card.cvc'\n      }\n\n      if (!Stripe.card.validateCardNumber(scope.card.number)) {\n        scope.error = 'The card\\'s number is invalid'\n        scope.invalidPropertyName = 'card.number'\n      }\n\n      return (scope.error === null)\n    }\n\n    scope.updateApplicationSubscription = function() {\n      scope.creditCardFormState = 'processing'\n      http({\n          method: 'PUT',\n          url: '/applications/' + application.id + '/billing',\n          data: {\n            plan_id: scope.selected_plan.id\n          }\n        })\n        .then(function(response) {\n          scope.goToStep(3)\n          scope.creditCardFormState = 'success'\n        })\n        .catch(function(error) {\n          console.log(error)\n          scope.error = error\n          notie.alert(2, error.data.errors[0].message || 'Payment failed, please check your billing information.')\n          scope.creditCardFormState = 'error'\n        })\n    }\n\n    scope.filterByInterval = function(value, index, arr) {\n      if (scope.showYearlyPlans === true) {\n        return value.interval === 'yearly'\n      } else {\n        return value.interval === 'monthly'\n      }\n    }\n\n    scope.plans = []\n\n    http.get('/applications/' + scope.application.id + '/plans')\n      .then(function(response) {\n        console.log('PLANS', response.data)\n        scope.plans = response.data.data\n\n        scope.plans.forEach(function(plan) {\n          plan.api_calls_quota_max = plan.api_calls_quota_max / 1000\n          plan.api_calls_quota_max = plan.api_calls_quota_max + 'K'\n        })\n      })\n      .catch(function(error) {\n        console.log(error)\n      })\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/billing.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('CollaboratorsController', ['$scope', '$http', 'collaborators', '$application', '$rootScope',\n  function(scope, http, collaborators, $application, rootScope) {\n    var application = $application.get()\n    scope.application = application\n    rootScope.currentSection = 'application.collaborators'\n\n    scope.mode = null\n\n    scope.collaborators = collaborators.data.data\n\n    scope.load = function() {\n      http({\n          method: 'GET',\n          url: '/applications/' + scope.application.id + '/collaborators'\n        })\n        .then(function(response) {\n          scope.collaborators = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(2, 'An error has occurred while reloading collaborators.', 1)\n        })\n    }\n\n    /* scope.edit = function(collaborator) {\n      scope.newCollaborator = collaborator;\n      scope.showUpdateModal();\n    };\n    scope.showUpdateModal = function() {\n      scope.mode = 'update';\n      $('#newCollaboratorModal').modal('show');\n    }; */\n\n    scope.showCreateModal = function() {\n      scope.mode = 'create'\n      $('#newCollaboratorModal').modal('show')\n    }\n\n    scope.saveCollaborator = function() {\n      http({\n          method: 'POST',\n          url: '/applications/' + scope.application.id + '/collaborators',\n          data: scope.newCollaborator\n        })\n        .then(function(response) {\n          notie.alert(1, 'Collaborator correctly created', 1.5)\n          scope.newCollaborator = {}\n          $('#newCollaboratorModal').modal('hide')\n          scope.load()\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, collaborator not created', 1.5)\n          scope.newCollaborator = {}\n        })\n    }\n\n    scope.updateCollaborator = function(collaborator) {\n      http({\n          method: 'PUT',\n          url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email,\n          data: {\n            role: collaborator.role\n          }\n        })\n        .then(function(response) {\n          notie.alert(1, 'Collaborator correctly updated', 1)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, collaborator not updated', 1)\n          scope.newCollaborator = {}\n        })\n    }\n\n    scope.delete = function(collaborator) {\n      http({\n          method: 'DELETE',\n          url: '/applications/' + scope.application.id + '/collaborators/' + collaborator.email\n        })\n        .then(function(response) {\n          notie.alert(1, 'Collaborator correctly deleted', 1)\n          scope.load()\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, collaborator not deleted', 1)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/collaborators.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('DeployController', ['$scope', '$rootScope', '$application',\n  function (scope, $rootScope, $application) {\n    var application = $application.get()\n    scope.application = application\n\n    scope.selectedTemplate = null\n\n    $rootScope.application = application\n    $rootScope.currentSection = 'application.deploy'\n\n    scope.getHerokuURL = function () {\n      var str = 'https://heroku.com/deploy'\n      str += '?template=' + scope.selectedTemplate\n      str += '&env[MARKETCLOUD_PUBLIC_KEY]=' + encodeURIComponent(scope.application.public_key)\n      str += '&env[MARKETCLOUD_SECRET_KEY]=' + encodeURIComponent(scope.application.secret_key)\n      return str\n    }\n  }])\n\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/deploy.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('IntegrationsController', function($scope, $http, $application, $rootScope) {\n  var application = $application.get()\n  scope.application = application\n  $scope.integrations = [{\n    name: 'braintree',\n    tags: ['payments'],\n    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n    links: {\n      'view': '/documentation/integrations/braintree'\n    }\n  }, {\n    name: 'stripe',\n    tags: ['payments'],\n    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n    description: 'Web and mobile payments. Built for developers.',\n    links: {\n      'view': '/documentation/integrations/stripe'\n    }\n  }, {\n    name: 'facebook',\n    tags: ['authentication'],\n    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n    description: 'Facebook authentication',\n    links: {\n      'view': '/documentation/guides/facebook-login'\n    }\n  }]\n  rootScope.currentSection = 'application.integrations'\n})\n\napp.controller('IntegrationStripeController', function($scope, $http, $routeParams, StripeIntegration) {\n  console.log('Integration status', StripeIntegration)\n\n  /*\n   *  The integration states are\n   *\n   *  Not installed\n   *  Installed inactive\n   *  Installed active\n   *\n   *  Installed means that the oauth flow was completed and we have the data\n   *  StripeIntegration is the object we use to inject the integration state fetched from the api\n   *\n   *  If it's null, we conclude that it is not installed\n   */\n  if (StripeIntegration) {\n    $scope.isIntegrationInstalled = true\n    $scope.StripeIntegration = StripeIntegration\n  } else {\n    $scope.isIntegrationInstalled = false\n  }\n\n  $scope.currentApplication = $application.get()\n\n  // TODO\n  // Lo switch deve essere visibile se e solo se l'integrazione  installata. cos da\n  // non essere clicccabile altrimenti.\n\n  $scope.toggleIntegration = function() {\n    alert($scope.StripeIntegration.isActive)\n    return $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/stripe',\n        data: {\n          isActive: $scope.StripeIntegration.isActive\n        }\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n})\n\napp.controller('IntegrationBraintreeController', function($scope, $http, $routeParams, BraintreeIntegration) {\n  // This bool is used to show/hide credentials form\n  // This form is used to update the credentials\n  $scope.displayCredentialsForm = false\n\n  $scope.currentApplication = $application.get()\n\n  $scope.braintreeConfiguration = BraintreeIntegration.data.data\n\n  $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data)\n\n  // If the integration is not enabled we initialize it to false\n  if (!$scope.braintreeUpdate.hasOwnProperty('isActive')) {\n    $scope.braintreeUpdate.isActive = false\n  }\n\n  $scope.toggleCredentialsForm = function() {\n    $scope.displayCredentialsForm = !$scope.displayCredentialsForm\n  }\n\n  $scope.showModal = function() {\n    $('#BraintreeCredentialsModal').modal('show')\n  }\n\n  $scope.toggleIntegration = function() {\n    return $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\n        data: {\n          isActive: $scope.braintreeConfiguration.isActive\n        }\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n  $scope.saveBraintreeConfiguration = function() {\n    var payload = {\n      environment: $scope.braintreeUpdate.environment,\n      isActive: $scope.braintreeUpdate.isActive\n    }\n\n    // If the user also changed the config,\n    if (\n      $scope.braintreeUpdate.merchantId &&\n      $scope.braintreeUpdate.publicKey &&\n      $scope.braintreeUpdate.privateKey\n    ) {\n      payload.merchantId = $scope.braintreeUpdate.merchantId\n      payload.publicKey = $scope.braintreeUpdate.publicKey\n      payload.privateKey = $scope.braintreeUpdate.privateKey\n    }\n\n    console.log('PUTTING', payload)\n    $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\n        data: payload\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n        $('#BraintreeCredentialsModal').modal('hide')\n        $scope.braintreeConfiguration = angular.copy({\n          environment: payload.environment,\n          isActive: payload.isActive\n        })\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n})\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/integrations.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('NavigationController',\n  ['$scope', '$route', '$rootScope', '$application',\n    function ($scope, $route, $rootScope, $application) {\n      var application = $application.get()\n      scope.application = application\n\n\t\t// $rootScope.$broadcast('$dashboardSectionChange',{section : $route.current.$$route.name});\n\n      $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t\t\t// Intercepting the new section event\n\t\t\t// $scope.currentSection = args.section.split('.')[0];\n        $scope.currentSection = args.section\n\n        $scope.showNavigation = ($scope.currentSection !== 'home' && $scope.currentSection !== 'create')\n      })\n    }])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/navigation.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('ApplicationOverviewController', ['$scope', '$http', '$application', '$rootScope',\n  function (scope, http, $application, rootScope) {\n    scope.activities = []\n\n    // Not loading activities as a route resolve\n    // this is because the http method is still quite slow.\n    // so we load it after showing the view.\n    http({\n      url : '/applications/'+$application.get(\"id\") +'/activity',\n      method : 'GET'\n    })\n    .then( function(response) {\n      scope.activities = response.data.data;\n    })\n\n    var application = $application.get()\n    scope.application = application\n\n        // TODO grab statistical information\n\n    rootScope.currentSection = 'application.overview'\n\n    function getNextMonth (date) {\n      var next_month = new Date(date)\n      next_month.setMonth(date.getMonth() + 1)\n      return next_month\n    }\n\n    scope.kilobytesToGigabytes = function (kb) {\n      return (kb / 1024) / 1024\n    }\n\n    scope.application.renew_date\n    scope.getMethodCSSClass = function (a) {\n      var cls = null\n      switch (a.method) {\n        case 'GET':\n          cls = 'label-success'\n          break\n        case 'POST':\n          cls = 'label-info'\n          break\n        case 'PUT':\n          cls = 'label-warning'\n          break\n        case 'PATCH':\n          cls = 'label-warning'\n          break\n        case 'DELETE':\n          cls = 'label-danger'\n          break\n        default:\n          cls = 'label-success'\n          break\n\n      }\n      return cls\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/overview.controller.js","var app = angular.module('DataDashboard')\n\napp.factory('BillingPlans', function () {\n  var BILLING_PLANS = {\n    'free': {\n      name: 'free',\n      id: 'free',\n      price_monthly: 0,\n      price_yearly: 0,\n      api_calls_quota_max: '5000',\n      storage: 0.5\n    },\n    'month-19': {\n      name: 'cumulus',\n      id: 'month-19',\n      price_monthly: 19,\n      price_yearly: 190,\n      api_calls_quota_max: '100000',\n      storage: 1\n    },\n    'month-49': {\n      name: 'stratus',\n      id: 'month-49',\n      price_monthly: 49,\n      price_yearly: 490,\n      api_calls_quota_max: '450000',\n      storage: 2\n    },\n    'month-99': {\n      name: 'nimbo stratus',\n      id: 'month-99',\n      price_monthly: 99,\n      price_yearly: 990,\n      api_calls_quota_max: '1500000',\n      storage: 5\n    }\n  }\n  return BILLING_PLANS\n})\n\napp.controller('ApplicationSettingsController', ['$scope', '$application', '$http', '$location', '$rootScope', 'BillingPlans',\n  function (scope, $application, $http, $location, rootScope, BillingPlans) {\n    var application = $application.get()\n    scope.application = application\n\n    rootScope.currentSection = 'application.settings'\n\n    scope.plans = BillingPlans\n\n    scope.currentPlan = null\n\n    for (var k in BillingPlans) {\n      if (scope.application.plan_name === BillingPlans[k].name) {\n        scope.currentPlan = BillingPlans[k]\n      }\n    }\n\n    scope.updateApplication = function () {\n      var update = {\n        url: scope.application.url,\n        name: scope.application.name\n      }\n\n      $http\n                .put('/applications/' + scope.application.id, update)\n                .then(function (response) {\n                  notie.alert(1, 'The application has been updated.', 1.5)\n                })\n                .catch(function (error) {\n                  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n                })\n    }\n\n    scope.deleteApplication = function () {\n      notie.confirm('Do you really want to delete the application? It is not reversible!', 'Confirm', 'Cancel', function () {\n        $http\n                    .delete('/applications/' + scope.application.id)\n                    .then(function (response) {\n                      notie.alert(1, 'The application has been deleted.', 1.5)\n                      $location.path('/')\n                    })\n                    .catch(function (response) {\n                      notie.alert(3, 'An error has occurred, please try again.', 1.5)\n                    })\n      })\n    }\n\n    scope.regenerateKeys = function () {\n      notie.confirm('Do you really want to update the application\\'s keys?', 'Confirm', 'Cancel', function () {\n        $http\n                    .put('/applications/' + scope.application.id + '/regenerateKeys')\n                    .then(function (response) {\n                      scope.application.public_key = response.data.data.public_key\n                      scope.application.secret_key = response.data.data.secret_key\n                      notie.alert(1, 'Keys regenerated correctly.', 1.5)\n                    })\n                    .catch(function (response) {\n                      notie.alert(3, 'An error has occurred. Please retry', 1.5)\n                    })\n      })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/settings.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('WebhooksController', [\n  '$scope',\n  '$http',\n  'webhooks',\n  '$application',\n  '$rootScope',\n  function(scope, http, webhooks, $application, rootScope) {\n    rootScope.currentSection = 'application.webhooks'\n\n    var application = $application.get()\n    scope.application = application\n\n    scope.mode = null\n    scope.error = null\n    scope.invalidPropertyName = null\n\n    scope.application = application\n    scope.webhooks = webhooks.data.data\n\n    scope.newWebhook = {}\n\n    var webhookMethods = ['create', 'update', 'delete']\n\n    var webhookResources = [\n      'addresses',\n      'brands',\n      'carts',\n      'categories',\n      'collections',\n      'contents',\n      'coupons',\n      'invoices',\n      'files',\n      'orders',\n      'paymentMethods',\n      'products',\n      'promotions',\n      'stores',\n      'taxes',\n      'users',\n      'variables'\n    ]\n\n    /* scope.events = [\n      'products.create',\n      'products.delete',\n      'products.update',\n      'brands.create',\n      'brands.delete',\n      'brands.update',\n      'categories.create',\n      'categories.delete',\n      'categories.update',\n      'orders.create',\n      'orders.delete',\n      'orders.update',\n      'carts.create',\n      'carts.delete',\n      'carts.update',\n      'payments.create',\n      'payments.delete',\n      'payments.update',\n      'shippings.create',\n      'shippings.delete',\n      'shippings.update',\n      'users.create',\n      'users.update',\n      'users.delete'\n    ]; */\n\n    scope.events = []\n\n    webhookResources.forEach(function(resource) {\n      webhookMethods.forEach(function(method) {\n        scope.events.push(resource + '.' + method)\n      })\n    })\n\n    scope.events.splice(scope.events.indexOf(\"orders.delete\"), 0, \"payments.create\");\n\n    scope.load = function() {\n      http({\n          method: 'GET',\n          url: '/applications/' + scope.application.id + '/webhooks'\n        })\n        .then(function(response) {\n          console.log('LOAD', response)\n          scope.webhooks = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(2, 'An error has occurred while reloading webhooks.', 1)\n        })\n    }\n\n    scope.edit = function(hook) {\n      scope.newWebhook = hook\n      scope.showUpdateModal()\n    }\n\n    scope.showUpdateModal = function() {\n      scope.mode = 'update'\n      $('#newWebhookModal').modal('show')\n    }\n\n    scope.showCreateModal = function() {\n      scope.mode = 'create'\n      scope.newWebhook = {}\n      $('#newWebhookModal').modal('show')\n    }\n\n    scope.validateWebhook = function() {\n      scope.error = null\n      scope.invalidPropertyName = null\n      if (scope.validateUrl() === false) {\n        scope.error = 'The URL is not valid. Remember to specify the protocol http:// or https:// at the beginning.'\n        scope.invalidPropertyName = 'url'\n        return false\n      }\n\n      if (!scope.newWebhook.event) {\n        scope.error = 'Please select a valid event from the menu'\n        scope.invalidPropertyName = 'event'\n        return false\n      }\n\n      return true\n    }\n\n    scope.saveWebhook = function() {\n      if (!scope.validateWebhook()) {\n        return\n      }\n\n      http({\n          method: 'POST',\n          url: '/applications/' + scope.application.id + '/webhooks',\n          data: scope.newWebhook\n        })\n        .then(function(response) {\n          notie.alert(1, 'Webhook correctly created', 1)\n          scope.newWebhook = {}\n          $('#newWebhookModal').modal('hide')\n          scope.load()\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, webhook not created', 1)\n          scope.newWebhook = {}\n        })\n    }\n\n    scope.validateUrl = function() {\n      var regex = /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i\n      return regex.test(scope.newWebhook.url)\n    }\n\n    scope.updateWebhook = function() {\n      if (!scope.validateWebhook()) {\n        return\n      }\n\n      var update = {\n        event: scope.newWebhook.event,\n        url: scope.newWebhook.url\n      }\n\n      http({\n          method: 'PUT',\n          url: '/applications/' + scope.application.id + '/webhooks/' + scope.newWebhook.id,\n          data: update\n        })\n        .then(function(response) {\n          notie.alert(1, 'Webhook correctly updated', 1)\n          scope.newWebhook = {}\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, webhook not updated', 1)\n        })\n    }\n\n    scope.delete = function(hook) {\n      http({\n          method: 'DELETE',\n          url: '/applications/' + scope.application.id + '/webhooks/' + hook.id\n        })\n        .then(function(response) {\n          notie.alert(1, 'Webhook correctly deleted', 1)\n          scope.load()\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, webhook not deleted', 1)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/application/webhooks.controller.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditBrandTranslationsController', EditBrandTranslationsController)\n\n  EditBrandTranslationsController.$inject = [\n    '$scope',\n    '$marketcloud',\n    'brand',\n    '$http',\n    '$application',\n    '$location',\n    'LocalesFactory'\n  ]\n\n  function EditBrandTranslationsController(scope, $marketcloud, brand, $http, $application, $location, locales) {\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n\n    // Injecting resolve data into the controller\n    scope.brand = brand.data.data\n\n    // This is fetched from the app's config\n    scope.availableLocales = []\n\n    // mocking the retrieval of locales\n    scope.locales = locales\n\n    scope.availableLocales = $application.get().locales.split(',')\n      .map(function(code) {\n        return scope.locales[code]\n      })\n\n\n    // Slugs functions\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n    scope.unsafeSlug = false;\n\n    scope.updateSlug = function() {\n      scope.brand.locales[scope.currentLocale.code].slug = getSlugFromString(scope.brand.locales[scope.currentLocale.code].name)\n    }\n\n    // Which locale we are currently editing\n    scope.currentLocale = scope.availableLocales[0]\n\n    // Init locales object\n    if (!scope.brand.hasOwnProperty('locales')) {\n      scope.brand.locales = {}\n    }\n\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.brand.locales.hasOwnProperty(locale.code)) {\n        scope.brand.locales[locale.code] = {}\n      }\n    })\n\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n    }\n\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.brand.locales)\n      }\n\n      $marketcloud.brands.update(scope.brand.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.typeof = function(y) {\n      return (typeof y)\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brandTranslations.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('EditBrandController', [\n  '$scope',\n  '$http',\n  'brand',\n  '$location',\n  '$marketcloud',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, brandResponse, location, $marketcloud, $utils, $validation,$models) {\n    scope.brand = brandResponse.data.data\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Brand.getPropertyNames()\n\n    coreProperties.push(\n      'id',\n      'locales',\n      'seo',\n      'application_id',\n      'images',\n      'slug',\n      'updated_at',\n      'created_at'\n    )\n\n    scope.customPropertiesData = {};\n\n\n    for (var k in scope.brand){\n      if (coreProperties.indexOf(k) === -1){\n        scope.customPropertiesData[k] = scope.brand[k]\n        delete scope.brand[k];\n      }\n    }\n\n    scope.removeImage = function(i) {\n      scope.brand.images.splice(i, 1)\n    }\n\n    scope.updateBrand = function() {\n      scope.brand.image_url = scope.brand.images[0]\n\n      var toSave = angular.copy(scope.brand);\n\n      for (var k in scope.customPropertiesData)\n        toSave[k] = scope.customPropertiesData[k];\n\n\n      $marketcloud.brands.update(scope.brand.id, toSave)\n        .then(function(response) {\n          notie.alert(1, 'Brand successfully update.', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            $validation.showErrorMessage(validation,$models.Brand.schema , '[ng-model=\"brand.'+validation.invalidPropertyName+'\"]')\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n\n\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.brand.slug = $utils.getSlugFromString(scope.brand.name)\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.edit.js","var app = angular.module('DataDashboard')\n\napp.controller('BrandsController', ['$scope', '$marketcloud', 'brands',\n  function (scope, $marketcloud, resources) {\n    scope.brands = resources.data.data\n\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    scope.query = {\n      per_page: 20\n    }\n\n    scope.loadPage = function (page_number) {\n      return scope.loadData({page: page_number})\n    }\n    scope.loadData = function (query) {\n      if (!query) {\n        query = scope.query\n      }\n\n      $marketcloud.brands.list(query)\n\t\t\t\t.then(function (response) {\n  scope.brands = response.data.data\n\n  scope.pagination = {\n    currentPage: response.data.page,\n    numberOfPages: response.data.pages,\n    nextPage: response.data._links.next || null,\n    previousPage: response.data._links.prev || null,\n    count: response.data.count\n  }\n})\n\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n})\n    }\n\n    scope.deleteBrand = function (brand_id, index) {\n      $marketcloud.brands.delete(brand_id)\n\t\t\t\t.then(function (response) {\n  scope.loadData({\n    page: scope.currentPage\n  })\n  notie.alert(1, 'Brand deleted', 1.5)\n})\n\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.list.js","var app = angular.module('DataDashboard')\napp.controller('BrandController', [\n  '$scope', \n  '$http', \n  '$marketcloud', \n  '$location',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\n\n\n    scope.newBrand = {};\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Brand.getPropertyNames()\n\n    coreProperties.push(\n       'id',\n      'locales',\n      'seo',\n      'application_id',\n      'images',\n      'slug',\n      'updated_at',\n      'created_at'\n    )\n\n    scope.customPropertiesData = {}\n\n    // For imageThumbnail\n    scope.removeImage = function(i) {\n      scope.newBrand.images.splice(i, 1)\n    }\n\n\n    scope.unsafeSlug = false;\n\n    scope.updateSlug = function() {\n      scope.newBrand.slug = $utils.getSlugFromString(scope.newBrand.name)\n    }\n\n    scope.saveBrand = function() {\n      scope.newBrand.image_url = scope.newBrand.images[0];\n\n      var toSave = angular.copy(scope.newBrand);\n\n      for (var k in scope.customPropertiesData)\n        toSave[k] = scope.customPropertiesData[k];\n\n      $marketcloud.brands.save(toSave)\n        .then(function(response) {\n          notie.alert(1, 'Brand saved', 1.5)\n          location.path('/brands')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            $validation.showErrorMessage(validation,$models.Brand.schema , '[ng-model=\"newBrand.'+validation.invalidPropertyName+'\"]')\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/brands/brands.new.js","var app = angular.module('DataDashboard')\n\napp.controller('EditCategoryController', \n  [\n    '$scope', \n    '$http', \n    'category', \n    '$location', \n    '$marketcloud',\n    '$utils',\n    '$validation',\n    '$models',\n  function(scope, http, category, location, $marketcloud, $utils, $validation, $models) {\n    scope.loadingData = true\n\n    scope.category = category.data.data\n\n    scope.categories = [];\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Brand.getPropertyNames()\n\n    coreProperties.push(\n      'id',\n      'locales',\n      'seo',\n      'application_id',\n      'images',\n      'slug',\n      'parent_id',\n      'path',\n      'updated_at',\n      'created_at'\n    )\n\n    scope.customPropertiesData = {};\n\n\n    for (var k in scope.category){\n      if (coreProperties.indexOf(k) === -1){\n        scope.customPropertiesData[k] = scope.category[k]\n        delete scope.category[k];\n      }\n    }\n\n    // For image thumbnail\n    scope.removeImage = function(i) {\n      scope.category.images.splice(i, 1)\n    }\n\n    // Loading categories\n    $marketcloud.categories.list()\n      .then(function(response) {\n        scope.categories = response.data.data\n      })\n      .catch(function() {\n        notie.alert(2, 'An error has occurred while loading categories', 1.5)\n      })\n\n    scope.updateCategory = function() {\n      scope.category.image_url = scope.category.images[0]\n\n      var toSave = angular.copy(scope.category);\n\n      for (var k in scope.customPropertiesData) {\n        toSave[k] = scope.customPropertiesData[k];\n      }\n\n      $marketcloud.categories.update(category.data.data.id, toSave)\n        .then(function(response) {\n          notie.alert(1, 'Category updated with success ', 2)\n          location.path('/categories')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            $validation.showErrorMessage(validation,$models.Category.schema , '[ng-model=\"category.'+validation.invalidPropertyName+'\"]')\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n\n    \n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.category.slug = $utils.getSlugFromString(scope.category.name)\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.edit.js","var app = angular.module('DataDashboard')\n\napp.controller('CategoriesController', ['$scope', 'categories', '$q', '$marketcloud',\n  function (scope, resources, $q, $marketcloud) {\n    scope.categories = resources.data.data\n\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    scope.query = {\n      per_page: 20\n    }\n\n    scope.toggleAll = function () {\n      scope.categories.forEach(function (p) {\n        p.selected = scope.selectAll\n      })\n    }\n\n    scope.getSelectedItems = function () {\n      return scope.categories.filter(function (p) {\n        return p.selected === true\n      })\n    }\n\n    scope.bulkDelete = function () {\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function () {\n        var defer = $q.defer()\n\n        var promises = []\n\n        scope.getSelectedItems().forEach(function (category) {\n          promises.push($marketcloud.categories.delete(category.id))\n        })\n\n        $q.all(promises)\n\t\t\t\t\t\t.then(function () {\n  notie.alert(1, 'All items have been deleted', 1.5)\n  scope.loadPage(scope.currentPage)\n})\n\n        return defer.promise\n      })\n    }\n\n    scope.loadPage = function (page_number) {\n      scope.query.page = page_number\n      return scope.loadData()\n    }\n    scope.loadData = function (query) {\n      if (!query) {\n        query = scope.query\n      }\n\n      $marketcloud.categories.list(query)\n\t\t\t\t\t.then(function (response) {\n  scope.categories = response.data.data\n\n  scope.pagination = {\n    currentPage: response.data.page,\n    numberOfPages: response.data.pages,\n    nextPage: response.data._links.next || null,\n    previousPage: response.data._links.prev || null,\n    count: response.data.count\n  }\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n})\n    }\n\n    scope.deleteCategory = function (category_id, index) {\n      $marketcloud.categories.delete(category_id)\n\t\t\t\t\t.then(function (response) {\n  scope.loadData({\n    page: 1\n  })\n  notie.alert(1, 'Category deleted', 1.5)\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.list.js","var app = angular.module('DataDashboard')\n\napp.controller('CategoryController', \n  [\n  '$scope', \n  '$http', \n  '$marketcloud', \n  '$location',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\n\n    scope.customPropertiesData = {};\n    scope.newCategory = {};\n\n\n    scope.categories = []\n      // Loading categories\n    $marketcloud.categories.list()\n      .then(function(response) {\n        scope.categories = response.data.data\n      })\n      .catch(function() {\n        notie.alert(3, 'An error has occurred. Please retry', 1.5)\n      })\n\n\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = $models.Category.getPropertyNames()\n\n    coreProperties.push(\n      'id',\n      'locales',\n      'seo',\n      'application_id',\n      'images',\n      'slug',\n      'parent_id',\n      'path',\n      'updated_at',\n      'created_at'\n    )\n\n    \n\n    // For image thumbnails\n    scope.removeImage = function(i) {\n      scope.newCategory.images.splice(i, 1)\n    }\n\n    scope.saveCategory = function() {\n      scope.newCategory.image_url = scope.newCategory.images[0]\n      \n      var toSave = angular.copy(scope.newCategory);\n\n      for (var k in scope.customPropertiesData)\n        toSave[k] = scope.customPropertiesData[k];\n\n      $marketcloud.categories.save(toSave)\n        .then(function(response) {\n          notie.alert(1, 'Category saved', 1.5)\n          location.path('/categories')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validationObject = response.data.errors[0];\n            var invalidPropertyName = validationObject.invalidPropertyName;\n\n            $validation.showErrorMessage(validationObject,$models.Category.schema , '[ng-model=\"newCategory.'+invalidPropertyName+'\"]')\n\n\n          } else {\n            notie.alert(3, 'An error has occurred. Please try again', 1.5)\n          }\n\n        })\n    }\n\n    \n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.newCategory.slug = $utils.getSlugFromString(scope.newCategory.name)\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categories/categories.new.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditCategoryTranslationsController', EditCategoryTranslationsController)\n\n  EditCategoryTranslationsController.$inject = [\n    '$scope',\n    '$marketcloud',\n    'category',\n    '$http',\n    '$location',\n    '$application',\n    'LocalesFactory'\n  ]\n\n  function EditCategoryTranslationsController(scope, $marketcloud, category, $http, $location, $application, locales) {\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n\n    // Injecting resolve data into the controller\n    scope.category = category.data.data\n\n    // This is fetched from the app's config\n    scope.availableLocales = []\n\n    // mocking the retrieval of locales\n    scope.locales = locales\n\n    scope.availableLocales = $application.get().locales.split(',')\n      .filter(function(localeCode) {\n        // When splitting an empty string, we get [\"\"]\n        return localeCode !== ''\n      })\n      .map(function(code) {\n        return scope.locales[code]\n      })\n\n    // Which locale we are currently editing\n    scope.currentLocale = scope.availableLocales[0]\n\n    // Init locales object\n    if (!scope.category.hasOwnProperty('locales')) {\n      scope.category.locales = {}\n    }\n\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.category.locales.hasOwnProperty(locale.code)) {\n        scope.category.locales[locale.code] = {}\n      }\n    })\n\n\n    // Slugs functions\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n    scope.unsafeSlug = false;\n\n    scope.updateSlug = function() {\n      scope.category.locales[scope.currentLocale.code].slug = getSlugFromString(scope.category.locales[scope.currentLocale.code].name)\n    }\n\n    scope.getFlagClassName = function() {\n      if (scope.currentLocale) {\n        return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n      }\n    }\n\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.category.locales)\n      }\n\n      $marketcloud.categories.update(scope.category.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.typeof = function(y) {\n      return (typeof y)\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/categoryTranslations.controller.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditCollectionTranslationsController', EditCollectionTranslationsController)\n\n  EditCollectionTranslationsController.$inject = [\n    '$scope',\n    '$marketcloud',\n    'collection',\n    '$http',\n    '$application',\n    '$location',\n    'LocalesFactory'\n  ]\n\n  function EditCollectionTranslationsController(scope, $marketcloud, collection, $http, $application, $location, locales) {\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n\n    // Injecting resolve data into the controller\n    scope.collection = collection.data.data\n\n    // This is fetched from the app's config\n    scope.availableLocales = []\n\n    // mocking the retrieval of locales\n    scope.locales = locales\n\n    scope.availableLocales = $application.get().locales.split(',')\n      .map(function(code) {\n        return scope.locales[code]\n      })\n\n    // Which locale we are currently editing\n    scope.currentLocale = scope.availableLocales[0]\n\n    // Init locales object\n    if (!scope.collection.hasOwnProperty('locales')) {\n      scope.collection.locales = {}\n    }\n\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.collection.locales.hasOwnProperty(locale.code)) {\n        scope.collection.locales[locale.code] = {}\n      }\n    })\n\n\n\n    // Slugs functions\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n    scope.unsafeSlug = false;\n\n    scope.updateSlug = function() {\n      scope.collection.locales[scope.currentLocale.code].slug = getSlugFromString(scope.collection.locales[scope.currentLocale.code].name)\n    }\n\n\n\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n    }\n\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.collection.locales)\n      }\n\n      $marketcloud.collections.update(scope.collection.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.typeof = function(y) {\n      return (typeof y)\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collectionTranslations.controller.js","var app = angular.module('DataDashboard');\n\napp.controller('CollectionController', [\n\t'$scope',\n\t'$http',\n\t'$marketcloud',\n\t'$location',\n\t'$utils',\n\tfunction(scope, http, $marketcloud, location, $utils) {\n\n\n\t\tscope.collection ={\n\t\t\titems : []\n\t\t};\n\n\t\tscope.products =  [];\n\t\tscope.itemsToAdd = [];\n\n\n\t\tscope.query = {};\n\n\n\n\t\tscope.prepareRegex = function() {\n\t\t\tscope.query.name.$options = 'i';\n\t\t};\n\t\t\n\t\tscope.addProductToCollection = function(product) {\n\t\t\tscope.itemsToAdd.push(product);\n\t\t\tscope.query.name.$regex = '';\n\t\t\tscope.products = [];\n\t\t};\n\n\t\tscope.removeProductFromCollection = function(i) {\n\t\t\tscope.itemsToAdd.splice(i, 1);\n\t\t};\n\n\n\n\t\tscope.showTheList = false;\n\t\tscope.showList = function(){\n\t\t\tscope.showTheList = true;\n\t\t};\n\t\tscope.hideList = function(){\n\t\t\twindow.setTimeout(function(){\n\t\t\t\tscope.showTheList = false;\n\t\t\t\tscope.$apply();\n\t\t\t},200);\n\t\t\t\t\n\t\t};\n\t\tscope.loadProducts = function(query) {\n\t\t\tquery = query || scope.query;\n\t\t\t\n\t\t\t$marketcloud.products.list(query)\n\t\t\t\t.then(function(response){\n\t\t\t\t\t\n\t\t\t\t\tscope.products = response.data.data\n\t\t\t\t\t.filter(function(item){\n\t\t\t\t\t\treturn scope.itemsToAdd\n\t\t\t\t\t\t\t\t.map(function(i){\n\t\t\t\t\t\t\t\t\treturn i.id;\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.indexOf(item.id) < 0;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(3,'An error has occurred. Please try again');\n\t\t\t\t});\n\n\n\t\t};\n\n\t\tscope.loadProducts();\n\n\n\t\tscope.saveCollection = function() {\n\t\t\tscope.collection.items = scope.itemsToAdd.map(function(item){\n\t\t\t\treturn {product_id : item.id};\n\t\t\t});\n\t\t\t$marketcloud.collections.save(scope.collection)\n\t\t\t\t.then(function(response){\n\t\t\t\t\tnotie.alert(1,'Collection saved',1.5);\n\t\t\t\t\tlocation.path('/collections');\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(2,'An error has occurred, please try again',1.5);\n\t\t\t\t});\n\n\t\t};\n\t}\n]);\n\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('CreateCollectionController', ['$scope', '$http', '$marketcloud', '$location',\n  function(scope, http, $marketcloud, location) {\n    scope.collection = {\n      items: []\n    }\n\n    scope.products = []\n    scope.itemsToAdd = []\n\n    scope.customPropertiesData = {};\n\n    scope.query = {}\n\n    // Slug related functions\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.collection.slug = getSlugFromString(scope.collection.name)\n    }\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.addProductToCollection = function(product) {\n      scope.itemsToAdd.push(product)\n      scope.query.name.$regex = ''\n      scope.products = []\n    }\n\n    scope.removeProductFromCollection = function(i) {\n      scope.itemsToAdd.splice(i, 1)\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n            .filter(function(item) {\n              return scope.itemsToAdd\n                .map(function(i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again')\n        })\n    }\n\n    scope.loadProducts()\n\n    scope.saveCollection = function() {\n      for (var k in scope.customPropertiesData) {\n        scope.collection[k] = scope.customPropertiesData[k]\n      }\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\n        return {\n          product_id: item.id\n        }\n      })\n      $marketcloud.collections.save(scope.collection)\n        .then(function(response) {\n          notie.alert(1, 'Collection saved', 1.5)\n          location.path('/collections')\n        })\n        .catch(function(response) {\n          notie.alert(2, 'An error has occurred, please try again', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.create.js","angular.module('DataDashboard')\n.controller('EditCollectionController', [\n  '$scope', \n  '$http', \n  '$marketcloud', \n  '$location', \n  'collection',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, collection,$utils,$validation, $models) {\n    scope.collection = collection.data.data\n\n    scope.products = []\n    scope.itemsToAdd = angular.copy(scope.collection.items)\n\n    scope.query = {}\n\n    // This will hold custom properties for further processing\n    scope.customPropertiesData = {}\n\n      // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Collection.getPropertyNames();\n\n    coreProperties.push(\n        'id',\n        'application_id',\n        'seo'\n        )\n\n    for (var k in scope.collection) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.collection[k]\n        delete scope.collection[k]\n      }\n    }\n\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.collection.slug = $utils.getSlugFromString(scope.collection.name)\n    }\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.addProductToCollection = function(product) {\n      scope.itemsToAdd.push(product)\n      scope.query.name.$regex = ''\n      scope.products = []\n    }\n\n    scope.removeProductFromCollection = function(i) {\n      scope.itemsToAdd.splice(i, 1)\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n            .filter(function(item) {\n              return scope.itemsToAdd\n                .map(function(i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again')\n        })\n    }\n\n    scope.loadProducts()\n\n    scope.saveCollection = function() {\n\n        // let's re-assemble the custom properties first.\n      for (var k in scope.customPropertiesData) {\n        scope.collection[k] = scope.customPropertiesData[k]\n      }\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\n        return {\n          product_id: item.id\n        }\n      })\n      $marketcloud.collections.update(scope.collection.id, scope.collection)\n        .then(function(response) {\n          notie.alert(1, 'Collection saved', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            $validation.showErrorMessage(validation,$models.Collection.schema , '[ng-model=\"collection.'+validation.invalidPropertyName+'\"]')\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.edit.js","var app = angular.module('DataDashboard')\n\napp.controller('CreateCollectionController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$location',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, $utils, $validation, $models) {\n    scope.collection = {\n      items: []\n    }\n\n    scope.products = []\n    scope.itemsToAdd = []\n\n    scope.customPropertiesData = {};\n\n    scope.query = {}\n\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.collection.slug = $utils.getSlugFromString(scope.collection.name)\n    }\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.addProductToCollection = function(product) {\n      scope.itemsToAdd.push(product)\n      scope.query.name.$regex = ''\n      scope.products = []\n    }\n\n    scope.removeProductFromCollection = function(i) {\n      scope.itemsToAdd.splice(i, 1)\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n            .filter(function(item) {\n              return scope.itemsToAdd\n                .map(function(i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again')\n        })\n    }\n\n    scope.loadProducts()\n\n    scope.saveCollection = function() {\n      for (var k in scope.customPropertiesData) {\n        scope.collection[k] = scope.customPropertiesData[k]\n      }\n      scope.collection.items = scope.itemsToAdd.map(function(item) {\n        return {\n          product_id: item.id\n        }\n      })\n      $marketcloud.collections.save(scope.collection)\n        .then(function(response) {\n          notie.alert(1, 'Collection saved', 1.5)\n          location.path('/collections')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            $validation.showErrorMessage(validation,$models.Collection.schema , '[ng-model=\"collection.'+validation.invalidPropertyName+'\"]')\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/collections/collections.new.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditContentTranslationsController', EditContentTranslationsController)\n\n  EditContentTranslationsController.$inject = [\n    '$scope',\n    '$marketcloud',\n    'content',\n    '$http',\n    '$application',\n    '$location',\n    'LocalesFactory'\n  ]\n\n  function EditContentTranslationsController(scope, $marketcloud, content, $http, $application, $location, locales) {\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n\n    // Injecting resolve data into the controller\n    scope.content = content.data.data\n\n    // This is fetched from the app's config\n    scope.availableLocales = []\n\n    // mocking the retrieval of locales\n    scope.locales = locales\n\n    scope.availableLocales = $application.get().locales.split(',')\n      .map(function(code) {\n        return scope.locales[code]\n      })\n\n    // Which locale we are currently editing\n    scope.currentLocale = scope.availableLocales[0]\n\n    // Init locales object\n    if (!scope.content.hasOwnProperty('locales')) {\n      scope.content.locales = {}\n    }\n\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.content.locales.hasOwnProperty(locale.code)) {\n        scope.content.locales[locale.code] = {}\n      }\n    })\n\n\n\n    // Slugs functions\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n    scope.unsafeSlug = false;\n\n    scope.updateSlug = function() {\n      scope.content.locales[scope.currentLocale.code].slug = getSlugFromString(scope.content.locales[scope.currentLocale.code].name)\n    }\n\n\n\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n    }\n\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.content.locales)\n      }\n\n      $marketcloud.contents.update(scope.content.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.typeof = function(y) {\n      return (typeof y)\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contentTranslations.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('EditContentController', [\n  '$scope',\n  '$http',\n  'content',\n  '$location',\n  '$marketcloud',\n  'moment',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n    scope.content = content.data.data\n\n    scope.content.date = $moment(scope.content.date);\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Content.getPropertyNames()\n\n    coreProperties.push(\n      'id',\n      'locales',\n      'seo',\n      'application_id',\n      'images',\n      'slug',\n      'published',\n      'category',\n      'date',\n      'updated_at',\n      'created_at',\n      'type'\n    )\n\n    scope.customPropertiesData = {};\n\n\n    for (var k in scope.content){\n      if (coreProperties.indexOf(k) === -1){\n        scope.customPropertiesData[k] = scope.content[k]\n        delete scope.content[k];\n      }\n    }\n\n\n\n    scope.unsafeSlug = false\n    scope.updateSlug = function() {\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\n    }\n\n    scope.getImagesContainer = function() {\n      return scope.content.author.images\n    }\n\n    scope.removeImage = function(i) {\n      scope.content.author.images.splice(i, 1)\n    }\n\n    scope.updateContent = function() {\n      var toSave = angular.copy(scope.content);\n\n      for (var k in scope.customPropertiesData) {\n        toSave[k] = scope.customPropertiesData[k];\n      }\n      $marketcloud.contents.update(scope.content.id, toSave)\n        .then(function(response) {\n          notie.alert(1, 'Content updated with success', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.Content.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/content.edit.js","var app = angular.module('DataDashboard')\napp.controller('ContentController', [\n  '$scope',\n  '$http',\n  '$location',\n  '$marketcloud',\n  '$utils',\n  '$validation',\n  '$models',\n  '$account',\n  function(scope, http, location, $marketcloud, $utils, $validation, $models, $account) {\n\n\n    scope.content = {\n      title: '',\n      slug: '',\n      text: '',\n      published: false,\n      author: {\n        name: $account.get('full_name'),\n        description: '',\n        images: [$account.get('image_url')]\n\n      },\n      seo: {\n        meta: {},\n        twitter: {},\n        facebook: {}\n      }\n    }\n\n    scope.customPropertiesData = {}\n\n    // This method must be implemented in order to\n    // make the media manager work\n    scope.getImagesContainer = function() {\n      return scope.content.author.images\n    }\n\n    scope.removeImage = function(i) {\n      scope.content.author.images.splice(i, 1)\n    }\n\n    // This function is invoked when a seo property\n    // changes.\n    scope.computeSeoTags = function() {\n\n    }\n\n    scope.unsafeSlug = false\n    scope.updateSlug = function() {\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\n    }\n    scope.saveContent = function() {\n      for (var k in scope.customPropertiesData) {\n        scope.content[k] = scope.customPropertiesData[k]\n      }\n      console.log(\"Salvo questo\",scope.content)\n      $validation.hideErrors()\n      $marketcloud.contents.save(scope.content)\n        .then(function(response) {\n          // title text author\n          notie.alert(1, 'Content saved', 2)\n          location.path('/contents')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.Content.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/content.new.js","var app = angular.module('DataDashboard')\napp.controller('ContentsController',\n  [\n    '$scope',\n    '$http',\n    'contents',\n    '$marketcloud',\n    function (scope, http, resources, $marketcloud) {\n\t\t\t// Pagination\n      scope.pagination = {\n        currentPage: resources.data.page,\n        numberOfPages: resources.data.pages,\n        nextPage: resources.data._links.next || null,\n        previousPage: resources.data._links.prev || null,\n        count: resources.data.count\n      }\n\n\t\t\t// Query\n      scope.query = {\n        per_page: 20\n      }\n\n\t\t\t// Initial data resolved from the router\n      scope.contents = resources.data.data\n\n      scope.loadPage = function (p) {\n        return scope.loadData({page: p})\n      }\n      scope.loadData = function (query) {\n        if (!query) {\n          query = scope.query\n        }\n\n        $marketcloud.contents.list(query)\n\t\t\t\t\t.then(function (response) {\n  scope.contents = response.data.data\n\n  scope.pagination = {\n    currentPage: response.data.page,\n    numberOfPages: response.data.pages,\n    nextPage: response.data._links.next || null,\n    previousPage: response.data._links.prev || null,\n    count: response.data.count\n  }\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n})\n      }\n      scope.setPublishing = function (content) {\n        return http({\n          method: 'PUT',\n          url: API_BASE_URL + '/contents/' + content.id,\n          data: {\n            published: content.published\n          },\n          headers: {\n            Authorization: window.public_key + ':' + window.token\n          }\n\n        })\n\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Updated!', 1.5)\n})\n\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\n})\n      }\n\n      scope.deleteContent = function (content_id, index) {\n        $marketcloud.contents.delete(content_id)\n\t\t\t\t\t.then(function (response) {\n  scope.loadData({\n    page: 1\n  })\n  notie.alert(1, 'Content deleted', 1.5)\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n})\n      }\n    }\n  ])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/contents.list.js","angular.module('DataDashboard').controller('EditGroupedProductController', ['$scope', '$marketcloud', 'product', '$http',\n  function (scope, $marketcloud, product, $http) {\n    scope.customPropertiesData = {}\n\n    scope.itemsToAdd = []\n\n\t\t\t// Injecting resolve data into the controller\n    scope.product = product.data.data\n\n    var product_ids = scope.product.items.map(function (product) {\n      return product.product_id\n    })\n\n    $marketcloud.products.list({\n      id: product_ids.join(',')\n    })\n\t\t\t.then(function (response) {\n  var p_map = {}\n\n  scope.product.items.forEach(function (i) {\n    p_map[i.product_id] = i\n  })\n\n\t\t\t\t// We fetch the products data, then we must add the properties\n\t\t\t\t// related to them being in the grouped product, such as the quantity\n  scope.itemsToAdd = response.data.data.map(function (prod) {\n    var p = angular.copy(prod)\n    p.quantity = p_map[p.id]['quantity']\n    return p\n  })\n\t\t\t\t// scope.product.items = response.data.data;\n})\n\t\t\t.catch(function (error) {\n  notie.alert(3, 'An error has occurred', 1.5)\n})\n\n\t\t\t// mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Product.getPropertyNames()\n    coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'items')\n    for (var k in scope.product) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.product[k]\n        delete scope.product[k]\n      }\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    scope.categories = []\n\t\t\t// Loading categories\n\t\t\t/* $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: API_BASE_URL+'/categories',\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: window.public_key + ':' + window.token\n\t\t\t\t}\n\t\t\t}) */\n    $marketcloud.categories.list()\n\t\t\t\t.success(function (response) {\n  scope.categories = response.data\n})\n\t\t\t\t.error(function () {\n  notie.alert(2, 'An error has occurred while loading categories', 2)\n})\n\n    scope.brands = []\n\t\t\t// Loading brands\n\n    $marketcloud.brands.list()\n\t\t\t\t.success(function (response) {\n  scope.brands = response.data\n})\n\t\t\t\t.error(function () {\n  notie.alert(2, 'An error has occurred while loading brands', 2)\n})\n\n    scope.filterVariantProps = function (o) {\n      var p = {}\n      for (var k in o) {\n\t\t\t\t\t// if its not an inherited property, then it's a variant property name\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n          p[k] = o[k]\n        }\n      }\n      return p\n\n\t\t\t\t// return o\n    }\n\n    scope.getVariantStyle = function (i) {\n\t\t\t\t// var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n\t\t\t\t// ]\n      var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\n      return r[i % r.length]\n    }\n    scope.getVariantStyle = function (i) {\n      var r = [{\n        'color': 'red'\n      }, {\n        'color': 'green'\n      }, {\n        'color': 'blue'\n      }, {\n        'color': 'pink'\n      }]\n      return r[i % r.length]\n    }\n\n    scope.newAttribute = {\n      name: null,\n      value: null,\n      type: null\n    }\n    scope.newAttribute.type = 'string'\n    scope.availableTypes = [\n\t\t\t\t{name: 'String', value: 'string'},\n\t\t\t\t{name: 'Number', value: 'number'},\n\t\t\t\t{name: 'Boolean', value: 'boolean'}\n    ]\n\n    scope.filterNotNullProperties = function (item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) { result[k] = item[k] }\n      }\n      return result\n    }\n\n    scope.updateProduct = function () {\n\t\t\t\t// let's re-assemble the product first.\n      for (var k in scope.customPropertiesData) {\n        scope.product[k] = scope.customPropertiesData[k]\n      }\n\n      scope.product.items = scope.itemsToAdd.map(function (item) {\n        return {product_id: item.id, quantity: item.quantity}\n      })\n\n      $marketcloud.products.update(scope.product.id, scope.product)\n\t\t\t\t\t.success(function (response) {\n  notie.alert(1, 'Update Succeded', 1.5)\n})\n\t\t\t\t\t.error(function (response) {\n  notie.alert(3, 'Update failed', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/groupedProducts.edit.js","\nangular.module('DataDashboard').controller('NewGroupedProductController', [\n  '$scope', '$http', '$location', '$marketcloud',\n  function (scope, $http, location, $marketcloud) {\n    scope.categories = []\n    scope.error = null\n    scope.newCategory = {}\n    scope.brands = []\n    scope.newBrand = {}\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n    scope.loadCategories = function () {\n      $marketcloud.categories.list({})\n\t\t\t\t\t.success(function (response) {\n  scope.categories = response.data\n})\n\t\t\t\t\t.error(function () {\n  console.log('An error has occurred while loading categories')\n})\n    }\n\n\t\t\t// Initializing the categories array\n    scope.loadCategories()\n\n    scope.saveCategory = function () {\n      $marketcloud.categories.save(scope.newCategory)\n\t\t\t\t\t.success(function (response) {\n  $('#newCategoryModal').modal('hide')\n  scope.categories.push(scope.newCategory)\n  scope.newCategory = {}\n})\n\t\t\t\t\t.error(function (response) {\n  $('#newCategoryModal').hide()\n  notie.alert(3, 'An error has occurred. Category not saved', 1)\n})\n    }\n\n    scope.loadBrands = function () {\n      $marketcloud.brands.list({})\n\t\t\t\t\t.success(function (response) {\n  scope.brands = response.data\n})\n\t\t\t\t\t.error(function () {\n  console.log('An error has occurred while loading brands')\n})\n    }\n\t\t\t// Initializing the brands array\n    scope.loadBrands()\n\n    scope.saveBrand = function () {\n      $marketcloud.brands.save(scope.newBrand)\n\t\t\t\t\t.success(function (response) {\n  $('#newBrandModal').modal('hide')\n  scope.brands.push(scope.newBrand)\n  scope.newBrand = {}\n})\n\t\t\t\t\t.error(function (response) {\n  $('#newBrandModal').hide()\n  notie.alert(3, 'An error has occurred. Brand not saved', 1)\n})\n    }\n\n    scope.product = {\n      type: 'grouped_product',\n      price: 0,\n      name: '',\n      description: '',\n      stock_type: 'status',\n      stock_status: 'in_stock',\n      images: [],\n      has_variants: false,\n      published: true,\n      items: []\n\n    }\n\n    scope.productError = null\n    scope.newCustomProperty = {}\n    scope.customPropertiesData = {}\n\n\t\t\t// This contains validation Errors\n    scope.Forms = {}\n\n    scope.Forms.newCustomProperty = {\n      name: null,\n      value: null\n    }\n\n\t\t\t// Array of new properties's names (strings)\n    scope.customPropertiesNames = []\n\n    scope.hideErrors = function () {\n      scope.error = null\n      scope.errorField = null\n    }\n\n    scope.saveProduct = function () {\n      for (var k in scope.product) {\n        if (scope.product[k] === null) {\n          delete scope.product[k]\n          console.log('Un null')\n        }\n      }\n\n      scope.hideErrors()\n\n\t\t\t\t// Custom properties cannot be validated through Schematic.\n      var props_to_validate = {}\n      var known_props = Models.GroupedProduct.getPropertyNames()\n      for (var k in scope.product) {\n        if (known_props.indexOf(k) > -1) {\n          props_to_validate[k] = scope.product[k]\n        }\n      }\n\t\t\t\t/* var validation = Models.GroupedProduct.validate(scope.product);\n\n\t\t\t\tif (validation.valid === false) {\n\t\t\t\t\tscope.errorField = validation.invalidPropertyName;\n\n\t\t\t\t\tif (validation.failedValidator === 'required')\n\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field is required';\n\t\t\t\t\telse if (validation.failedValidator === 'min') {\n\t\t\t\t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters';\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\n\t\t\t\t\t} else if (validation.failedValidator === 'max') {\n\n\t\t\t\t\t\tif ('string' === typeof scope.product[validation.invalidPropertyName])\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters';\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope.error = 'The ' + scope.errorField + ' field has an invalid value ('+props_to_validate[scope.errorField]+')';\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t} */\n\n      for (var k in scope.customPropertiesData) {\n        scope.product[k] = scope.customPropertiesData[k]\n      }\n\n      for (var key in scope.product) {\n        if (scope.product[key] === null) {\n          delete scope.product[key]\n        }\n      }\n      console.log('Saving this prod', scope.product)\n\n      scope.product.items = scope.product.items.map(function (item) {\n        return {product_id: item.id}\n      })\n\n      $marketcloud.products.save(scope.product)\n\t\t\t\t\t.success(function (response) {\n  notie.alert(1, 'Product saved', 1.5)\n  location.path('/products')\n})\n\t\t\t\t\t.error(function (response) {\n  notie.alert(2, 'An error has occurred. Product not saved', 1)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/contents/groupedProducts.new.js","var app = angular.module('DataDashboard')\napp.controller('EditCouponController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$location', \n  '$validation', \n  '$models', \n  'coupon',\n  function(scope, http, $marketcloud, location,  $validation, $models, coupon) {\n    scope.coupon = coupon.data.data\n\n    scope.save = function() {\n      $validation.hideErrors()\n      $marketcloud.coupons.update(scope.coupon.id, scope.coupon)\n        .then(function(response) {\n          notie.alert(1, 'Coupon updated', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"coupon.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.Coupon.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n\n    if ('expiration_date' in scope.coupon) {\n      scope.hasExpirationDate = true\n    }\n\n    if ('usages_left' in scope.coupon) {\n      scope.limitedUsage = true\n    }\n\n    scope.toggleCouponExpiration = function() {\n      scope.coupon.expiration_date = null\n    }\n\n    scope.toggleCouponUsage = function() {\n      scope.coupon.usages_left = null\n    }\n\n    scope.clearTargetId = function(){\n      scope.coupon.target_id = null;\n    }\n\n    scope.addCondition = function() {\n      scope.coupon.conditions.push(scope.newCondition)\n      scope.newCondition = {}\n    }\n    scope.addEffect = function() {\n      scope.coupon.effects.push(scope.newEffect)\n      scope.newEffect = {}\n    }\n\n    // Target management\n    // Stuff to add a product.\n    // This must be packaged into a component\n    scope.products = []\n    scope.itemsToAdd = []\n      // This is used as a reference after i pick a product\n    scope.targetProduct = null\n      // If the coupon already has a target product\n      // we must load it\n    if (scope.coupon.target_type === 'PRODUCT_COUPON') {\n      $marketcloud.products.getById(scope.coupon.target_id)\n        .then(function(response) {\n          scope.targetProduct = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(2, 'An error has occurred', 2)\n        })\n    }\n\n    scope.query = {}\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n            .filter(function(item) {\n              return scope.itemsToAdd\n                .map(function(i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again')\n        })\n    }\n\n    scope.selectProductAsTarget = function(product) {\n      scope.targetProduct = product\n      scope.coupon.target_id = product.id\n    }\n    scope.resetTargetProduct = function() {\n      scope.targetProduct = null\n    }\n\n    scope.loadProducts()\n\n    scope.handleCategoryChange = function() {}\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/coupons/coupon.edit.js","var app = angular.module('DataDashboard')\napp.controller('NewCouponController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$location',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, $validation, $models) {\n    scope.coupon = {\n      active: true,\n      discount_type: 'NET_REDUCTION'\n    }\n    scope.randomizeCode = function() {\n      scope.coupon.code = Math.random().toString(36).substr(2, 10).toUpperCase()\n    }\n\n    scope.updateCouponExpiration = function() {\n      if (scope.hasExpirationDate !== true) {\n        delete scope.coupon.expiration_date\n      }\n    }\n\n    scope.clearTargetId = function(){\n      scope.coupon.target_id = null;\n    }\n\n    scope.updateCouponUsage = function() {\n      if (scope.limitedUsage !== true) {\n        delete scope.coupon.usages_left\n      }\n    }\n\n    scope.save = function() {\n\n      \n      for (var k in scope.coupon) {\n        if (scope.coupon[k] === null) {\n          delete scope.coupon[k]\n        }\n      }\n\n      $validation.hideErrors()\n\n      $marketcloud.coupons.save(scope.coupon)\n        .then(function(response) {\n          notie.alert(1, 'Coupon saved', 1.5)\n          location.path('/coupons')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"coupon.'+validation.invalidPropertyName+'\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\n\n            $validation.showErrorMessage(validation,$models.Coupon.schema , selector)\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n\n    scope.addCondition = function() {\n      scope.coupon.conditions.push(scope.newCondition)\n      scope.newCondition = {}\n    }\n    scope.addEffect = function() {\n      scope.coupon.effects.push(scope.newEffect)\n      scope.newEffect = {}\n    }\n\n    // Stuff to add a product.\n    // This must be packaged into a component\n    scope.products = []\n    scope.itemsToAdd = []\n      // This is used as a reference after i pick a product\n    scope.targetProduct = null\n\n    scope.query = {}\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n            .filter(function(item) {\n              return scope.itemsToAdd\n                .map(function(i) {\n                  return i.id\n                })\n                .indexOf(item.id) < 0\n            })\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again')\n        })\n    }\n\n    scope.selectProductAsTarget = function(product) {\n      scope.targetProduct = product\n      scope.coupon.target_id = product.id\n    }\n    scope.resetTargetProduct = function() {\n      scope.targetProduct = null\n    }\n\n    scope.loadProducts()\n\n    scope.handleCategoryChange = function() {\n\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/coupons/coupons.new.js","var app = angular.module('DataDashboard');\n\napp.controller('DeployController',['$scope','$application',function(scope, $application){\n\n\tscope.selectedTemplate = null;\n\n\tscope.getHerokuURL = function() {\n\t\tvar str = 'https://heroku.com/deploy';\n\t\tstr += '?template='+scope.selectedTemplate;\n\t\tstr += '&env[MARKETCLOUD_PUBLIC_KEY]='+$application.get().public_key;\n\t\tstr += '&env[MARKETCLOUD_SECRET_KEY]='+$application.get().secret_key;\n\t\treturn str;\n\n\t};\n\n}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/deploy.js","'use strict'\n/* globals angular */\nvar app = angular.module('DataDashboard')\n\napp.controller('HomeController', [\n  '$scope',\n  '$http',\n  '$routeParams',\n  'analytics',\n  'moment',\n  function(scope, http, params,  analytics, moment) {\n    scope.activities = []\n\n    var getResourceNameFromPath = function(p) {\n      var names = {\n        'orders': 'an order',\n        'products': 'a product',\n        'categories': 'a category',\n        'brands': 'a brand',\n        'users' : 'a user',\n        'cart' : 'a cart',\n        'promotions' : 'a promotion',\n        'collection' : 'a collection'\n\n      }\n      var resourcename = p.split('/')[2]\n\n      if (names.hasOwnProperty(resourcename)) {\n        return names[resourcename]\n      } else {\n        return resourcename\n      }\n    }\n\n    // What i want to match\n    // new orders\n    // updates to orders\n    // Updates to inventory\n    scope.alerts = []\n\n\n    // ORders used to display stats\n    scope.analytics = {\n      today: {\n        total: 0,\n        count: 0\n\n      },\n      yesterday: {\n        total: 0,\n        count: 0\n      },\n      this_week: {\n        total: 0,\n        count: 0\n      },\n      this_month: {\n        total: 0,\n        count: 0\n      }\n    }\n\n    var today = new Date()\n    today.setHours(0, 0, 0, 0)\n    today = today.getTime()\n\n    var yesterday = new Date()\n    yesterday.setDate(yesterday.getDate() - 1)\n    yesterday.setHours(0, 0, 0, 0)\n    yesterday = yesterday.getTime()\n\n\n    var oneWeekAgo = new Date();\n    oneWeekAgo.setDate(oneWeekAgo.getDate()  - 7);\n    oneWeekAgo.setHours(0, 0, 0, 0);\n    oneWeekAgo = oneWeekAgo.getTime();\n\n    var orders = analytics.data.data\n\n\n    scope.ordersToManage = orders.filter( function(order){\n      return [\n        'processing',\n        'pending',\n        'on_hold'\n      ].indexOf(order.status) > -1\n    }).slice(0,10)\n\n\n    var salesVolumePerDay = {}\n\n    var numberOfOrdersPerDay = {}\n\n    scope.orders_data = []\n    scope.orders_labels = []\n\n    var last_30_days = []\n    var last_30_days_labels = []\n    for (var i = 1; i < 30; i++) {\n      var d = new Date()\n      d.setDate(d.getDate() - i)\n      var month = String(d.getMonth() + 1)\n      if (month.length < 2) {\n        month = '0' + month\n      }\n      var day = d.getFullYear() + '-' + month + '-' + d.getDate()\n\n      last_30_days_labels.push(day)\n      last_30_days.push({\n        date: day,\n        value: 0\n      })\n      salesVolumePerDay[day] = 0\n    }\n\n    orders\n      .filter(function(x) {\n        // We consider only orders not canceled or refunded or failed for the analytics\n        var invalid_orders = ['failed', 'canceled', 'refunded']\n        return invalid_orders.indexOf(x.status) < 0\n      })\n      .map(function(x) {\n        return {\n          created_at: x.created_at,\n          total: x.total\n        }\n      })\n      .forEach(function(x) {\n        var d = new Date(x.created_at)\n        var month = String(d.getMonth() + 1)\n        if (month.length < 2) {\n          month = '0' + month\n        }\n        var day = d.getFullYear() + '-' + month + '-' + d.getDate()\n\n\n        if (!salesVolumePerDay[day]) {\n          salesVolumePerDay[day] = 0\n        }\n\n        salesVolumePerDay[day] += x.total\n\n\n        if (!numberOfOrdersPerDay[day])\n          numberOfOrdersPerDay[day] = 0;\n\n        numberOfOrdersPerDay[day]++;\n\n      })\n\n    orders\n      .filter(function(x) {\n        // We consider only orders not canceled or refunded or failed for the analytics\n        var invalid_orders = ['failed', 'canceled', 'refunded']\n        return invalid_orders.indexOf(x.status) < 0\n      })\n      .map(function(x) {\n        return {\n          created_at: x.created_at,\n          total: x.total\n        }\n      })\n      .forEach(function(x) {\n        if (x.created_at > today) {\n          scope.analytics.today.total = Math.round((scope.analytics.today.total + x.total) * 1000) / 1000\n          scope.analytics.today.count++\n\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\n          scope.analytics.this_month.count++\n        } else if (x.created_at > yesterday) {\n          scope.analytics.yesterday.total = Math.round((scope.analytics.yesterday.total + x.total) * 1000) / 1000\n          scope.analytics.yesterday.count++\n\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\n          scope.analytics.this_month.count++\n        } else if (x.created_at > oneWeekAgo) {\n          scope.analytics.this_week.total = Math.round((scope.analytics.this_week.total + x.total) * 1000) / 1000\n          scope.analytics.this_week.count++\n\n            scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\n          scope.analytics.this_month.count++\n        } else {\n          scope.analytics.this_month.total = Math.round((scope.analytics.this_month.total + x.total) * 1000) / 1000\n          scope.analytics.this_month.count++\n        }\n      })\n\n    /*\n     *\tHere we feed the Chart.js chart on the dashboard homepage\n     *\n     *\tThis chart shows orders volume for this month (last 30 days)\n     */\n    scope.orders_volume_data = []\n    scope.orders_count_data = []\n    scope.orders_volume_labels = []\n\n    \n\n    for (var k in salesVolumePerDay) {\n      scope.orders_volume_data.unshift(parseFloat(Number(salesVolumePerDay[k]).toFixed(2)))\n      scope.orders_count_data.unshift(numberOfOrdersPerDay[k]);\n      scope.orders_volume_labels.unshift(moment(k, 'YYYY-M-DD').format('MMM Do'))\n    }\n\n    scope.datasets = [\n      scope.orders_volume_data,\n      scope.orders_count_data\n    ]\n\n\n    scope.getMethodCSSClass = function(a) {\n      var cls = null\n      switch (a.method) {\n        case 'GET':\n          cls = 'label-success'\n          break\n        case 'POST':\n          cls = 'label-info'\n          break\n        case 'PUT':\n          cls = 'label-warning'\n          break\n        case 'PATCH':\n          cls = 'label-warning'\n          break\n        case 'DELETE':\n          cls = 'label-danger'\n          break\n        default:\n          cls = 'label-success'\n          break\n\n      }\n      return cls\n    }\n\n    scope.chartOptions = {\n      scaleLabel: \"<%= Number(value).toFixed(2).replace('.',',') %> \" + scope.application.currency_code\n    }\n\n    scope.chartOptions = {\n      scales: {\n         xAxes : [ {\n            gridLines : {\n                display : false\n            }\n        } ],\n        yAxes: [{\n          scaleLabel: {\n            display: true,\n            labelString: scope.application.currency_code\n          }\n        }]\n      }\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/home.js","var app = angular.module('DataDashboard')\napp.controller('IntegrationsController',\n\n  ['$scope', '$http', '$application',function($scope, $http,$application) {\n  $scope.integrations = [{\n    name: 'braintree',\n    tags: ['payments'],\n    image: 'https://marketcloud.azureedge.net/storm-images/braintree-logo.jpg',\n    description: 'Accept cards and Paypal on web and mobile almost anywhere.',\n    links: {\n      'view': '/documentation/integrations/braintree'\n    }\n  }, {\n    name: 'stripe',\n    tags: ['payments'],\n    image: 'https://marketcloud.azureedge.net/storm-images/stripe.png',\n    description: 'Web and mobile payments. Built for developers.',\n    links: {\n      'view': '/documentation/integrations/stripe'\n    }\n  }, {\n    name: 'facebook',\n    tags: ['authentication'],\n    image: 'https://marketcloud.azureedge.net/storm-images/facebook.png',\n    description: 'Facebook auth integration',\n    links: {\n      'view': '/documentation/guides/facebook-login'\n    }\n  }]\n}])\n\napp.controller('IntegrationStripeController', \n  [\n  '$scope', \n  '$http',\n  '$routeParams',\n  'StripeIntegration',\n  '$application',\n  function($scope, $http, $routeParams, StripeIntegration, $application) {\n  /*\n   *  The integration states are\n   *\n   *  Not installed\n   *  Installed inactive\n   *  Installed active\n   *\n   *  Installed means that the oauth flow was completed and we have the data\n   *  StripeIntegration is the object we use to inject the integration state fetched from the api\n   *\n   *  If it's null, we conclude that it is not installed\n   */\n  if (StripeIntegration) {\n    $scope.isIntegrationInstalled = true\n    $scope.StripeIntegration = StripeIntegration.data.data\n  } else {\n    $scope.isIntegrationInstalled = false\n  }\n\n  $scope.currentApplication = $application.get()\n\n  // TODO\n  // Lo switch deve essere visibile se e solo se l'integrazione  installata. cos da\n  // non essere clicccabile altrimenti.\n\n  $scope.toggleIntegration = function() {\n    return $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/stripe',\n        data: {\n          isActive: $scope.StripeIntegration.isActive\n        }\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n}])\n\napp.controller('IntegrationBraintreeController', [\n  '$scope', \n  '$http', \n  '$routeParams', \n  'BraintreeIntegration',\n  '$application',\n  function($scope, $http, $routeParams, BraintreeIntegration,$application) {\n  // This bool is used to show/hide credentials form\n  // This form is used to update the credentials\n  $scope.displayCredentialsForm = false\n\n  $scope.currentApplication = $application.get()\n\n  if (BraintreeIntegration) {\n    $scope.isIntegrationInstalled = true\n    $scope.braintreeConfiguration = BraintreeIntegration.data.data\n    $scope.braintreeUpdate = angular.copy(BraintreeIntegration.data.data)\n  } else {\n    $scope.isIntegrationInstalled = false\n  }\n\n  $scope.toggleCredentialsForm = function() {\n    $scope.displayCredentialsForm = !$scope.displayCredentialsForm\n  }\n\n  $scope.showModal = function() {\n    $('#BraintreeCredentialsModal').modal('show')\n  }\n\n  $scope.toggleIntegration = function() {\n    return $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\n        data: {\n          isActive: $scope.braintreeConfiguration.isActive\n        }\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n\n  $scope.saveBraintreeConfiguration = function() {\n    console.log(\"Sending\", $scope.braintreeUpdate)\n    $http({\n        method: 'PUT',\n        url: '/applications/' + $application.get().id + '/integrations/braintree',\n        data: $scope.braintreeUpdate\n      })\n      .then(function(response) {\n        notie.alert(1, 'Integration correctly updated', 1)\n        $('#BraintreeCredentialsModal').modal('hide')\n        $scope.isIntegrationInstalled = true\n        $scope.braintreeConfiguration = angular.copy({\n          environment: $scope.braintreeUpdate.environment,\n          isActive: $scope.braintreeUpdate.isActive\n        })\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred. Integration not updated', 1)\n      })\n  }\n}])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/integrations.js","var app = angular.module('DataDashboard')\napp.controller('NewInvoiceController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$application',\n  '$location',\n  'parentOrder',\n  'orders',\n  'Countries',\n  '$validation',\n  '$models',\n  function (scope, http, $marketcloud, $application, location, parentOrder, orders, countries, $validation, $models) {\n    scope.invoice = {\n      company: {\n        name: $application.get('company_name'),\n        email: $application.get('email_address'),\n        address: $application.get('company_address'),\n        country: $application.get('company_country'),\n        city: $application.get('company_city'),\n        state: $application.get('company_state'),\n        postal_code: $application.get('company_postalcode'),\n        vat: $application.get('company_taxid')\n\n      },\n      customer: {},\n      date_created: new Date(),\n      date_due: new Date(),\n      lineItems: [{\n        name: '',\n        description: '',\n        quantity: 0,\n        price: 0\n      }]\n    }\n\n    console.log(scope.invoice)\n\n    function setNextInvoiceNumber () {\n      $marketcloud.invoices.list()\n      .then(function (response) {\n        var applicationSettings = $application.get()\n        var lastNumber = response.data.data.map(function (invoice) {\n          return invoice.number\n        })\n        .map(function (number) {\n          if (number.indexOf && number.indexOf(applicationSettings.invoices_prefix) > -1) {\n            number = number.replace(applicationSettings.invoices_prefix, '')\n          }\n\n          if (!isNaN(number)) { number = Number(number) }\n          return number\n        })\n        .sort(function (a, b) {\n          return a - b\n        })\n        .pop()\n\n        console.log('LastNumber is ', lastNumber)\n\n        if (!isNaN(lastNumber)) {\n          lastNumber = Number(lastNumber)\n          scope.invoice.number = applicationSettings.invoices_prefix + String(lastNumber + 1)\n        }\n      })\n      .catch(function (error) {\n        console.log(error)\n      })\n    }\n\n    function fillDataFromOrder (order) {\n      console.log('fillDataFromOrder', order)\n      scope.parentOrder = order\n      scope.invoice = {\n        order_id: scope.parentOrder.id,\n        company: {\n          name: $application.get('company_name'),\n          email: $application.get('email_address'),\n          address: $application.get('company_address'),\n          country: $application.get('company_country'),\n          city: $application.get('company_city'),\n          state: $application.get('company_state'),\n          postal_code: $application.get('company_postalcode'),\n          vat: $application.get('company_taxid')\n        },\n        customer: {},\n        date_created: new Date(),\n        date_due: new Date(),\n        lineItems: scope.parentOrder.products.map(function (p) {\n          p.description = ''\n          return p\n        })\n      }\n\n      // adding shipping to line items\n      if (scope.parentOrder.hasOwnProperty('shipping')) {\n        scope.invoice.lineItems.push({\n          name: 'Shipping ' + scope.parentOrder.shipping.name,\n          description: scope.parentOrder.shipping.description,\n          quantity: 1,\n          price: scope.parentOrder.shipping_total\n        })\n      }\n\n      // adding payment method fee to line items\n      if (scope.parentOrder.hasOwnProperty('payment_method')) {\n        scope.invoice.lineItems.push({\n          name: 'Payment method ' + scope.parentOrder.payment_method.name,\n          description: scope.parentOrder.payment_method.description,\n          quantity: 1,\n          price: scope.parentOrder.payment_method_total\n        })\n      }\n\n      // adding coupons to line items\n      if (scope.parentOrder.hasOwnProperty('coupon')) {\n        scope.invoice.lineItems.push({\n          name: 'Coupon ' + scope.parentOrder.coupon.name,\n          description: scope.parentOrder.coupon.description,\n          quantity: 1,\n          price: 0 - Number(scope.parentOrder.coupon_total)\n        })\n      }\n\n      // adding promotions to line items\n      if (scope.parentOrder.hasOwnProperty('promotion')) {\n        scope.invoice.lineItems.push({\n          name: 'Promotion ' + scope.parentOrder.promotion.name,\n          description: scope.parentOrder.promotion.description,\n          quantity: 1,\n          price: 0 - Number(scope.parentOrder.promotion_total)\n        })\n      }\n\n      // We gather customer's invoicing data from the billing address.\n      for (var k in scope.parentOrder.billing_address) {\n        scope.invoice.customer[k] = scope.parentOrder.billing_address[k]\n      }\n    }\n\n    // If the parentOrder is populated, we prefill data\n    if (parentOrder && parentOrder.data) {\n      // Must check for 404s\n      fillDataFromOrder(parentOrder.data.data)\n    } else {\n      scope.parentOrder = null\n    }\n\n    setNextInvoiceNumber()\n\n    scope.orders = orders.data.data\n    scope.ordersQuery = {\n      per_page: 5,\n      page: 1\n    }\n    scope.showTheList = false\n    scope.showList = function () {\n      scope.showTheList = true\n    }\n    scope.hideList = function () {\n      window.setTimeout(function () {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n    scope.loadNextOrders = function () {\n      scope.showTheList = true\n      scope.ordersQuery.page += 1\n\n      $marketcloud.orders.list(scope.ordersQuery)\n      .then(function (response) {\n        scope.orders = response.data.data\n      })\n      .catch(function (error) {\n        notie.alert(3)\n      })\n    }\n    scope.loadPreviousOrders = function () {\n      scope.showTheList = true\n\n      if (scope.ordersQuery.page <= 1) { return }\n\n      scope.ordersQuery.page -= 1\n\n      $marketcloud.orders.list(scope.ordersQuery)\n      .then(function (response) {\n        scope.orders = response.data.data\n      })\n      .catch(function (error) {\n        notie.alert(3)\n      })\n    }\n    scope.selectOrder = function (order) {\n      scope.showTheList = false\n      scope.invoice.order_id = order.id\n\n      fillDataFromOrder(order)\n    }\n\n    scope.countries = countries\n    scope.customerStates = []\n    scope.companyStates = []\n\n    scope.getInvoiceTotal = function () {\n      return scope.invoice.lineItems\n        .map(function (item) {\n          return item.price * item.quantity\n        })\n        .reduce(function (a, b) {\n          return a + b\n        }).toFixed(2)\n    }\n\n    scope.updateCompanyStates = function () {\n      http({\n        method: 'GET',\n        url: '/countries/' + scope.invoice.company.country.toLowerCase()\n      })\n        .then(function (response) {\n          scope.companyStates = response.data\n        })\n        .catch(function (error) {\n          var type = null\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\n\n          if (type === 'StatesListNotAvailable') {\n            scope.companyStates = []\n          }\n          /* else {\n            // Commenting this error because it seems to be disorientating for users\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          } */\n        })\n    }\n\n    // Immediatly invoking the function in order to load states\n    // but only if the value is already assigned.\n    if (scope.invoice.company.country) {\n      scope.updateCompanyStates()\n    }\n\n    scope.updateCustomerStates = function () {\n      if (!scope.invoice.customer.country) { return }\n\n      http({\n        method: 'GET',\n        url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n      })\n        .then(function (response) {\n          scope.customerStates = response.data\n        })\n        .catch(function (error) {\n          var type = null\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\n\n          if (type === 'StatesListNotAvailable') {\n            scope.customerStates = []\n          }/* else {\n            // Commenting this error because it seems to be disorientating for users\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          } */\n        })\n    }\n\n    // Immediatly invoking the function in order to load states\n    // but only if the value is already assigned.\n    if (scope.invoice.customer.country) {\n      scope.updateCustomerStates()\n    }\n\n    scope.saveInvoice = function (goToOrder) {\n      goToOrder = goToOrder || false\n\n      $validation.hideErrors()\n      console.log('Salvo questo', angular.copy(scope.invoice))\n      $marketcloud.invoices.save(scope.invoice)\n        .then(function (response) {\n          notie.alert(1, 'Invoice saved', 1.5)\n          if (goToOrder === true) {\n            return location.path('/orders/' + scope.invoice.order_id + '/view')\n          }\n          location.path('/invoices')\n        })\n        .catch(function (response) {\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5)\n\n            var validation = response.data.errors[0]\n            var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]'\n\n            if (angular.element(selector).length === 0) { selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]' }\n\n            $validation.showErrorMessage(validation, $models.Invoice.schema, selector)\n          } else { notie.alert(3, 'An error has occurred. Please try again', 2) }\n        })\n    }\n\n    scope.addLineItem = function () {\n      scope.invoice.lineItems.push({\n        name: '',\n        description: '',\n        quantity: null,\n        price: null\n      })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/invoices/invoice.new.js","var app = angular.module('DataDashboard')\napp.controller('EditInvoiceController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$location',\n  'invoice',\n  'Countries',\n  '$validation',\n  '$models',\n  function (scope, http, $marketcloud, location, invoice, countries, $validation, $models) {\n    scope.invoice = invoice.data.data\n    console.log('Prima di fottere le date', angular.copy(scope.invoice))\n    // Angular wants the input[date] to be valid date objects :@\n    scope.invoice.date_due = moment(scope.invoice.date_due)\n    scope.invoice.date_created = moment(scope.invoice.date_created)\n\n    console.log('Dopo di fottere le date', angular.copy(scope.invoice))\n\n    scope.countries = countries\n    scope.customerStates = []\n    scope.companyStates = []\n\n    scope.alert = function (m) {\n      window.alert(m)\n    }\n\n    scope.getInvoiceTotal = function () {\n      return scope.invoice.lineItems\n        .map(function (item) {\n          return item.price * item.quantity\n        })\n        .reduce(function (a, b) {\n          return a + b\n        }).toFixed(2)\n    }\n\n    scope.updateCompanyStates = function () {\n      http({\n        method: 'GET',\n          // url : '/modules/shared/geography/countries/'+scope.invoice.company.country.toLowerCase()+'.json'\n        url: '/countries/' + scope.invoice.company.country.toLowerCase()\n      })\n        .then(function (response) {\n          scope.companyStates = response.data\n        })\n        .catch(function (error) {\n          console.log(error)\n          var type = null\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\n\n          if (type === 'StatesListNotAvailable') {\n            scope.companyStates = []\n          } else {\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          }\n        })\n    }\n\n    scope.updateCustomerStates = function () {\n      if (!scope.invoice.customer.country) { return }\n\n      http({\n        method: 'GET',\n        url: '/countries/' + scope.invoice.customer.country.toLowerCase()\n      })\n        .then(function (response) {\n          scope.customerStates = response.data\n        })\n        .catch(function (error) {\n          var type = null\n          if (error.data && error.data.errors && error.data.errors[0]) { type = error.data.errors[0].type }\n\n          if (type === 'StatesListNotAvailable') {\n            scope.customerStates = []\n          } else {\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          }\n        })\n    }\n\n    scope.updateCustomerStates()\n    scope.updateCompanyStates()\n    scope.debug = function () { console.log(scope.invoice) }\n\n    scope.saveInvoice = function () {\n      if (typeof scope.invoice.date_created.toDate === 'function') {\n        scope.invoice.date_created = scope.invoice.date_created.toDate()\n        scope.invoice.date_created.setHours(12)\n      }\n      if (typeof scope.invoice.date_due.toDate === 'function') {\n        scope.invoice.date_due = scope.invoice.date_due.toDate()\n        scope.invoice.date_due.setHours(12)\n      }\n      console.log('Salvo', angular.copy(scope.invoice))\n      $validation.hideErrors()\n      $marketcloud.invoices.update(scope.invoice.id, scope.invoice)\n        .then(function (response) {\n          notie.alert(1, 'Invoice saved', 1.5)\n          location.path('/invoices')\n        })\n        .catch(function (response) {\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5)\n\n            var validation = response.data.errors[0]\n            var selector = '[ng-model=\"invoice.' + validation.invalidPropertyName + '\"]'\n\n            if (angular.element(selector).length === 0) { selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]' }\n\n            $validation.showErrorMessage(validation, $models.Invoice.schema, selector)\n          } else { notie.alert(3, 'An error has occurred.', 2) }\n        })\n    }\n\n    scope.addLineItem = function () {\n      scope.invoice.lineItems.push({\n        name: '',\n        description: '',\n        quantity: null,\n        price: null\n      })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/invoices/invoices.edit.js","var app = angular.module('DataDashboard')\n\napp.controller('LocalizationController', ['$scope', '$http', 'Currencies', 'Timezones', 'LocalesFactory', '$application',\n  function(scope, http, currencies, timezones, locales, $application) {\n    scope.application = $application.get()\n\n    scope.currencies = currencies;\n\n    for (var k in scope.currencies){\n      scope.currencies[k].name_plus_code = scope.currencies[k].name+ \" (\" + scope.currencies[k].code + \")\";\n    }\n    scope.activeCurrencies = []\n      // string '[{code,rate},{code,rate},{code,rate}]'\n      // array  [{code,rate},{code,rate},{code,rate}]\n      //\n\n    if (typeof $application.get().currencies !== 'string') {\n      $application.get().currencies = '[]'\n    }\n    var saved_currencies = JSON.parse($application.get().currencies)\n\n    // scope.currencies.forEach(function(currency){\n    for (var k in scope.currencies) {\n      var currency = scope.currencies[k]\n      saved_currencies.forEach(function(saved_currency) {\n        if (saved_currency.code === currency.code) {\n          var new_currency_obj = angular.copy(currency)\n          new_currency_obj.rate = saved_currency.rate\n          scope.activeCurrencies.push(new_currency_obj)\n        }\n      })\n    }\n    // })\n\n    /*\n     *  Adds a currency and updates app's settings\n     */\n    scope.addCurrency = function(currency) {\n      if (scope.activeCurrencies.map(function(c) {\n          return c.code\n        }).indexOf(currency.code) > -1) {\n        return\n      }\n      currency.rate = 1\n      scope.activeCurrencies.push(currency)\n\n      // saving the new settings configuration\n      scope.updateSettings()\n    }\n\n    /*\n     *  Removes a currency and updates app's settings\n     */\n    scope.removeCurrency = function(i) {\n      scope.activeCurrencies.splice(i, 1)\n\n      // saving the new settings configuration\n      scope.updateSettings()\n    }\n\n    /*\n      There are better APIs for currency exchange, but they are not free.\n      Fixer only has a small subset of currencies.\n      This is free for 1000 reqs/month\n        https://currencylayer.com/product\n      This starts from 12$/month and also free for 1000 res/month\n      https://openexchangerates.org/signup\n\n      We ended up using Yahoo Finance through Yahoo Query Console.\n      It's a bit hacky but its working for now and it is the\n      only free service with any exchange rate.\n      very gouda.\n\n      Yahoo Finance is DEAD 8 Nov 2017\n    */\n/*\n    function buildURL(from_currency_code, to_currency_code) {\n      return 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20csv%20where%20url%3D%22http%3A%2F%2Ffinance.yahoo.com%2Fd%2Fquotes.csv%3Fe%3D.csv%26f%3Dnl1d1t1%26s%3D' + from_currency_code + to_currency_code + '%3DX%22%3B&format=json&callback='\n    }\n\n    scope.applyExchangeRate = function(currencyToApply) {\n      http({\n          method: 'GET',\n          url: buildURL($application.get().currency_code, currencyToApply.code)\n        }).then(function(response) {\n          currencyToApply.rate = Number(response.data.query.results.row.col1)\n        })\n        .catch(function(err) {\n          notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\n        })\n    }*/\n\n    function buildURL(from_currency_code, to_currency_code) {\n      return 'https://api.fixer.io/latest?symbols='+to_currency_code+'&base='+from_currency_code\n    }\n\n    scope.applyExchangeRate = function(currencyToApply) {\n      http({\n          method: 'GET',\n          url: buildURL($application.get().currency_code, currencyToApply.code)\n        }).then(function(response) {\n          console.log(\"LA RISPOSONA DI FIXER\",response)\n          console.log(\"Io \")\n          currencyToApply.rate = Number(response.data.rates[currencyToApply.code])\n        })\n        .catch(function(err) {\n          notie.alert(2, \"Sorry, we couldn't find exchange rates for for \" + currencyToApply.name, 2)\n        })\n    }\n\n    scope.applyAllExchangeRates = function() {\n      scope.activeCurrencies.forEach(function(currencyToApply) {\n        if (scope.exchangeRates.hasOwnProperty(currencyToApply.code)) {\n          currencyToApply.rate = scope.exchangeRates[currencyToApply.code]\n        }\n      })\n    }\n\n    // This is for sorting the locales by name\n    function compare(a, b) {\n      if (a.name < b.name) {\n        return -1\n      } else if (a.name > b.name) {\n        return 1\n      } else {\n        return 0\n      }\n    }\n\n    // Locales are provided by the factory as an object with the code as key\n    // For sorting them, we need an array.\n    scope.locales = Object.keys(locales)\n      .map(function(k) {\n        return locales[k]\n      })\n      .sort(compare)\n\n    if (scope.application.locales === '') {\n      scope.activeLocales = []\n    } else {\n      scope.activeLocales = scope.application.locales.split(',').map(function(code) {\n        return locales[code]\n      })\n    }\n\n    /*\n     *  Adds a locale to the app and saves\n     */\n    scope.addLocale = function(locale) {\n      if (scope.activeLocales.map(function(l) {\n          return l.code\n        }).indexOf(locale.code) > -1) {\n        return\n      }\n\n      scope.activeLocales.push(locale)\n\n      // saving the new settings configuration\n      scope.updateSettings()\n    }\n\n    scope.getFlagClassName = function(locale) {\n      return 'flag-icon-' + locale.code.slice(-2).toLocaleLowerCase()\n    }\n\n    /*\n     *  Removes a locale to the app and saves\n     */\n    scope.removeLocale = function(i) {\n      scope.activeLocales.splice(i, 1)\n\n      // saving the new settings configuration\n      scope.updateSettings()\n    }\n\n    // Let's re-pack the active locales in a single string\n    function activeLocalesToString() {\n      return scope.activeLocales.map(function(locale) {\n          return locale.code\n        })\n        .join(',')\n    }\n\n    function activeCurrenciesToString() {\n      return JSON.stringify(scope.activeCurrencies.map(function(c) {\n        return {\n          code: c.code,\n          rate: c.rate\n        }\n      }))\n    }\n\n    scope.updateSettings = function() {\n      var payload = {\n        locales: activeLocalesToString(),\n        currencies: activeCurrenciesToString()\n      }\n\n      http({\n          method: 'PUT',\n          url: '/applications/' + scope.application.id,\n          data: payload\n        })\n        .then(function(response) {\n          notie.alert(1, 'Application successfully updated', 1)\n          console.log('Setto i locales a ', response.data.data.locales)\n          $application.set('locales', response.data.data.locales)\n          $application.set('currencies', response.data.data.currencies)\n        })\n        .catch(function(err) {\n          notie.alert(3, 'An error has occurred.')\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/localization.controller.js","var app = angular.module('DataDashboard')\n\napp.controller('MediaListController', ['$scope', '$http', 'media', '$marketcloud', '$q',\n  function(scope, http, resources, $marketcloud, $q) {\n    // Pagination\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n\n    scope.inspectFile = function(file) {\n      scope.inspectedFile = file;\n      $(\"#inspectFileModal\").modal(\"show\");\n    }\n\n    scope.formatFileSize = function(file) {\n      if (!file)\n        return \"\";\n\n      var size = Number(file.size);\n      var formatted = size + \"b\";\n\n      var kb = 1000;\n      var mb = kb * 1000;\n      var gb = mb * 1000;\n\n      if (size > kb && size < mb) {\n        // Kilobytes\n        size = (size / kb).toFixed(2);\n        return String(size) + \" KB\"\n      } else if (size > mb && size < gb) {\n        // Megabytes\n        size = (size / mb).toFixed(2);\n        return String(size) + \" MB\"\n      } else {\n        size = (size / gb).toFixed(2);\n        return String(size) + \" GB\";\n      }\n    }\n\n    // Query\n    scope.query = {\n      per_page: 20\n    }\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n    scope.toggleAll = function() {\n      scope.media.forEach(function(p) {\n        p.selected = scope.selectAll\n      })\n    }\n\n    scope.getSelectedItems = function() {\n      return scope.media.filter(function(p) {\n        return p.selected === true\n      })\n    }\n\n    scope.bulkDelete = function() {\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function() {\n        var defer = $q.defer()\n\n        var promises = []\n\n        scope\n          .getSelectedItems()\n          .forEach(function(item) {\n            promises.push($marketcloud.media.delete(item.id))\n          })\n\n        $q.all(promises)\n          .then(function() {\n            notie.alert(1, 'All items have been deleted', 1.5)\n            scope.loadPage(scope.currentPage)\n          })\n\n        return defer.promise\n      })\n    }\n\n    // Initial data resolved from the router\n    scope.media = resources.data.data\n\n    // This method must be implemented in order to\n    // make the media manager work\n    scope.getImagesContainer = function() {\n      return scope.media\n    }\n\n    scope.loadPage = function(page) {\n      scope.query.page = page\n      return scope.loadData({\n        page: page\n      })\n    }\n\n    scope.loadData = function(query) {\n      if (!query) {\n        query = scope.query\n      }\n\n      return $marketcloud.media.list(query)\n        .then(function(response) {\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n\n          scope.media = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n\n    scope.updateInspectedFile = function(){\n      console.log(\"Saving this\",scope.inspectedFile)\n      $marketcloud.media.update(scope.inspectedFile.id,{name : scope.inspectedFile.name})\n      .then(function(response){\n        notie.alert(1, 'File updated', 1.5)\n      })\n      .catch(function(error){\n        notie.alert(3, 'An error has occurred. Please retry.', 1.5)\n      })\n    }\n\n    scope.deleteMedia = function(media_id, index) {\n      $marketcloud.media.delete(media_id)\n        .then(function(response) {\n          scope.loadData({\n            page: scope.currentPage\n          })\n          notie.alert(1, 'Media deleted', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/media.list.js","  var MediaManagerControllerDependencies = [\n    '$scope', 'FileUploader', '$http', '$element', '$attrs', '$exceptionHandler', '$marketcloud'\n  ]\n\n  var MediaManagerController = function (scope, FileUploader, $http, $element, $attrs, $exceptionHandler, $marketcloud) {\n    var ctrl = null\n    this.$onInit = function () {\n      // Reference to the controller\n      ctrl = this\n\n      // List of image urls\n      ctrl.images = ctrl.images || []\n\n      // List of image objects\n      // ctrl.media = ctrl.media || [];\n\n      scope.closeOnUploadComplete = $attrs.closeOnUploadComplete\n\n      /* Component configuration from attributes */\n      // The classes used to style the button\n      scope.buttonClass = $attrs.buttonClass\n\n      // The text displayed on the button\n      scope.buttonText = $attrs.buttonText\n\n      // The icon displayed on the button\n      scope.buttonIcon = $attrs.buttonIcon || null\n\n      var tabs = $attrs.tabs || 'library,from_disk,from_url'\n\n      // This will hold an array of tab names\n      // The component will show only those tabs\n      // whose name is in this array\n      //\n      // The first tab will be the active one.\n      // TODO to improve this, we can add an attribute \"activeTab\"\n\n      scope.tabs = tabs.split(',')\n\n      // This is the name of the parent function which will return a reference to the image container\n      // scope.getImagesContainer = $attrs.getImagesContainer || 'getImagesContainer';\n    }\n\n    /* Uploader configuration */\n    scope.uploader = new FileUploader({\n      url: window.API_BASE_URL + '/media',\n      arrayKey: '',\n      headers: {\n        'Authorization': window.public_key + ':' + window.token\n      },\n      filters: []\n    })\n\n    // When closeDialog is called from within the component\n    // we notify the parent component/controller by calling the on-close-dialog\n    // callback\n    scope.closeDialog = function () {\n      ctrl.onCloseDialog()\n    }\n\n    scope.openDialog = function () {\n      ctrl.onOpenDialog()\n    }\n\n    scope.uploadImages = function () {\n      ctrl.onUploadImages()\n    }\n\n    scope.image = {}\n    scope.media_files = []\n    scope.loadingMediaFiles = false\n\n    // Used to keep filters and pagination state\n    scope.query = {}\n\n    // Initializing the pagination object to null\n    // This allows for convenient check on view pagination === null => dont show pagination\n    scope.pagination = null\n\n    scope.loadMedias = function (query) {\n      scope.media_files = []\n      scope.loadingMediaFiles = true\n      /* $http({\n          method: 'GET',\n          url: window.API_BASE_URL + '/media',\n          headers: {\n            Authorization: window.public_key\n          }\n        }) */\n      $marketcloud.media.list(query || {})\n        .then(function (response) {\n          scope.loadingMediaFiles = false\n          scope.media_files = response.data.data\n\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n        })\n        .catch(function (response) {\n          scope.loadingMediaFiles = false\n          notie.alert(2, 'An error has occurred, please retry.', 1.5)\n        })\n    }\n\n    scope.loadPage = function (page_number) {\n      scope.query.page = page_number\n      return scope.loadData()\n    }\n\n    scope.loadMore = function () {\n      var pageToFetch = scope.media_files.length / 20 + 1\n      $marketcloud.media.list({page: pageToFetch})\n      .then(function (response) {\n        scope.loadingMediaFiles = false\n\n        scope.media_files = scope.media_files.concat(response.data.data)\n      })\n        .catch(function (response) {\n          scope.loadingMediaFiles = false\n          notie.alert(2, 'An error has occurred, please retry.', 1.5)\n        })\n    }\n    scope.loadData = function (query) {\n      scope.media_files = []\n      scope.loadingMediaFiles = true\n\n      if (!query) { query = scope.query || {} }\n\n      $marketcloud.media\n        .list(query)\n        .then(function (response) {\n          scope.loadingMediaFiles = false\n          scope.media_files = response.data.data\n\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n        })\n        .catch(function (response) {\n          scope.loadingMediaFiles = false\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n    // Calling it right now because we want to initialize the media library\n    if (scope.media_files.length === 0) {\n      scope.loadMedias()\n    }\n\n    scope.showProgressBar = false\n    scope.uploadingImages = false\n\n    scope.howManySelectedMedia = function () {\n      return ctrl.images.length\n    }\n\n    scope.addSelectedFromLibrary = function () {\n      var modal = $element.find('#MediaManagerModal');\n      $(modal).modal('hide')\n      /*$('#MediaManagerModal').modal('hide')*/\n    }\n\n    scope.isImageSelected = function (image) {\n      return ctrl.images.indexOf(image.url) > -1\n    }\n    scope.selectImage = function (image) {\n      if (image.selected === true) {\n        image.selected = false\n        removeImage(image)\n      } else {\n        image.selected = true\n        ctrl.images.push(image.url)\n      }\n    }\n\n    var removeImage = function (image) {\n      // var pos = scope.$parent[scope.getImagesContainer]().indexOf(image.url);\n      var pos = ctrl.images.indexOf(image.url)\n      if (pos > -1) {\n        ctrl.images.splice(pos, 1)\n      }\n\n      // Rimuovo il media\n      /* for (var i =0; i< ctrl.media.length;i++) {\n        if (ctrl.media[i].url === image.url)\n          ctrl.media.splice(i,1);\n      } */\n    }\n\n    scope.uploader.onCompleteAll = function () {\n      scope.loadMedias()\n      scope.showProgressBar = false\n      scope.uploadingImages = false\n      scope.uploader.clearQueue()\n\n      // Checking if we need to close the dialog\n      if (scope.closeOnUploadComplete === 'true') {\n        scope.closeDialog()\n        /*$('#MediaManagerModal').modal('hide')*/\n        var modal = $element.find('#MediaManagerModal');\n        $(modal).modal('hide')\n      }\n\n      if (ctrl.onUploadComplete) {\n        ctrl.onUploadComplete()\n      }\n    }\n\n    scope.uploader.onProgressAll = function (progress) {\n\n    }\n\n    scope.uploader.onErrorItem = function (item, response, status, headers) {\n      var err = new Error('Error uploading an item')\n      err.response = response\n      err.status = status\n      err.headers = headers\n      $exceptionHandler(err)\n    }\n\n    scope.chooseFileFromStorage = function () {\n      $('#chooseFileFromStorageButton').trigger('click')\n    }\n\n    scope.uploadSelectedImages = function () {\n      scope.showProgressBar = true\n      scope.uploadingImages = true\n      scope.uploader.uploadAll()\n    }\n\n    scope.addImageFromUrl = function () {\n      ctrl.images.push(scope.image.url)\n      // scope.$parent[scope.getImagesContainer]().push(scope.image.url);\n      scope.image.url = null\n    }\n\n    scope.showMediaManagerModal = function () {\n      /*$('#MediaManagerModal').modal('show')*/\n      var modal = $element.find('#MediaManagerModal');\n      $(modal).modal('show')\n\n      // Notifying the parent\n      scope.openDialog()\n    }\n  }\n\n  MediaManagerController.$inject = MediaManagerControllerDependencies\n\n  angular.module('DataDashboard')\n    .controller('MediaManagerController', MediaManagerController)\n\n  angular.module('DataDashboard')\n    .component('mediaManager', {\n      templateUrl: '/modules/data_dashboard/templates/modals/media_manager.html',\n      controller: 'MediaManagerController',\n      bindings: {\n        onCloseDialog: '&',\n        onOpenDialog: '&',\n        onUploadComplete: '&',\n        // imagesContainer: '=',\n        images: '=?',\n        media: '=?',\n        buttonClass: '@',\n        buttonIcon: '@',\n        buttonText: '@',\n        closeOnUploadComplete: '@'\n      }\n    })\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/media_manager.controller.js","var app = angular.module('DataDashboard')\napp.controller('EditNotificationController', [\n  '$scope',\n  '$http',\n  'notification',\n  '$location',\n  '$marketcloud',\n  'NotificationsPresetsFactory',\n  function(scope, http, notification, $location, $marketcloud, NotificationsPresets) {\n    scope.events = {\n      'invoices.create': 'An invoice is created',\n      'orders.create': 'An order is created',\n      'users.create': 'A new user is created',\n      'users.recoverPassword': 'A user wants to recover the password',\n      'orders.update.processing': 'An order is paid',\n      'orders.update.completed': 'An order is shipped'\n    }\n\n    // name => label\n    // This object is used to map template variable names\n    // to more user friendly names\n    scope.templateVariablesLabels = {\n      title: 'Title',\n      introduction: 'introduction',\n      productLabel: 'Product Label',\n      priceLabel: 'Price Label',\n      customerInformationLabel: 'Customer information label',\n      shippingAddressLabel: 'Shipping address label',\n      billingAddressLabel: 'Billing address label',\n      tracking_code_introduction: 'Shipment tracking introduction',\n      redirect_url: 'Redirect URL',\n      buttonLabel: 'Button Label'\n    }\n\n    scope.presets = NotificationsPresets\n\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\n      return scope.events[e]\n    })\n\n    scope.updateNotificationPreset = function() {\n      if (scope.presets.hasOwnProperty(scope.notification.event)) {\n        var e = scope.notification.event\n        for (var k in scope.presets[e]) {\n          scope.notification[k] = scope.presets[e][k]\n        }\n      }\n    }\n\n    scope.notification = notification.data.data\n\n    // Notifications created before templates were available might need some more work\n    if (!scope.notification.template) {\n      scope.notification.template = angular.copy(scope.presets[scope.notification.event].template)\n    }\n\n    // In the same way, some notification might have only a subset of template values.\n    for (var tplKey in scope.presets[scope.notification.event].template) {\n      if (!(tplKey in scope.notification.template)) {\n        scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey]\n      }\n    }\n\n    scope.save = function() {\n      $marketcloud.notifications.update(scope.notification.id, scope.notification)\n        .then(function(response) {\n          notie.alert(1, 'Item successfully updated!', 1.5)\n          $location.path('/notifications')\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.edit.js","var app = angular.module('DataDashboard')\napp.controller('NotificationsController', ['$scope', '$http', '$marketcloud', 'notifications',\n  function (scope, http, $marketcloud, notifications) {\n    scope.notifications = notifications.data.data\n\n    scope.delete = function (notification, index) {\n      $marketcloud.notifications.delete(notification.id)\n\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Notification deleted', 1.5)\n  scope.notifications.splice(index, 1)\n})\n\t\t\t\t.catch(function (error) {\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\n})\n    }\n\n    scope.toggleNotification = function (notification) {\n      $marketcloud.notifications.update(notification.id, notification)\n\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Update successful', 1.5)\n})\n\t\t\t\t.catch(function (error) {\n  notie.alert(3, 'An error has occurred, please try again.', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.js","var app = angular.module('DataDashboard')\napp.controller('NewNotificationController', ['$scope', '$http', '$location', '$marketcloud', 'NotificationsPresetsFactory',\n  function(scope, http, $location, $marketcloud, NotificationsPresets) {\n    scope.events = {\n      'invoices.create': 'An invoice is created',\n      'orders.create': 'An order is created',\n      'users.create': 'A new user is created',\n      'users.recoverPassword': 'A user wants to recover the password',\n      'orders.update.processing': 'An order is paid',\n      'orders.update.completed': 'An order is shipped'\n    }\n\n    scope.notification = {\n      event: null,\n      name: null,\n      description: null,\n      subject: null,\n      sendCopyToOwner: false,\n      active: false\n    }\n\n    scope.query = {}\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.presets = NotificationsPresets\n\n    // name => label\n    // This object is used to map template variable names\n    // to more user friendly names\n    scope.templateVariablesLabels = {\n      title: 'Title',\n      introduction: 'introduction',\n      productLabel: 'Product Label',\n      priceLabel: 'Price Label',\n      customerInformationLabel: 'Customer information label',\n      shippingAddressLabel: 'Shipping address label',\n      billingAddressLabel: 'Billing address label',\n      tracking_code_introduction: 'Shipment tracking introduction',\n      redirect_url  :'Redirect URL',\n      buttonLabel : 'Button Label'\n    }\n\n    scope.updateNotificationPreset = function() {\n      if (scope.presets.hasOwnProperty(scope.notification.event)) {\n        var e = scope.notification.event\n        for (var k in scope.presets[e]) {\n          scope.notification[k] = scope.presets[e][k]\n        }\n      }\n    }\n\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\n      return scope.events[e]\n    })\n\n    scope.save = function() {\n      $marketcloud.notifications.save(scope.notification)\n        .then(function(response) {\n          notie.alert(1, 'Notification saved', 1.5)\n          $location.path('/notifications')\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.new.js","var app = angular.module('DataDashboard')\napp.controller('PreviewNotificationController',\n  ['$scope', '$http', 'notification', '$location', '$marketcloud',\n    function (scope, http, notification, $location, $marketcloud) {\n      scope.notification = JSON.parse(notification)\n\n      scope.sampleData = {}\n\n      scope.sampleData['orders.update.completed'] = {}\n\n      scope.sampleData['orders.update.processing'] = {}\n\n      scope.sampleData['orders.created'] = {}\n\n      scope.sampleData['users.created'] = {}\n    }\n  ])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.preview.js","var app = angular.module('DataDashboard')\napp.controller('TranslateNotificationController', ['$scope',\n  '$http',\n  'notification',\n  '$marketcloud',\n  'LocalesFactory',\n  '$application',\n  '$location',\n  'NotificationsPresetsFactory',\n  function(scope, http, notification, $marketcloud, locales, $application, $location, NotificationsPresets) {\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n    scope.presets = NotificationsPresets\n    scope.notification = notification.data.data\n      // This is fetched from the app's config\n    scope.availableLocales = []\n      // mocking the retrieval of locales\n    scope.locales = locales\n      // name => label\n      // This object is used to map template variable names\n      // to more user friendly names\n    scope.templateVariablesLabels = {\n      title: 'Title',\n      introduction: 'introduction',\n      productLabel: 'Product Label',\n      priceLabel: 'Price Label',\n      customerInformationLabel: 'Customer information label',\n      shippingAddressLabel: 'Shipping address label',\n      billingAddressLabel: 'Billing address label',\n      tracking_code_introduction: 'Shipment tracking introduction',\n      redirect_url: 'Redirect URL',\n      buttonLabel: 'Button Label'\n    }\n    scope.availableLocales = $application.get().locales.split(',')\n      .map(function(code) {\n        return scope.locales[code]\n      })\n      // Which locale we are currently editing\n    scope.currentLocale = scope.availableLocales[0]\n      // Init locales object\n    if (!scope.notification.hasOwnProperty('locales')) {\n      scope.notification.locales = {}\n    }\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.notification.locales.hasOwnProperty(locale.code)) {\n        scope.notification.locales[locale.code] = {}\n      }\n    })\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n    }\n    scope.events = {\n      'invoices.create': 'An order is created',\n      'orders.create': 'An order is created',\n      // 'orders.update.canceled'     : 'An order is canceled',\n      'users.create': 'A new user is created',\n      'orders.update.processing': 'An order is paid',\n      'orders.update.completed': 'An order is shipped'\n    }\n    scope.eventKeys = Object.keys(scope.events).map(function(e) {\n      return scope.events[e]\n    })\n    scope.updateNotificationPreset = function() {\n        if (scope.presets.hasOwnProperty(scope.notification.event)) {\n          var e = scope.notification.event\n          for (var k in scope.presets[e]) {\n            scope.notification[k] = scope.presets[e][k]\n          }\n        }\n      }\n      // Notifications created before templates were available might need some more work\n    if (!scope.notification.template) {\n      scope.notification.template = angular.copy(scope.presets[scope.notification.event])\n    }\n    // In the same way, some notification might have only a subset of template values.\n    for (var tplKey in scope.presets[scope.notification.event].template) {\n      if (!(tplKey in scope.notification.template)) {\n        scope.notification.template[tplKey] = scope.presets[scope.notification.event].template[tplKey]\n      }\n    }\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.notification.locales)\n      }\n      $marketcloud.notifications.update(scope.notification.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/notifications/notifications.translations.js","'use strict'\n/* global angular: true  */\n/* global API_BASE_URL: true  */\n/* global notie: true  */\n/* global alert: true  */\n\nvar app = angular.module('DataDashboard')\napp.controller('OrdersController', [\n  '$q',\n  '$scope',\n  '$http',\n  '$location',\n  'ordersResponse',\n  '$marketcloud',\n  '$route',\n  '$utils',\n  function($q, scope, http, $location, resources, $marketcloud, $route, $utils) {\n    // Pagination\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    // Query\n    scope.query = {\n      page: 1,\n      per_page: 20\n    }\n\n\n    // Parsing URL parameters, if provided\n\n    // Applying Url query\n    var urlQuery = {}\n    try {\n      urlQuery = JSON.parse($route.current.params.query)\n    } catch (e) {\n      console.log(\"Non ho potuto parsare il JSON di questa stringa \", $route.current.params.query)\n      urlQuery = {};\n    }\n\n    console.log(\"Sono il controller ed inizializzo la query usando query URL Params \", urlQuery)\n    for (var k in urlQuery) {\n      scope.query[k] = urlQuery[k];\n    }\n\n    // Initial data resolved from the router\n    scope.orders = resources.data.data\n\n\n\n    // This computes a \"paid\" flag on each order\n    // it is calculated checking each payment status\n    function setPaidFlag(order) {\n      // Old api set payment instead of payments\n      if (order.hasOwnProperty('payment')) {\n        order.paid = true\n      } else if (order.hasOwnProperty('payments')) {\n        order.paid = (order.payments.filter(function(p) {\n          return p.successful\n        }).length > 0)\n      } else {\n        order.paid = false\n      }\n    }\n\n    // Setting the paid flag\n    scope.orders.forEach(setPaidFlag)\n\n    // Util\n    scope.timestampToDate = function(t) {\n      var a = new Date(t)\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n      return a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\n    }\n\n    /*\n      BULK EDIT\n    */\n    scope.toggleAll = function() {\n      scope.orders.forEach(function(o) {\n        o.selected = scope.selectAll\n      })\n    }\n    scope.getSelectedItems = function() {\n      return scope.orders.filter(function(o) {\n        return o.selected === true\n      })\n    }\n    scope.bulkExport = function() {\n\n      // If there are no selected items, we export the whole current view\n      if (scope.getSelectedItems().length === 0)\n        return scope.downloadCSV(scope.orders);\n\n      scope.downloadCSV(scope.getSelectedItems())\n    }\n\n    scope.bulkJSONExport = function() {\n      // If there are no selected items, we export the whole current view\n      if (scope.getSelectedItems().length === 0)\n        return $utils.exportAsJSON(scope.orders);\n\n      $utils.exportAsJSON(scope.getSelectedItems());\n    }\n\n    scope.bulkUpdateStatus = function(status) {\n\n      if (!status)\n        status = scope.bulkStatusChange;\n\n\n      var defer = $q.defer()\n\n      var promises = []\n\n      scope.getSelectedItems()\n        .forEach(function(order) {\n          promises.push($marketcloud.orders.update(order.id, {\n            status: status\n          }))\n        })\n\n      $q.all(promises)\n        .then(function() {\n          notie.alert(1, 'All orders have been updated', 1.5)\n          scope.loadPage(scope.pagination.currentPage)\n        })\n\n      return defer.promise\n    }\n\n    scope.bulkDelete = function() {\n      /*notie.confirm('Delete ' + scope.getSelectedItems().length + ' orders?', 'Delete', 'Cancel', function() {*/\n      window.Alert.confirm({\n        title: 'Delete ' + scope.getSelectedItems().length + ' orders?',\n        message: 'Deleted orders cannot be recovered. Do you want to continue?',\n        onConfirm: function() {\n\n\n          var defer = $q.defer()\n\n          var promises = []\n\n          scope.getSelectedItems().forEach(function(order) {\n            promises.push($marketcloud.orders.delete(order.id))\n          })\n\n          $q.all(promises)\n            .then(function() {\n              notie.alert(1, 'All orders have been deleted', 1.5)\n              scope.loadPage(scope.pagination.currentPage)\n            })\n\n          return defer.promise\n        }\n      })\n    }\n\n    function jsonToCsv(json) {\n      // Questo non va bene, i fields devono essere l'unione di\n      // campi dell'ordine e campi dei prodotti\n      // perch csv  un formato di merda\n      var order_fields = [\n        'id',\n        'created_at',\n        'status',\n        'total',\n        'items_total',\n        'shipping_total',\n        'taxes_total',\n        // shipping address\n        'shipping_address_email',\n        'shipping_address_full_name',\n        'shipping_address_country',\n        'shipping_address_city',\n        'shipping_address_address1',\n        'shipping_address_state',\n        'shipping_address_postal_code',\n        // billing address\n        'billing_address_email',\n        'billing_address_full_name',\n        'billing_address_country',\n        'billing_address_city',\n        'billing_address_address1',\n        'billing_address_state',\n        'billing_address_postal_code',\n        // Products\n        'product_name',\n        'product_id',\n        'product_price',\n        'product_price_discount',\n        'product_weight',\n        'product_depth',\n        'product_width',\n        'product_height',\n        'variant_name_1',\n        'variant_value_1',\n        'variant_name_2',\n        'variant_value_2',\n        'variant_name_3',\n        'variant_value_3',\n        'variant_name_4',\n        'variant_value_4',\n        'variant_name_5',\n        'variant_value_5'\n      ]\n\n      // var fields = Object.keys(json[0]);\n      var fields = order_fields\n\n      var csv = json.map(function(row) {\n        return fields.map(function(fieldName) {\n          return JSON.stringify(row[fieldName] || '')\n        })\n      })\n      csv.unshift(fields) // add header column\n      return csv.join('\\r\\n')\n    }\n\n    scope.downloadCSV = function(array_to_download) {\n      // Here we will push order lines and product lines\n      var to_transform = []\n\n      // For each order we add\n      // order id\n      array_to_download.forEach(function(order) {\n        var order_data = {\n          'items_total': order.items_total,\n          'shipping_total': order.shipping_total,\n          'taxes_total': order.taxes_total,\n          'total': order.total,\n          'created_at': new Date(order.created_at),\n          'status': order.status,\n          'id': order.id\n        }\n\n        // Adding flattened shipping address\n        for (var ks in order.shipping_address) {\n          order_data['shipping_address_' + ks] = order.shipping_address[ks]\n        }\n        for (var kb in order.billing_address) {\n          order_data['billing_address_' + kb] = order.billing_address[kb]\n        }\n\n        to_transform.push(order_data)\n\n        // Ora per ogni prodotto aggiungo una riga, prima per devo estendere le chiavi dell'ordine\n        var product_props = [\n          'name',\n          'id',\n          'price',\n          'price_discount',\n          'weight',\n          'depth',\n          'width',\n          'height'\n        ]\n        order.products.forEach(function(product) {\n          // Prima prendiamo i dati del parent\n          // Poi, se ha varianti\n          // prendiamo i dati di variante che sovrascrivono quelli del parent\n          // (ad esempio un price diverso perch la maglietta verde costa diverso)\n          // e poi prendiamo le propriet strutturali della variante e le assegnamo\n          // alloggetto in forma di variant_name_1 variant_value_1\n\n          var prod_data = {\n\n          }\n          product_props.forEach(function(prop) {\n              prod_data['product_' + prop] = product[prop]\n            })\n            // Ho aggiunto le propriet di base, ora devo aggiungere le varianti\n            // solo se il prodotto le ha.\n\n          if (product.has_variants === true) {\n            // Gli attributi base, possono essere sovrascritti\n            product_props.forEach(function(prop) {\n                if (product.variant.hasOwnProperty(prop)) {\n                  prod_data['product_' + prop] = product.variant[prop]\n                }\n              })\n              // Gli attributi varianti\n            var variants_counter = 1\n            for (var variant_name in product.variantsDefinition) {\n              prod_data['variant_name_' + variants_counter] = variant_name\n              prod_data['variant_value_' + variants_counter] = product.variant[variant_name]\n              variants_counter++\n            }\n          }\n\n          to_transform.push(prod_data)\n        })\n      })\n\n      buildDownload(to_transform)\n    }\n\n    function buildDownload(data) {\n      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + jsonToCsv(data))\n      var link = document.createElement('a')\n      link.setAttribute('href', encodedUri)\n      link.setAttribute('download', 'exported_orders.csv')\n      document.body.appendChild(link) // Required for FF\n\n      link.click() // This will download the data file named \"my_data.csv\".\n    }\n\n    scope.nullOrUndefined = function(value) {\n      return (value === null || typeof value === 'undefined')\n    }\n\n\n    scope.loadPage = function(page_number) {\n      scope.query.page = Number(page_number)\n      return scope.loadData(scope.query)\n    }\n\n    scope.loadData = function(query) {\n      if (!query) {\n        query = scope.query\n      }\n\n\n\n      return $marketcloud.orders.list(query)\n        .then(function(response) {\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n\n          scope.orders = response.data.data;\n\n          scope.orders.forEach(setPaidFlag)\n\n          // This little trick allows us to get back to the latest state of the view when we hit a back button.\n          window.history.pushState(scope.query, \"List orders\", '#/orders?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query)));\n        })\n        .catch(function(error) {\n          console.log(error);\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n\n    scope.deleteOrder = function(order) {\n      notie.confirm('Delete order?<p>Deleting the order, inventory quantities will be re-assigned.</p>', 'Delete', 'Cancel', function() {\n        $marketcloud.orders.delete(order.id)\n          .then(function() {\n            notie.alert(1, 'Order deleted succesfully', 1)\n            scope.loadPage(scope.pagination.currentPage)\n          })\n          .catch(function() {\n            notie.alert(3, 'An error has occurred, order not deleted.', 1)\n          })\n      })\n    }\n\n\n    /* FILTERS */\n    scope.filters = [];\n\n    var notFilters = [\n      'per_page',\n      'page',\n      'sort_by',\n      'sort_order'\n    ]\n\n    function isOperator(key) {\n      return notFilters.indexOf(key) >= 0\n    };\n\n\n    for (var k in scope.query) {\n      if (!isOperator(k)) {\n        console.log(k + \" is not an operator\")\n        scope.filters.push({\n          name: k,\n          value: scope.query[k]\n        })\n      }\n    }\n\n    scope.applyFilters = function() {\n\n      scope.filters.forEach(function(filter) {\n        scope.query[filter.name] = filter.value;\n      })\n      scope.loadData();\n    }\n\n    scope.saveNewFilterAndApply = function() {\n\n      scope.addFilter(scope.newFilter);\n\n      scope.newFilter = {\n        name: '',\n        value: null\n      }\n      $('#singleFilterModal').modal('hide');\n    }\n\n    scope.addFilter = function(key,value) {\n      \n      if (\"object\" === typeof key)\n        this.filters.push(key);\n      else if (\"string\" === typeof key)\n        this.filters.push({\n          name : key,\n          value : value\n        })\n      else \n        throw new Error(\"addFilter(Filter: f) or addFilter(String: fName, Any: fValue)\")\n\n      scope.applyFilters();\n    }\n\n    /*\n     *  @param {Number} index The position of the filter to remove\n     *  @param {Boolean} applyToQuery Wether to call applyFilters() or not\n     */\n    scope.removeFilter = function(index, applyToQuery) {\n      if (typeof applyToQuery === 'undefined') {\n        applyToQuery = true\n      }\n\n      var filterToRemove = scope.filters.splice(index, 1)\n\n      filterToRemove = filterToRemove[0]\n\n      delete scope.query[filterToRemove.name]\n\n      if (applyToQuery === true) {\n        scope.applyFilters()\n      }\n    }\n\n\n    // Removes a filter given its name in the filters array\n    scope.removeFilterByName = function(name) {\n      scope.filters = scope.filters.filter(function(filter) {\n        return filter.name !== name;\n      })\n\n      delete scope.query[name];\n\n      scope.applyFilters();\n\n    }\n\n    scope.removeFilterByPosition = function(pos){\n      scope.filters.splice(pos,1);\n      scope.applyFilters();\n    }\n\n\n    scope.setQueryParam = function(key,value) {\n      scope.query[key] = value;\n      scope.loadData();\n    }\n\n    scope.deleteQueryParam = function(key) {\n      delete scope.query[key];\n      scope.loadData();\n    }    \n\n\n    scope.sortingAttributes = [\n      'id',\n      'status',\n      'created_at',\n      'total',\n      'items_total',\n      'shipping_total',\n      'taxes_total',\n      'coupon_total',\n      'promotion_total'\n    ]\n\n    scope.applySorting = function() {\n      scope.loadData()\n        //$(\"#sortingModal\").modal('hide');\n    }\n\n\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.list.js","var app = angular.module('DataDashboard')\napp.controller('NewOrderController', ['$scope', '$marketcloud',\n  function (scope, marketcloud) {\n    scope.order = {\n      items: []\n    }\n\n    scope.products = [\n\t\t\t{name: 'Scolapasta', price: 12},\n\t\t\t{name: 'Cucchiaio', price: 1},\n\t\t\t{name: 'Forchetta', price: 2}\n    ]\n\n    scope.saveOrder = function () {\n      console.log('Saving this order', scope.order)\n    }\n\n\t\t\t// Shows/hide modal for products\n    scope.toggleProductsModal = function () {\n      console.log('Showing products modal')\n      $('#itemsModal').modal('show')\n    }\n\n\t\t\t// loads some products from backend\n    scope.loadInventory = function (query) {\n      console.log('Loading inventory', query)\n    }\n\n\t\t\t// Adds a line item to the order\n    scope.addItemToOrder = function (item) {\n      console.log('Item added to order', item)\n    }\n\n\t\t\t// loads some addresses from backend\n    scope.loadAddresses = function (query) {\n      console.log('Loading addresses', query)\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.new.js","var app = angular.module('DataDashboard')\napp.controller('OrderController', ['$scope', '$http', 'order', 'shippingMethods', '$marketcloud', 'paymentMethods', 'Countries',\n  function (scope, http, order, shippingMethods, $marketcloud, paymentMethods, countries) {\n    scope.paymentMethods = paymentMethods.data.data\n    scope.countries = countries\n    // Data fetched by the resolve\n    scope.order = order.data.data\n\n    scope.addressToEdit = {}\n\n    // List of shipping methods\n    // @property Array<Object>\n    scope.shippingMethods = shippingMethods.data.data\n\n    // New shipment\n    scope.newShipment = {\n      tracking_code: null,\n      tracking_link: null,\n      date: new Date(),\n      delivery_date: new Date(),\n      method: null,\n      description: null\n    }\n    scope.saveShipmentAndFullfill = false\n\n    // New payment\n    scope.newPayment = {\n      method: 'Manual',\n      description: null,\n      amount: scope.order.total\n    }\n    scope.savePaymentAndSetToProcessing = false\n\n    scope.payments = []\n\n    scope.showEditAddressDialog = function (addressToEdit) {\n      scope.addressToEdit = addressToEdit\n      $('#editAddressModal').modal('show')\n    }\n\n    scope.saveAddress = function () {\n      $marketcloud.orders.update(scope.order.id, {\n        billing_address: scope.order.billing_address,\n        shipping_address: scope.order.shipping_address\n      })\n          .then(function () {\n            notie.alert(1, 'Order successfully updated', 1.5)\n            $('#editAddressModal').modal('hide')\n          })\n          .catch(function () {\n            notie.alert(2, 'An error has occurred, order not updated', 1.5)\n            $('#editAddressModal').modal('hide')\n          })\n    }\n      /* scope.order = null;\n\n      scope.loadingData = true; */\n\n    // Checking shipment dates\n    function assignDataToShipments () {\n      if (Array.isArray(scope.order.shipments)) {\n        scope.order.shipments = scope.order.shipments.map(function (shipment) {\n          if (shipment.date) {\n            shipment.date = moment(shipment.date)\n          }\n          if (shipment.delivery_date) {\n            shipment.delivery_date = moment(shipment.delivery_date)\n          }\n\n          if (shipment.method) {\n            scope.shippingMethods.forEach(function (method) {\n              if (shipment.method.id === method.id) {\n                shipment.method = method\n              }\n            })\n          }\n\n          return shipment\n        })\n      }\n    }\n\n    assignDataToShipments()\n\n    scope.refundedProducts = []\n\n    if (scope.order.refunds) {\n      scope.order.refunds.forEach(function (refund) {\n        refund.line_items.forEach(function (item) {\n          scope.refundedProducts.push(item)\n        })\n      })\n    }\n\n    function getLineItemPrice (lineItem) {\n      if (lineItem.variant) {\n        if (lineItem.variant.price_discount) { return lineItem.variant.price_discount * lineItem.quantity } else { return lineItem.variant.price * lineItem.quantity }\n      } else {\n        if (lineItem.price_discount) { return lineItem.price_discount * lineItem.quantity } else { return lineItem.price * lineItem.quantity }\n      }\n    }\n\n    function getLineItemTaxes (lineItem) {\n      var price = getLineItemPrice(lineItem)\n      var tax_rate = lineItem.applied_tax_rate\n\n      return ((tax_rate / 100) * price) * lineItem.quantity\n    }\n\n    scope.showRefundModal = function () {\n      scope.newRefund = {\n        created_at: new Date(),\n        reason: '',\n        line_items: [],\n        items_total: 0,\n        taxes_total: 0,\n        total: 0,\n        restock_refunded_items: false\n      }\n\n      scope.newRefund.line_items = scope.order.products.map(function (product) {\n        var p = angular.copy(product)\n        p.quantityInOrder = product.quantity\n\n        p.product_id = product.id\n\n        p.variant_id = 0\n\n        if (p.hasOwnProperty('variant')) { p.variant_id = p.variant.id }\n\n        return p\n      })\n\n      scope.updateNewRefund()\n\n      $('#RefundModal').modal('show')\n    }\n\n    scope.saveRefund = function () {\n      scope.refundErrorMessage = ''\n\n      scope.newRefund.line_items = scope.newRefund.line_items.filter(function (item) {\n        return item.quantity > 0\n      })\n\n      if (scope.newRefund.total <= 0) {\n        scope.refundErrorMessage = 'Refund total must be greater than zero.'\n        return\n      }\n\n      $marketcloud.refunds.save(scope.order.id, scope.newRefund)\n        .then(function (response) {\n          $('#RefundModal').modal('hide')\n          window.Alert.success({\n            message: 'Refund saved successfully!'\n          })\n        })\n        .catch(function (response) {\n          scope.refundErrorMessage = 'Unable to create refund. Please review the inserted data.'\n        })\n    }\n\n    scope.updateNewRefund = function () {\n      scope.newRefund.items_total = 0\n      scope.newRefund.taxes_total = 0\n\n      scope.newRefund.line_items.forEach(function (item) {\n        scope.newRefund.items_total += getLineItemPrice(item)\n        scope.newRefund.taxes_total += getLineItemTaxes(item)\n      })\n\n      scope.newRefund.total = scope.newRefund.items_total + scope.newRefund.taxes_total\n      console.log('updateNewRefund ' + scope.newRefund.total)\n    }\n\n    scope.getVariantStyle = function (i) {\n      var r = [{\n        'color': '#c0392b'\n      }, {\n        'color': '#27ae60'\n      }, {\n        'color': '#2c3e50'\n      }, {\n        'color': '#d35400'\n      }]\n      return r[i % r.length]\n    }\n    scope.getVariantClass = function (i) {\n      var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger']\n      return 'label solid ' + (classes[i % classes.length])\n    }\n    scope.getSelectedVariantValues = function (p) {\n      var temp = {}\n      Object.keys(p.variantsDefinition)\n        .forEach(function (k) {\n          temp[k] = p.variant[k]\n        })\n      return temp\n    }\n\n    scope.getSelectedVariantKeysAndValues = function (p) {\n      var temp = {}\n      Object.keys(p.variantsDefinition)\n        .forEach(function (k) {\n          temp[k] = k + ': ' + String(p.variant[k])\n        })\n      return temp\n    }\n\n    delete scope.order['items']\n\n    scope.updateStatus = function (status) {\n      scope.order.status = status\n      $marketcloud.orders.update(scope.order.id, {\n        status: scope.order.status\n      })\n        .then(function (response) {\n          notie.alert(1, 'Order successfully updated', 1)\n        })\n        .catch(function (response) {\n          notie.alert(2, 'An error has occurred. Please try again.', 1)\n        })\n    }\n\n    // Util\n    scope.timestampToDate = function (t, showHours) {\n      var a = new Date(t)\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n      var the_date = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\n\n      if (showHours === true) {\n        the_date += ' at ' + a.getHours() + ':' + a.getMinutes()\n      }\n\n      return the_date\n    }\n\n    function syntaxHighlight (json) {\n      if (typeof json !== 'string') {\n        json = JSON.stringify(json, null, 2)\n      }\n\n      json = json.replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(new RegExp('\\n', 'g'), '<br>')\n        .replace(new RegExp('\\t'), '&nbsp;&nbsp;')\n      return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\n        var cls = 'number'\n        if (/^\"/.test(match)) {\n          if (/:$/.test(match)) {\n            cls = 'key'\n          } else {\n            cls = 'string'\n          }\n        } else if (/true|false/.test(match)) {\n          cls = 'boolean'\n        } else if (/null/.test(match)) {\n          cls = 'null'\n        }\n        return '<span class=\"' + cls + '\">' + match + '</span>'\n      })\n    }\n    scope.inspectObject = function (p) {\n      scope.json = syntaxHighlight(p)\n      $('#JsonInspector').modal('show')\n    }\n\n    scope.round = function (numb) {\n      return Math.round(numb * 1000) / 1000\n    }\n\n    scope.fullfill = function () {\n      // Sets the order to completed\n      notie.confirm('This will set the order as completed, and eventually send notifications. Confirm?',\n        'Confirm',\n        'Cancel',\n        function () {\n          $marketcloud.orders.update(scope.order.id, {\n            status: 'completed'\n          })\n            .then(function (response) {\n              scope.order.status = 'completed'\n              notie.alert(1, 'Order successfully updated', 1)\n            })\n            .catch(function (response) {\n              notie.alert(2, 'An error has occurred. Please try again.', 1)\n            })\n        })\n    }\n\n    scope.setToProcessing = function () {\n      // Sets the order to processing\n      window.Alert.confirm({\n        title: 'Confirm order status update?',\n        message: 'This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\n        onConfirm: function () {\n          $marketcloud.orders.update(scope.order.id, {\n            status: 'processing'\n          })\n              .then(function (response) {\n                scope.order.status = 'processing'\n                window.Alert.success({\n                  message: 'Order successfully updated'\n                })\n              })\n              .catch(function (response) {\n                window.Alert.error({})\n              })\n        }\n      })\n        /*      notie.confirm('This will set the order status to \"processing\", and eventually send notifications to the customer. Confirm?',\n                'Confirm',\n                'Cancel',\n                function() {\n                  $marketcloud.orders.update(scope.order.id, {\n                      status: 'processing'\n                    })\n                    .then(function(response) {\n                      scope.order.status = 'processing'\n                      notie.alert(1, 'Order successfully updated', 1)\n                    })\n                    .catch(function(response) {\n                      notie.alert(2, 'An error has occurred. Please try again.', 1)\n                    })\n                }) */\n    }\n\n    scope.saveShipment = function () {\n      // Removing all validation feedback from the shipment\n      $('#shipmentModal .has-error').removeClass('has-error')\n      $('#shipmentModal .error').remove()\n\n      // Validating the new shipment\n      if (scope.newShipment.method === null) {\n        $('select[ng-model=\"newShipment.method\"]').parent().addClass('has-error')\n        $('select[ng-model=\"newShipment.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'))\n        return\n      }\n\n      if (scope.newShipment.date) { scope.newShipment.date = new Date(scope.newShipment.date) }\n\n      if (scope.newShipment.delivery_date) { scope.newShipment.delivery_date = new Date(scope.newShipment.delivery_date) }\n\n      var shipmentToSave = angular.copy(scope.newShipment)\n\n      // Saving the new shipment\n      http({\n        method: 'POST',\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments',\n        data: shipmentToSave,\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n        .then(function (response) {\n          // Resetting the shipment\n          scope.newShipment = {\n            tracking_code: null,\n            tracking_link: null,\n            date: new Date(),\n            delivery_date: new Date(),\n            method: null,\n            description: null\n          }\n          if (scope.order.shipments) {\n            scope.order.shipments.push(shipmentToSave)\n          } else {\n            scope.order.shipments = [shipmentToSave]\n          }\n\n          $('#shipmentModal').modal('hide')\n\n          if (scope.saveShipmentAndFullfill === true) {\n            scope.fullfill()\n          }\n\n          assignDataToShipments()\n        })\n        .catch(function (response) {\n          // $('#shipmentModal').modal('hide')\n          notie.alert(2, 'An error has occurred, please check your input', 1.5)\n        })\n    }\n\n    scope.updateShipment = function () {\n      // Removing all validation feedback from the shipment\n      $('#esitShipmentModal .has-error').removeClass('has-error')\n      $('#editShipmentModal .error').remove()\n\n      // Validating the new shipment\n      if (scope.shipmentToEdit.method === null) {\n        $('select[ng-model=\"shipmentToEdit.method\"]').parent().addClass('has-error')\n        $('select[ng-model=\"shipmentToEdit.method\"]').parent().append($('<div class=\"text-danger\">This field is required</div>'))\n        return\n      }\n\n      var shipmentToSave = angular.copy(scope.shipmentToEdit)\n\n      if (shipmentToSave.date && shipmentToSave.date.toDate) {\n        shipmentToSave.date = shipmentToSave.date.toDate()\n        // scope.shipmentToEdit.date = new Date(scope.shipmentToEdit.date)\n      }\n\n      if (shipmentToSave.delivery_date && shipmentToSave.delivery_date.toDate) {\n        // scope.shipmentToEdit.delivery_date = new Date(scope.shipmentToEdit.delivery_date)\n        shipmentToSave.delivery_date = shipmentToSave.delivery_date.toDate()\n      }\n\n      http({\n        method: 'PUT',\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/shipments/' + scope.shipmentToEditIndex,\n        data: shipmentToSave,\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n      .then(function (response) {\n        scope.shipmentToEdit = {}\n        $('#editShipmentModal').modal('hide')\n        notie.alert(1, 'Shipment updated', 1.5)\n      })\n      .catch(function (error) {\n        console.log(error)\n        notie.alert(2, 'An error has occurred, please check your input', 1.5)\n      })\n    }\n\n    scope.showShipmentModal = function () {\n      $('#shipmentModal').modal('show')\n    }\n\n    scope.showEditShipmentModal = function (shipment, index) {\n      scope.shipmentToEdit = shipment\n      scope.shipmentToEditIndex = index\n\n      $('#editShipmentModal').modal('show')\n    }\n\n    scope.showPaymentModal = function () {\n      $('#paymentModal').modal('show')\n    }\n\n    scope.orderToCSV = function () {\n\n    }\n\n    scope.createPDFInvoice = function () {\n      if (!scope.order.invoice_id) { return console.log('Order withouth invoice') }\n\n      http({\n        method: 'POST',\n        url: window.API_BASE_URL + '/invoices/' + scope.order.invoice_id + '/pdf',\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n      .then(function (response) {\n        var invoiceUrl = response.data.data.url\n        Object.assign(document.createElement('a'), { target: '_blank', href: invoiceUrl}).click()\n      })\n      .catch(function (error) {\n        alert('error')\n        console.log(error)\n      })\n    }\n\n    scope.createPDFCreditNote = function (refund) {\n      http({\n        method: 'POST',\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/refunds/' + refund.id + '/pdf',\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n      .then(function (response) {\n        var refundUrl = response.data.data.url\n        Object.assign(document.createElement('a'), { target: '_blank', href: refundUrl}).click()\n      })\n      .catch(function (error) {\n        alert('error')\n        console.log(error)\n      })\n    }\n\n    scope.savePayment = function () {\n      http({\n        method: 'POST',\n        url: window.API_BASE_URL + '/orders/' + scope.order.id + '/payments',\n        data: scope.newPayment,\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n        .then(function (response) {\n          $('#paymentModal').modal('hide')\n          notie.alert(1, 'Payment saved', 1.5)\n            // var orderPayments = response.data.data.payments\n          scope.order.payments = response.data.data.payments\n\n          scope.newPayment = {}\n\n          if (scope.savePaymentAndSetToProcessing === true) {\n            scope.setToProcessing()\n          }\n        })\n        .catch(function (response) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n          $('#paymentModal').modal('hide')\n        })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/orders/orders.view.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditProductTranslationsController', EditProductTranslationsController)\n\n  EditProductTranslationsController.$inject = [\n    '$scope',\n    '$marketcloud',\n    'product',\n    '$http',\n    '$application',\n    '$location',\n    'LocalesFactory'\n  ]\n\n  function EditProductTranslationsController(scope, $marketcloud, product, $http, $application, $location, locales) {\n    // If the current application does not have additional locales\n    // we redirect the user to the locales settings.\n    //\n    // We might want to prompt the user and ask them\n    // Go to settings or stay in the previous page?\n    if ($application.getAvailableLocaleCodes().length === 0) {\n      notie.alert(2, 'This store has no additional locale. Please add a locale first.', 2)\n      return $location.path('/system/localization')\n    }\n\n    // Injecting resolve data into the controller\n    scope.product = product.data.data\n\n    // This is fetched from the app's config\n    scope.availableLocales = []\n\n    // mocking the retrieval of locales\n    // THese are ALL the locals available in the world\n    scope.locales = locales\n\n    // available locales\n    // Fetched from app settings,\n    // THese are the locals that the store owner wants for this app.\n    scope.availableLocales = []\n\n    scope.availableLocales = $application.get().locales.split(',')\n      .map(function(code) {\n        return scope.locales[code]\n      })\n\n    // Which locale we are currently editing\n    // We already know that we have at least 1 locale\n    scope.currentLocale = scope.availableLocales[0]\n\n    // This will hold custom properties for further processing\n    scope.customPropertiesData = {}\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Product.getPropertyNames()\n\n    // Should we be able to edit the slug? this is a on/off\n    scope.unsafeSlug = false\n\n    coreProperties.push(\n      'id',\n      'variants',\n      'variantsDefinition',\n      'display_price_discount',\n      'display_price',\n      'has_variants', // for legacy reasons\n      'type',\n      'media',\n      'tax_id',\n      'locales',\n      'seo',\n      'requires_shipping',\n      'product_id',\n      'variant_id',\n      'application_id')\n\n    for (var k in scope.product) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.product[k]\n        delete scope.product[k]\n      }\n    }\n\n    // Handling variants\n    // The locale will look like this\n    /*\n      {\n        locales : {\n          \"it-IT\" : {\n            ..\n            variants : {\n              colors : {\n                label : \"colori\",\n                values: {\n                  \"red\"  : \"rosso\",\n                  \"yellow\" : \"giallo\"\n                  ...\n                }\n              }\n            }\n          }\n        }\n      }\n    */\n\n    if (product.type === 'product_with_variants') {\n      for (var localeName in scope.product.locales) {\n        var locale = scope.product.locales[localeName]\n        if (!locale.hasOwnProperty('variants')) {\n          // Let's initialize the variants in the locale!\n          locale.variants = {}\n\n          for (v_name in scope.product.variantsDefinition) {\n            // We want to initialize the values translation table\n            var variant_values_translations = {}\n            var variant_values = scope.product.variantsDefinition[v_name]\n            variant_values.forEach(function(v) {\n              variant_values_translations[v] = ''\n            })\n            locale.variants[v_name] = {\n              label: '',\n              values: variant_values_translations\n            }\n          }\n        }\n      }\n    }\n\n    // Init locales object\n    if (!scope.product.hasOwnProperty('locales')) {\n      scope.product.locales = {}\n    }\n\n    scope.customPropertiesDataLocales = {}\n\n    // Checking that the product has initialized every locale sub object\n    scope.availableLocales.forEach(function(locale) {\n      // Se il prodotto.locales non ha il locale, creo l'oggetto\n      if (!scope.product.locales.hasOwnProperty(locale.code)) {\n        scope.product.locales[locale.code] = {}\n      }\n\n      // Initializing the container for custom properties translations\n      scope.customPropertiesDataLocales[locale.code] = {}\n\n      for (var k in scope.customPropertiesData) {\n        scope.customPropertiesDataLocales[locale.code][k] = getTranslatedValueForCustomProperty(k, locale)\n      }\n\n      function getTranslatedValueForCustomProperty(k, locale) {\n        if (typeof scope.product.locales[locale.code][k] !== 'undefined') {\n          return scope.product.locales[locale.code][k]\n        }\n\n        return {\n          value: scope.customPropertiesData[k],\n          label: k\n        }\n      }\n    })\n\n    scope.getFlagClassName = function() {\n      return 'flag-icon-' + scope.currentLocale.code.slice(-2).toLocaleLowerCase()\n    }\n\n    scope.isRichText = function(str) {\n      if (typeof str !== 'string')\n        return false;\n\n      var doc = new DOMParser().parseFromString(str, \"text/html\");\n      return [].slice.call(doc.body.childNodes).some(function(node) {\n        return node.nodeType === 1\n      } );\n    }\n\n    function getSlugFromString(v) {\n      return v\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n\n    scope.updateSlug = function() {\n      scope.product.locales[scope.currentLocale.code].slug = getSlugFromString(scope.product.locales[scope.currentLocale.code].name)\n    }\n\n    scope.updateTranslations = function() {\n      var payload = {\n        locales: angular.copy(scope.product.locales)\n      }\n\n      for (var locale in scope.customPropertiesDataLocales) {\n        // Custom properties of locale \"l\"\n        var customPropertiesForSingleLocale = scope.customPropertiesDataLocales[locale]\n\n        for (var k in customPropertiesForSingleLocale) {\n          payload.locales[locale][k] = customPropertiesForSingleLocale[k]\n        }\n      }\n\n      $marketcloud.products.update(scope.product.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'All updates have been saved.', 2)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.typeof = function(y) {\n      return (typeof y)\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/productTranslations.controller.js","angular.module('DataDashboard').controller('EditBundledProductController', ['$scope', '$marketcloud', 'product', '$http',\n  function (scope, $marketcloud, product, $http) {\n    scope.customPropertiesData = {}\n\n\t\t\t// Injecting resolve data into the controller\n    scope.product = product.data.data\n\n    if (!scope.product.hasOwnProperty()) {\n      var product_ids = []\n    }\n\n    scope.product.lists.forEach(function (list) {\n      var this_list_ids = list.items.map(function (item) {\n        return item.product_id\n      })\n      product_ids = product_ids.concat(this_list_ids)\n    })\n\n    scope.addProductsCardConfig = {\n      additionalFields: []\n    }\n    scope.addNewList = function () {\n      scope.product.lists.unshift({\n        name: '',\n        required: false,\n        items: []\n      })\n    }\n\n    scope.removeList = function (index) {\n      scope.product.lists.splice(index, 1)\n    }\n\n    scope.showAddProductsToListModal = function (list) {\n      scope.currentList = list\n      $('#addProductsToListModal').modal('show')\n    }\n\n    $marketcloud.products.list({\n      id: product_ids.join(',')\n    })\n\t\t\t.then(function (response) {\n  var p_map = {}\n\n  response.data.data.forEach(function (i) {\n    p_map[i.id] = i\n  })\n\n\t\t\t\t// We fetch the products data, then we must add the properties\n\t\t\t\t// related to them being in the bundled product\n  scope.product.lists.map(function (opt) {\n    opt.items = opt.items.map(function (item) {\n      return p_map[item.product_id]\n    })\n    return opt\n  })\n})\n\t\t\t.catch(function (error) {\n  notie.alert(3, 'An error has occurred', 1.5)\n})\n\n\t\t\t// mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Product.getPropertyNames()\n    coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'lists')\n    for (var k in scope.product) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.product[k]\n        delete scope.product[k]\n      }\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    scope.categories = []\n\n    $marketcloud.categories.list()\n\t\t\t\t.then(function (response) {\n  scope.categories = response.data.data\n})\n\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading categories', 1.5)\n})\n\n    scope.brands = []\n\t\t\t// Loading brands\n\n    $marketcloud.brands.list()\n\t\t\t\t.then(function (response) {\n  scope.brands = response.data.data\n})\n\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\n})\n\n    scope.newAttribute = {\n      name: null,\n      value: null,\n      type: null\n    }\n    scope.newAttribute.type = 'string'\n    scope.availableTypes = [\n\t\t\t\t{name: 'String', value: 'string'},\n\t\t\t\t{name: 'Number', value: 'number'},\n\t\t\t\t{name: 'Boolean', value: 'boolean'}\n    ]\n\n    scope.filterNotNullProperties = function (item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.updateProduct = function () {\n      var update = angular.copy(scope.product)\n\t\t\t\t// let's re-assemble the product first.\n      for (var k in scope.customPropertiesData) {\n        update[k] = scope.customPropertiesData[k]\n      }\n\n      update.lists.forEach(function (list) {\n        list.items = list.items.map(function (item) {\n          return {product_id: item.id}\n        })\n      })\n\n      $marketcloud.products.update(update.id, update)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Update Succeded', 1.5)\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'Update failed', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/bundledProduct.edit.js","\nangular.module('DataDashboard').controller('NewBundledProductController', [\n  '$scope', '$http', '$location', '$marketcloud',\n  function (scope, $http, location, $marketcloud) {\n    scope.categories = []\n    scope.catch = null\n    scope.newCategory = {}\n    scope.brands = []\n    scope.newBrand = {}\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n    scope.loadCategories = function () {\n      $marketcloud.categories.list({})\n\t\t\t\t\t.then(function (response) {\n  scope.categories = response.data.data\n})\n\t\t\t\t\t.catch(function () {\n  console.log('An error has occurred while loading categories')\n})\n    }\n\n\t\t\t// Initializing the categories array\n    scope.loadCategories()\n\n    scope.saveCategory = function () {\n      $marketcloud.categories.save(scope.newCategory)\n\t\t\t\t\t.then(function (response) {\n  $('#newCategoryModal').modal('hide')\n  scope.categories.push(scope.newCategory)\n  scope.newCategory = {}\n})\n\t\t\t\t\t.catch(function (response) {\n  $('#newCategoryModal').hide()\n  notie.alert(3, 'An error has occurred. Category not saved', 1)\n})\n    }\n\n    scope.loadBrands = function () {\n      $marketcloud.brands.list({})\n\t\t\t\t\t.then(function (response) {\n  scope.brands = response.data.data\n})\n\t\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\n})\n    }\n\t\t\t// Initializing the brands array\n    scope.loadBrands()\n\n    scope.saveBrand = function () {\n      $marketcloud.brands.save(scope.newBrand)\n\t\t\t\t\t.then(function (response) {\n  $('#newBrandModal').modal('hide')\n  scope.brands.push(scope.newBrand)\n  scope.newBrand = {}\n})\n\t\t\t\t\t.catch(function (response) {\n  $('#newBrandModal').hide()\n  notie.alert(3, 'An error has occurred. Brand not saved', 1)\n})\n    }\n\n    scope.addProductsCardConfig = {\n      additionalFields: []\n    }\n    scope.addNewList = function () {\n      scope.product.lists.unshift({\n        name: '',\n        required: false,\n        items: []\n      })\n    }\n\n    scope.removeList = function (index) {\n      scope.product.lists.splice(index, 1)\n    }\n\n    scope.showAddProductsToListModal = function (list) {\n      scope.currentList = list\n      $('#addProductsToListModal').modal('show')\n    }\n\n    scope.product = {\n      type: 'bundled_product',\n      name: '',\n      description: '',\n      stock_type: 'status',\n      stock_status: 'in_stock',\n      images: [],\n      media: [],\n      has_variants: false,\n      published: true,\n      lists: []\n    }\n\n    scope.productError = null\n    scope.newCustomProperty = {}\n    scope.customPropertiesData = {}\n\n\t\t\t// This contains validation Errors\n    scope.Forms = {}\n\n    scope.Forms.newCustomProperty = {\n      name: null,\n      value: null\n    }\n\n\t\t\t// Array of new properties's names (strings)\n    scope.customPropertiesNames = []\n\n    scope.hideErrors = function () {\n      scope.catch = null\n      scope.catchField = null\n    }\n\n    scope.saveProduct = function (skipSaving) {\n      for (var k in scope.product) {\n        if (scope.product[k] === null) {\n          delete scope.product[k]\n        }\n      }\n\n      scope.hideErrors()\n\n\t\t\t\t// Custom properties cannot be validated through Schematic.\n      var props_to_validate = {}\n      var known_props = Models.GroupedProduct.getPropertyNames()\n      for (var k in scope.product) {\n        if (known_props.indexOf(k) > -1) { props_to_validate[k] = scope.product[k] }\n      }\n\n      for (var k in scope.customPropertiesData) {\n        scope.product[k] = scope.customPropertiesData[k]\n      }\n\n      for (var key in scope.product) {\n        if (scope.product[key] === null) {\n          delete scope.product[key]\n        }\n      }\n\n      var to_save = angular.copy(scope.product)\n\n      for (var k in to_save.lists) {\n        to_save.lists[k].items = to_save.lists[k].items.map(function (item) {\n          return {product_id: item.id}\n        })\n      }\n\n      if (skipSaving === true) { return }\n      $marketcloud.products.save(to_save)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Product saved', 1.5)\n  location.path('/products')\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(2, 'An error has occurred. Product not saved', 1)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/bundledProduct.new.js","angular.module('DataDashboard').controller('EditConfigurableProductController', ['$scope', '$marketcloud', 'product', '$http',\n  function (scope, $marketcloud, product, $http) {\n    scope.customPropertiesData = {}\n\n\t\t\t// Injecting resolve data into the controller\n    scope.product = product.data.data\n\n    if (!scope.product.hasOwnProperty()) {\n      var product_ids = []\n    }\n\n    scope.product.options.forEach(function (option) {\n      var this_option_ids = option.items.map(function (item) {\n        return item.product_id\n      })\n      product_ids = product_ids.concat(this_option_ids)\n    })\n\n    scope.addProductsCardConfig = {\n      additionalFields: []\n    }\n    scope.addNewOption = function () {\n      scope.product.options.unshift({\n        name: '',\n        required: false,\n        items: []\n      })\n    }\n\n    scope.removeOption = function (index) {\n      scope.product.options.splice(index, 1)\n    }\n\n    scope.showAddProductsToOptionModal = function (option) {\n      scope.currentOption = option\n      $('#addProductsToOptionModal').modal('show')\n    }\n\n    $marketcloud.products.list({\n      id: product_ids.join(',')\n    })\n\t\t\t.then(function (response) {\n  var p_map = {}\n\n  response.data.data.forEach(function (i) {\n    p_map[i.id] = i\n  })\n\n\t\t\t\t// We fetch the products data, then we must add the properties\n\t\t\t\t// related to them being in the bundled product\n  scope.product.options.map(function (opt) {\n    opt.items = opt.items.map(function (item) {\n      return p_map[item.product_id]\n    })\n    return opt\n  })\n})\n\t\t\t.catch(function (error) {\n  notie.alert(3, 'An error has occurred', 1.5)\n})\n\n\t\t\t// mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Product.getPropertyNames()\n    coreProperties.push('product_id', 'variant_id', 'display_price', 'display_price_discount', 'options')\n    for (var k in scope.product) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.product[k]\n        delete scope.product[k]\n      }\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    scope.categories = []\n\n    $marketcloud.categories.list()\n\t\t\t\t.then(function (response) {\n  scope.categories = response.data.data\n})\n\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading categories', 1.5)\n})\n\n    scope.brands = []\n\t\t\t// Loading brands\n\n    $marketcloud.brands.list()\n\t\t\t\t.then(function (response) {\n  scope.brands = response.data.data\n})\n\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\n})\n\n    scope.newAttribute = {\n      name: null,\n      value: null,\n      type: null\n    }\n    scope.newAttribute.type = 'string'\n    scope.availableTypes = [\n\t\t\t\t{name: 'String', value: 'string'},\n\t\t\t\t{name: 'Number', value: 'number'},\n\t\t\t\t{name: 'Boolean', value: 'boolean'}\n    ]\n\n    scope.filterNotNullProperties = function (item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.updateProduct = function () {\n      var update = angular.copy(scope.product)\n\t\t\t\t// let's re-assemble the product first.\n      for (var k in scope.customPropertiesData) {\n        update[k] = scope.customPropertiesData[k]\n      }\n\n      update.options.forEach(function (option) {\n        option.items = option.items.map(function (item) {\n          return {product_id: item.id}\n        })\n      })\n\n      $marketcloud.products.update(update.id, update)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Update Succeded', 1.5)\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'Update failed', 1.5)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/configurableProduct.edit.js","\nangular.module('DataDashboard').controller('NewConfigurableProductController', [\n  '$scope', '$http', '$location', '$marketcloud',\n  function (scope, $http, location, $marketcloud) {\n    scope.categories = []\n    scope.catch = null\n    scope.newCategory = {}\n    scope.brands = []\n    scope.newBrand = {}\n\n\t\t\t// This method must be implemented in order to\n\t\t\t// make the media manager work\n    scope.getImagesContainer = function () {\n      return scope.product.images\n    }\n\n    scope.removeImage = function (i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    function getSlugFromString (v) {\n      return\tv\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map(function (item) { return item.replace(/\\W/g, '') })\n\t\t\t\t\t\t.map(function (item) { return item.toLowerCase() })\n\t\t\t\t\t\t.join('-')\n    }\n    scope.unsafeSlug = false\n\n    scope.updateSlug = function () {\n      scope.product.slug = getSlugFromString(scope.product.name)\n    }\n\n    scope.loadCategories = function () {\n      $marketcloud.categories.list({})\n\t\t\t\t\t.then(function (response) {\n  scope.categories = response.data.data\n})\n\t\t\t\t\t.catch(function () {\n  console.log('An error has occurred while loading categories')\n})\n    }\n\n\t\t\t// Initializing the categories array\n    scope.loadCategories()\n\n    scope.saveCategory = function () {\n      $marketcloud.categories.save(scope.newCategory)\n\t\t\t\t\t.then(function (response) {\n  $('#newCategoryModal').modal('hide')\n  scope.categories.push(scope.newCategory)\n  scope.newCategory = {}\n})\n\t\t\t\t\t.catch(function (response) {\n  $('#newCategoryModal').hide()\n  notie.alert(3, 'An error has occurred. Category not saved', 1)\n})\n    }\n\n    scope.loadBrands = function () {\n      $marketcloud.brands.list({})\n\t\t\t\t\t.then(function (response) {\n  scope.brands = response.data.data\n})\n\t\t\t\t\t.catch(function () {\n  notie.alert(2, 'An error has occurred while loading brands', 1.5)\n})\n    }\n\t\t\t// Initializing the brands array\n    scope.loadBrands()\n\n    scope.saveBrand = function () {\n      $marketcloud.brands.save(scope.newBrand)\n\t\t\t\t\t.then(function (response) {\n  $('#newBrandModal').modal('hide')\n  scope.brands.push(scope.newBrand)\n  scope.newBrand = {}\n})\n\t\t\t\t\t.catch(function (response) {\n  $('#newBrandModal').hide()\n  notie.alert(3, 'An error has occurred. Brand not saved', 1)\n})\n    }\n\n    scope.addProductsCardConfig = {\n      additionalFields: []\n    }\n    scope.addNewOption = function () {\n      scope.product.options.unshift({\n        name: '',\n        required: false,\n        items: []\n      })\n    }\n\n    scope.removeOption = function (index) {\n      scope.product.options.splice(index, 1)\n    }\n\n    scope.showAddProductsToOptionModal = function (option) {\n      scope.currentOption = option\n      $('#addProductsToOptionModal').modal('show')\n    }\n\n    scope.product = {\n      type: 'configurable_product',\n      name: '',\n      description: '',\n      stock_type: 'status',\n      stock_status: 'in_stock',\n      images: [],\n      media: [],\n      has_variants: false,\n      published: true,\n      options: []\n\n    }\n\n    scope.productError = null\n    scope.newCustomProperty = {}\n    scope.customPropertiesData = {}\n\n\t\t\t// This contains validation Errors\n    scope.Forms = {}\n\n    scope.Forms.newCustomProperty = {\n      name: null,\n      value: null\n    }\n\n\t\t\t// Array of new properties's names (strings)\n    scope.customPropertiesNames = []\n\n    scope.hideErrors = function () {\n      scope.catch = null\n      scope.catchField = null\n    }\n\n    scope.saveProduct = function (skipSaving) {\n      for (var k in scope.product) {\n        if (scope.product[k] === null) {\n          delete scope.product[k]\n        }\n      }\n\n      scope.hideErrors()\n\n\t\t\t\t// Custom properties cannot be validated through Schematic.\n      var props_to_validate = {}\n      var known_props = Models.GroupedProduct.getPropertyNames()\n      for (var k in scope.product) {\n        if (known_props.indexOf(k) > -1) { props_to_validate[k] = scope.product[k] }\n      }\n\n      for (var k in scope.customPropertiesData) {\n        scope.product[k] = scope.customPropertiesData[k]\n      }\n\n      for (var key in scope.product) {\n        if (scope.product[key] === null) {\n          delete scope.product[key]\n        }\n      }\n\n      var to_save = angular.copy(scope.product)\n\n      for (var k in to_save.options) {\n        to_save.options[k].items = to_save.options[k].items.map(function (item) {\n          return {product_id: item.id}\n        })\n      }\n\n      if (skipSaving === true) { return }\n      $marketcloud.products.save(to_save)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Product saved', 1.5)\n  location.path('/products')\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(2, 'An error has occurred. Product not saved', 1)\n})\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/configurableProduct.new.js","angular.module('DataDashboard')\n.controller('ListProductsController', [\n  '$scope',\n  '$location',\n  '$marketcloud',\n  '$http',\n  '$q',\n  'products',\n  '$route',\n  '$rootScope',\n  'StormConfiguration',\n  '$utils',\n  '$models',\n  function(scope, $location, $marketcloud, http, $q, resources,$route,$rootScope, StormConfiguration, $utils, $models) {\n    'use strict'\n\n    // This array will hold our data\n    scope.products = []\n\n    \n    \n\n    \n    // Bulk control\n    // Here we place selected prodocuts for bulk actions\n    scope.selected = []\n\n    // BUlk operations buttons\n    scope.showBulkControls = false\n\n\n    // Keeping track of which resources are selected\n    scope.selections = {}\n\n    // The main resource\n    scope.products = resources.data.data\n\n    // The columns we are showing\n    // Loading from config or initializing\n    scope.showing_attributes = StormConfiguration.get('products_list_showing_attributes') || []\n\n    // Attributes not togglable in view\n    scope.reserved_attributes = [\n      'name',\n      'type',\n      'price',\n      'inventory',\n      'published'\n    ]\n\n    // Initializing pagination\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    // The query object to filter results from the api\n    scope.query = {\n      per_page: 20,\n      page : scope.pagination.currentPage\n    }\n\n\n    \n\n\n    // Parsing URL parameters, if provided\n    // Applying Url query\n    var urlQuery = {}\n    try {\n      urlQuery = JSON.parse($route.current.params.query)\n    } catch(e) {\n      urlQuery = {};\n    }\n\n    for (var k in urlQuery){\n      scope.query[k] = urlQuery[k];\n    }\n\n    \n\n    /************************************************************\n     *                         COLUMNS\n     **************************************************************/\n\n    // We assign to available_attributes\n    // those keys of products\n    scope.available_attributes = []\n\n    // Building the available_attributes array\n    scope.products.forEach(function(p) {\n      // Attributes to add to available_attributes\n      var new_attributes =\n        Object.keys(p)\n        .filter(function(key) {\n          // It must not be in reserved list\n          return scope.reserved_attributes.indexOf(key) === -1\n        })\n        .filter(function(key) {\n          // must be something we can render\n          var types = ['number', 'string', 'boolean']\n          return types.indexOf(typeof p[key]) > -1\n        })\n        .filter(function(key) {\n          // must not be a duplicate\n          return scope.available_attributes.indexOf(key) === -1\n        })\n      scope.available_attributes = scope.available_attributes.concat(new_attributes)\n    })\n\n    /*\n        For legacy reasons, some products may have overwritten the type property\n        so we infer it again here\n     */\n\n    scope.products.forEach(function(product) {\n      if (product.type === 'simple_product' || product.type === 'product_with_variants') {\n        return\n      }\n\n      if (product.hasOwnProperty('variants') && product.hasOwnProperty('variantsDefinition')) {\n        product.type = 'product_with_variants'\n      } else {\n        product.type = 'simple_product'\n      }\n    })\n\n    /*\n     *    Shows or hides a column by name\n     *    @param {String} name The name of the column to show/hide\n     */\n    scope.toggleColumn = function(name) {\n      var i = scope.showing_attributes.indexOf(name)\n      if (i > -1) {\n        scope.showing_attributes.splice(i, 1)\n      } else {\n        scope.showing_attributes.push(name)\n      }\n\n      StormConfiguration.set('products_list_showing_attributes', scope.showing_attributes)\n    }\n\n    scope.filterColumnNamesPattern = ''\n    scope.filterColumnNames = function(item) {\n      return item.indexOf(scope.filterColumnNamesPattern) > -1\n    }\n\n    /************************************************************\n     *                         FILTERS\n     **************************************************************/\n\n    \n\n    // We want to be able to filter also by reserved attributes\n    scope.filterAttributes = scope.reserved_attributes.concat(scope.available_attributes)\n\n    scope.applyFilters = function(filters){\n      filters.forEach( function(filter){\n        scope.query[filter.name] = filter.value;\n      })\n      scope.loadData();\n    }\n\n    scope.applySorting = function() {\n      scope.loadData()\n      $(\"#sortingModal\").modal('hide');\n    }\n\n    scope.sortByColumn = function(columnName) {\n      \n      var order = null;\n\n      if (scope.query.sort_order === 'DESC')\n        order = 'ASC'\n      else\n        order = 'DESC';\n\n      scope.query.sort_by = columnName;\n\n      scope.query.sort_order = order;\n\n      scope.loadData();\n    }\n\n\n\n\n    /************************************************************\n     *                         MULTIPLE/BULK SELECTION\n     **************************************************************/\n\n    // Holding query fields\n    // When listing data this oobject is sent\n\n    scope.isItemSelected = function(item) {\n      return scope.selected.indexOf(item.id) > -1\n    }\n\n    scope.toggleItemSelection = function(item) {\n      // If is not selected, we select it\n      if (!scope.isItemSelected(item)) {\n        return scope.selected.push(item.id)\n      }\n\n      // If selected we find it and remove it\n      for (var i = scope.selected.length - 1; i >= 0; i--) {\n        if (scope.selected[i] === item.id) {\n          scope.selected.splice(i, 1)\n        }\n      }\n    }\n\n    scope.toggleAll = function() {\n      if (scope.selectAll === false) {\n        scope.selected = []\n      } else {\n        scope.selected = scope.products.map(function(product) {\n          return product.id\n        })\n      }\n    }\n\n    scope.$watch('selected', function(newValue, oldValue) {\n      // Have to recaulcate scope.selections\n      var tmp = {}\n      scope.selected.forEach(function(id) {\n        tmp[id] = true\n      })\n      scope.selections = tmp\n    })\n\n    scope.getSelectedItems = function() {\n      return scope.products.filter(function(p) {\n        return scope.isItemSelected(p)\n      })\n    }\n\n    scope.bulkSetPublishing = function(flag) {\n      // flag must be boolean\n\n      var defer = $q.defer()\n\n      var promises = []\n\n      scope.getSelectedItems().forEach(function(product) {\n        promises.push($marketcloud.products.update(product.id, {\n          published: flag\n        }))\n      })\n\n      $q.all(promises)\n        .then(function() {\n          notie.alert(1, 'All products have been updated', 1.5)\n          scope.loadPage(scope.pagination.currentPage)\n        })\n\n      return defer.promise\n    }\n\n    scope.bulkDelete = function() {\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' products?', 'Delete', 'Cancel', function() {\n        var defer = $q.defer()\n\n        var promises = []\n\n        scope.getSelectedItems().forEach(function(product) {\n          promises.push($marketcloud.products.delete(product.id))\n        })\n\n        $q.all(promises)\n          .then(function() {\n            notie.alert(1, 'All products have been deleted', 1.5)\n            scope.loadPage(scope.pagination.currentPage)\n          })\n\n        return defer.promise\n      })\n    }\n\n    scope.bulkJSONExport = function(){\n      // If there are no selected items, we export the whole current view\n      if (scope.getSelectedItems().length === 0)\n        return $utils.exportAsJSON(scope.products);\n\n      $utils.exportAsJSON(scope.getSelectedItems());\n    }\n\n    scope.bulkCSVExport = function(){\n      var _data = scope.getSelectedItems()\n\n      // If there are no selected items, we export the whole current view\n      if (_data.length === 0)\n        _data = scope.products;\n\n      var bucket = [];\n\n      _data.forEach(function(product){\n        if (\"simple_product\" === product.type){\n          bucket.push(product);\n        } else if (\"product_with_variants\" === product.type){\n\n          var productWithoutVariants = angular.copy(product);\n          delete productWithoutVariants.variants;\n          bucket.push(productWithoutVariants);\n\n          var variantNames = [];\n\n          product.variants.forEach(function(i){ \n            i.type = \"variant\";\n            bucket.push(i)\n          })\n\n        } else {\n          bucket.push(product);\n        }\n      })\n\n      _data = bucket;\n\n\n      console.log(\"Prima di flatten\",angular.copy(_data) )\n\n      _data = _data.map( $utils.flatten );\n\n      console.log(\"Dopo di flatten\",angular.copy(_data) )\n\n      var _csv = $utils.JSONToCSV(_data)\n\n      console.log(\"IL CSV\",angular.copy(_csv) )\n      return $utils.exportAsCSV(_csv);\n    }\n\n    /************************************************************\n     *                         IMPORT/EXPORT\n     **************************************************************/\n    scope.importProducts = function() {\n      notie.alert(4, 'Contact us at info@marketcloud.it with import subject', 1.5)\n    }\n\n\n    // Shows the file selector dialog\n    scope.chooseJSONFile = function(){\n      scope.importMode = 'JSON';\n      document.querySelector(\"#JSONFileInput\").click();\n    }\n    scope.chooseCSVFile = function(){\n      scope.importMode = 'CSV';\n      document.querySelector(\"#CSVFileInput\").click();\n    }\n\n    // Updates the local copy of file contents\n    scope.JSONFileChanged = function(){\n\n      var file = document.getElementById(\"JSONFileInput\").files[0];\n      \n      //Resetting the file input so we can re-try uploads\n      // of the same file and still detect changes\n      document.getElementById(\"JSONFileInput\").value = \"\";\n\n      if (file) {\n          var reader = new FileReader();\n          reader.readAsText(file, \"UTF-8\");\n          reader.onload = function (evt) {\n            \n            // TODO add try catch to manage invalid json\n            try {\n              var jsonLines = JSON.parse(evt.target.result)\n            } catch(e) {\n              return Alert.error({\n                message : 'Invalid JSON file, please check file syntax'\n              })\n            }\n            \n            scope.importJSON(jsonLines)\n          }\n          reader.onerror = function (evt) {\n              notie.alert(3,\"error reading file\",2)\n          }\n      }\n    }\n\n    scope.CSVFileChanged = function(){\n\n      var file = document.getElementById(\"CSVFileInput\").files[0];\n      \n      //Resetting the file input so we can re-try uploads\n      // of the same file and still detect changes\n      document.getElementById(\"CSVFileInput\").value = \"\";\n\n      if (file) {\n          var reader = new FileReader();\n          reader.readAsText(file, \"UTF-8\");\n          reader.onload = function (evt) {\n            \n            // TODO add try catch to manage invalid json\n            var csvFileContent = evt.target.result;\n            \n            var productsToImport = $utils.CSVToJSON(csvFileContent);\n            \n            // Sacrifice brevity in the name of clarity for the greater good\n            // We flatten jsons before exporting to CSV so now we must unflatten them\n            productsToImport = productsToImport.map( $utils.unflatten );\n\n            scope.importJSON(productsToImport);\n\n\n\n            // JSON is an array\n            \n          }\n          reader.onerror = function (evt) {\n              notie.alert(3,\"error reading file\",2)\n          }\n      }\n    }\n\n    // Upload json content\n    scope.uploadJSON = function(){\n      // Importing as json this file\n      var jsonLines = JSON.parse(scope.fileContent);\n      console.log(\"jsonLines  \",jsonLines)\n      scope.importJSON(jsonLines);\n    }\n\n    // Upload ccsv content\n    scope.uploadCSV = function(){\n      // Importing as json this file\n      // TODO CSV TO JSON\n      //var jsonLines = JSON.parse(scope.fileContent);\n      //scope.importJSON(jsonLines);\n      console.log(\"To implement...\")\n    }\n\n\n    // Import json\n    scope.importJSON = function(lines){\n      var productsToImport = [];\n      var invalidItemIndex = null;\n      var invalidItems = []\n\n\n      for (var i =0; i< lines.length; i++){\n        var line = lines[i];\n        if (line.type === \"simple_product\"){\n\n          var validation = $models.Product.validate(line);\n          if (false === validation.valid) {\n            //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n            Alert.error({\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\n            })\n            invalidItems.push(line);\n            break;\n          }\n          productsToImport.push(line);\n        } else if (line.type === \"product_with_variants\" ){\n          \n          var validation = $models.ProductWithVariants.validate(line);\n          if (false === validation.valid) {\n            //notie.alert(3,\"Please check your JSON, element number \"+String(i+1)+\" is invalid.\",2);\n            Alert.error({\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\n            })\n            invalidItems.push(line);\n            break;\n          } else {\n            productsToImport.push(line);\n          }\n        } else if (line.type === \"variant\"){\n          if (!productsToImport[productsToImport.length-1].variants)\n            productsToImport[productsToImport.length-1].variants = []\n\n          var validation = $models.Variant.validate(line);\n          if (false === validation.valid) {\n            //notie.alert(3,\"Please check your CSV, line \"+i+\" is invalid.\",2);\n            Alert.error({\n              message : 'Please check your import file. Element number '+String(i+1)+' is invalid.'\n            })\n            invalidItems.push(line);\n\n            break;\n          } else {\n            productsToImport[productsToImport.length-1].variants.push(line);\n          }\n\n          \n        } else {\n          notie.alert(3,\"Invalid data\",2);\n        }\n      }\n\n      if (0 === invalidItems.length) {\n        // No invalid items, we can proceed\n        console.log(\"Ecco cosa importare\", productsToImport)\n        importData(productsToImport)\n      } else {\n        console.log(\"validation\",validation)\n        console.log(\"Import aborted due to invalid items\",invalidItems);\n\n      }\n\n      \n      \n\n      \n    }\n\n\n\n\n    function importData(items) {\n      console.log(\"GOING TO IMPORT \"+items.length+\" PRODUCTS FROM FILE\");\n      var defer = $q.defer()\n      var promises = []\n\n      var failures = [];\n\n      function push(r){ promises.push(r)}\n      function noop(r){ failures.push(r)}\n\n      function noop2(i){\n        failures.push(i);\n        return function(error){}\n      }\n\n\n      items.forEach(function(product) {\n        if (\"simple_product\" === product.type)\n          promises.push($marketcloud.products.save(product).then(push).catch(function(error){\n            failures.push(product)\n          }) );\n\n        if (\"product_with_variants\" === product.type) {\n\n          var productWithoutVariants = angular.copy(product);\n          delete productWithoutVariants.variants;\n\n\n          var newPromise = $q(function(resolve,reject){\n\n            return $marketcloud.products.save(productWithoutVariants)\n            .then(function(response){\n              var product_id = response.data.data.id;\n              return $marketcloud.variants.save(product_id,product.variants);\n            })\n            .then(resolve)\n            .catch(reject)\n\n          })\n\n\n          promises.push(newPromise.then(push).catch(function(error){\n            failures.push(product)\n          }) );\n        }\n      })\n\n      $q.all(promises)\n        .then(function(data) {\n\n          if (failures.length > 0) {\n            console.log(\"FAILURES\",failures)\n            var msg = '<p>Not every item was imported. Import failed for '+failures.length+' items:</p><ul>';\n\n            failures.forEach(function(item){\n              msg += '<li class=\"text-left\">'+item.name+'</lI>';\n            })\n            msg += '</ul>';\n            Alert.warning({\n              message : msg\n            })\n          } else {\n            Alert.success({\n              message : 'All items were imported'\n            })\n          }\n          scope.loadPage(1)\n        })\n        .catch(function(){\n          console.log(\"ALL FINISHED WITH ERROR\")\n          console.log(\"Failures\",failures);\n          notie.alert(2,\"Import succeded partially, Only the first \");\n          scope.loadPage(1)\n        })\n\n      return defer.promise\n    }\n\n\n\n    /************************************************************\n     *                        DUPLICATE\n     **************************************************************/\n    scope.cloneProduct = function(product_to_duplicate) {\n      var product_to_save = angular.copy(product_to_duplicate)\n      delete product_to_save.id\n      delete product_to_save.product_id\n      delete product_to_save.variant_id\n      delete product_to_save._id\n\n      product_to_save.name += ' (Copy)'\n      product_to_save.published = false\n\n      switch (product_to_save.stock_type) {\n        case 'track':\n          delete product_to_save['stock_status']\n          break\n        case 'status':\n          delete product_to_save['stock_level']\n          break\n        case 'infinite':\n          delete product_to_save['stock_level']\n          delete product_to_save['stock_status']\n          break\n      }\n\n      // NOTE this uses client side info. it is a utility\n      //\n      delete product_to_save.variants\n\n      $marketcloud.products.save(product_to_save)\n        .then(function(response) {\n          console.log(\"RESPONSATI\", response)\n          if (product_to_save.has_variants === true || product_to_save.type === 'product_with_variants') {\n            return http({\n              method: 'POST',\n              url: API_BASE_URL + '/products/' + response.data.data.id + '/variants',\n              data: product_to_duplicate.variants,\n              headers: {\n                Authorization: window.public_key + ':' + window.token\n              }\n            })\n          }\n        })\n        .then(function(response) {\n          scope.loadPage(scope.pagination.currentPage)\n          notie.alert(1, 'Product successfully cloned', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n    /************************************************************\n     *                         QUERY OPERATIONS\n     **************************************************************/\n    scope.setPublishing = function(prod) {\n      $marketcloud.products.update(prod.id, {\n          published: prod.published\n        })\n        .then(function(response) {\n          notie.alert(1, 'Updated!', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n\n    scope.alterColumnNames = function(name) {\n      if (name === 'stock_level') {\n        return 'Inventory'\n      } else {\n        return name\n      }\n    }\n\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.loadData = function(query) {\n\n\n      if (scope.query.q === '') {\n        delete scope.query.q\n      }\n\n      if (query) {\n        if (\"object\" !== typeof query)\n          throw new TypeError(\"loadData(query) query must be an object of filters\");\n\n        for (var k in query)\n          scope.query[k] = query[k];\n      }\n\n      \n      return $marketcloud.products.list(scope.query)\n        .then(function(response) {\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n\n          // This little trick allows us to get back to the latest state of the view when we hit a back button.\n          // We don't use $location because it has a weird behaviour appending #/#/path\n          window.history.pushState(scope.query, \"List products\", '#/products?query=' + angular.$$encodeUriSegment(JSON.stringify(scope.query) ) );\n\n          scope.products = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\n        })\n    }\n\n    scope.loadPage = function(page_number) {\n      scope.query.page = Number(page_number)\n      scope.loadData()\n    }\n\n    scope.deleteProduct = function(prod_id, index) {\n      http({\n          method: 'DELETE',\n          url: API_BASE_URL + '/products/' + prod_id,\n          headers: {\n\n            Authorization: window.public_key + ':' + window.token\n          }\n\n        })\n        .then(function(response) {\n          scope.loadPage(scope.pagination.currentPage)\n          notie.alert(1, 'Product deleted', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/products.list.js","angular.module('DataDashboard')\n  .controller('EditProductWithVariantsController',\n    [\n      '$scope', \n      '$marketcloud', \n      'product', \n      '$http',\n      '$utils',\n      function(scope, $marketcloud, product, $http, $utils) {\n      scope.customPropertiesData = {}\n\n      // Injecting resolve data into the controller\n      scope.product = product.data.data\n\n      // mapping non-core attributes into scope.customPropertiesData\n      var coreProperties = Models.Product.getPropertyNames()\n      coreProperties.push(\n        'id',\n        'currencies',\n        'display_price',\n        'display_price_discount',\n        'has_variants',\n        'type',\n        'media',\n        'tax_id',\n        'locales',\n        'seo',\n        'requires_shipping',\n        'variants',\n        'variantsDefinition',\n        'product_id',\n        'variant_id',\n        'application_id'\n      )\n\n      for (var k in scope.product) {\n        if (coreProperties.indexOf(k) < 0) {\n          scope.customPropertiesData[k] = scope.product[k]\n          delete scope.product[k]\n        }\n      }\n\n      scope.unsafeSlug = false\n\n      scope.updateSlug = function() {\n        scope.product.slug = $utils.getSlugFromString(scope.product.name)\n      }\n\n      // This method must be implemented in order to\n      // make the media manager work\n      scope.getImagesContainer = function() {\n        return scope.product.images\n      }\n\n      scope.removeImage = function(i) {\n        scope.product.images.splice(i, 1)\n      }\n\n      scope.categories = []\n        // Loading categories\n      $marketcloud.categories.list()\n        .then(function(response) {\n          scope.categories = response.data.data\n        })\n        .catch(function() {\n          console.error('An error has occurred while loading categories')\n        })\n\n      scope.brands = []\n        // Loading brands\n\n      $marketcloud.brands.list()\n        .then(function(response) {\n          scope.brands = response.data.data\n        })\n        .catch(function() {\n          console.error('An error has occurred while loading brands')\n        })\n\n      scope.filterVariantProps = function(o) {\n        var p = {}\n        for (var k in o) {\n          // if its not an inherited property, then it's a variant property name\n          if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n            p[k] = o[k]\n          }\n        }\n        return p\n\n        // return o\n      }\n\n      scope.getVariantStyle = function(i) {\n        // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n        // ]\n        var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\n        return r[i % r.length]\n      }\n      scope.getVariantStyle = function(i) {\n        var r = [{\n          'color': 'red'\n        }, {\n          'color': 'green'\n        }, {\n          'color': 'blue'\n        }, {\n          'color': 'pink'\n        }]\n        return r[i % r.length]\n      }\n\n      scope.newAttribute = {\n        name: null,\n        value: null,\n        type: null\n      }\n      scope.newAttribute.type = 'string'\n      scope.availableTypes = [{\n        name: 'String',\n        value: 'string'\n      }, {\n        name: 'Number',\n        value: 'number'\n      }, {\n        name: 'Boolean',\n        value: 'boolean'\n      }]\n\n      scope.filterNotNullProperties = function(item) {\n        var result = {}\n        for (var k in item) {\n          if (item[k]) {\n            result[k] = item[k]\n          }\n        }\n        return result\n      }\n\n      scope.newVariant = {}\n      scope.saveNewVariant = function() {\n        var variantToSave = angular.copy(scope.product)\n          // Removing useless stuff in the variant\n        delete variantToSave['variants']\n        delete variantToSave['type']\n        delete variantToSave['variantsDefinition']\n        delete variantToSave['is_master']\n        delete variantToSave['has_variants']\n        delete variantToSave['published']\n\n        for (var k in scope.newVariant) {\n          if (scope.product.variantsDefinition[k].indexOf(scope.newVariant[k]) < 0) {\n            scope.product.variantsDefinition[k].push(scope.newVariant[k])\n          }\n          variantToSave[k] = scope.newVariant[k]\n        }\n\n\n        // Devo aggiornare products perch variants definition  cambiato\n        // poi salvo la variante\n\n        scope.updateProduct()\n          .then(function(response) {\n            return $http({\n              method: 'POST',\n              url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n              data: variantToSave,\n              headers: {\n                Authorization: window.public_key + ':' + window.token\n              }\n            })\n          })\n          .then(function(response) {\n            notie.alert(1, 'Variant successfully created', 1)\n            scope.product = response.data.data\n            $('#addVariantModal').modal('hide')\n          })\n          .catch(function(response) {\n            notie.alert(2, 'An error has occurred. Variants not saved', 1)\n          })\n      }\n\n      scope.deleteVariant = function(variant, i) {\n        return $http({\n            method: 'DELETE',\n            url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n            headers: {\n              Authorization: window.public_key + ':' + window.token\n            }\n          })\n          .then(function(response) {\n            notie.alert(1, 'Variant deleted', 1.5)\n            scope.product.variants.splice(i, 1)\n          })\n          .catch(function(response) {\n            notie.alert(3, 'An error has occurred, please try again.', 1.5)\n          })\n      }\n\n      scope.updateProduct = function() {\n        var payload = angular.copy(scope.product)\n\n        // let's re-assemble the product first.\n        for (var k in scope.customPropertiesData) {\n          payload[k] = scope.customPropertiesData[k]\n        }\n\n        switch (payload.stock_type) {\n          case 'infinite':\n            delete payload.stock_level\n            delete payload.stock_status\n            break\n\n          case 'status':\n            delete payload.stock_level\n            break\n\n          case 'track':\n            delete payload.stock_status\n            break\n        }\n\n        return $marketcloud.products.update(payload.id, payload)\n          .then(function(response) {\n            notie.alert(1, 'Update Succeded', 1.5)\n          })\n          .catch(function(response) {\n            notie.alert(3, 'Update failed', 1.5)\n          })\n      }\n    }\n  ])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/productsWithVariants.edit.js","angular.module('DataDashboard')\n  .controller('NewProductWithVariantsController', [\n    '$scope', '$http', '$location', '$marketcloud', '$utils',\n    function(scope, $http, location, $marketcloud, $utils) {\n      scope.categories = []\n      scope.error = null\n      scope.newCategory = {}\n      scope.brands = []\n      scope.newBrand = {}\n\n      // Temporary storage for variants\n      // while theyre being built\n      scope.addedVariants = {}\n\n      // mapping non-core attributes into scope.customPropertiesData\n      var coreProperties = Models.Product.getPropertyNames()\n      coreProperties.push(\n        'id',\n        'display_price',\n        'display_price_discount',\n        'has_variants',\n        'type',\n        'media',\n        'tax_id',\n        'locales',\n        'seo',\n        'requires_shipping',\n        'variants',\n        'variantsDefinition',\n        'product_id',\n        'variant_id',\n        'application_id'\n      )\n\n      scope.isBoolean = function(d) {\n        return typeof d === 'boolean'\n      }\n\n      scope.isString = function(d) {\n        return typeof d === 'string'\n      }\n\n      scope.isNumber = function(d) {\n        return typeof d === 'number'\n      }\n\n      // This method must be implemented in order to\n      // make the media manager work\n      scope.getImagesContainer = function() {\n        return scope.product.images\n      }\n\n      scope.removeImage = function(i) {\n        scope.product.images.splice(i, 1)\n      }\n\n\n      scope.unsafeSlug = false\n\n      scope.updateSlug = function() {\n        scope.product.slug = $utils.getSlugFromString(scope.product.name)\n      }\n\n      scope.loadCategories = function() {\n        $marketcloud.categories.list({})\n          .then(function(response) {\n            scope.categories = response.data.data\n          })\n          .catch(function() {\n            notie.alert(2, 'An error has occurred while loading categories', 2)\n          })\n      }\n\n      // Initializing the categories array\n      scope.loadCategories()\n\n      scope.query = {\n        // The product must be simple_product as this\n        type: 'product_with_variants'\n      }\n      scope.prepareRegex = function() {\n        scope.query.name.$options = 'i'\n      }\n\n      scope.showTheList = false\n      scope.showList = function() {\n        scope.showTheList = true\n      }\n      scope.hideList = function() {\n        window.setTimeout(function() {\n          scope.showTheList = false\n          scope.$apply()\n        }, 200)\n      }\n\n      scope.applyTemplate = function(product) {\n        var tpl = angular.copy(product)\n\n\n\n        console.log(\"====================\",\"Vado ad applicare questo template\",angular.copy(tpl),\"==========================\")\n\n        delete tpl['id']\n        \n\n        scope.addedVariants2 = [];\n\n        for (var k in tpl.variantsDefinition) {\n          var newAddedVariant = {\n            name : k,\n            values :tpl.variantsDefinition[k].map(function(v){\n              return {text:v}\n            })\n          }\n          scope.addedVariants2.push(newAddedVariant)\n        }\n\n        scope.computedVariants = tpl.variants.map(function(item){\n          var v = angular.copy(item)\n          delete v[\"id\"];\n          delete v[\"product_id\"];\n          delete v[\"variant_id\"]\n          return v;\n        })\n\n        console.log(\"Ora computedVariants \",angular.copy(scope.computedVariants))\n\n         \n\n        \n\n\n\n        delete tpl.variants\n        \n\n        scope.product = tpl\n\n        // Making sure that inventory is initialized\n        scope.product.stock_type = tpl.stock_type || \"status\";\n        scope.product.stock_status = tpl.stock_status || \"in_stock\";\n\n\n        console.log(\"Applicato questo template\",tpl)\n\n        //scope.updateVariantsConfiguration()\n        \n        console.log(\"Dopo updateVariantsConfiguration\",angular.copy(scope.computedVariants))\n        // Taking care of variants\n        \n\n        for (var k in scope.product) {\n          if (coreProperties.indexOf(k) < 0) {\n            scope.customPropertiesData[k] = scope.product[k]\n            delete scope.product[k]\n          }\n        }\n\n\n      }\n\n      scope.loadProducts = function(query) {\n        query = query || scope.query\n\n        $marketcloud.products.list(query)\n          .then(function(response) {\n            scope.products = response.data.data\n          })\n          .catch(function(response) {\n            notie.alert(3, 'An error has occurred. Please try again', 1.5)\n          })\n      }\n\n      // Loading products right away\n      scope.loadProducts()\n\n      scope.saveCategory = function() {\n        $marketcloud.categories.save(scope.newCategory)\n          .then(function(response) {\n            $('#newCategoryModal').modal('hide')\n            scope.categories.push(scope.newCategory)\n            scope.newCategory = {}\n          })\n          .catch(function(response) {\n            $('#newCategoryModal').hide()\n            notie.alert(3, 'An error has occurred. Category not saved', 1)\n          })\n      }\n\n      scope.loadBrands = function() {\n          $marketcloud.brands.list({})\n            .then(function(response) {\n              scope.brands = response.data.data\n            })\n            .catch(function() {\n              notie.alert(2, 'An error has occurred while loading brands', 2)\n            })\n        }\n        // Initializing the brands array\n      scope.loadBrands()\n      window.inspect = function(){console.log(angular.copy(scope.product))};\n\n      scope.saveBrand = function() {\n        $marketcloud.brands.save(scope.newBrand)\n          .then(function(response) {\n            $('#newBrandModal').modal('hide')\n            scope.brands.push(scope.newBrand)\n            scope.newBrand = {}\n          })\n          .catch(function(response) {\n            $('#newBrandModal').hide()\n            notie.alert(3, 'An error has occurred. Brand not saved', 1)\n          })\n      }\n\n      scope.product = {\n        type: 'product_with_variants',\n        name: '',\n        description: '',\n        stock_type: 'status',\n        stock_status: 'in_stock',\n        images: [],\n        variants: {},\n        published: false,\n        has_variants: true // Flag for legacy compatibility\n      }\n\n      scope.customPropertiesData = {}\n        // This contains validation Errors\n\n      // Array of new properties's names (strings)\n      scope.customPropertiesNames = []\n\n      scope.computedVariants = []\n\n      // Each tyme the parent's stock type is changed, the variants must be updated\n      scope.updateStockManagementForVariants = function() {\n        var stock_type = scope.product.stock_type\n\n        if (stock_type === 'track') {\n          delete scope.product.stock_status\n          scope.computedVariants.forEach(function(v) {\n            delete v['stock_status']\n          })\n          return\n        }\n\n        if (stock_type === 'status') {\n          delete scope.product.stock_level\n          scope.computedVariants.forEach(function(v) {\n            delete v['stock_level']\n          })\n          return\n        }\n\n        if (stock_type === 'infinite') {\n          delete scope.product.stock_status\n          delete scope.product.stock_level\n          scope.computedVariants.forEach(function(v) {\n            delete v['stock_level']\n            delete v['stock_status']\n          })\n          return\n        }\n      }\n\n      scope.properties_to_inherit = [\n        'price',\n        'sku',\n        'stock_level',\n        'stock_type',\n        'stock_status'\n        // Add here more props you want to override now!\n        // e.g. stock_level\n\n      ]\n\n      function transformVariantObject(o) {\n        var buf = []\n        for (var k in o) {\n          buf.push({\n            name: k,\n            values: o[k].map(function(a) {\n              return a.text\n            })\n          })\n        }\n        return buf\n      }\n\n      function getArrayOfVariants(arrayOfVariants) {\n        if (arrayOfVariants.length === 0) {\n          return []\n        }\n        if (arrayOfVariants.length === 1) {\n          var v = arrayOfVariants[0]\n          var buf = []\n          v.values.forEach(function(e) {\n            var o = {}\n            o[v.name] = e\n            buf.push(o)\n          })\n          return buf\n        }\n        var output = arrayOfVariants.reduce(function(a, b) {\n          if (!(a instanceof Array)) {\n            // Se non  un array,  la prima botta di reduce,\n            // fatta con la prima variante (el 0 di arrayOfVariants)\n            var buf = []\n            a.values.forEach(function(el_a) {\n              b.values.forEach(function(el_b) {\n                var o = {}\n                o[a.name] = el_a\n                o[b.name] = el_b\n                buf.push(o)\n              })\n            })\n            return buf\n          } else {\n            // Se  un array, allora non  la prima botta di reduce\n            // Quindi per ogni elemento dell''array finale, aggiungo pezzi di variante\n            var buf = []\n            b.values.forEach(function(el_b) {\n              // Ad ogni elemento dell array di varianti costruito al passo\n              // precedente aggiungo un pezzo di nuova variante\n              a.forEach(function(el_a) {\n                var o = JSON.parse(JSON.stringify(el_a))\n                o[b.name] = el_b\n                buf.push(o)\n              })\n            })\n            return buf\n          }\n        })\n        return output\n      }\n\n      function attachInheritedProperties(variants) {\n        return variants.map(function(variant) {\n          console.log(\"ATTACHO LE INHERITED PROPERTIES DA \",angular.copy(scope.product))\n          scope.properties_to_inherit.forEach(function(i, index) {\n\n\n            if (scope.product[i]) {\n\n              variant[i] = scope.product[i];\n            }\n          })\n          return variant\n        })\n      }\n\n      scope.filterVariantProps = function(o) {\n        var p = {}\n        for (var k in o) {\n          // if its not an inherited property, then it's a variant property name\n          if (scope.properties_to_inherit.indexOf(k) < 0 && k !== 'save') {\n            // The property k is not an inherited property but a variant\n            p[k] = o[k]\n          }\n        }\n        return p\n      }\n\n      // Return a subset of the object in which only variant related\n      // keys are kept\n      scope.filterVariantProps = function(o) {\n        var variantNames = scope.addedVariants2.map(function(v){\n          return v.name\n        })\n        var p = {}\n        for (var k in o) {\n          // if its not an inherited property, then it's a variant property name\n          if (variantNames.indexOf(k) > -1 ) {\n            // The property k is not an inherited property but a variant\n            p[k] = o[k]\n          }\n        }\n        return p\n      }\n\n      scope.getVariantStyle = function(i) {\n        var r = [{\n          'color': 'red'\n        }, {\n          'color': 'green'\n        }, {\n          'color': 'blue'\n        }, {\n          'color': 'pink'\n        }]\n        return r[i % r.length]\n      }\n\n      /*\n        variants Array<{name :\"size\", values : [\"cl\",\"l\",\"s\"]}\n      */\n      function getArrayOfVariants2(variants) {\n        variants = variants.filter(function(v) {\n          return v.values.length > 0\n        })\n\n        if (variants.length === 0) {\n          return []\n        }\n\n        if (variants.length === 1) {\n          var result = []\n          variants[0].values.forEach(function(v) {\n            var o = {}\n            o[variants[0].name] = v\n            result.push(o)\n          })\n          return result\n        }\n\n        var combine = function(v1, v2) {\n          var output = []\n\n          // 2 cases, one is that v1 is a {name,values}\n          // other case is that v1 is the already created bag\n          // [{size:x, color : red}]\n          if (v1 instanceof Array) {\n            var _out = []\n            v1.forEach(function(variant) {\n              v2.values.forEach(function(value) {\n                var o = angular.copy(variant)\n                o[v2.name] = value\n                _out.push(o)\n              })\n            })\n            return _out\n          }\n\n          v1.values.forEach(function(val1) {\n            v2.values.forEach(function(val2) {\n              var o = {}\n              o[v1.name] = val1\n              o[v2.name] = val2\n\n              output.push(o)\n            })\n          })\n          return output\n        }\n\n        var counter = 0\n        var out = []\n\n        while (variants[counter + 1]) {\n          out = combine(variants[counter], variants[counter + 1])\n          variants[counter + 1] = out\n          counter++\n        }\n\n        return out\n      }\n\n      scope.deleteVariant = function(variantName, $index) {\n        scope.addedVariants2.splice($index, 1)\n        scope.updateVariantsConfiguration()\n      }\n\n      scope.addedVariants2 = []\n      scope.addEmptyVariant = function() {\n        scope.addedVariants2.push({\n          name: '',\n          values: []\n        })\n      }\n\n      scope.updateVariantsConfiguration = function() {\n        // Transforming addedVariants2\n        scope.computedVariants = []\n        scope.addedVariants = {}\n        scope.addedVariants2.forEach(function(variant) {\n          scope.addedVariants[variant.name] = variant.values.map(function(i) {\n            return i.text\n          })\n\n          variant.values = variant.values.map(function(i) {\n            return i.text\n          })\n        })\n\n        \n        var temp_ComputedVariants = getArrayOfVariants2(angular.copy(scope.addedVariants2))\n\n        scope.computedVariants = temp_ComputedVariants\n        scope.computedVariants = attachInheritedProperties(temp_ComputedVariants)\n\n        scope.computedVariants.forEach(function(v) {\n          v.save = true\n        })\n\n        // Ricalcolo le variants definition, le added sono scope.addedVariants\n        scope.product.variantsDefinition = scope.addedVariants\n      }\n\n      scope.getVariantClass = function(i) {\n        var classes = ['label-default', 'label-info', 'label-success', 'label-warning', 'label-danger']\n        return 'label solid ' + (classes[i % classes.length])\n      }\n\n      scope.hideErrors = function() {\n        scope.error = null\n        scope.errorField = null\n      }\n\n      scope.saveProduct = function(overwrites) {\n        for (var k in scope.product) {\n          if (scope.product[k] === null) {\n            delete scope.product[k]\n          }\n        }\n\n        scope.hideErrors()\n\n        scope.product.variants = []\n\n        // Custom properties and variants cannot be validated through Schematic.\n        var props_to_validate = {}\n        var known_props = Models.Product.getPropertyNames()\n        for (var k in scope.product) {\n          if (known_props.indexOf(k) > -1) {\n            props_to_validate[k] = scope.product[k]\n          }\n        }\n        var validation = Models.Product.validate(props_to_validate)\n\n        if (validation.valid === false) {\n          scope.errorField = validation.invalidPropertyName\n\n          if (validation.failedValidator === 'required') {\n            scope.error = 'The ' + scope.errorField + ' field is required'\n          } else if (validation.failedValidator === 'min') {\n            if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n              scope.error = 'The ' + scope.errorField + ' field must have at least ' + Models.Product.schema[validation.invalidPropertyName].min + ' characters'\n            } else {\n              scope.error = 'The ' + scope.errorField + ' field must be greater than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min\n            }\n          } else if (validation.failedValidator === 'max') {\n            if (typeof scope.product[validation.invalidPropertyName] === 'string') {\n              scope.error = 'The ' + scope.errorField + ' field must have less than ' + Models.Product.schema[validation.invalidPropertyName].max + ' characters'\n            } else {\n              scope.error = 'The ' + scope.errorField + ' field must be lesser than or equal to ' + Models.Product.schema[validation.invalidPropertyName].min\n            }\n          } else {\n            scope.error = 'The ' + scope.errorField + ' field has an invalid value (' + props_to_validate[scope.errorField] + ')'\n          }\n          return\n        }\n\n        for (var k in scope.customPropertiesData) {\n          scope.product[k] = scope.customPropertiesData[k]\n        }\n\n        for (var key in scope.product) {\n          if (scope.product[key] === null) {\n            delete scope.product[key]\n          }\n        }\n\n        var variantsToSave = angular.copy(scope.computedVariants\n          .filter(function(variant) {\n            return variant.save === true\n          })\n          .map(function(variant) {\n            var obj = angular.copy(scope.product)\n\n            // Removing useless stuff in the variant\n            delete obj['variants']\n            delete obj['variantsDefinition']\n            delete obj['is_master']\n            delete obj['has_variants']\n            delete obj['published']\n\n            for (var k in variant) {\n              obj[k] = variant[k]\n            }\n\n            // Remove the flag used to distinguish\n            // between variants to save and not to save\n            delete variant['save']\n\n            return obj\n          }))\n\n        for (var k in overwrites) {\n          scope.product[k] = overwrites[k]\n        }\n        $marketcloud.products.save(scope.product)\n          .then(function(response) {\n            // Now i must save variants.\n\n            // Ogni variante deve essere pretrattata\n            // Ad esempio devo aggiungere il campo is_variant e images\n            /* if ('undefined' !== mixpanel)\n              mixpanel.track('products.create') */\n\n            var savedProduct = response.data.data\n\n\n            $http({\n                method: 'POST',\n                url: API_BASE_URL + '/products/' + savedProduct.id + '/variants',\n                data: variantsToSave,\n                headers: {\n                  Authorization: window.public_key + ':' + window.token\n                }\n              })\n              .then(function(response) {\n                notie.alert(1, 'Product successfully created', 1)\n                location.path('/products')\n              })\n              .catch(function(response) {\n                notie.alert(2, 'An error has occurred. Variants not saved', 1)\n              })\n          })\n          .catch(function(response) {\n            notie.alert(2, 'An error has occurred. Product not saved', 1)\n          })\n      }\n    }\n  ])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/productsWithVariants.new.js","(function() {\n  'use strict'\n\n  angular.module('DataDashboard')\n    .controller('EditSimpleProductController', EditSimpleProductController)\n\n  EditSimpleProductController.$inject = [\n  '$scope', \n  '$marketcloud', \n  'product', \n  '$http',\n  '$utils',\n  '$validation']\n\n  function EditSimpleProductController(scope, $marketcloud, product, $http, $utils,$validation) {\n    // Injecting resolve data into the controller\n    scope.product = product.data.data\n\n    // This will hold custom properties for further processing\n    scope.customPropertiesData = {}\n\n    // Should we be able to edit the slug? this is a on/off\n    scope.unsafeSlug = false\n\n    // mapping non-core attributes into scope.customPropertiesData\n    var coreProperties = Models.Product.getPropertyNames()\n\n    scope.schema = Models.Product.schema\n\n    coreProperties.push(\n      'id',\n      'currencies',\n      'display_price_discount',\n      'display_price',\n      'has_variants', // for legacy reasons\n      'type',\n      'media',\n      'tax_id',\n      'locales',\n      'seo',\n      'requires_shipping',\n      'product_id',\n      'variant_id',\n      'application_id'\n    )\n\n    for (var k in scope.product) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.product[k]\n        delete scope.product[k]\n      }\n    }\n\n    scope.updateSlug = function() {\n      scope.product.slug = $utils.getSlugFromString(scope.product.name)\n    }\n\n    scope.swapArrayItemPosition = function moveItem(fromIndex, toIndex, target) {\n      var toMove = JSON.parse(JSON.stringify(target[fromIndex]))\n\n      // We ensure that the indexes exist\n      if (fromIndex > target.length - 1) {\n        return\n      }\n\n      // First we remove the element to move\n      target.splice(fromIndex, 1)\n\n      // Then we add it to the desired position\n      target.splice(toIndex, 0, toMove)\n    }\n\n    // This method must be implemented in order to\n    // make the media manager work\n    scope.getImagesContainer = function() {\n      return scope.product.images\n    }\n\n    scope.removeImage = function(i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    scope.newAttribute = {\n      name: null,\n      value: null,\n      type: null\n    }\n    scope.newAttribute.type = 'string'\n    scope.availableTypes = [{\n      name: 'String',\n      value: 'string'\n    }, {\n      name: 'Number',\n      value: 'number'\n    }, {\n      name: 'Boolean',\n      value: 'boolean'\n    }]\n\n    scope.filterNotNullProperties = function(item) {\n      var result = {}\n      for (var k in item) {\n        if (item[k]) {\n          result[k] = item[k]\n        }\n      }\n      return result\n    }\n\n    scope.updateProduct = function() {\n      // let's re-assemble the product first.\n      for (var k in scope.customPropertiesData) {\n        scope.product[k] = scope.customPropertiesData[k]\n      }\n\n      switch (scope.product.stock_type) {\n        case 'status':\n          delete scope.product.stock_level\n          break\n\n        case 'track':\n          delete scope.product.stock_status\n          break\n      }\n\n\n      $marketcloud.products.update(scope.product.id, scope.product)\n        .then(function(response) {\n          notie.alert(1, 'Update Succeded', 1.5)\n        })\n        .catch(function(error) {\n          console.log(\"erore\",error)\n          if (400 === error.status){\n\n            notie.alert(2, 'Please check the data you entered', 1.5)\n\n            var validation = error.data.errors[0];\n            var invalidPropertyName = \"product.\"+validation.invalidPropertyName;\n\n            var element = angular.element('[ng-model=\"'+invalidPropertyName+'\"]').parent()\n\n            $validation.showErrorMessage(validation,'[ng-model=\"'+invalidPropertyName+'\"]')\n            \n\n            \n    \n          } else\n            notie.alert(3, 'Update failed', 1.5)\n        })\n    }\n  }\n})()\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/simpleProduct.edit.js","angular.module('DataDashboard').controller('NewSimpleProductController', [\n  '$scope', '$http', '$location', '$marketcloud','$utils','$models',\n  function(scope, $http, location, $marketcloud, $utils, Models) {\n    scope.error = null\n\n    scope.brands = []\n    scope.newBrand = {}\n\n    \n\n    scope.validation = {\n      valid: true\n    }\n\n    // mapping non-core attributes into scope.customPropertiesData\n    console.log(\"Cerco qui le core propseties\",Models.Product, Models)\n    var coreProperties = Models.Product.getPropertyNames()\n\n    coreProperties.push(\n      'id',\n      'display_price_discount',\n      'display_price',\n      'has_variants', // for legacy reasons\n      'type',\n      'media',\n      'tax_id',\n      'locales',\n      'seo',\n      'requires_shipping',\n      'product_id',\n      'variant_id',\n      'application_id'\n    )\n\n    scope.product = {\n      price: null,\n      name: '',\n      description: '',\n      stock_type: 'status',\n      images: [],\n      media: [],\n      published: false,\n      type: 'simple_product'\n\n    }\n\n    scope.removeImage = function(i) {\n      scope.product.images.splice(i, 1)\n    }\n\n    \n    scope.unsafeSlug = false\n\n    scope.updateSlug = function() {\n      scope.product.slug = $utils.getSlugFromString(scope.product.name)\n    }\n\n    scope.applyTemplate = function(product) {\n      var tpl = angular.copy(product)\n\n      delete tpl['id']\n\n      scope.product = tpl\n\n      for (var k in scope.product) {\n        if (coreProperties.indexOf(k) < 0) {\n          scope.customPropertiesData[k] = scope.product[k]\n          delete scope.product[k]\n        }\n      }\n    }\n\n    scope.query = {\n      // The product must be simple_product as this\n      type: 'simple_product'\n    }\n    scope.prepareRegex = function() {\n      scope.query.name.$options = 'i'\n    }\n\n    scope.showTheList = false\n    scope.showList = function() {\n      scope.showTheList = true\n    }\n    scope.hideList = function() {\n      window.setTimeout(function() {\n        scope.showTheList = false\n        scope.$apply()\n      }, 200)\n    }\n\n    scope.loadProducts = function(query) {\n      query = query || scope.query\n\n      $marketcloud.products.list(query)\n        .then(function(response) {\n          scope.products = response.data.data\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\n        })\n    }\n\n    // Loading products right away\n    scope.loadProducts()\n\n    scope.productError = null\n    scope.newCustomProperty = {}\n    scope.customPropertiesData = {}\n      // This contains validation Errors\n    scope.Forms = {}\n    scope.Forms.newCustomProperty = {\n      name: null,\n      value: null\n    }\n\n    // Array of new properties's names (strings)\n    scope.customPropertiesNames = []\n\n    scope.properties_to_inherit = [\n      'price',\n      'sku',\n      'stock_level',\n      'stock_type',\n      'stock_status'\n      // Add here more props you want to override now!\n      // e.g. stock_level\n\n    ]\n\n    scope.hideErrors = function() {\n      scope.error = null\n      scope.errorField = null\n    }\n\n    scope.saveProduct = function(overwrites) {\n      for (var k in scope.product) {\n        if (scope.product[k] === null) {\n          delete scope.product[k]\n        }\n      }\n\n      scope.hideErrors()\n\n      // this scope properti is bound to the error-message component\n      // TODO schematic needs custom validator, so i can do something like\n\n      scope.validation = Models.Product.validate(scope.product)\n      \n\n      if (scope.validation.valid === false) {\n        return;\n      }\n\n\n\n      for (var kk in scope.customPropertiesData) {\n        scope.product[kk] = scope.customPropertiesData[kk]\n      }\n\n      for (var key in scope.product) {\n        if (scope.product[key] === null) {\n          delete scope.product[key]\n        }\n      }\n\n      for (var k in overwrites) {\n        scope.product[k] = overwrites[k]\n      }\n\n      $marketcloud.products.save(scope.product)\n        .then(function(response) {\n          notie.alert(1, 'Product saved successfully.', 1.5)\n          location.path('/products')\n        })\n        .catch(function(error) {\n\n          if (error.status === 400) {\n            scope.validation = error.data.errors[0]\n            return;\n          }\n          \n          notie.alert(2, 'An error has occurred. Product not saved', 1)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/products/simpleProduct.new.js","var app = angular.module('DataDashboard')\napp.controller('EditPromotionController', ['$scope', '$http', '$marketcloud', 'promotion',\n  function (scope, http, $marketcloud, promotion) {\n    scope.promotion = promotion.data.data\n\t\t// Initializing stuff\n    scope.newCondition = {}\n    scope.newEffect = {}\n\n    scope.save = function () {\n      scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion)\n      if (scope.$promotionValidation.valid !== true) {\n        return\n      }\n\n      $marketcloud.promotions.update(scope.promotion.id, scope.promotion)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Promotion saved', 1.5)\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred. Promotion not saved', 1.5)\n})\n    }\n\n    scope.addCondition = function () {\n      scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition)\n      if (scope.$newConditionValidation.valid !== true) {\n        return\n      }\n\n      scope.promotion.conditions.push(scope.newCondition)\n      scope.newCondition = {}\n    }\n    scope.removeCondition = function (i) {\n      scope.promotion.conditions.splice(i, 1)\n    }\n    scope.removeEffect = function (i) {\n      scope.promotion.effects.splice(i, 1)\n    }\n    scope.addEffect = function () {\n      scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect)\n\n      if (scope.$newEffectValidation.valid !== true) {\n        return\n      }\n\n      scope.promotion.effects.push(scope.newEffect)\n      scope.newEffect = {}\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/promotions/promotions.edit.js","var app = angular.module('DataDashboard')\napp.controller('NewPromotionController', ['$scope', '$http', '$marketcloud', '$location',\n  function (scope, http, $marketcloud, location) {\n\t\t// Defaults\n    scope.promotion = {\n      name: null,\n      conditions: [],\n      effects: [],\n      active: false,\n      priority: 0\n    }\n    scope.newCondition = {}\n    scope.newEffect = {}\n\n    scope.save = function () {\n      scope.$promotionValidation = window.Models.Promotion.validate(scope.promotion)\n      if (scope.$promotionValidation.valid !== true) {\n        return\n      }\n\n      $marketcloud.promotions.save(scope.promotion)\n\t\t\t\t\t.then(function (response) {\n  notie.alert(1, 'Promotion saved', 1.5)\n  location.path('/promotions')\n})\n\t\t\t\t\t.catch(function (response) {\n  notie.alert(3, 'An error has occurred. Promotion not saved', 1.5)\n})\n    }\n\n    scope.addCondition = function () {\n      scope.$newConditionValidation = window.Models.PromotionCondition.validate(scope.newCondition)\n      if (scope.$newConditionValidation.valid !== true) {\n        return\n      }\n\n      scope.promotion.conditions.push(scope.newCondition)\n      scope.newCondition = {}\n    }\n    scope.removeCondition = function (i) {\n      scope.promotion.conditions.splice(i, 1)\n    }\n    scope.removeEffect = function (i) {\n      scope.promotion.effects.splice(i, 1)\n    }\n    scope.addEffect = function () {\n      scope.$newEffectValidation = window.Models.PromotionEffect.validate(scope.newEffect)\n\n      if (scope.$newEffectValidation.valid !== true) {\n        return\n      }\n\n      scope.promotion.effects.push(scope.newEffect)\n      scope.newEffect = {}\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/promotions/promotions.new.js","var app = angular.module('DataDashboard')\n\napp.controller('ListResourcesController', [\n  '$scope',\n  'resources',\n  'resourceName',\n  '$q',\n  '$marketcloud',\n  'dependencies',\n  '$utils',\n  function(scope, resources, resource_name, $q, $marketcloud, $dependencies, $utils) {\n    scope.resources = resources.data.data\n    scope.dependencies = {}\n\n    scope.$dependencies = $dependencies\n\n    scope.pagination = $utils.getPaginationFromHTTPResponse(resources);\n\n    scope.query = {\n      per_page: 20\n    }\n\n    scope.prepareRegex = function() {\n      for (var k in scope.query) {\n        if (typeof scope.query[k] === 'object' && scope.query[k].hasOwnProperty('$regex')) {\n          scope.query[k]['$options'] = 'i'\n        }\n      }\n    }\n\n    scope.toggleAll = function() {\n      scope.resources.forEach(function(p) {\n        p.selected = scope.selectAll\n      })\n    }\n\n    scope.getSelectedItems = function() {\n      return scope.resources.filter(function(p) {\n        return p.selected === true\n      })\n    }\n\n    scope.update = function(id, update) {\n      return $marketcloud[resource_name].update(id, update)\n        .then(function(response) {\n          notie.alert(1, 'Item updated.', 1.5)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n\n    scope.bulkDelete = function() {\n      notie.confirm('Delete ' + scope.getSelectedItems().length + ' items?', 'Delete', 'Cancel', function() {\n        var defer = $q.defer()\n\n        var promises = []\n\n        scope\n          .getSelectedItems()\n          .forEach(function(item) {\n            promises.push($marketcloud[resource_name].delete(item.id))\n          })\n\n        $q.all(promises)\n          .then(function() {\n            notie.alert(1, 'All items have been deleted', 1.5)\n            scope.loadData()\n          })\n\n        return defer.promise\n      })\n    }\n    scope.bulkUpdate = function(update) {\n      notie.confirm('Update ' + scope.getSelectedItems().length + ' items?', 'Update', 'Cancel', function() {\n        var defer = $q.defer()\n\n        var promises = []\n\n\n\n        scope\n          .getSelectedItems()\n          .forEach(function(item) {\n            promises.push($marketcloud[resource_name].update(item.id, update))\n          })\n\n        $q.all(promises)\n          .then(function() {\n            notie.alert(1, 'All items have been updated', 1.5)\n            scope.loadData()\n          })\n\n        return defer.promise\n      })\n    }\n\n    scope.bulkJSONExport = function() {\n      // If there are no selected items, we export the whole current view\n      if (scope.getSelectedItems().length === 0)\n        return $utils.exportAsJSON(scope.resources);\n\n      $utils.exportAsJSON(scope.getSelectedItems());\n    }\n\n\n\n    scope.toggle = function(resource) {\n      $marketcloud[resource_name].update(resource.id, resource)\n        .then(function(response) {\n          notie.alert(1, 'Update successful', 1.5)\n        })\n        .catch(function(error) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n\n    scope.loadPage = function(page_number) {\n      scope.query.page = page_number\n      return scope.loadData()\n    }\n\n    scope.resetQuery = function() {\n      var currentPage = scope.query.page || 1\n      scope.query = {\n        per_page: 20,\n        page: currentPage\n      }\n    }\n    scope.loadData = function(query) {\n\n\n\n      if (query) {\n        if (\"object\" !== typeof query)\n          throw new TypeError(\"loadData(query) query must be an object of filters\");\n\n        for (var k in query)\n          scope.query[k] = query[k];\n      }\n\n\n\n      if ($dependencies.queryOverrides) {\n        for (var k in $dependencies.queryOverrides)\n          scope.query[k] = $dependencies.queryOverrides[k];\n      }\n      \n      return $marketcloud[resource_name]\n        .list(scope.query)\n        .then(function(response) {\n\n          scope.resources = response.data.data\n\n          scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n    scope.delete = function(resource_id, index) {\n      $marketcloud[resource_name].delete(resource_id)\n        .then(function(response) {\n          scope.loadData()\n          notie.alert(1, 'Item deleted', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n        })\n    }\n\n\n\n    /************************************************************\n     *                        DUPLICATE\n     **************************************************************/\n    scope.clone = function(instance) {\n\n      var toSave = angular.copy(instance)\n      delete toSave.id\n      delete toSave._id\n\n      if (toSave.name)\n        toSave.name += ' (Copy)'\n      else if (toSave.title)\n        toSave.title += ' (Copy)'\n\n\n      $marketcloud[resource_name].save(toSave)\n        .then(function(response) {\n          scope.loadData();\n          notie.alert(1, \"Item successfully cloned\", 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n\n\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/resource.list.js","var app = angular.module('DataDashboard')\n\napp.controller('SettingsController', [\n  '$scope',\n  '$http',\n  'Currencies',\n  'Timezones',\n  'Countries',\n  '$application',\n  function (scope, http, currencies, timezones, countries, $application) {\n    scope.countries = countries\n    scope.timezones = timezones\n    scope.application = $application.get()\n\n    scope.images = []\n\n    scope.application.apply_discounts_before_taxes = Boolean(scope.application.apply_discounts_before_taxes)\n\n    scope.currencies = Object.keys(currencies)\n      .map(function (c) {\n        return currencies[c]\n      })\n      .map(function (c) {\n        c.label = c.name + ' (' + c.symbol + ')'\n        return c\n      })\n      .sort(function (a, b) {\n        a = a.name\n        b = b.name\n        if (a > b) {\n          return 1\n        } else if (b > a) {\n          return -1\n        } else {\n          return 0\n        }\n      })\n\n    scope.tax_options = [{\n      value: 'nothing',\n      label: 'Don\\'t tax'\n    }, {\n      value: 'products_only',\n      label: 'Tax products only'\n    }, {\n      value: 'shipping_only',\n      label: 'Tax shipping only'\n    }, {\n      value: 'all',\n      label: 'Tax shipping and products'\n    }]\n\n    scope.refreshApplicationData = function () {\n      $http({\n        url: '/applications/list/' + Number(scope.application.id),\n        method: 'GET'\n      })\n        .then(function (response) {\n          $application.set(response.data.data)\n        })\n        .catch(function (error) {\n          notie.alert(3, \"An error has occurred while reloading application's data. Refreshing the page...\")\n          window.location.reload()\n        })\n    }\n\n    scope.updateSettings = function () {\n      var payload = {\n        name: scope.application.name,\n        url: scope.application.url,\n        timezone: scope.application.timezone,\n        currency_code: scope.application.currency_code,\n        tax_rate: scope.application.tax_rate,\n        tax_type: scope.application.tax_type,\n        apply_discounts_before_taxes: scope.application.apply_discounts_before_taxes,\n        email_address: scope.application.email_address,\n        company_name: scope.application.company_name,\n        company_taxid: scope.application.company_taxid,\n        company_country: scope.application.company_country,\n        company_state: scope.application.company_state,\n        company_city: scope.application.company_city,\n        company_address: scope.application.company_address,\n        company_postalcode: scope.application.company_postalcode,\n        invoices_prefix: scope.application.invoices_prefix\n      }\n\n      if (scope.images.length >= 1) { payload.logo = scope.images[0] }\n\n      http({\n        method: 'PUT',\n        url: window.API_BASE_URL + '/application',\n        data: payload,\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': window.public_key + ':' + window.token\n        }\n      })\n        .then(function (response) {\n          notie.alert(1, 'Application successfully updated', 1)\n        })\n        .catch(function (err) {\n          notie.alert(3, 'An error has occurred.')\n        })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/settings.controller.js","var app = angular.module('DataDashboard')\nvar controller = null\napp.controller('EditShippingController', [\n  '$scope',\n  '$http',\n  '$location',\n  'Countries',\n  'shipping',\n  '$marketcloud',\n  '$validation',\n  '$models',\n  function(scope, http, location, countries, shippingRequest, $marketcloud, $validation, $models) {\n    scope.availableRules = [\n      'max_value',\n      'min_value',\n      'max_weight',\n      'min_weight',\n      'max_height',\n      'min_height',\n      'max_depth',\n      'min_depth',\n      'max_width',\n      'min_width'\n    ]\n\n    scope.getShippingRules = function() {\n      var o = {}\n      for (var k in scope.shipping) {\n        if (scope.availableRules.indexOf(k) > -1) {\n          o[k] = angular.copy(scope.shipping[k])\n        }\n      }\n      return o\n    }\n\n\n\n    scope.howManyRules = function(o) {\n      var count = 0\n\n      for (var k in scope.shipping) {\n        if (scope.availableRules.indexOf(k) > -1) {\n          count++\n        }\n      }\n      return count\n    }\n\n    scope.countries = angular.copy(countries)\n    scope.countries.unshift({\n      name: 'All countries',\n      code: 'ALL'\n    }, {\n      name: 'Europe',\n      code: 'EUROPE'\n    })\n\n    scope.shipping = {\n      availability: 'ALL',\n      base_cost: 0,\n      per_item_cost: 0,\n      zones: []\n    }\n\n    scope.shipping = shippingRequest.data.data;\n\n    scope.shipping.zones = scope.shipping.zones || [];\n\n    scope.newRule = {}\n    scope.addRule = function() {\n      scope.shipping[scope.newRule.name] = scope.newRule.value\n\n      scope.newRule = {}\n    }\n\n    scope.removeRule = function(name) {\n      scope.shipping[name] = null;\n    }\n\n    scope.ruleNameToDescription = function(name) {\n      return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum')\n    }\n\n    scope.newZone = {}\n    scope.addZone = function() {\n      scope.shipping.zones.push(scope.newZone)\n      scope.newZone = null\n    }\n    scope.removeZone = function($index) {\n      scope.shipping.zones.splice($index, 1);\n    }\n\n    scope.updateShipping = function() {\n      \n      $validation.hideErrors();\n\n      $marketcloud.shippings.update(scope.shipping.id, scope.shipping)\n        .then(function(response) {\n          notie.alert(1, 'Shipping updated', 2)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"shipping.'+validation.invalidPropertyName+'\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\n\n            $validation.showErrorMessage(validation,$models.Shipping.schema , selector)\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shipping.edit.js","var app = angular.module('DataDashboard')\napp.controller('ShippingsController',\n    [\n      '$scope',\n      '$http',\n      '$location',\n      'Countries',\n      'shippings',\n      '$marketcloud',\n      '$utils',\n    function(scope, http, location, countries, shippings, $marketcloud, $utils) {\n\n    scope.shippings = shippings.data.data\n\n    scope.countries = countries;\n\n    scope.pagination = $utils.getPaginationFromHTTPResponse(shippings);\n\n    // Holding query fields\n    // When listing data this oobject is sent\n    scope.query = {\n      per_page: 20\n    }\n\n    scope.availableRules = [\n      'max_value',\n      'min_value',\n      'max_weight',\n      'min_weight',\n      'max_height',\n      'min_height',\n      'max_depth',\n      'min_depth',\n      'max_width',\n      'min_width'\n    ]\n\n\n    scope.getShippingRules = function(shipping) {\n      var o = {}\n      for (var k in shipping) {\n        if (scope.availableRules.indexOf(k) > -1) {\n          o[k] = angular.copy(shipping[k])\n        }\n      }\n\n      console.log(\"Le shipping rules\", o)\n      return o\n    }\n\n    scope.ruleNameToDescription = function(name) {\n      return name.replace(/\\_/gi, ' ')\n        .replace(/min/, 'Minimum')\n        .replace(/max/, 'Maximum')\n    }\n\n    scope.loadData = function() {\n      if (scope.query.q === '') {\n        delete scope.query.q\n      }\n\n      return $marketcloud.shippings.list(scope.query)\n        .then(function(response) {\n          scope.shippings = response.data.data;\n          scope.pagination = $utils.getPaginationFromHTTPResponse(response);\n        })\n        .error(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again', 1.5)\n        })\n    }\n\n    scope.loadPage = function(page_number) {\n      scope.query.page = Number(page_number)\n      scope.loadData()\n    }\n\n    scope.deleteShipping = function(id) {\n      $marketcloud.shippings.delete(id)\n        .then(function(response) {\n          notie.alert(1, 'Shipping method successfully deleted', 1.5)\n          scope.loadPage()\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred', 1.5)\n        })\n    }\n\n    /************************************************************\n     *                        DUPLICATE\n     **************************************************************/\n    scope.clone = function(shippingRule) {\n      console.log(\"Cloning\");\n      \n      var toSave = angular.copy(shippingRule)\n      delete shippingRule.id\n      delete toSave._id\n\n      toSave.name += ' (Copy)'\n\n\n      $marketcloud.shippings.save(toSave)\n        .then(function(response) {\n          scope.loadPage();\n          notie.alert(1,\"Shipping rule successfully cloned\",1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.list.js","var app = angular.module('DataDashboard')\napp.controller('CreateShippingController', [\n  '$scope',\n  '$http',\n  '$location',\n  'Countries',\n  '$marketcloud',\n  '$validation',\n  '$models',\n  function(scope, http, location, countries, $marketcloud, $validation, $models) {\n    scope.availableRules = [\n      'max_value',\n      'min_value',\n      'max_weight',\n      'min_weight',\n      'max_height',\n      'min_height',\n      'max_depth',\n      'min_depth',\n      'max_width',\n      'min_width'\n    ]\n\n    scope.getShippingRules = function() {\n      var o = {}\n      for (var k in scope.shipping) {\n        if (scope.availableRules.indexOf(k) > -1) {\n          o[k] = angular.copy(scope.shipping[k])\n        }\n      }\n      return o\n    }\n    scope.howManyRules = function(o) {\n      var count = 0\n\n      for (var k in scope.shipping) {\n        if (scope.availableRules.indexOf(k) > -1) {\n          count++\n        }\n      }\n      return count\n    }\n\n    scope.countries = angular.copy(countries)\n\n    scope.filterCountries = function(query) {\n      var data = scope.countries.filter(function(country) {\n        return country.name.indexOf(query) > -1\n      }).sort(function(a, b) {\n        return a.name > b.name\n      })\n      return {\n        data: data\n      }\n    }\n\n    // Adding a handy \"all\" destination\n    scope.countries.unshift({\n      name: 'All countries',\n      code: 'ALL'\n    })\n\n    scope.shipping = {\n      name: '',\n      base_cost: 0,\n      per_item_cost: 0,\n      zones: []\n    }\n\n    scope.newRule = {}\n    scope.addRule = function() {\n      scope.shipping[scope.newRule.name] = scope.newRule.value\n\n      scope.newRule = {}\n    }\n\n    scope.removeRule = function(name) {\n      delete scope.shipping[name]\n    }\n\n    scope.ruleNameToDescription = function(name) {\n      return name.replace(/\\_/gi, ' ').replace(/min/, 'Minimum').replace(/max/, 'Maximum')\n    }\n\n    scope.newZone = {}\n    scope.addZone = function() {\n      scope.shipping.zones.push(scope.newZone)\n      scope.newZone = null\n    }\n    scope.removeZone = function($index) {\n      scope.shipping.zones.splice($index, 1)\n    }\n\n    scope.saveShipping = function() {\n      \n      $validation.hideErrors()\n\n      $marketcloud.shippings.save(scope.shipping)\n        .then(function(response) {\n          notie.alert(1, 'Shipping saved.', 1.5)\n          location.path('/shippings')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400){\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"shipping.'+validation.invalidPropertyName+'\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"'+validation.invalidPropertyName+'\"]'\n\n            $validation.showErrorMessage(validation,$models.Shipping.schema , selector)\n          } else \n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/shippingMethods/shippings.new.js","\nvar app = angular.module('DataDashboard')\n\napp.controller('SidebarController', [\n  '$scope', '$http', '$routeParams', '$location', '$rootScope', '$route',\n  function ($scope, $http, $params, $location, $root, $route) {\n    $scope.showingSubSidebar = false\n\n    $scope.currentSidebarSection = null\n\n    $scope.currentSection = null\n\n    $scope.$on('$dashboardSectionChange', function ($event, args) {\n\t\t\t// Intercepting the new section event\n      if (args.section) {\n        $scope.currentSection = args.section.split('.')[0]\n\n        $root.currentSection = args.section.split('.')[0]\n        $root.currentSubsection = args.section.split('.')[1] || null\n\n        if (args.section.indexOf('system') < 0 || args.section.indexOf('inventory') < 0) {\n          $scope.hideSubSidebar()\n        }\n      }\n    })\n\n    $scope.switchToApp = function (app_id) {\n      var current_app_id = window.current_application.id\n\t\t\t// We just need to swap the current urls with the desired app id\n      var url = '/applications/' + app_id + '/dashboard#/'\n\n      window.location.href = url\n    }\n\n    $scope.subEntriesGroupToShow = null\n\n    $scope.subSideBars = {\n      inventory: false,\n      system: false\n    }\n    $scope.showSubEntries = function (id) {\n      $scope.subEntriesGroupToShow = id\n    }\n\n    $scope.subEntriesGroupShown = {\n      inventory: false,\n      system: false\n    }\n\n    $scope.toggleSubEntries = function (group_id) {\n\t\t\t// group_id is the name of the dashboard section\n\t\t\t// a section is a group of logical views\n\t\t\t// e.g. inventory is a group of views related to inventory management\n      $scope.currentSection = group_id\n\n      $scope.subEntriesGroupShown[group_id] = !$scope.subEntriesGroupShown[group_id]\n    }\n    $scope.showSubSidebar = function (id) {\n      $scope.showingSubSidebar = true\n\n      var sidebars = [\n        'inventory',\n        'system',\n        'contents'\n      ]\n\n      if (sidebars.indexOf(id) < 0) {\n        return false\n      }\n\n      $scope.currentSidebarSection = id\n    }\n\n    $scope.hideSubSidebar = function () {\n      $scope.showingSubSidebar = false\n    }\n  }\n])\n\napp.controller('NavbarController', ['$scope', '$http', '$routeParams', '$location',\n  function ($scope, $http, $params, $location) {\n\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/sidebar.js","var app = angular.module('DataDashboard')\napp.controller('CreateStaticContentController', [\n  '$scope',\n  '$http',\n  '$location',\n  '$marketcloud',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, location, $marketcloud, $utils, $validation, $models) {\n\n\n    scope.content = {\n     name : '',\n     content : ''\n    }\n\n\n    // This function is invoked when a seo property\n    // changes.\n    scope.computeSeoTags = function() {\n\n    }\n\n    scope.unsafeSlug = false\n    scope.updateSlug = function() {\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\n    }\n    scope.saveContent = function() {\n      $validation.hideErrors()\n      $marketcloud.staticContents.save(scope.content)\n        .then(function(response) {\n          // title text author\n          notie.alert(1, 'Static content saved', 2)\n          location.path('/contents/static')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.StaticContent.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/staticContents/staticContent.new.js","var app = angular.module('DataDashboard')\n\napp.controller('EditStaticContentController', [\n  '$scope',\n  '$http',\n  'content',\n  '$location',\n  '$marketcloud',\n  'moment',\n  '$utils',\n  '$validation',\n  '$models',\n  function(scope, http, content, location, $marketcloud, $moment, $utils, $validation, $model) {\n    scope.content = content.data.data\n\n\n\n\n\n    scope.unsafeSlug = false\n    scope.updateSlug = function() {\n      scope.content.slug = $utils.getSlugFromString(scope.content.title)\n    }\n\n    scope.getImagesContainer = function() {\n      return scope.content.author.images\n    }\n\n\n\n    scope.updateContent = function() {\n      $marketcloud.staticContents.update(scope.content.id, scope.content)\n        .then(function(response) {\n          notie.alert(1, 'Content updated with success', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"content.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.StaticContent.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/staticContents/staticContents.edit.js","var app = angular.module('DataDashboard')\n\napp.controller('EditTaxController', [\n  '$scope',\n  '$http',\n  '$marketcloud',\n  '$location',\n  'Countries',\n  'tax',\n  'TaxRates',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, countries, tax, tax_rates, $validation, $models) {\n\n    scope.tax_rates = tax_rates\n\n    scope.countriesWithTaxRates = scope.tax_rates\n      .map(function(r) {\n        return r.country\n      })\n      .filter(function(item, pos, self) {\n        return self.indexOf(item) == pos\n      })\n\n    scope.countries = countries\n    scope.countries.unshift({\n      name: '*'\n    })\n\n    // Cache of states lists\n    scope.states = {}\n\n    // Whenever the country changes,\n    // the list of states must be updated\n    scope.tax = tax.data.data\n\n    scope.addRate = function() {\n      scope.tax.rates.push({\n        name: '',\n        country: '',\n        state: '',\n        postcode: '',\n        city: '',\n        rate: 0,\n        priority: 0\n      })\n    }\n\n    scope.deleteRate = function(index) {\n      scope.tax.rates.splice(index, 1)\n    }\n\n    scope.updateCity = function(rate) {\n      if (rate.postcode.indexOf('*') > -1) {\n        rate.city = '*'\n      }\n    }\n    scope.updatePostcode = function(rate) {\n      if (rate.state === '*') {\n        rate.postcode = '*'\n      }\n    }\n\n    scope.updateStates = function(rate) {\n      if (rate.country === '*') {\n        rate.state = '*'\n        rate.city = '*'\n        return\n      }\n\n      http({\n          method: 'GET',\n          url: '/countries/' + rate.country.toLowerCase()\n        })\n        .then(function(response) {\n          scope.states[rate.country] = response.data\n          scope.states[rate.country].unshift({\n            name: '*'\n          })\n        })\n        .catch(function(error) {\n          var type = error.data.errors[0].type\n          scope.states[rate.country] = [{\n            name: '*'\n          }]\n\n          // We show an empty text input if its not available\n          // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\n          if (type !== 'StatesListNotAvailable') {\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          }\n        })\n    }\n\n    scope.saveTax = function() {\n      $marketcloud.taxes.update(scope.tax.id, scope.tax)\n        .then(function(response) {\n          notie.alert(1, 'Tax saved', 1.5)\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.Tax.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/taxes/taxes.edit.js","var app = angular.module('DataDashboard')\n\napp.directive('customOnChange', function() {\n  return {\n    restrict: 'A',\n    link: function(scope, element, attrs) {\n      var onChangeHandler = scope.$eval(attrs.customOnChange)\n      element.bind('change', onChangeHandler)\n    }\n  }\n})\n\nfunction csvToJson(csv) {\n  var lines = csv.split('\\n')\n\n  var result = []\n\n  var headers = lines[0].split(',')\n\n  for (var i = 1; i < lines.length; i++) {\n    var obj = {}\n    var currentline = lines[i].split(',')\n\n    for (var j = 0; j < headers.length; j++) {\n      obj[headers[j]] = currentline[j]\n    }\n\n    result.push(obj)\n  }\n\n  return result\n}\n\nfunction validateTaxRates(rates) {\n  var testFunction = function(rate) {\n    return (\n      rate.country &&\n      rate.state &&\n      rate.postcode &&\n      rate.city &&\n      rate.rate &&\n      rate.hasOwnProperty('priority') // it can be 0 and would fail the simple test\n    )\n  }\n\n  // Check that every item pass the test function\n  return rates.every(testFunction)\n}\n\nfunction Rate(config) {\n  this.state = '*'\n  this.postcode = '*'\n  this.city = '*'\n  this.priority = 0\n\n  for (var k in config) {\n    this[k] = config[k]\n  }\n\n  // We store rates as strings in our default country list\n  if (this.rate) {\n    this.rate = Number(this.rate)\n  }\n}\n\napp.controller('CreateTaxController', [\n  '$scope', \n  '$http', \n  '$marketcloud', \n  '$location', \n  'Countries', \n  'TaxRates',\n  '$validation',\n  '$models',\n  function(scope, http, $marketcloud, location, countries, tax_rates, $validation, $models) {\n    scope.countries = countries\n    scope.tax_rates = tax_rates\n\n    scope.countriesWithTaxRates = scope.tax_rates\n      .map(function(r) {\n        return r.country\n      })\n      .filter(function(item, pos, self) {\n        return self.indexOf(item) == pos\n      })\n\n    scope.countries.unshift({\n      name: '*'\n    })\n\n    // Cache of states lists\n    scope.states = {}\n\n    // Whenever the country changes,\n    // the list of states must be updated\n    scope.tax = {\n      rates: []\n    }\n\n    scope.updateCity = function(rate) {\n      if (rate.postcode.indexOf('*') > -1) {\n        rate.city = '*'\n      }\n    }\n    scope.updatePostcode = function(rate) {\n      if (rate.state === '*') {\n        rate.postcode = '*'\n      }\n    }\n\n    scope.importCSV = function() {\n      $('#chooseFileButton').trigger('click')\n    }\n    scope.handleFileSelect = function(evt) {\n      var files = $('#chooseFileButton')[0].files // FileList object\n\n      // use the 1st file from the list\n      var f = files[0]\n\n      // HTML5 API\n      var reader = new FileReader()\n\n      // Closure to capture the file information.\n      reader.onload = (function(theFile) {\n        return function(e) {\n          // Grabbing the file\n          var csv_file = e.target.result\n\n          // Converting to JSON\n          var new_rates = csvToJson(csv_file)\n\n          if (validateTaxRates(new_rates) === false) {\n            notie.alert(2, 'The provided CSV file is not in a valid format', 2)\n            return\n          }\n\n          // Transforming into a Rate object to handle defaults\n          new_rates = new_rates.map(function(rate) {\n            return new Rate(rate)\n          })\n\n          // Pushing new stuff to the bottom\n          scope.tax.rates = scope.tax.rates.concat(new_rates)\n\n          // Calling apply, since Angular is not aware of this async operation\n          scope.$apply()\n        }\n      })(f)\n\n      // Read in the image file as a data URL.\n      reader.readAsText(f)\n    }\n\n    scope.loadRatesFromCountry = function(country) {\n      var new_rates = scope.tax_rates\n        .filter(function(rate) {\n          return rate.country === country\n        }).map(function(rate) {\n          rate.country = country\n          return new Rate(rate)\n        })\n      scope.tax.rates = scope.tax.rates.concat(new_rates)\n    }\n\n    scope.updateStates = function(rate) {\n      if (rate.country === '*') {\n        rate.state = '*'\n        rate.city = '*'\n        return\n      }\n\n      http({\n          method: 'GET',\n          url: '/countries/' + rate.country.toLowerCase()\n        })\n        .then(function(response) {\n          scope.states[rate.country] = response.data\n          scope.states[rate.country].unshift({\n            name: '*'\n          })\n        })\n        .catch(function(error) {\n          var type = error.data.errors[0].type\n          scope.states[rate.country] = '*'\n\n          // We show an empty text input if its not available\n          // notie.alert(2,\"List of states not available for \"+scope.tax.country,2);\n\n          if (type !== 'StatesListNotAvailable') {\n            notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n          }\n        })\n    }\n\n    scope.addRate = function() {\n      scope.tax.rates.push({\n        name: '',\n        country: '',\n        state: '',\n        postcode: '',\n        city: '',\n        rate: 0,\n        priority: 0\n      })\n    }\n\n    scope.deleteRate = function(index) {\n      scope.tax.rates.splice(index, 1)\n    }\n\n    scope.saveTax = function() {\n\n      $validation.hideErrors();\n\n      $marketcloud.taxes.save(scope.tax)\n        .then(function(response) {\n          notie.alert(1, 'Tax saved', 1.5)\n          location.path('/system/taxes')\n        })\n        .catch(function(response) {\n\n          if (response.status === 400) {\n            notie.alert(2, 'The data you entered has some errors', 1.5);\n\n            var validation = response.data.errors[0];\n            var selector = '[ng-model=\"tax.' + validation.invalidPropertyName + '\"]';\n\n            if (angular.element(selector).length === 0)\n              selector = '[validate-for=\"' + validation.invalidPropertyName + '\"]'\n\n            $validation.showErrorMessage(validation, $models.Tax.schema, selector)\n          } else\n            notie.alert(3, 'An error has occurred.', 2)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/taxes/taxes.new.js","'use strict';\n/* globals angular */\nvar app = angular.module('DataDashboard');\nJSON.flatten = function(data) {\n    var result = {};\n    function recurse (cur, prop) {\n        if (Object(cur) !== cur) {\n            result[prop] = cur;\n        } else if (Array.isArray(cur)) {\n             for(var i=0, l=cur.length; i<l; i++)\n                 recurse(cur[i], prop + \"[\" + i + \"]\");\n            if (l == 0)\n                result[prop] = [];\n        } else {\n            var isEmpty = true;\n            for (var p in cur) {\n                isEmpty = false;\n                recurse(cur[p], prop ? prop+\".\"+p : p);\n            }\n            if (isEmpty && prop)\n                result[prop] = {};\n        }\n    }\n    recurse(data, \"\");\n    return result;\n}\napp.controller('TranslationsController',\n\t['$scope', 'resource','resourceType',\n\tfunction(scope, resource,type) {\n\n\t\n\t\t// The resource to translate\n\t\tscope.resource = resource.data.data;\n\t\t// Init locales\n\t\tif (!scope.resource.hasOwnProperty('locales')){\n\t\t\tscope.resource.locales = {};\n\t\t\tscope.availableLocales.forEach(function(locale){\n\t\t\t\tscope.resource.locales[locale] = {};\n\t\t\t})\n\t\t} else {\n\t\t\t// Let''s just be sure the locals object has every locale \n\t\t\t// initialized to an empty object\n\t\t\tscope.availableLocales.forEach(function(locale){\n\t\t\t\tif (!scope.resource.locales.hasOwnProperty(locale))\n\t\t\t\t\tscope.resource.locales[locale] = {};\n\t\t\t})\n\t\t}\n\n\n\n\t\t// The type of the resource, product, category, etc...\n\t\tscope.type = type;\n\n\t\tscope.getTranslatableProperties = function(){\n\t\t\treturn Object.keys(JSON.flatten(scope.resource))\n\t\t\t.filter(function(k){\n\t\t\t\treturn (k.indexOf('variant') === -1 &&\n\t\t\t\t\t\tk.indexOf('locale') === -1)\n\t\t\t})\n\t\t}\n\n\t\tscope.translatables = scope.getTranslatableProperties();\n\n\t\tvar props_to_translate = {\n\t\t\tproducts : [\"name\",\"description\"],\n\t\t\tcategories : [\"name\",\"description\"],\n\t\t\tbrands : [\"name\",\"description\"],\n\t\t\tcollections : [\"name\",\"description\"],\n\t\t}\n\n\n\t\t\n\n\t\tscope.save = function(){\n\t\t\t\n\t\t}\n\t}\n]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/translations.js","var app = angular.module('DataDashboard')\napp.controller('UsersController', ['$scope', '$marketcloud', 'users',\n  function(scope, $marketcloud, resources) {\n    scope.users = resources.data.data\n\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    scope.query = {\n      per_page: 20\n    }\n\n    // Util\n    scope.timestampToDate = function(t) {\n      var a = new Date(t)\n      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n      var str = a.getDate() + ' ' + months[a.getMonth()] + ' ' + a.getFullYear()\n      return str\n    }\n\n    scope.loadPage = function(p) {\n      scope.query.page = Number(p)\n      return scope.loadData(scope.query)\n    }\n\n    scope.delete = function(user) {\n      $marketcloud.users.delete(user.id)\n        .then(function(response) {\n          notie.alert(1, 'User deleted', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n    scope.loadData = function(query) {\n      if (!query) {\n        query = scope.query\n      }\n\n      $marketcloud.users.list(query)\n        .then(function(response) {\n          scope.users = response.data.data\n\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.list.js","var app = angular.module('DataDashboard')\n\nvar NewUserController = function(scope, $marketcloud, http, location, Countries) {\n  scope.user = {\n    name: \"\",\n    password: \"\",\n    registered_with: 'email',\n    billing_address : {},\n    shipping_address : {}\n  }\n  scope.countries = Countries\n  scope.customPropertiesData = {}\n\n  scope.copyShippingAddressToBillingAddress = function(){\n    for (var k in scope.user.shipping_address)\n      scope.user.billing_address[k] = scope.user.shipping_address[k];\n  }\n\n  scope.saveUser = function() {\n\n    // Joining user object with custom properties\n    for (var k in scope.customPropertiesData) {\n      scope.user[k] = scope.customPropertiesData[k]\n    }\n\n    console.log(\"Saving this\",scope.user)\n    $marketcloud.users.save(scope.user)\n      .then(function(response) {\n        notie.alert(1, 'User saved', 2)\n        location.path('/users')\n      })\n      .catch(function(response) {\n        notie.alert(2, 'An error has occurred. Please check the data you entered', 2)\n      })\n  }\n\n  // We need to load Roles\n  http({\n      method: 'GET',\n      url: '/applications/' + scope.application.id + '/roles'\n    })\n    .then(function(response) {\n      scope.roles = response.data.data\n    })\n    .catch(function(response) {\n      notie.alert(2, 'An error has occurred while reloading roles.', 1)\n    })\n\n  scope.addCustomProperty = function() {\n    if (scope.user.hasOwnProperty(scope.newAttributeName)) {\n      scope.userError = 'CUSTOM_PROPERTY_NAME_ALREADY_EXISTS'\n    } else {\n      scope.customPropertiesData[scope.newAttributeName] = scope.newAttributeValue\n      scope.newAttributeValue = null\n      scope.newAttributeName = null\n    }\n  }\n\n  scope.deleteCustomProperty = function(property_name) {\n    delete scope.customPropertiesData[property_name]\n  }\n}\n\nNewUserController.$inject = ['$scope', '$marketcloud', '$http', '$location', 'Countries']\n\napp.controller('NewUserController', NewUserController)\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.new.js","var app = angular.module('DataDashboard')\napp.controller('UserController', [\n  '$scope',\n  '$http', \n  '$routeParams', \n  'user', \n  '$marketcloud',\n  'Countries',\n  '$utils',\n  function(scope, http, params, user, $marketcloud, countries, $utils) {\n    // Injecting the resolve's data\n    scope.user = user.data.data;\n\n\n\n    scope.carts = []\n    scope.addresses = []\n\n    scope.newAddress = {\n      email: scope.user.email || '',\n      user_id: scope.user.id\n    }\n\n    // This is a list of countries used by the countries autocomplete\n    scope.countries = countries\n\n    scope.update = function() {\n      var payload = angular.copy(scope.user)\n\n      for (var k in scope.customPropertiesData) {\n        payload[k] = scope.customPropertiesData[k]\n      }\n\n      delete payload['id']\n      delete payload['application_id']\n\n      $marketcloud.users.update(scope.user.id, payload)\n        .then(function(response) {\n          notie.alert(1, 'Update Succeded', 2)\n        })\n        .catch(function(errpr) {\n          notie.alert(3, 'An error has occurred, please try again', 2)\n        })\n    }\n\n\n    scope.toggleAddressVisibility = function(address) {\n      address.expanded = !address.expanded;\n    }\n\n    scope.saveAddress = function() {\n      $marketcloud.addresses.save(scope.newAddress)\n        .then(function(response) {\n          notie.alert(1, 'Address created', 2)\n          scope.newAddress = {\n            email: scope.user.email || '',\n            user_id: scope.user.id\n          }\n          $(\"#addAddressModal\").modal(\"hide\");\n          return $marketcloud.addresses.list({\n            user_id: scope.user.id\n          })\n        })\n        .then(function(response) {\n          scope.addresses = response.data.data\n        })\n        .catch(function(error) {\n          notie.alert(2, 'An error has occurred, please check the data you entered', 2)\n        })\n    }\n\n    // Getting the set of core properties from models\n    var coreProperties = Models.User.getPropertyNames()\n\n    // id is a core property often not inside models\n    coreProperties.push(\n      'id',\n      'role',\n      'application_id',\n      'registered_with',\n      'created_at',\n      'updated_at',\n      'shipping_address',\n      'billing_address')\n\n    // Here we store custom properties\n    scope.customPropertiesData = {}\n\n    for (var k in scope.user) {\n      if (coreProperties.indexOf(k) < 0) {\n        scope.customPropertiesData[k] = scope.user[k]\n        delete scope.user[k]\n      }\n    }\n\n    $marketcloud.orders.list({\n        \"user.id\": params.userId,\n        \"per_page\": 10\n      })\n      .then(function(response) {\n\n        scope.orders = response.data.data\n      })\n      .catch(function(response) {\n\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\n      })\n\n    $marketcloud.carts.list({\n        user_id: params.userId,\n        per_page: 10\n      })\n      .then(function(response) {\n\n        scope.carts = response.data.data\n      })\n      .catch(function(response) {\n\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\n      })\n\n    $marketcloud.addresses.list({\n        user_id: params.userId,\n        per_page: 5\n      })\n      .then(function(response) {\n\n        // We want to \"compress\" the view\n        scope.addresses = response.data.data.map(function(address, index) {\n          if (0 === index)\n            address.expanded = true;\n          else\n            address.expanded = false;\n          return address\n        })\n\n\n      })\n      .catch(function(response) {\n\n        notie.alert(2, 'An error has occurred. Please try again.', 2)\n      })\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/users/users.view.js","var app = angular.module('DataDashboard')\napp.controller('EditVariableController',\n  ['$scope', '$http', '$location', '$marketcloud', 'variable',\n    function (scope, http, location, $marketcloud, variable) {\n      scope.variable = variable.data.data\n\n      function isURL (s) {\n        if (typeof s !== 'string') { return false }\n        if (typeof s.indexOf !== 'function') { return false }\n        return s.indexOf('http://') === 0\n      }\n\n      if (isURL(scope.variable.value)) {\n        scope.variable.type = 'URL'\n      }\n\n      scope.containerForNewMediaAttribute = []\n\n      scope.containersForExistingMediaAttributes = {}\n\n      scope.$watchCollection('containerForNewMediaAttribute', function () {\n        if (scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]) {\n          scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\n        }\n      })\n\n      if (isURL(scope.variable.value) === true) {\n        scope.containersForExistingMediaAttributes['value'] = [scope.variable.value]\n        scope.$watchCollection('containersForExistingMediaAttributes.value', function () {\n          // If the value is null, it means that we just deleted it, so we don't have to re-update it\n          if (scope.variable.value === null) {\n            return\n          }\n          if (scope.containersForExistingMediaAttributes['value']) {\n            scope.variable.value = scope.containersForExistingMediaAttributes['value'][scope.containersForExistingMediaAttributes['value'].length - 1]\n          }\n        })\n      }\n\n      scope.availableTypes =\n      [\n        { type: 'string', label: 'String' },\n        { type: 'number', label: 'Number' },\n        { type: 'URL', label: 'Url / Media' },\n        { type: 'boolean', label: 'True/False' }\n      ]\n\n      scope.invalidPropertyName = null\n      scope.validationMessage = null\n      scope.validate = function () {\n\n      }\n\n      scope.update = function () {\n        var payload = angular.copy(scope.variable)\n\n        if (payload.type === 'URL') {\n          payload.type = 'string'\n        }\n        $marketcloud.variables.update(scope.variable.id, payload)\n        .then(function (response) {\n          notie.alert(1, 'Variable successfully saved.', 1.5)\n        })\n        .catch(function (error) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n      }\n    }\n  ])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.edit.js","var app = angular.module('DataDashboard')\napp.controller('VariablesController', ['$scope', '$http', 'variables', '$marketcloud',\n  function(scope, http, resources, $marketcloud) {\n    // Pagination\n    scope.pagination = {\n      currentPage: resources.data.page,\n      numberOfPages: resources.data.pages,\n      nextPage: resources.data._links.next || null,\n      previousPage: resources.data._links.prev || null,\n      count: resources.data.count\n    }\n\n    // Query\n    scope.query = {\n      per_page: 20\n    }\n\n    // Initial data resolved from the router\n    scope.variables = resources.data.data\n\n    scope.loadPage = function(p) {\n      return scope.loadData({\n        page: p\n      })\n    }\n    scope.loadData = function(query) {\n      if (!query) {\n        query = scope.query\n      }\n\n      $marketcloud.variables.list(query)\n        .then(function(response) {\n          scope.variables = response.data.data\n\n          scope.pagination = {\n            currentPage: response.data.page,\n            numberOfPages: response.data.pages,\n            nextPage: response.data._links.next || null,\n            previousPage: response.data._links.prev || null,\n            count: response.data.count\n          }\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n    scope.setPublishing = function(variable) {\n\n      $marketcloud.variables.update(variable.id, {\n          published: variable.published\n        })\n        .then(function(response) {\n          notie.alert(1, 'Updated!', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n\n    scope.deleteVariable = function(variable_id, index) {\n      $marketcloud.variables.delete(variable_id)\n        .then(function(response) {\n          scope.loadData({\n            page: 1\n          })\n          notie.alert(1, 'Variable deleted', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred.Please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.list.js","var app = angular.module('DataDashboard')\napp.controller('CreateVariableController', ['$scope', '$http', '$location', '$marketcloud',\n  function (scope, http, location, $marketcloud) {\n    scope.variable = {\n      type: 'string',\n      value: '',\n      name: ''\n    }\n\n    scope.containerForNewMediaAttribute = []\n\n    scope.containersForExistingMediaAttributes = {}\n\n    scope.$watchCollection('containerForNewMediaAttribute', function () {\n      scope.variable.value = scope.containerForNewMediaAttribute[scope.containerForNewMediaAttribute.length - 1]\n    })\n\n    scope.availableTypes =\n    [\n        { type: 'string', label: 'String'},\n        { type: 'number', label: 'Number'},\n        { type: 'URL', label: 'Url / Media'},\n        { type: 'boolean', label: 'True/False'}\n    ]\n\n    scope.invalidPropertyName = null\n    scope.validationMessage = null\n    scope.validate = function () {\n\n    }\n\n    scope.save = function () {\n      var payload = angular.copy(scope.variable)\n      if (payload.type === 'URL') {\n        payload.type = 'string'\n      }\n      $marketcloud.variables.save(payload)\n        .then(function (response) {\n          notie.alert(1, 'Variable successfully saved.', 1.5)\n          location.path('/variables')\n        })\n        .catch(function (error) {\n          notie.alert(3, 'An error has occurred, please try again.', 1.5)\n        })\n    }\n  }\n])\n\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variables/variables.new.js","angular.module('DataDashboard').controller('EditVariantController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct',\n  function(scope, $marketcloud, params, $http, resolvedProduct) {\n    scope.product = resolvedProduct.data.data\n\n    var originalVariantData = null\n\n    scope.variant = null\n\n    // This object holds the actual properties of the variant\n    // computed by variant + parent\n    scope.product_merge_variant = {}\n\n    // When saving the variant, only what does not match with the parent\n    // is saved inside the variant object\n    scope.customPropertiesData = {}\n\n    // These cannot be touched\n    scope.variantDefiningProperties = {}\n\n    scope.currentVariantId = null\n\n    scope.filterVariantProps = function(o) {\n      var p = {}\n      for (var k in o) {\n        // if its not an inherited property, then it's a variant property name\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n          p[k] = k + ': ' + String(o[k])\n        }\n      }\n      return p\n\n      // return o\n    }\n\n    // This method must be implemented in order to\n    // make the media manager work\n    scope.getImagesContainer = function() {\n      return scope.product_merge_variant.images\n    }\n\n    scope.removeImage = function(i) {\n      scope.product_merge_variant.images.splice(i, 1)\n    }\n\n    scope.getVariantStyle = function(i) {\n      // var r = [{\"color\" : \"red\"},{\"color\" : \"green\"},{\"color\" : \"blue\"}, {\"color\" : \"pink\"}\n      // ]\n      var r = ['label-info', 'label-danger', 'label-warning', 'label-success']\n      return r[i % r.length]\n    }\n    scope.getVariantStyle = function(i) {\n      var r = [{\n        'color': '#c0392b'\n      }, {\n        'color': '#27ae60'\n      }, {\n        'color': '#2c3e50'\n      }, {\n        'color': '#d35400'\n      }]\n      return r[i % r.length]\n    }\n\n    scope.getVariantClass = function(i) {\n      var classes = ['label-empty-info', 'label-empty-success', 'label-empty-warning', 'label-empty-danger']\n      return 'label solid ' + (classes[i % classes.length])\n    }\n\n    scope.updateVariant = function() {\n      \n      \n      // We take only some stuff from the main product\n      var variantProperties = [\n      // Le eliino queste due perch altrimenti, se metto un prezzo nel parent\n      // e nel figlio metto lo stesso, non me lo salva\n        //'price',\n        //'price_discount',\n        'category_id',\n        'description',\n        'stock_type',\n        'stock_status',\n        'stock_level',\n        'sku',\n        'barcode',\n        'images',\n        'requires_shipping',\n        'width',\n        'depth',\n        'height',\n        'weight'\n      ]\n\n      var toSend = angular.copy(scope.variant)\n\n      for (var k in scope.product_merge_variant) {\n        \n        // Se la property della variante \n        // deiversa da ci che sta in product_merge_variant\n        // e la properiet  presente in variantProperties\n        if (toSend[k] !== scope.product_merge_variant[k] && variantProperties.indexOf(k) > -1) {\n\n          toSend[k] = scope.product_merge_variant[k]\n        }\n\n        if (k === \"price_discount\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n           console.log(k+\" dovrebbe passare da \"+originalVariantData[k]+\" a \"+scope.product_merge_variant[k])\n           toSend.price_discount = scope.product_merge_variant[k]\n        }\n\n        if (k === \"price\" && scope.product_merge_variant[k] !== originalVariantData[k]) {\n           toSend.price = scope.product_merge_variant[k]\n        }\n\n\n      }\n\n      console.log(\"product_merge_variant\",angular.copy(scope.product_merge_variant))\n      console.log(\"toSend\",angular.copy(toSend))\n\n      \n\n\n      $http({\n          method: 'PUT',\n          url: API_BASE_URL + '/products/' + params.productId + '/variants/' + scope.variant.id,\n          headers: {\n            Authorization: window.public_key + ':' + window.token\n          },\n          data: toSend\n        })\n        .then(function(response) {\n          notie.alert(1, 'Variant successfully updated', 1.5)\n        })\n        .catch(function(response) {\n          notie.alert(3, 'An error has occurred. Please try again.', 1.5)\n        })\n    }\n\n    scope.setCurrentVariant = function(variant_id) {\n      scope.currentVariantId = variant_id\n      scope.product.variants.forEach(function(v) {\n        if (Number(v.id) === Number(variant_id)) {\n          scope.variant = v\n           originalVariantData = angular.copy(v)\n        }\n      })\n      for (var k in scope.product) {\n        scope.product_merge_variant[k] = scope.product[k]\n      }\n      for (var j in scope.variant) {\n        scope.product_merge_variant[j] = scope.variant[j]\n      }\n    }\n\n    scope.setCurrentVariant(Number(params.variantId))\n\n    scope.product = resolvedProduct.data.data\n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variants.edit.js","angular.module('DataDashboard')\n.controller('ListVariantsController', ['$scope', '$marketcloud', '$routeParams', '$http', 'resolvedProduct',\n  function(scope, $marketcloud, params, $http, resolvedProduct) {\n    \n    scope.product = resolvedProduct.data.data\n\n    // These cannot be touched\n    scope.variantDefiningProperties = {}\n\n    scope.deleteVariant = function(variant) {\n    return $http({\n        method: 'DELETE',\n        url: API_BASE_URL + '/products/' + scope.product.id + '/variants/' + variant.id,\n        headers: {\n          Authorization: window.public_key + ':' + window.token\n        }\n      })\n      .then(function(response) {\n        notie.alert(1, 'Variant deleted', 1.5)\n        scope.product = response.data.data\n      })\n      .catch(function(response) {\n        notie.alert(3, 'An error has occurred, please try again.', 1.5)\n      })\n  }\n\n  scope.clone = function(variant) {\n        var variantToSave = angular.copy(variant)\n          // Removing useless stuff in the variant\n        delete variantToSave['id']\n\n        return $http({\n              method: 'POST',\n              url: API_BASE_URL + '/products/' + scope.product.id + '/variants',\n              data: variantToSave,\n              headers: {\n                Authorization: window.public_key + ':' + window.token\n              }\n        })\n        .then( function(response){\n          notie.alert(1,\"Variant successfully cloned\",2);\n        })\n        .catch( function(response){\n          notie.alert(2,\"An error has occurred, please try again\",2);\n        })\n\n      }\n\n\n    scope.filterVariantProps = function(o) {\n      var p = {}\n      for (var k in o) {\n        // if its not an inherited property, then it's a variant property name\n        if (scope.product.variantsDefinition.hasOwnProperty(k)) {\n          p[k] = k + ': ' + String(o[k])\n        }\n      }\n      return p\n\n      // return o\n    }\n\n    \n    scope.getVariantStyle = function(i) {\n      var r = [{\n        'color': '#c0392b'\n      }, {\n        'color': '#27ae60'\n      }, {\n        'color': '#2c3e50'\n      }, {\n        'color': '#d35400'\n      }]\n      return r[i % r.length]\n    }\n\n\n\n\n\n\n   \n  }\n])\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/variants/variants.list.controller.js","var app = angular.module('DataDashboard');\n\napp.controller('WebhooksController', ['$scope', '$http', '$location','webhooks',\n\tfunction(scope, http, location,webhooks) {\n\t\n\t\t\t\n\t\tscope.mode=null;\n\n\t\tscope.webhooks = [{\n\t\t\tevent : 'products.create',\n\t\t\tmethod : 'POST',\n\t\t\turl : 'mybackend.herokuapp.com/newproduct',\n\t\t\theaders : {\n\n\t\t\t}\n\t\t}];\n\n\n\t\tscope.webhooks = webhooks.data.data;\n\n\n\t\tscope.events = [\n\t\t\t'products.create',\n\t\t\t'products.delete',\n\t\t\t'products.update',\n\t\t\t'brands.create',\n\t\t\t'brands.delete',\n\t\t\t'brands.update',\n\t\t\t'categories.create',\n\t\t\t'categories.delete',\n\t\t\t'categories.update',\n\t\t\t'orders.create',\n\t\t\t'orders.delete',\n\t\t\t'orders.update',\n\t\t\t'carts.create',\n\t\t\t'carts.delete',\n\t\t\t'carts.update',\n\t\t\t'payments.create',\n\t\t\t'payments.delete',\n\t\t\t'payments.update',\n\t\t\t'shippings.create',\n\t\t\t'shippings.delete',\n\t\t\t'shippings.update',\n\t\t];\n\t\tscope.load = function() {\n\t\t\thttp({\n\t\t\t\tmethod : 'GET',\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks'\n\t\t\t})\n\t\t\t\t.then(function(response){\n\t\t\t\t\tscope.webhooks = response.data.data;\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(2,'An error has occurred while reloading webhooks.',1);\n\t\t\t\t});\n\t\t};\n\n\t\tscope.edit = function(hook) {\n\t\t\tscope.newWebhook = hook;\n\t\t\tscope.showUpdateModal();\n\t\t};\n\t\tscope.showUpdateModal = function() {\n\t\t\tscope.mode = 'update';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\n\t\tscope.showCreateModal = function() {\n\t\t\tscope.mode = 'create';\n\t\t\t$('#newWebhookModal').modal('show');\n\t\t};\n\n\t\tscope.saveWebhook = function() {\n\t\t\thttp({\n\t\t\t\tmethod :'POST',\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks',\n\t\t\t\tdata : scope.newWebhook\n\t\t\t})\n\t\t\t\t.then(function(response){\n\t\t\t\t\tnotie.alert(1,'Webhook correctly created',1);\n\t\t\t\t\tscope.newWebhook = {};\n\t\t\t\t\t$('#newWebhookModal').modal('hide');\n\t\t\t\t\tscope.load();\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not created',1);\n\t\t\t\t\tscope.newWebhook = {};\n\t\t\t\t});\n\t\t};\n\n\n\t\tscope.updateWebhook = function() {\n\t\t\thttp({\n\t\t\t\tmethod :'PUT',\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks/'+scope.newWebhook.id,\n\t\t\t\tdata : scope.newWebhook\n\t\t\t})\n\t\t\t\t.then(function(response){\n\t\t\t\t\tnotie.alert(1,'Webhook correctly updated',1);\n\t\t\t\t\tscope.newWebhook = {};\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not updated',1);\n\t\t\t\t\tscope.newWebhook = {};\n\t\t\t\t});\n\t\t};\n\n\n\t\tscope.delete = function(hook) {\n\t\t\thttp({\n\t\t\t\tmethod :'DELETE',\n\t\t\t\turl : '/applications/'+window.current_application.id+'/webhooks/'+hook.id\n\t\t\t})\n\t\t\t\t.then(function(response){\n\t\t\t\t\tnotie.alert(1,'Webhook correctly deleted',1);\n\t\t\t\t\tscope.load();\n\t\t\t\t})\n\t\t\t\t.catch(function(response){\n\t\t\t\t\tnotie.alert(3,'An error has occurred, webhook not deleted',1);\n\t\t\t\t});\n\t\t};\n\t\t\n\t}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/controllers/webhooks.js","var app = angular.module('DataDashboard');\n\napp.directive('avatar', [function() {\n\n        return {\n            restrict: 'AE',\n            replace: true,\n            transclude:true,\n            scope: {\n                initials: '@initials',\n                width: '@width',\n                bgcolor: '@bgColor',\n                textColor: '@textColor',\n                wrapper: '=wrapper',\n                pictureResolution: '@pictureResolution',\n                pixelated: '=pixelated',\n                roundShape: '=roundShape',\n                class: '@class',\n                imgClass: '@imgClass',\n                style: '@style',\n                string:'@string',\n                cornerRadius: '@cornerRadius',\n                pictureFormat: '@pictureFormat',\n                colorsPalette: '=colorsPalette',\n                autoColor: '=autoColor',\n                fontWeight: '@fontWeight',\n                fontScale: '@fontScale',\n                textShadow: '=textShadow',\n                bind: '=bind',\n                maxLength: '@maxLength',\n                upperCase: '=upperCase'\n            },\n            link: function(scope, element, attrs) {\n\n                var _long = 45,\n                    _picture_resolution = 256,\n                    _wrapper = true,\n                    _str = \"\", //scope.initials || \"\",\n                    _bgcolor = \"#000\",\n                    _textcolor = \"#fff\",\n                    _pixelated = false,\n                    _img_styling = \"vertical-align:top;\",\n                    _roundShape = false,\n                    _wrapper_styling = \"border-radius:0; display:block; overflow:hidden;\",\n                    _extra_classes = \"\",\n                    _extra_img_classes = \"\",\n                    _extra_styles = \"\",\n                    _corner_radius = \"0\",\n                    _picture_format = \"png\",\n                    _colors_palette = [\"#bdc3c7\",\"#6f7b87\",\"#2c3e50\",\"#2f3193\",\"#662d91\",\"#922790\",\"#ec2176\",\"#ed1c24\",\"#f36622\",\"#f8941e\",\"#fab70f\",\"#fdde00\",\"#d1d219\",\"#8ec73f\",\"#00a650\",\"#00aa9c\",\"#00adef\",\"#0081cd\",\"#005bab\"],\n                    _autoColor = false,\n                    _font_weight = 100,\n                    _font_scale = 100,\n                    _text_shadow = false,\n                    _bind = false,\n                    _img_width = \"100%\",\n                    _upperCase = false;\n\n                // We randomize the bgcolor\n                var mc_palette = [\n                '#1abc9c',\n                '#16a085',\n                '#f1c40f',\n                '#f39c12',\n                '#2ecc71',\n                '#27ae60',\n                '#27ae60',\n                '#e67e22',\n                '#d35400',\n                '#3498db',\n                '#2980b9',\n                '#c0392b',\n                '#e74c3c',\n                '#9b59b6',\n                '#8e44ad'\n                ]\n\n                if (scope.initials.length === 0)\n                    scope.initials = \"??\";\n\n                var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y'];\n\n                var position = dict.indexOf(scope.initials.substr(0,1).toLowerCase());\n\n                var chosenColorPosition = position % mc_palette.length\n                \n                if (chosenColorPosition === -1)\n                  chosenColorPosition = 0;\n\n                var chosenColor = mc_palette[chosenColorPosition];\n                \n                _bgcolor = chosenColor\n\n                function checkValues(){\n\n                    if (scope.bind != undefined){\n                        _bind = scope.bind;\n                    }\n\n                    if (scope.textColor != undefined) {\n                        _textcolor = scope.textColor;\n                    }\n\n                    if (scope.pictureResolution != undefined) {\n                        _picture_resolution = scope.pictureResolution;\n                    }\n\n                    if (scope.width != undefined) {\n                        _long = scope.width;\n                    }   \n\n                    if (scope.wrapper != undefined) {\n                        _wrapper = scope.wrapper;\n                        if ( _wrapper === false ) { \n                            _img_width = _long;\n                        }\n                    }\n\n                    if (scope.pixelated != undefined) {\n                        _pixelated = scope.pixelated;\n                        if ( _pixelated === true ) { \n                            _img_styling += \"image-rendering:pixelated; image-rendering:-moz-crisp-edges;\"; \n                        }\n                    }\n\n                    if (scope.roundShape != undefined) {\n                        _roundShape = scope.roundShape;\n                        if ( _roundShape ) _wrapper_styling += \"border-radius: \"+ _long +\"px;\";\n                    } else {\n                        if ( scope.cornerRadius != undefined ){\n                            _corner_radius = scope.cornerRadius;\n                            _wrapper_styling += \"border-radius: \"+ _corner_radius +\"px;\";\n                        }\n                    }\n\n                    if (scope.class != undefined) {\n                        _extra_classes = scope.class;\n                    }\n\n                    if (scope.imgClass != undefined) {\n                        _extra_img_classes = scope.imgClass;\n                    }\n\n                    if (scope.style != undefined) {\n                        _extra_styles = scope.style;\n                    }\n\n                    if (scope.initials != undefined) {\n                        _str = scope.initials;\n                    }\n\n                    if (scope.string != undefined) {\n                        _str = getInitialsFromString( scope.string );\n                    }\n\n                    if (scope.maxLength != undefined) {\n                        _str = _str.substr(0, scope.maxLength );\n                    }\n\n                    if (scope.pictureFormat === 'jpeg') {\n                        _picture_format = \"jpeg\";\n                    }\n\n                    if (scope.colorsPalette != undefined) {\n                        _colors_palette = scope.colorsPalette;\n                    }                 \n\n                    if (scope.bgcolor != undefined) {\n                        _bgcolor = scope.bgcolor;\n                    } else {\n\n                        if (scope.autoColor != undefined) {\n\n                            _autoColor = scope.autoColor;\n                            if ( _autoColor === true ) {\n                                var i, lon = _str.length, charIndex=0,colorIndex;\n                                for(i=0; i<lon;i++) charIndex = _str.charCodeAt(i);\n                                colorIndex = charIndex % _colors_palette.length;\n                                _bgcolor = _colors_palette[ colorIndex ];\n                            }\n                        }                     \n                    }\n\n                    if (scope.fontWeight != undefined) {\n                        _font_weight = scope.fontWeight;\n                    }\n\n                    if (scope.fontScale != undefined) {\n                        _font_scale = scope.fontScale;\n                    }\n\n                    if (scope.textShadow != undefined) {\n                        _text_shadow = scope.textShadow;\n                    }\n\n                    if (scope.upperCase === true) {\n                        _str = _str.toUpperCase();\n                    }\n\n                }\n\n                function generateAvatar(name, w, h, bgcolor, textcolor, bgImage) {\n                    var WIDTH = 256, HEIGHT = 256, canvas, ctx, _font_size;\n\n                    if (w != undefined && w > 0) {\n                        if (h != undefined && h > 0) {\n                            WIDTH = w;\n                            HEIGHT = h;\n                        }\n                    }\n\n                    canvas = document.createElement('canvas');\n                    canvas.id = \"ngAvatar-\" + Date.now();\n                    canvas.width = WIDTH;\n                    canvas.height = HEIGHT;\n\n                    ctx = canvas.getContext('2d');\n                    ctx.fillStyle = bgcolor;\n                    ctx.fillRect(0, 0, WIDTH, HEIGHT);\n  \n                    _font_size = WIDTH / (2 / ( _font_scale / 100 ));     \n                    ctx.font = _font_weight +\" \"+ _font_size +\"px sans-serif\";\n\n                    if ( _text_shadow === true ) {\n                        ctx.shadowColor = \"black\";\n                        ctx.shadowOffsetX = 0; \n                        ctx.shadowOffsetY = 0; \n                        ctx.shadowBlur = 5;                        \n                    }\n\n                    ctx.textAlign = \"center\";\n                    ctx.fillStyle = textcolor;\n                    //ctx.fillText(_str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) + 5 );\n                    ctx.fillText( _str, WIDTH / 2, HEIGHT - (HEIGHT / 2) + ( _font_size / 3) );\n\n                    return canvas.toDataURL(\"image/\"+ _picture_format );\n                }\n\n                function getInitialsFromString(str){\n\n                    var output = \"\", \n                        i = 0, \n                        str = str.split(\" \"),\n                        len = str.length;\n                    \n                    for ( i; i < len; i++ ) if ( str[i] != \"\" ) output += str[i][0]; //.toUpperCase();\n                    return output;\n                }\n\n                var currentElement = element;\n\n                function render(){\n                    var imgData = generateAvatar( _str, _picture_resolution, _picture_resolution, _bgcolor, _textcolor, null);\n\n                    var html = '';\n                    if (_wrapper) html += '<div class=\"avatar-wrapper '+ _extra_classes +'\" style=\"'+ _wrapper_styling +' width:' + _long + 'px; height:' + _long + 'px; '+ _extra_styles +'\">';\n                    html += '<img src=\"' + imgData + '\" class=\"avatar-picture '+ _extra_img_classes +'\" style=\"'+ _img_styling +'\" width=\"'+ _img_width +'\" height=\"\" />';\n                    if (_wrapper) html += '</div>';\n\n                    var replacementElement = angular.element(html);\n                    currentElement.replaceWith(replacementElement);\n                    currentElement = replacementElement;\n                }\n\n                checkValues();\n                if ( _bind === true ){\n\n                    scope.$watch( 'string', function ( value ) {\n\n                        checkValues();\n                        render();\n                    });\n\n                    scope.$watch( 'initials', function ( value ) {\n\n                        checkValues();\n                        render();\n                    });\n\n                    /*\n                    scope.$watch( 'bgcolor', function ( value ) {\n                        checkValues();\n                        render();\n                    });\n                    */\n\n                } else {\n\n                    render();\n                }\n\n            }\n        };\n    }]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/avatar.directive.js","(function(app) {\n  \"use strict\";\n  app.directive('contenteditable', function() {\n    return {\n      restrict: 'A', // only activate on element attribute\n      require: '?ngModel', // get a hold of NgModelController\n      link: function(scope, element, attrs, ngModel) {\n        if (!ngModel) return; // do nothing if no ng-model\n\n        // Specify how UI should be updated\n        ngModel.$render = function() {\n          element.html(ngModel.$viewValue || '');\n        };\n\n        // Listen for change events to enable binding\n        element.on('blur keyup change', function() {\n          scope.$apply(read);\n        });\n        read(); // initialize\n\n        // Write data to the model\n        function read() {\n          var html = element.html();\n          // When we clear the content editable the browser leaves a <br> behind\n          // If strip-br attribute is provided then we strip this out\n          if (attrs.stripBr && html == '<br>') {\n            html = '';\n          }\n          ngModel.$setViewValue(html);\n        }\n      }\n    };\n  });\n\n\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/contenteditable.directive.js","var app = angular.module('DataDashboard');\napp.directive('dropdown', function($document) {\n  return {\n    restrict: \"C\",\n    link: function(scope, elem, attr) {\n\n\n\n      // Handling nested dropdowns\n      angular.element('.dropdown-submenu > a.dropdown-submenu-toggle')\n      .on(\"click\", function(e) {\n\n        // We get a pointer to the submenu\n        var submenu = angular.element(this).next('ul');\n\n\n        angular.element(submenu).toggle()\n        \n\n        // Preventing further event handling\n        e.stopImmediatePropagation();\n        e.stopPropagation();\n        e.preventDefault();\n      });\n\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/dropdown.directive.js","\t\n\n\tvar app  = angular.module('DataDashboard');\n\tapp.directive('fallbackSrc', function() {\n\t  return {\n\t    link: function(scope, element, attrs) {\n\t      element.bind('error', function() {\n\t        if (attrs.src !== attrs.fallbackSrc) {\n\t          attrs.$set('src', attrs.fallbackSrc);\n\t        }\n\t      });\n\t    }\n\t  };\n\t});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/fallback_src.js","(function(app){\napp.directive('fileModel', [\n    '$parse',\n    function ($parse) {\n      return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n          var model = $parse(attrs.fileModel);\n          var modelSetter = model.assign;\n\n          element.bind('change', function(){\n            scope.$apply(function(){\n              if (attrs.multiple) {\n                modelSetter(scope, element[0].files);\n              }\n              else {\n                modelSetter(scope, element[0].files[0]);\n              }\n            });\n          });\n        }\n      };\n    }\n  ]);\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/fileModel.directive.js","var app  = angular.module('DataDashboard');\napp.directive('focusOnShow', function($timeout) {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, $element, $attr) {\n\t\t\tif ($attr.ngShow){\n\t\t\t\t$scope.$watch($attr.ngShow, function(newValue){\n\t\t\t\t\tif(newValue){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t});      \n\t\t\t}\n\t\t\tif ($attr.ngHide){\n\t\t\t\t$scope.$watch($attr.ngHide, function(newValue){\n\t\t\t\t\tif(!newValue){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t$element[0].focus();\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t});      \n\t\t\t}\n\n\t\t}\n\t};\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/focusOnShow.directive.js","(function () {\n'use strict';\n\n/**\n * Heavily adapted from the `type=\"number\"` directive in Angular's\n * /src/ng/directive/input.js\n */\n\nvar NUMBER_REGEXP = /^\\s*(\\-|\\+)?(\\d+|(\\d*(\\.\\d*)))\\s*$/;\nvar DEFAULT_PRECISION = 2;\n\nangular.module('DataDashboard')\n\n.directive('money', [\"$parse\", function ($parse) {\n  function link(scope, el, attrs, ngModelCtrl) {\n    var minVal, maxVal, precision, lastValidViewValue;\n    var isDefined = angular.isDefined;\n    var isUndefined = angular.isUndefined;\n    var isNumber = angular.isNumber;\n\n    /**\n     * Returns a rounded number in the precision setup by the directive\n     * @param  {Number} num Number to be rounded\n     * @return {Number}     Rounded number\n     */\n    function round(num) {\n      var d = Math.pow(10, precision);\n      return Math.round(num * d) / d;\n    }\n\n    /**\n     * Returns a string that represents the rounded number\n     * @param  {Number} value Number to be rounded\n     * @return {String}       The string representation\n     */\n    function formatPrecision(value) {\n      return parseFloat(value).toFixed(precision);\n    }\n\n    function isPrecisionValid() {\n      return !isNaN(precision) && precision > -1;\n    }\n\n    function isValueValid(value) {\n      return angular.isNumber(value) && !isNaN(value);\n    }\n\n    function updateValuePrecision() {\n      var modelValue = ngModelCtrl.$modelValue;\n\n      if (isValueValid(modelValue) && isPrecisionValid()) {\n        ngModelCtrl.$modelValue = round(modelValue);\n        $parse(attrs.ngModel).assign(scope, ngModelCtrl.$modelValue);\n        changeViewValue(formatPrecision(modelValue));\n\n        // Save the rounded view value\n        lastValidViewValue = ngModelCtrl.$viewValue;\n      }\n    }\n\n    function changeViewValue(value) {\n      ngModelCtrl.$viewValue = value;\n      ngModelCtrl.$commitViewValue();\n      ngModelCtrl.$render();\n    }\n\n\n    ngModelCtrl.$parsers.push(function (value) {\n      if (ngModelCtrl.$isEmpty(value)) {\n        lastValidViewValue = value;\n        return null;\n      }\n\n      // Handle leading decimal point, like \".5\"\n      if (value.indexOf('.') === 0) {\n        value = '0' + value;\n      }\n\n      // Allow \"-\" inputs only when min < 0\n      if (value.indexOf('-') === 0) {\n        if (minVal >= 0) {\n          changeViewValue('');\n          return null;\n        } else if (value === '-' || value === '-.') {\n          return null;\n        }\n      }\n\n      if (NUMBER_REGEXP.test(value)) {\n        // Save as valid view value if it's a number\n        lastValidViewValue = value;\n        return parseFloat(value);\n      } else {\n        // Render the last valid input in the field\n        changeViewValue(lastValidViewValue);\n        return lastValidViewValue;\n      }\n    });\n\n\n    // Min validation\n    ngModelCtrl.$validators.min = function (value) {\n      return ngModelCtrl.$isEmpty(value) || isUndefined(minVal) || value >= minVal;\n    };\n    if (isDefined(attrs.min) || attrs.ngMin) {\n      attrs.$observe('min', function(val) {\n        if (isDefined(val) && !isNumber(val)) {\n          val = parseFloat(val, 10);\n        }\n        minVal = isNumber(val) && !isNaN(val) ? val : undefined;\n        ngModelCtrl.$validate();\n      });\n    } else {\n      minVal = 0;\n    }\n\n\n    // Max validation\n    if (isDefined(attrs.max) || attrs.ngMax) {\n      ngModelCtrl.$validators.max = function(value) {\n        return ngModelCtrl.$isEmpty(value) || isUndefined(maxVal) || value <= maxVal;\n      };\n\n      attrs.$observe('max', function(val) {\n        if (isDefined(val) && !isNumber(val)) {\n          val = parseFloat(val, 10);\n        }\n        maxVal = isNumber(val) && !isNaN(val) ? val : undefined;\n        ngModelCtrl.$validate();\n      });\n    }\n\n    // Round off (disabled by \"-1\")\n    if (isDefined(attrs.precision)) {\n      attrs.$observe('precision', function (value) {\n        precision = parseInt(value, 10);\n\n        updateValuePrecision();\n      });\n    } else {\n      precision = DEFAULT_PRECISION;\n    }\n\n    ngModelCtrl.$parsers.push(function (value) {\n      if (value) {\n        // Round off value to specified precision\n        value = isPrecisionValid() ? round(value) : value;\n      }\n      return value;\n    });\n\n    ngModelCtrl.$formatters.push(function (value) {\n      if (isDefined(value)) {\n        return isPrecisionValid() && isValueValid(value) ?\n          formatPrecision(value) : value;\n      } else {\n        return '';\n      }\n    });\n\n    // Auto-format precision on blur\n    el.bind('blur', function () {\n      ngModelCtrl.$commitViewValue();\n      updateValuePrecision();\n    });\n  }\n\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link: link\n  };\n}]);\n\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/money.directive.js","angular.module('Marketcloud.Shared').directive('ngThumb', ['$window', function($window) {\n\tvar helper = {\n\t\tsupport: !!($window.FileReader && $window.CanvasRenderingContext2D),\n\t\tisFile: function(item) {\n\t\t\treturn angular.isObject(item) && item instanceof $window.File;\n\t\t},\n\t\tisImage: function(file) {\n\t\t\tvar type =  '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n\t\t\treturn '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n\t\t}\n\t};\n\n\treturn {\n\t\trestrict: 'A',\n\t\ttemplate: '<canvas/>',\n\t\tlink: function(scope, element, attributes) {\n\t\t\tif (!helper.support) return;\n\n\t\t\tvar params = scope.$eval(attributes.ngThumb);\n\n\t\t\tif (!helper.isFile(params.file)) return;\n\t\t\tif (!helper.isImage(params.file)) return;\n\n\t\t\tvar canvas = element.find('canvas');\n\t\t\tvar reader = new FileReader();\n\n\t\t\treader.onload = onLoadFile;\n\t\t\treader.readAsDataURL(params.file);\n\n\t\t\tfunction onLoadFile(event) {\n\t\t\t\tvar img = new Image();\n\t\t\t\timg.onload = onLoadImage;\n\t\t\t\timg.src = event.target.result;\n\t\t\t}\n\n\t\t\tfunction onLoadImage() {\n\t\t\t\tvar width = params.width || this.width / this.height * params.height;\n\t\t\t\tvar height = params.height || this.height / this.width * params.width;\n\t\t\t\tcanvas.attr({ width: width, height: height });\n                    //canvas.attr({ width: canvas.parent().width, height: canvas.parent().height });\n\t\t\t\tcanvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n\t\t\t}\n\t\t}\n\t};\n}]);\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/ng-thumb.directive.js","\n(function(app){\n\tapp.directive('ngEnter', function() {\n\t\treturn function(scope, element, attrs) {\n\t\t\telement.bind('keydown keypress', function(event) {\n\t\t\t\tif (event.which === 13) {\n\t\t\t\t\tscope.$apply(function() {\n\t\t\t\t\t\tscope.$eval(attrs.ngEnter);\n\t\t\t\t\t});\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/ng_enter.js","angular.module('DataDashboard').directive('onChangeAsync', function($timeout) {\n  return {\n    restrict: 'A',\n    require: 'ngModel',\n    link: function(scope, element, attr, ctrl) {\n      ctrl.$viewChangeListeners.push(function() {\n        $timeout(function() {\n          scope.$eval(attr.onChangeAsync);\n        });\n      });\n    }\n  };\n});\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/onChangeAsync.directive.js","(function(app){\n\napp.directive('onFileChange', function() {\n  return {\n    restrict: 'A',\n    link: function (scope, element, attrs) {\n      var onChangeHandler = scope.$eval(attrs.onFileChange);\n      element.bind('change', onChangeHandler);\n    }\n  };\n});\n\n})(angular.module('DataDashboard'));\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/directives/onFileChange.directive.js","(function() {\n    'use strict';\n\n    angular.module('DataDashboard')\n      .factory('$account', ['$http','$q', AccountFactory]);\n\n\n\n        /*\n         *   AngularJS Factory that handles writes and reads\n         *   for the account object.\n         *\n         *   This avoids the use of the window object;\n         *   \n         */\n        function AccountFactory($http, $q) {\n\n\n          // Container object we will return\n          var Factory = {};\n\n          // This holds the account data\n          //Factory.data = window.user\n          Factory.data = {};\n\n\n          /*\n           *  @param {string} key The name of the property to get\n           *  @return {Promise} Promised response\n           */\n          /*Factory.get = function() {\n            if (null === Factory.data) {\n              return $http({\n                method: 'GET',\n                url: '/account/get',\n              })\n              .then(function(response){\n                Factory.data = response.data.data;\n                return $q.when({data : Factory.data});\n              })\n            } else {\n              return $q.when({data : Factory.data});\n            }\n          }*/\n\n\n          /*\n           * @param {string} key The name of the property to get\n           */\n          Factory.get = function(key) {\n            if (key)\n              return Factory.data[key];\n            else\n              return Factory.data;\n          }\n\n\n\n          /*\n           * @param {String} key The name of the property to set\n           * @param {Mixed} value The value of the property to set\n           */\n          Factory.set = function(key, value) {\n            \n            if (\"string\" === typeof key && !!value) {\n              Factory.data[key] = value;\n            }\n\n            if (\"object\" === typeof key && !value) {\n              Factory.data = key;\n            }\n          }\n\n\n\n          return Factory;\n        }\n      })();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/account.factory.js","(function() {\n  'use strict';\n\n  angular.module('DataDashboard')\n    .factory('$application', ApplicationFactory);\n\n\n\n  /*\n   *   AngularJS Factory that handles writes and reads\n   *   for the application object.\n   *\n   *   This avoids the use of the window object;\n   *   \n   */\n  function ApplicationFactory() {\n\n    // Container object we will return\n    var Factory = {\n      data : {}\n    };\n\n    /*// This holds the application data\n    Factory.data = {};\n*/\n\n    /*\n     * @param {string} key The name of the property to get\n     */\n    Factory.get = function(key) {\n      if (key)\n        return Factory.data[key];\n      else\n        return Factory.data;\n    }\n\n\n    /*\n     * @param {String} key The name of the property to set\n     * @param {Mixed} value The value of the property to set\n     */\n    Factory.set = function(key, value) {\n      \n      if (\"string\" === typeof key && !!value) {\n        Factory.data[key] = value;\n      }\n\n      if (\"object\" === typeof key && !value) {\n        Factory.data = key;\n      }\n    }\n\n\n    /*\n     * @return {Array<String>} Returns an array of locale codes.\n     */\n    Factory.getAvailableLocaleCodes = function() {\n\n      if (!Factory.data.locales) {\n        return [];\n      }\n\n      return Factory.data.locales.split(\",\")\n        .filter(function(localeCode) {\n          // When splitting an empty string, we get [\"\"]\n          return localeCode !== \"\";\n        })\n    }\n\n    return Factory;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/application.factory.js","(function() {\n    'use strict';\n\n    angular.module('DataDashboard')\n      .factory('$cache', [CacheFactory]);\n\n\n\n        /*\n         *   AngularJS Factory that handles writes and reads\n         *   for the account object.\n         *\n         *   This avoids the use of the window object;\n         *   \n         */\n        function CacheFactory() {\n\n\n          // Container object we will return\n          var Factory = {};\n\n          // This holds the account data\n          //Factory.data = window.user\n          Factory.data = {};\n\n\n         Factory.set = function(key, value) {\n          this.data[key] = value;\n         }\n\n         Factory.get = function(key) {\n          return this.data[key];\n         }\n\n         Factory.del = function(key) {\n          delete this.data[key];\n         }\n\n         /*\n         *  @param {String} pattern\n\n         *  Deletes all keys matching pattern\n         */\n         Factory.delByPattern = function(pattern) {\n          for(var k in this.data) {\n            if (k.indexOf(pattern) > -1){\n              console.info(\"Deleting cache for \"+k);\n              delete this.data[k];\n            }\n          }\n         }\n\n         Factory.has = function(key) {\n          return this.data.hasOwnProperty(key);\n         }\n\n\n\n          return Factory;\n        }\n      })();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/cache.factory.js","(function() {\n\t'use strict';\n\t\n\tangular.module('DataDashboard')\n\t\t.factory('LocalesFactory',LocalesFactory);\n\n\n\tfunction LocalesFactory($http) {\n\t\treturn {\n\t\t\t\t\"af-ZA\": {\n\t\t\t\t\t\"code\": \"af-ZA\",\n\t\t\t\t\t\"original\": \"Afrikaans\",\n\t\t\t\t\t\"name\": \"Afrikaans\"\n\t\t\t\t},\n\t\t\t\t\"ar\": {\n\t\t\t\t\t\"code\": \"ar\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Arabic\"\n\t\t\t\t},\n\t\t\t\t\"bg-BG\": {\n\t\t\t\t\t\"code\": \"bg-BG\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Bulgarian\"\n\t\t\t\t},\n\t\t\t\t\"ca-AD\": {\n\t\t\t\t\t\"code\": \"ca-AD\",\n\t\t\t\t\t\"original\": \"Catal\",\n\t\t\t\t\t\"name\": \"Catalan\"\n\t\t\t\t},\n\t\t\t\t\"cs-CZ\": {\n\t\t\t\t\t\"code\": \"cs-CZ\",\n\t\t\t\t\t\"original\": \"etina\",\n\t\t\t\t\t\"name\": \"Czech\"\n\t\t\t\t},\n\t\t\t\t\"cy-GB\": {\n\t\t\t\t\t\"code\": \"cy-GB\",\n\t\t\t\t\t\"original\": \"Cymraeg\",\n\t\t\t\t\t\"name\": \"Welsh\"\n\t\t\t\t},\n\t\t\t\t\"da-DK\": {\n\t\t\t\t\t\"code\": \"da-DK\",\n\t\t\t\t\t\"original\": \"Dansk\",\n\t\t\t\t\t\"name\": \"Danish\"\n\t\t\t\t},\n\t\t\t\t\"de-AT\": {\n\t\t\t\t\t\"code\": \"de-AT\",\n\t\t\t\t\t\"original\": \"Deutsch (sterreich)\",\n\t\t\t\t\t\"name\": \"German (Austria)\",\n\t\t\t\t},\n\t\t\t\t\"de-CH\": {\n\t\t\t\t\t\"code\": \"de-CH\",\n\t\t\t\t\t\"original\": \"Deutsch (Schweiz)\",\n\t\t\t\t\t\"name\": \"German (Switzerland)\"\n\t\t\t\t},\n\t\t\t\t\"de-DE\": {\n\t\t\t\t\t\"code\": \"de-DE\",\n\t\t\t\t\t\"original\": \"Deutsch (Deutschland)\",\n\t\t\t\t\t\"name\": \"German (Germany)\"\n\t\t\t\t},\n\t\t\t\t\"el-GR\": {\n\t\t\t\t\t\"code\": \"el-GR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Greek\"\n\t\t\t\t},\n\t\t\t\t\"en-GB\": {\n\t\t\t\t\t\"code\": \"en-GB\",\n\t\t\t\t\t\"original\": \"English (UK)\",\n\t\t\t\t\t\"name\": \"English (UK)\",\n\t\t\t\t\t\"alpha2\" : \"GB\"\n\t\t\t\t},\n\t\t\t\t\"en-US\": {\n\t\t\t\t\t\"code\": \"en-US\",\n\t\t\t\t\t\"original\": \"English (US)\",\n\t\t\t\t\t\"name\": \"English (US)\"\n\t\t\t\t},\n\t\t\t\t\"es-CL\": {\n\t\t\t\t\t\"code\": \"es-CL\",\n\t\t\t\t\t\"original\": \"Espaol (Chile)\",\n\t\t\t\t\t\"name\": \"Spanish (Chile)\"\n\t\t\t\t},\n\t\t\t\t\"es-ES\": {\n\t\t\t\t\t\"code\": \"es-ES\",\n\t\t\t\t\t\"original\": \"Espaol (Espaa)\",\n\t\t\t\t\t\"name\": \"Spanish (Spain)\"\n\t\t\t\t},\n\t\t\t\t\"es-MX\": {\n\t\t\t\t\t\"code\": \"es-MX\",\n\t\t\t\t\t\"original\": \"Espaol (Mxico)\",\n\t\t\t\t\t\"name\": \"Spanish (Mexico)\"\n\t\t\t\t},\n\t\t\t\t\"et-EE\": {\n\t\t\t\t\t\"code\": \"et-EE\",\n\t\t\t\t\t\"original\": \"Eesti\",\n\t\t\t\t\t\"name\": \"Estonian\"\n\t\t\t\t},\n\t\t\t\t\"eu\": {\n\t\t\t\t\t\"code\": \"eu\",\n\t\t\t\t\t\"original\": \"Euskara\",\n\t\t\t\t\t\"name\": \"Basque\"\n\t\t\t\t},\n\t\t\t\t\"fa-IR\": {\n\t\t\t\t\t\"code\": \"fa-IR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Persian\"\n\t\t\t\t},\n\t\t\t\t\"fi-FI\": {\n\t\t\t\t\t\"code\": \"fi-FI\",\n\t\t\t\t\t\"original\": \"Suomi\",\n\t\t\t\t\t\"name\": \"Finnish\"\n\t\t\t\t},\n\t\t\t\t\"fr-CA\": {\n\t\t\t\t\t\"code\": \"fr-CA\",\n\t\t\t\t\t\"original\": \"Franais (Canada)\",\n\t\t\t\t\t\"name\": \"French (Canada)\"\n\t\t\t\t},\n\t\t\t\t\"fr-FR\": {\n\t\t\t\t\t\"code\": \"fr-FR\",\n\t\t\t\t\t\"original\": \"Franais (France)\",\n\t\t\t\t\t\"name\": \"French (France)\"\n\t\t\t\t},\n\t\t\t\t\"he-IL\": {\n\t\t\t\t\t\"code\": \"he-IL\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Hebrew\"\n\t\t\t\t},\n\t\t\t\t\"hr-HR\": {\n\t\t\t\t\t\"code\": \"hr-HR\",\n\t\t\t\t\t\"original\": \"Hrvatski\",\n\t\t\t\t\t\"name\": \"Croatian\"\n\t\t\t\t},\n\t\t\t\t\"hu-HU\": {\n\t\t\t\t\t\"code\": \"hu-HU\",\n\t\t\t\t\t\"original\": \"Magyar\",\n\t\t\t\t\t\"name\": \"Hungarian\"\n\t\t\t\t},\n\t\t\t\t\"id-ID\": {\n\t\t\t\t\t\"code\": \"id-ID\",\n\t\t\t\t\t\"original\": \"Bahasa Indonesia\",\n\t\t\t\t\t\"name\": \"Indonesian\"\n\t\t\t\t},\n\t\t\t\t\"is-IS\": {\n\t\t\t\t\t\"code\": \"is-IS\",\n\t\t\t\t\t\"original\": \"slenska\",\n\t\t\t\t\t\"name\": \"Icelandic\"\n\t\t\t\t},\n\t\t\t\t\"it-IT\": {\n\t\t\t\t\t\"code\": \"it-IT\",\n\t\t\t\t\t\"original\": \"Italiano\",\n\t\t\t\t\t\"name\": \"Italian\"\n\t\t\t\t},\n\t\t\t\t\"ja-JP\": {\n\t\t\t\t\t\"code\": \"ja-JP\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Japanese\"\n\t\t\t\t},\n\t\t\t\t\"km-KH\": {\n\t\t\t\t\t\"code\": \"km-KH\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Khmer\"\n\t\t\t\t},\n\t\t\t\t\"ko-KR\": {\n\t\t\t\t\t\"code\": \"ko-KR\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Korean\"\n\t\t\t\t},\n\t\t\t\t\"lt-LT\": {\n\t\t\t\t\t\"code\": \"lt-LT\",\n\t\t\t\t\t\"original\": \"Lietuvi\",\n\t\t\t\t\t\"name\": \"Lithuanian\"\n\t\t\t\t},\n\t\t\t\t\"lv-LV\": {\n\t\t\t\t\t\"code\": \"lv-LV\",\n\t\t\t\t\t\"original\": \"Latvieu\",\n\t\t\t\t\t\"name\": \"Latvian\"\n\t\t\t\t},\n\t\t\t\t\"mn-MN\": {\n\t\t\t\t\t\"code\": \"mn-MN\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Mongolian\"\n\t\t\t\t},\n\t\t\t\t\"nb-NO\": {\n\t\t\t\t\t\"code\": \"nb-NO\",\n\t\t\t\t\t\"original\": \"Norsk bokml\",\n\t\t\t\t\t\"name\": \"Norwegian (Bokml)\"\n\t\t\t\t},\n\t\t\t\t\"nl-NL\": {\n\t\t\t\t\t\"code\": \"nl-NL\",\n\t\t\t\t\t\"original\": \"Nederlands\",\n\t\t\t\t\t\"name\": \"Dutch\"\n\t\t\t\t},\n\t\t\t\t\"nn-NO\": {\n\t\t\t\t\t\"code\": \"nn-NO\",\n\t\t\t\t\t\"original\": \"Norsk nynorsk\",\n\t\t\t\t\t\"name\": \"Norwegian (Nynorsk)\"\n\t\t\t\t},\n\t\t\t\t\"pl-PL\": {\n\t\t\t\t\t\"code\": \"pl-PL\",\n\t\t\t\t\t\"original\": \"Polski\",\n\t\t\t\t\t\"name\": \"Polish\"\n\t\t\t\t},\n\t\t\t\t\"pt-BR\": {\n\t\t\t\t\t\"code\": \"pt-BR\",\n\t\t\t\t\t\"original\": \"Portugus (Brasil)\",\n\t\t\t\t\t\"name\": \"Portuguese (Brazil)\"\n\t\t\t\t},\n\t\t\t\t\"pt-PT\": {\n\t\t\t\t\t\"code\": \"pt-PT\",\n\t\t\t\t\t\"original\": \"Portugus (Portugal)\",\n\t\t\t\t\t\"name\": \"Portuguese (Portugal)\"\n\t\t\t\t},\n\t\t\t\t\"ro-RO\": {\n\t\t\t\t\t\"code\": \"ro-RO\",\n\t\t\t\t\t\"original\": \"Romn\",\n\t\t\t\t\t\"name\": \"Romanian\"\n\t\t\t\t},\n\t\t\t\t\"ru-RU\": {\n\t\t\t\t\t\"code\": \"ru-RU\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Russian\"\n\t\t\t\t},\n\t\t\t\t\"sk-SK\": {\n\t\t\t\t\t\"code\": \"sk-SK\",\n\t\t\t\t\t\"original\": \"Slovenina\",\n\t\t\t\t\t\"name\": \"Slovak\"\n\t\t\t\t},\n\t\t\t\t\"sl-SI\": {\n\t\t\t\t\t\"code\": \"sl-SI\",\n\t\t\t\t\t\"original\": \"Slovenina\",\n\t\t\t\t\t\"name\": \"Slovenian\"\n\t\t\t\t},\n\t\t\t\t\"sr-RS\": {\n\t\t\t\t\t\"code\": \"sr-RS\",\n\t\t\t\t\t\"original\": \" / Srpski\",\n\t\t\t\t\t\"name\": \"Serbian\"\n\t\t\t\t},\n\t\t\t\t\"sv-SE\": {\n\t\t\t\t\t\"code\": \"sv-SE\",\n\t\t\t\t\t\"original\": \"Svenska\",\n\t\t\t\t\t\"name\": \"Swedish\"\n\t\t\t\t},\n\t\t\t\t\"th-TH\": {\n\t\t\t\t\t\"code\": \"th-TH\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Thai\"\n\t\t\t\t},\n\t\t\t\t\"tr-TR\": {\n\t\t\t\t\t\"code\": \"tr-TR\",\n\t\t\t\t\t\"original\": \"Trke\",\n\t\t\t\t\t\"name\": \"Turkish\"\n\t\t\t\t},\n\t\t\t\t\"uk-UA\": {\n\t\t\t\t\t\"code\": \"uk-UA\",\n\t\t\t\t\t\"original\": \"\",\n\t\t\t\t\t\"name\": \"Ukrainian\"\n\t\t\t\t},\n\t\t\t\t\"vi-VN\": {\n\t\t\t\t\t\"code\": \"vi-VN\",\n\t\t\t\t\t\"original\": \"Ting Vit\",\n\t\t\t\t\t\"name\": \"Vietnamese\"\n\t\t\t\t},\n\t\t\t\t\"zh-CN\": {\n\t\t\t\t\t\"code\": \"zh-CN\",\n\t\t\t\t\t\"original\": \" ()\",\n\t\t\t\t\t\"name\": \"Chinese (PRC)\"\n\t\t\t\t},\n\t\t\t\t\"zh-TW\": {\n\t\t\t\t\t\"code\": \"zh-TW\",\n\t\t\t\t\t\"original\": \" ()\",\n\t\t\t\t\t\"name\": \"Chinese (Taiwan)\"\n\t\t\t\t}\n\t\t\t}\n\t}\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/locales.factory.js","(function() {\n\t'use strict';\n\n\tfunction jsonToQueryString(json) {\n\t\treturn '?' +\n\t\t\tObject.keys(json).map(function(key) {\n\t\t\t\treturn encodeURIComponent(key) + '=' +\n\t\t\t\t\tencodeURIComponent(json[key]);\n\t\t\t}).join('&');\n\t}\n\n\tangular.module('DataDashboard')\n\t\t.factory('$marketcloud', MarketcloudFactory);\n\n\tMarketcloudFactory.$inject = ['$http', '$q', '$cache', '$account', '$application'];\n\n\tfunction MarketcloudFactory($http, $q, $cache, $account, $application) {\n\n\n\n\t\tvar request = function(method, endpoint, data, options) {\n\n\t\t\tvar role = $application.get('role');\n\n\t\t\t// Guests users cannot perform requests\n\t\t\tif (role === 'guest' && method !== \"GET\") {\n\t\t\t\tnotie.alert(2,\"Action not allowed since your role is 'guest'.\",2);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar url = window.API_BASE_URL + '/' + endpoint;\n\n\t\t\tif (\"GET\" === method) {\n\t\t\t\tvar cacheKey = endpoint + jsonToQueryString(data || {});\n\t\t\t\t// We invoke cache only for GET requests\n\t\t\t\tif ($cache.has(cacheKey)) {\n\t\t\t\t\treturn $q.when($cache.get(cacheKey));\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar config = {\n\t\t\t\tmethod: method,\n\t\t\t\turl: url,\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': window.public_key + ':' + window.token\n\t\t\t\t}\n\t\t\t};\n\n\t\t\toptions = options || {};\n\n\n\t\t\tif ('GET' === method)\n\t\t\t\tconfig.params = data || {};\n\t\t\telse {\n\n\t\t\t\tconfig.data = data || {};\n\t\t\t}\n\n\n\t\t\treturn $http(config)\n\t\t\t\t.then(function(response) {\n\n\t\t\t\t\tif ('GET' === method) {\n\t\t\t\t\t\t$cache.set(endpoint, response);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('PUT' === method || 'PATCH' === method) {\n\t\t\t\t\t\t// Devo invalidare la cache della risorsa e della collection\n\t\t\t\t\t\t// ex /resource/:id\n\t\t\t\t\t\t//  /resource/:id/subresources\n\t\t\t\t\t\t// /resource\n\t\t\t\t\t\t// Endpoint  qualcosa del tipo sopra,\n\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating GET cache to this resource\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('POST' === method) {\n\t\t\t\t\t\t$cache.delByPattern(endpoint); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('DELETE' === method) {\n\t\t\t\t\t\tvar deletionPattern = endpoint.split('/');\n\t\t\t\t\t\tdeletionPattern = deletionPattern[0];\n\t\t\t\t\t\t$cache.delByPattern(deletionPattern); // Invalidating LIST requests to this resource\n\t\t\t\t\t\t//Also for parent resource\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn $q.when(response);\n\t\t\t\t})\n\t\t\t\t.catch(function(error) {\n\t\t\t\t\treturn $q.reject(error);\n\t\t\t\t})\n\n\n\n\t\t};\n\n\n\t\tvar resourceFactory = function(resource_name) {\n\t\t\treturn {\n\t\t\t\tlist: function(query, options) {\n\t\t\t\t\tquery = query || {};\n\t\t\t\t\tif ('object' !== typeof query)\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.list(query) query must be object');\n\t\t\t\t\treturn request('GET', resource_name, query, options);\n\t\t\t\t},\n\t\t\t\tgetById: function(id, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\treturn request('GET', resource_name + '/' + id, options);\n\t\t\t\t},\n\t\t\t\tsave: function(data, options) {\n\t\t\t\t\tif ('object' !== typeof data)\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.save(data) data must be object');\n\t\t\t\t\treturn request('POST', resource_name, data, options);\n\t\t\t\t},\n\t\t\t\tupdate: function(id, data, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\treturn request('PUT', resource_name + '/' + id, data, options);\n\t\t\t\t},\n\t\t\t\tdelete: function(id, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\treturn request('DELETE', resource_name + '/' + id, options);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tvar subResourceFactory = function(resource_name, sub_resource_name) {\n\t\t\treturn {\n\t\t\t\tlist: function(parent_id, query, options) {\n\t\t\t\t\tquery = query || {};\n\t\t\t\t\tif ('object' !== typeof query)\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.list(query) query must be object');\n\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name, query, options);\n\t\t\t\t},\n\t\t\t\tgetById: function(parent_id, id, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.getById(id) id must be an integer number');\n\t\t\t\t\treturn request('GET', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t},\n\t\t\t\tsave: function(parent_id, data, options) {\n\t\t\t\t\tif ('object' !== typeof data)\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.save(data) data must be object, got '+typeof(data));\n\t\t\t\t\treturn request('POST', resource_name + '/' + parent_id + '/' + sub_resource_name, data, options);\n\t\t\t\t},\n\t\t\t\tupdate: function(parent_id, id, data, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.update(id,data) id must be an integer number');\n\t\t\t\t\treturn request('PUT', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, data, options);\n\t\t\t\t},\n\t\t\t\tdelete: function(parent_id, id, options) {\n\t\t\t\t\tif (isNaN(id))\n\t\t\t\t\t\tthrow new Error('$marketcloud.' + resource_name + '.' + sub_resource_name + '.delete(id) id must be an integer number');\n\t\t\t\t\treturn request('DELETE', resource_name + '/' + parent_id + '/' + sub_resource_name + '/' + id, options);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tvar resources = [\n\t\t\t'addresses',\n\t\t\t'brands',\n\t\t\t'categories',\n\t\t\t'collections',\n\t\t\t'events',\n\t\t\t'coupons',\n\t\t\t'carts',\n\t\t\t'products',\n\t\t\t'orders',\n\t\t\t'invoices',\n\t\t\t'users',\n\t\t\t'contents',\n\t\t\t'staticContents',\n\t\t\t'media',\n\t\t\t'notifications',\n\t\t\t'promotions',\n\t\t\t'shippings',\n\t\t\t'payments',\n\t\t\t'taxes',\n\t\t\t'paymentMethods',\n\t\t\t'variables'\n\n\t\t];\n\n\t\tvar factory = {};\n\n\t\tresources.forEach(function(resource_name) {\n\t\t\tfactory[resource_name] = resourceFactory(resource_name);\n\t\t});\n\n\t\tfactory.variants = subResourceFactory('products', 'variants');\n\n\t\tfactory.refunds = subResourceFactory('orders', 'refunds');\n\t\tfactory.payments = subResourceFactory('orders', 'payments');\n\t\tfactory.shipments = subResourceFactory('orders', 'shipments');\n\n\t\treturn factory;\n\t}\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/marketcloud.factory.js","(function() {\n  'use strict';\n\n  angular.module('DataDashboard')\n    .factory('$models', ['$http', '$q', ModelsFactory]);\n\n\n\n  /*\n   *   AngularJS Factory that handles writes and reads\n   *   for the application object.\n   *\n   *   This avoids the use of the window object;\n   *   \n   */\n  function ModelsFactory($http, $q) {\n\n\n\n    if (!Schematic)\n      throw new Error('Models factory requires Schematic library');\n\n    // Container object we will return\n    var Types = {};\n\n    Types.Notifications = {};\n\n    Types.Notifications[\"orders.create\"] = new Schematic.Schema('orders.create', {\n      type: {\n        required: true,\n        type: \"string\"\n      },\n      application: {\n        required: true,\n        type: 'object'\n      },\n      order: {\n        required: true,\n        type: 'object'\n      },\n    });\n    Types.Notifications[\"orders.update.processing\"] = new Schematic.Schema('orders.update.processing', {\n      type: {\n        required: true,\n        type: \"string\"\n      },\n      application: {\n        required: true,\n        type: 'object'\n      },\n      order_id: {\n        required: true,\n        type: 'number'\n      },\n    });\n    Types.Notifications[\"orders.update.completed\"] = new Schematic.Schema('orders.update.completed', {\n      type: {\n        required: true,\n        type: \"string\"\n      },\n      application: {\n        required: true,\n        type: 'object'\n      },\n      order_id: {\n        required: true,\n        type: 'number'\n      },\n    });\n    Types.Notifications[\"users.create\"] = new Schematic.Schema('users.create', {\n      type: {\n        required: true,\n        type: \"string\"\n      },\n      application: {\n        required: true,\n        type: 'object'\n      },\n      user: {\n        required: true,\n        type: 'object'\n      },\n    });\n\n    Types.Bundle = new Schematic.Schema('Bundle', {\n      \"name\": {\n        type: \"string\",\n        min: 2,\n        max: 30,\n        required: true\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"slug\": {\n        type: \"string\"\n      },\n      \"items\": {\n        type: \"array\",\n        elements: {\n          type: \"number\"\n        },\n        required: true\n      },\n      \"price\": {\n        type: \"number\",\n        required: true\n      },\n      \"price_discount\": {\n        type: \"number\"\n      }\n    })\n    Types.Payment = new Schematic.Schema('Payment', {\n      payment_method_id: {\n        required: false,\n        type: \"number\"\n      },\n      method: {\n        required: true,\n        type: \"string\"\n      },\n      order_id: {\n        type: \"number\",\n        required: true\n      },\n      amount: {\n        type: \"number\",\n        required: true\n      },\n      data: {\n        type: \"object\"\n      }\n    })\n    Types.PaymentMethod = new Schematic.Schema('PaymentMethod', {\n      name: {\n        type: \"string\",\n        required: true,\n        min: 1,\n        max: 100\n      },\n      description: {\n        type: \"string\",\n        min: 0,\n        max: 500\n      },\n      cost_type: {\n        type: \"string\",\n        required: true,\n        whitelist: ['no_cost', 'fixed_fee', 'percentage_fee', 'fixed_plus_percentage']\n      },\n      fixed_fee: {\n        type: \"number\",\n        min: 0\n      },\n      percentage_fee: {\n        type: \"number\",\n        min: 0\n      }\n    })\n    Types.PromotionCondition = new Schematic.Schema('PromotionCondition', {\n      \"type\": {\n        type: \"string\",\n        whitelist: ['MIN_NUMBER_OF_PRODUCTS', 'MIN_CART_VALUE', 'CART_HAS_ITEM'],\n        required: true\n      },\n      \"value\": {\n        type: \"number\",\n        required: true\n      },\n    });\n    Types.PromotionEffect = new Schematic.Schema('PromotionEffect', {\n      \"type\": {\n        type: \"string\",\n        whitelist: [\n          'CART_VALUE_PERCENTAGE_REDUCTION',\n          'CART_VALUE_NET_REDUCTION',\n          'CART_ITEMS_NET_REDUCTION', // price reduction to apply on each item price\n          'CART_ITEMS_PERCENTAGE_REDUCTION', // price reduction to apply on each item price\n          'FREE_SHIPPING'\n        ],\n        required: true\n      },\n      \"value\": {\n        required: true\n      },\n    });\n\n    Types.Promotion = new Schematic.Schema('Promotion', {\n      \"name\": {\n        type: \"string\",\n        min: 2,\n        max: 130,\n        required: true\n      },\n      \"active\": {\n        type: \"boolean\",\n        required: true\n      },\n      \"conditions\": {\n        type: 'array',\n        elements: {\n          type: Types.PromotionCondition\n        }\n      },\n      \"effects\": {\n        type: 'array',\n        required: true,\n        elements: {\n          type: Types.PromotionEffect\n        }\n      }\n    });\n\n\n\n    Types.BundleEntry = new Schematic.Schema('BundleEntry', {\n      \"product_id\": {\n        type: \"number\",\n        required: true\n      },\n      \"bundle_price\": {\n\n      },\n      \"variant_id\": {\n        type: \"number\"\n      }\n    })\n\n    Types.Bundle = new Schematic.Schema('Bundle', {\n      name: {\n        type: \"string\",\n        min: 1,\n        max: 140,\n        required: true\n      },\n      slug: {\n        type: \"string\",\n        max: 500\n      },\n      description: {\n        type: \"string\"\n      },\n      items: {\n        type: \"array\",\n        required: true,\n        elements: {\n          type: Types.BundleEntry\n        }\n      },\n      pricing_rule: {\n        type: \"string\",\n        whitelist: [\"fixed\", \"inherit\"]\n      }\n    });\n\n\n\n    Types.Category = new Schematic.Schema('Category', {\n      \"name\": {\n        type: \"string\",\n        min: 2,\n        max: 30,\n        required: true\n      },\n      \"description\": {\n        type: \"string\",\n        max: 1400\n      },\n      \"url\": {\n        type: \"string\"\n      },\n      \"image_url\": {\n        type: \"string\"\n      },\n      \"parent_id\": {\n        type: \"number\",\n        required: false\n      }\n\n    });\n\n    Types.CategoryNew = new Schematic.Schema('Category', {\n      \"name\": {\n        type: \"string\",\n        min: 2,\n        max: 30,\n        required: true\n      },\n      \"description\": {\n        type: \"string\",\n        max: 1400\n      },\n      \"url\": {\n        type: \"string\"\n      },\n      \"image_url\": {\n        type: \"string\"\n      },\n      \"path\": {\n        type: \"string\",\n        required: true\n      },\n      \"parent\": {\n        type: \"string\",\n        required: true\n      }\n    });\n\n    Types.CollectionEntry = new Schematic.Schema('CollectionEntry', {\n      \"product_id\": {\n        type: \"number\",\n        required: true\n      },\n      \"variant_id\": {\n        type: \"number\"\n      }\n    })\n\n    Types.Collection = new Schematic.Schema('Collection', {\n      name: {\n        type: \"string\",\n        min: 1,\n        max: 140,\n        required: true\n      },\n      slug: {\n        type: \"string\",\n        max: 500\n      },\n      description: {\n        type: \"string\"\n      },\n      items: {\n        type: \"array\",\n        required: true,\n        elements: {\n          type: Types.CollectionEntry\n        }\n      }\n    });\n\n\n    Types.ContentAuthor = new Schematic.Schema('ContentAuthor', {\n      image_url: {\n        type: \"string\"\n      },\n      name: {\n        type: \"string\"\n      },\n      id: {\n        type: \"number\"\n      }\n    })\n\n    Types.Content = new Schematic.Schema('Content', {\n      title: {\n        type: \"string\",\n        required: true\n      },\n      text: {\n        type: \"string\",\n        required: true\n      },\n      author: {\n        type: \"object\"\n      },\n      date: {\n        type: \"string\"\n      },\n      published: {\n        type: \"boolean\"\n      }\n    })\n\n    Types.StaticContent = new Schematic.Schema('StaticContent', {\n    name: {\n        type: \"string\",\n        required: true,\n        min: 2\n    },\n    content: {\n        type: \"string\",\n        required: true\n    },\n    published: {\n        type: \"boolean\"\n    }\n})\n\n\n    Types.CartEntry = new Schematic.Schema('CartEntry', {\n      \"product_id\": {\n        type: \"number\",\n        required: true\n      },\n      \"quantity\": {\n        type: \"number\",\n        required: true,\n        min: 0\n      },\n      \"variant_id\": {\n        type: \"number\"\n      }\n    })\n    Types.CartUpdateEntry = new Schematic.Schema('CartUpdateEntry', {\n      \"product_id\": {\n        type: \"number\",\n        required: true\n      },\n      \"quantity\": {\n        type: \"number\",\n        min: 0\n      },\n      \"variant_id\": {\n        type: \"number\"\n      }\n    })\n\n    Types.Cart = new Schematic.Schema('Cart', {\n      \"items\": {\n        type: 'array',\n        elements: {\n          type: Types.CartEntry\n        },\n        required: true\n      },\n      \"user_id\": {\n        type: 'number'\n      }\n    });\n\n\n    Types.CartUpdate = new Schematic.Schema('CartUpdate', {\n      \"items\": {\n        type: \"array\",\n        elements: {\n          type: \"object\"\n        },\n        required: true\n      },\n      \"op\": {\n        type: \"string\",\n        whitelist: [\"add\", \"remove\", \"update\"]\n      }\n    })\n\n    Types.Coupon = new Schematic.Schema('Coupon', {\n      \"code\": {\n        type: \"string\",\n        min: \"1\",\n        max: \"30\",\n        required: true\n      },\n      \"name\": {\n        type: \"string\",\n        min: \"1\",\n        max: \"30\",\n        required: true\n      },\n      \"target_type\": {\n        type: \"string\",\n        whitelist: [\n          'CART_COUPON',\n          'PRODUCT_COUPON',\n          'CATEGORY_COUPON',\n          'PRODUCTS_COUPON'\n        ],\n        required: true\n      },\n      \"target_id\": {\n        type: \"number\"\n      },\n      \"discount_type\": {\n        type: \"string\",\n        whitelist: ['NET_REDUCTION', 'PERCENTAGE_REDUCTION'],\n        required: true\n      },\n      \"discount_value\": {\n        type: \"number\",\n        min: 0,\n        required: true\n      },\n      \"active\": {\n        type: \"boolean\",\n        required: true\n      },\n      \"usages_left\": {\n        type: \"number\",\n        required: false\n      },\n      \"expiration_date\": {\n        type: \"string\",\n        required: false\n      }\n    })\n\n    Types.Brand = new Schematic.Schema('Brand', {\n      \"name\": {\n        type: \"string\",\n        min: 3,\n        max: 50,\n        required: true\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"url\": {\n        type: \"string\"\n      },\n      \"image_url\": {\n        type: \"string\"\n      }\n    });\n\n    Types.File = new Schematic.Schema('File', {\n      file: {\n        type: \"string\",\n        required: true,\n      },\n      filename: {\n        type: \"string\",\n        required: true,\n      },\n      name: {\n        type: \"string\",\n        required: true,\n      },\n      slug: {\n        type: \"string\",\n        max: 140\n      },\n      description: {\n        type: \"string\"\n      }\n    })\n\n    Types.Notification = new Schematic.Schema('Notification', {\n      event: {\n        type: \"string\",\n        required: true,\n        whitelist: [\n          'custom', //Custom defined events, can only be sent programmaticaly\n          'order.create', // Sent automatically by the system\n          'order.paid', // Sent automatically by the system\n          'user.create' // Sent automatically by the system\n        ]\n      },\n      from_name: {\n        type: \"string\"\n      },\n      from_email: {\n        type: \"string\"\n      },\n      subject: {\n        type: \"string\"\n      }\n    })\n\n    Types.User = new Schematic.Schema('User', {\n      \"name\": {\n        type: \"string\",\n        min: 1,\n        max: 255\n      },\n      \"email\": {\n        type: \"string\",\n        min: 4,\n        max: 255,\n      },\n      \"password\": {\n        type: \"string\",\n        min: 4,\n        max: 255,\n      },\n      \"image_url\": {\n        type: \"string\"\n      }\n    })\n\n    Types.TaxRate = new Schematic.Schema('TaxRate', {\n      \"country\": {\n        type: \"string\",\n        required: true\n      },\n      \"state\": {\n        type: \"string\",\n        required: true\n      },\n      \"postcode\": {\n        type: \"string\",\n        required: true\n      },\n      \"city\": {\n        type: \"string\",\n        required: true\n      },\n      \"rate\": {\n        type: \"number\",\n        required: true,\n        min: 0,\n        max: 100\n      },\n      \"priority\": {\n        type: \"number\",\n        required: true,\n        min: 0\n      }\n    })\n    Types.Tax = new Schematic.Schema('Tax', {\n      \"name\": {\n        type: \"string\",\n        min: 3,\n        max: 30,\n        required: true\n      },\n      \"description\": {\n        type: \"string\",\n        max: 600\n      },\n      \"rates\": {\n        type: \"array\",\n        elements: {\n          type: Types.TaxRate\n        }\n      }\n    })\n    Types.Currency = new Schematic.Schema('Currency', {\n      \"name\": {\n        type: \"string\",\n        min: 3,\n        max: 30,\n        required: true\n      },\n      \"formatting\": {\n        type: \"string\",\n        min: 0,\n        max: 3,\n        required: true\n      }\n    })\n    Types.Product = new Schematic.Schema('Product', {\n      \"name\": {\n        type: \"string\",\n        required: true,\n        min: 2\n      },\n      \"type\": {\n        type: \"string\",\n        required: true,\n        whitelist: [\"simple_product\", \"product_with_variants\", \"grouped_product\", \"bundled_product\"]\n      },\n      \"category_id\": {\n        type: \"number\"\n      },\n      \"sku\": {\n        type: \"string\"\n      },\n      \"price\": {\n        type: \"number\",\n        required: true\n      },\n      \"slug\": {\n        type: \"string\"\n      },\n      \"stock_level\": {\n        type: \"number\",\n        min: 0\n      },\n      \"stock_type\": {\n        type: \"string\",\n        whitelist: [\"infinite\", \"track\", \"status\"],\n        required: true\n      },\n      \"stock_status\": {\n        type: \"string\",\n        whitelist: [\"in_stock\", \"out_of_stock\"]\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"weigth\": {\n        type: \"number\"\n      },\n      \"height\": {\n        type: \"number\"\n      },\n      \"depth\": {\n        type: \"number\"\n      },\n      \"width\": {\n        type: \"number\"\n      },\n      \"brand_id\": {\n        type: \"number\"\n      },\n      \"store_id\": {\n        type: \"number\"\n      },\n      \"images\": {\n        type: \"array\"\n      },\n      \"published\": {\n        type: \"boolean\"\n      },\n      \"price_discount\": {\n        type: \"number\"\n      }\n    })\n\n\n    Types.Variant = new Schematic.Schema('Variant', {\n      variant_id: {\n        type: \"number\",\n        required: true\n      },\n      product_id: {\n        type: \"number\",\n        required: true\n      },\n      \"stock_level\": {\n        type: \"number\",\n        min: 0\n      },\n      \"stock_type\": {\n        type: \"string\",\n        whitelist: [\"infinite\", \"track\", \"status\"],\n        required: true\n      },\n      \"stock_status\": {\n        type: \"string\",\n        whitelist: [\"in_stock\", \"out_of_stock\"]\n      },\n      \"price\": {\n        type: \"number\",\n        required: true\n      }\n    })\n\n\n\n    Types.InvoiceLineItem = new Schematic.Schema('InvoiceLineItem', {\n      name: {\n        type: \"string\",\n        required: true,\n        min: 1,\n        max: 140\n      },\n      description: {\n        type: \"string\",\n        max: 500\n      },\n      price: {\n        type: \"number\",\n        required: true,\n        min: 0\n      },\n      quantity: {\n        type: \"number\",\n        required: true,\n        min: 0\n      }\n    })\n    Types.Invoice = new Schematic.Schema('Invoice', {\n      number: {\n        type: \"number\",\n        required: true\n      },\n      order_id: {\n        type: \"number\",\n        required: true\n      },\n      customer: {\n        type: \"object\",\n        required: true\n      },\n      company: {\n        type: \"object\",\n        required: true\n      },\n      lineItems: {\n        type: \"array\",\n        elements: {\n          type: Types.InvoiceLineItem\n        }\n      }\n    })\n    Types.GroupedProductEntry = new Schematic.Schema('GroupedProductEntry', {\n      \"product_id\": {\n        type: \"number\",\n        required: true\n      },\n      \"quantity\": {\n        type: \"number\",\n        required: true\n      }\n    });\n    Types.GroupedProduct = new Schematic.Schema('GroupedProduct', {\n      \"name\": {\n        type: \"string\",\n        required: true,\n        min: 2\n      },\n      \"category_id\": {\n        type: \"number\"\n      },\n      \"sku\": {\n        type: \"string\"\n      },\n      \"items\": {\n        type: \"array\",\n        elements: {\n          type: Types.GroupedProductEntry\n        },\n        min: 1\n      },\n      \"pricing_method\": {\n        type: \"string\",\n        whitelist: [\"dynamic_pricing\", \"fixed_pricing\"],\n        required: true\n      },\n      \"price\": {\n        type: \"number\",\n      },\n      \"price_discount\": {\n        type: \"number\",\n      },\n      \"slug\": {\n        type: \"string\"\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"brand_id\": {\n        type: \"number\"\n      },\n      \"store_id\": {\n        type: \"number\"\n      },\n      \"images\": {\n        type: \"array\"\n      },\n      \"published\": {\n        type: \"boolean\"\n      },\n      \"type\": {\n        type: \"string\",\n        whitelist: [\"grouped_product\"]\n      }\n    })\n\n    Types.ProductWithVariants = new Schematic.Schema('Product', {\n      \"name\": {\n        type: \"string\",\n        required: true,\n        min: 2\n      },\n      \"category_id\": {\n        type: \"number\"\n      },\n      \"sku\": {\n        type: \"string\"\n      },\n      \"price\": {\n        type: \"number\",\n        required: true\n      },\n      \"stock_level\": {\n        type: \"number\",\n        min: 0\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"weigth\": {\n        type: \"number\"\n      },\n      \"height\": {\n        type: \"number\"\n      },\n      \"width\": {\n        type: \"number\"\n      },\n      \"depth\": {\n        type: \"number\"\n      },\n      \"brand_id\": {\n        type: \"number\"\n      },\n      \"store_id\": {\n        type: \"number\"\n      },\n      \"images\": {\n        type: \"array\"\n      },\n      \"slug\": {\n        type: \"string\"\n      },\n      \"published\": {\n        type: \"boolean\"\n      }\n    })\n\n\n    Types.Order = new Schematic.Schema('Order', {\n      \"status\": {\n        type: \"string\",\n        whitelist: [\"created\", \"processing\", \"evaded\", \"shipped\"]\n      },\n      \"shipping_address_id\": {\n        type: \"number\",\n      },\n      \"billing_address_id\": {\n        type: \"number\",\n      },\n      \"items_total\": {\n        type: \"number\"\n      },\n      \"display_items_total\": {\n        type: \"string\"\n      },\n      \"total\": {\n        type: \"number\"\n      },\n      \"display_total\": {\n        type: \"string\"\n      },\n      \"items\": {\n        type: \"array\",\n        required: true\n      },\n      \"currency\": {\n        type: \"string\",\n        whitelist: [\"USD\", \"CAD\", \"EUR\", \"AED\", \"AFN\", \"ALL\", \"AMD\", \"ARS\", \"AUD\", \"AZN\", \"BAM\", \"BDT\", \"BGN\", \"BHD\", \"BIF\", \"BND\", \"BOB\", \"BRL\", \"BWP\", \"BYR\", \"BZD\", \"CDF\", \"CHF\", \"CLP\", \"CNY\", \"COP\", \"CRC\", \"CVE\", \"CZK\", \"DJF\", \"DKK\", \"DOP\", \"DZD\", \"EEK\", \"EGP\", \"ERN\", \"ETB\", \"GBP\", \"GEL\", \"GHS\", \"GNF\", \"GTQ\", \"HKD\", \"HNL\", \"HRK\", \"HUF\", \"IDR\", \"ILS\", \"INR\", \"IQD\", \"IRR\", \"ISK\", \"JMD\", \"JOD\", \"JPY\", \"KES\", \"KHR\", \"KMF\", \"KRW\", \"KWD\", \"KZT\", \"LBP\", \"LKR\", \"LTL\", \"LVL\", \"LYD\", \"MAD\", \"MDL\", \"MGA\", \"MKD\", \"MMK\", \"MOP\", \"MUR\", \"MXN\", \"MYR\", \"MZN\", \"NAD\", \"NGN\", \"NIO\", \"NOK\", \"NPR\", \"NZD\", \"OMR\", \"PAB\", \"PEN\", \"PHP\", \"PKR\", \"PLN\", \"PYG\", \"QAR\", \"RON\", \"RSD\", \"RUB\", \"RWF\", \"SAR\", \"SDG\", \"SEK\", \"SGD\", \"SOS\", \"SYP\", \"THB\", \"TND\", \"TOP\", \"TRY\", \"TTD\", \"TWD\", \"TZS\", \"UAH\", \"UGX\", \"UYU\", \"UZS\", \"VEF\", \"VND\", \"XAF\", \"XOF\", \"YER\", \"ZAR\", \"ZMK\"]\n      },\n      \"store_id\": {\n        type: \"number\"\n      },\n      \"notes\": {\n        type: \"string\",\n        max: 500\n      },\n      \"shipping_fee\": {\n        type: \"number\",\n        min: 0\n      }\n    })\n\n    Types.Address = new Schematic.Schema('Address', {\n      \"full_name\": {\n        type: \"string\",\n        required: true,\n        max: 140\n      },\n      \"country\": {\n        type: \"string\",\n        required: true,\n        max: 140\n      },\n      \"state\": {\n        type: \"string\",\n        max: 140\n      },\n      \"city\": {\n        type: \"string\",\n        required: true,\n        max: 140\n      },\n      \"address1\": {\n        type: \"string\",\n        required: true,\n        max: 250\n      },\n      \"address2\": {\n        type: \"string\",\n        max: 250\n      },\n      \"postal_code\": {\n        type: \"string\",\n        required: true,\n        max: 20\n      },\n      phone_number: {\n        type: \"string\",\n        max: 30\n      },\n      email: {\n        type: \"string\",\n        required: true,\n        max: 140,\n      },\n      alternate_phone_number: {\n        type: \"string\",\n        max: 140\n      }\n    });\n\n\n\n    // This resemble a taxrate\n    Types.ShippingZone = new Schematic.Schema('ShippingZone', {\n      \"country\": {\n        type: \"string\",\n        required: true\n      },\n      \"state\": {\n        type: \"string\",\n        required: true\n      },\n      \"postcode\": {\n        type: \"string\",\n        required: true\n      },\n      \"city\": {\n        type: \"string\",\n        required: true\n      }\n    })\n\n    Types.Shipping = new Schematic.Schema('Shipping', {\n      \"name\": {\n        type: \"string\",\n        required: true,\n        min : 3,\n    },\n    \"base_cost\": {\n        type: \"number\",\n        required: true,\n        min: 0\n    },\n    \"per_item_cost\": {\n        type: \"number\",\n        min: 0\n    },\n    \"description\": {\n        type: \"string\"\n    },\n    \"min_price\": {\n        type: \"number\",\n        min: 0\n    },\n    \"max_price\": {\n        type: \"number\",\n        min: 0\n    },\n    \"min_weight\": {\n        type: \"number\",\n        min: 0\n    },\n    \"max_weight\": {\n        type: \"number\",\n        min: 0\n    },\n    \"zones\": {\n        type: \"array\"\n    }\n    });\n\n\n\n    Types.Store = new Schematic.Schema('Store', {\n      \"name\": {\n        type: \"string\",\n        required: true\n      },\n      \"owner_email\": {\n        type: \"string\",\n        required: true\n      },\n      \"description\": {\n        type: \"string\"\n      },\n      \"custom_attributes\": {\n        type: \"object\"\n      }\n    });\n\n    Types.Customer = new Schematic.Schema('Customer', {\n      \"full_name\": {\n        type: \"string\",\n        required: true\n      },\n      \"shipping_address\": {\n        type: Types.Address,\n        required: true\n      },\n      \"billing_address\": {\n        type: Types.Address,\n        required: true\n      },\n      \"email\": {\n        type: \"string\",\n        required: true\n      }\n    });\n\n\n    Types.Variable = new Schematic.Schema('Variable', {\n      name: {\n        type: \"string\",\n        required: true,\n        min: 1,\n        max: 500\n      },\n      type: {\n        type: \"string\",\n        required: false,\n        whitelist: ['string', 'number', 'boolean', 'object', 'array']\n      },\n      value: {\n        required: true\n      }\n    })\n\n\n    Types.Shipment = new Schematic.Schema('Shipment', {\n      \"date\": {\n        type: \"string\",\n        required: true\n      },\n      \"delivery_date\": {\n        type: \"string\",\n        required: true\n      },\n      \"description\": {\n        type: \"text\"\n      },\n      \"method\": {\n        type: Types.Shipping\n      }\n\n    });\n\n    return Types;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/models.factory.js","(function() {\n\t'use strict';\n\n\tangular.module('DataDashboard')\n\t\t.factory('NotificationsPresetsFactory', NotificationsPresetsFactory);\n\n\tfunction NotificationsPresetsFactory() {\n\n\n\t\tvar presets = {};\n\n\t\tpresets['invoices.create'] = {\n\t\t\tname: 'An order is created',\n\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\tsubject: 'Your invoice',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Your invoice',\n\t\t\t\tmessage: 'Attached to this email you can find your most recent invoice for your order at {{application.name}}'\n\t\t\t}\n\t\t};\n\n\t\tpresets['orders.create'] = {\n\t\t\tname: 'An order is created',\n\t\t\tdescription: 'This notification is sent to the customer who creates an order',\n\t\t\tsubject: 'We received your order!',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\tintroduction: 'Your order has been received and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\tproductLabel: 'Items',\n\t\t\t\tpriceLabel: 'Price',\n\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t}\n\t\t};\n\n\t\tpresets['users.create'] = {\n\t\t\tname: 'New customer account',\n\t\t\tdescription: 'This notification is sent to the customer who creates an account',\n\t\t\tsubject: 'Welcome!',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Welcome to {{application.name}}!',\n\t\t\t\tintroduction: 'Thank you for creating an account with us!',\n\t\t\t\tbuttonLabel: 'Visit our store'\n\t\t\t}\n\t\t};\n\n\t\tpresets['users.recoverPassword'] = {\n\t\t\tname: 'Password recovery',\n\t\t\tdescription: 'This notification is sent to the customer who requests a password recovery',\n\t\t\tsubject: 'Password recovery',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Recover your password',\n\t\t\t\tintroduction: 'Hello, we sent you this email because you requested to recover your password. If it\\'s not the case, please ignore this email.',\n\t\t\t\tredirect_url : 'http://example.com/passwordrecovery'\n\t\t\t}\n\t\t};\n\n\n\t\tpresets['orders.update.processing'] = {\n\t\t\tname: 'An order is paid',\n\t\t\tdescription: 'This notification is sent to the customer who paid an order',\n\t\t\tsubject: 'Your order is confirmed!',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Thank you for your order!',\n\t\t\t\tintroduction: 'Your order has been confirmed and is now being processed. Your order\\'s details are shown below for your reference.',\n\t\t\t\tproductLabel: 'Items',\n\t\t\t\tpriceLabel: 'Price',\n\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t}\n\t\t};\n\n\t\tpresets['orders.update.completed'] = {\n\t\t\tname: 'An order is shipped',\n\t\t\tdescription: 'This notification is sent to the customer when his/her order is shipped.',\n\t\t\tsubject: 'We shipped your order!',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Your order is on the way',\n\t\t\t\tintroduction: 'We are happy to inform you that we shipped your order #{{order.id}} !',\n\t\t\t\ttracking_code_introduction: 'You can click on the following tracking number to track your package on the carrier\\'s website.',\n\t\t\t\tproductLabel: 'Items',\n\t\t\t\tpriceLabel: 'Price',\n\t\t\t\tcustomerInformationLabel: 'Customer information',\n\t\t\t\tshippingAddressLabel: 'Shipping address',\n\t\t\t\tbillingAddressLabel: 'Billing address'\n\t\t\t}\n\t\t};\n\n\t\tpresets['orders.refund'] = {\n\t\t\tname: 'An order is refunded',\n\t\t\tdescription: 'This notification is sent to the customer when his/her order is refunded.',\n\t\t\tsubject: 'Refund for order {{order.id}}',\n\t\t\tlocales : {},\n\t\t\ttemplate: {\n\t\t\t\ttitle: 'Refund for order {{order.id}}',\n\t\t\t\tintroduction: 'A refund was recently created for your order. Details are shown below for your reference.',\n\t\t\t\tproductLabel: 'Items'\n\t\t\t}\n\t\t};\n\n\n\t\treturn presets;\n\t}\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/notificationsPresets.factory.js","(function() {\n  'use strict';\n\n  angular.module('DataDashboard')\n    .factory('$pagination', PaginationFactory);\n\n\n\n  /*\n   *   AngularJS Factory that handles the pagination object\n   *   \n   */\n  function PaginationFactory() {\n\n\n    // Container object we will return\n    var Factory = {};\n\n  \n    /*\n     * @param {HTTPResponse} httpResponse The response object\n     */\n    Factory.fromHTTPResponse = function(httpResponse) {\n      return {\n        currentPage: httpResponse.data.page,\n        numberOfPages: httpResponse.data.pages,\n        nextPage: httpResponse.data._links.next || null,\n        previousPage: httpResponse.data._links.prev || null,\n        count: httpResponse.data.count\n      }\n    }\n\n\n\n    return Factory;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/pagination.factory.js","var app = angular.module('DataDashboard')\napp.factory('rolePresets', function() {\n    function getCommonPublicProfile() {\n        return {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        }\n    }\n\n    function getAllTrueProfile() {\n        return {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        }\n    }\n\n    function getAllFalseProfile() {\n        return {\n            list: false,\n            findOne: false,\n            getById: false,\n            create: false,\n            update: false,\n            delete: false\n        }\n    }\n\n\n    function getCommonUserProfile() {\n        return {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        }\n    }\n\n    function getCommonAdminProfile() {\n        return {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        }\n    }\n\n    var publicAccessMap = {\n        addresses: getAllFalseProfile(),\n        brands: getCommonPublicProfile(),\n        carts: {\n            list: false,\n            findOne: false,\n            getById: true,\n            patch: true,\n            create: true,\n            update: true,\n            checkout: true,\n            delete: false\n        },\n        categories: getCommonPublicProfile(),\n        collections: getCommonPublicProfile(),\n        contents: getCommonPublicProfile(),\n        coupons: getAllFalseProfile(),\n        promotions: getCommonPublicProfile(),\n        currencies: getCommonPublicProfile(),\n        orders: {\n            list: false,\n            findOne: false,\n            getById: false,\n            create: true,\n            update: false,\n            delete: false\n        },\n        paymentMethods: getCommonPublicProfile(),\n        invoices: getAllFalseProfile(),\n        products: getCommonPublicProfile(),\n        shippings: getCommonPublicProfile(),\n        stores: getCommonPublicProfile(),\n        taxes: getCommonPublicProfile(),\n        users: {\n            list: false,\n            findOne: false,\n            getById: false,\n            create: true,\n            update: false,\n            delete: false,\n            authenticate: true\n        },\n        variables: getCommonPublicProfile()\n    }\n\n\n    var userAccessMap = {\n        addresses: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        brands: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        carts: {\n            list: true,\n            findOne: false,\n            getById: true,\n            patch: true,\n            create: true,\n            update: true,\n            checkout: true,\n            delete: true\n        },\n        categories: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        collections: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        contents: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        coupons: getAllFalseProfile(),\n        promotions: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        currencies: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        orders: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: false,\n            delete: false\n        },\n        paymentMethods: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true, // I can order stuff on sites even if i'm not authenticated\n            update: false,\n            delete: false\n        },\n        products: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        shippings: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        stores: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        taxes: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        invoices: {\n            list: false,\n            findOne: false,\n            getById: false,\n            create: false,\n            update: false,\n            delete: false\n        },\n        users: {\n            list: false,\n            findOne: false,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true,\n            authenticate: true\n        },\n        variables: getCommonUserProfile()\n    }\n\n\n    var adminAccessMap = {\n        addresses: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true,\n        },\n        invoices: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true,\n        },\n        brands: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        carts: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            patch: true,\n            update: true,\n            checkout: true,\n            delete: true\n        },\n        categories: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        collections: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        contents: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        coupons: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        promotions: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        currencies: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n\n        orders: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        paymentMethods: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        products: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        shippings: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        stores: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        taxes: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        users: {\n            list: true,\n            findOne: true,\n            getById: true,\n            create: true,\n            update: true,\n            delete: true,\n            authenticate: true\n        },\n        variables: getCommonAdminProfile()\n    }\n\n\n    return {\n        public: publicAccessMap,\n        user: userAccessMap,\n        admin: adminAccessMap\n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/rolesPresets.factory.js","(function() {\n  'use strict';\n  \n  angular.module('DataDashboard')\n    .factory('StormConfiguration',StormConfigurationFactory);\n\n  StormConfigurationFactory.$inject = ['$window', '$application'];\n\n\n  /*\n  *   AngularJS Factory that handles writes and reads from\n  *   localStorage (or similar backend) for managing Storm user preferences.\n  *\n  *   For example it can be used to save default filters on a certain view\n  * \n  *   It can also be used to save some custom behaviour.\n  *\n  *   The main feature should be that it wraps all the configs in a json object\n  *   which gets written to storage and read every time as a whole.\n  */\n  function StormConfigurationFactory($window, $application) {\n\n    \n    var Factory = {};\n\n    console.info(\"Loading Storm configuration information from localStorage\");\n\n   \n    var LOCALSTORAGE_KEY = 'Marketcloud.Storm.Configuration.' + ($application.get('id') || \"unkownAppId\");\n \n\n    function loadFromStorage() {\n      var storedJson = window.localStorage.getItem(LOCALSTORAGE_KEY);\n      if (storedJson)\n        Factory._data = JSON.parse(storedJson);\n      else\n        Factory._data = {};\n    }\n\n    function persistToStorage(){\n      var s = JSON.stringify(Factory._data);\n      console.log(\"Persisting to storage with key \"+LOCALSTORAGE_KEY,s )\n      window.localStorage.setItem(LOCALSTORAGE_KEY,s);\n    }\n\n    Factory._data = {};\n\n    Factory.loadFromStorage = loadFromStorage;\n    Factory.persistToStorage = persistToStorage;\n\n    Factory.loadFromStorage();\n\n    Factory.get = function(key) {\n\n      if (\"undefined\" !== typeof key)\n        return this._data[key];\n      else\n        return this._data;\n    }\n\n    Factory.set = function(key,value, persist){\n\n      persist = persist || true;\n\n\n      if (\"string\" !== typeof key)\n        throw new Error(\"StormConfigurationFactory.set(key,value) 'key' must be String\");\n      \n\n      this._data[key] = value;\n\n      if (persist === true)\n        Factory.persistToStorage()\n      \n    }\n\n\n    Factory.applyTheme = function(theme){\n\n      // Checking\n       if (!theme)\n        return;\n\n      // Sanitizing the theme filename\n      if (theme.indexOf('.theme.css') === -1) {\n        theme = theme + '.theme.css';\n      }\n\n      var url = '/modules/data_dashboard/css/themes/'+theme;\n\n      // Removing previously loaded themes\n      $(\".storm-theme-definition\").remove();\n\n      // Appending the theme to the Document\n      $('<link rel=\"stylesheet\" class=\"storm-theme-definition\" type=\"text/css\" href=\"'+url+'\" >')\n      .appendTo(\"head\");\n\n    }\n  \n\n\n    \n\n    return Factory;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/stormConfiguration.factory.js","(function() {\n  'use strict';\n  \n  angular.module('DataDashboard')\n    .factory('TableManager',TableManagerFactory);\n\n  TableManagerFactory.$inject = [];\n\n\n  /*\n  *   AngularJS Factory that handles the configuration\n  *   of data tables\n  */\n  function TableManagerFactory() {\n\n    \n    var factory = {};\n\n   \n    // This is to avoid to overflow controllers with shared functionality\n    function attachTableManagerFunctions(scope){\n\n      if (!scope.hasOwnProperty(\"visibleColumns\")){\n        scope.visibleColumns = [];\n      }\n\n\n\n    }\n\n    return factory;\n  }\n\n\n\n\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/tableManager.factory.js","angular.module('Marketcloud.Shared')\n  .factory('TaxRates', function() {\n\n      return [{\n        \"country\": \"Australia\",\n        \"state\": \"*\",\n        \"rate\": \"10.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"AU\"\n      }, {\n        \"country\": \"Bangladesh\",\n        \"state\": \"*\",\n        \"rate\": \"15.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"BD\"\n      }, {\n        \"country\": \"Belgium\",\n        \"state\": \"*\",\n        \"rate\": \"21.0000\",\n        \"name\": \"BTW\",\n        \"shipping\": true,\n        \"country_code\": \"BE\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"British Columbia\",\n        \"rate\": \"7.0000\",\n        \"name\": \"PST\",\n        \"shipping\": false,\n        \"priority\": 2,\n        \"country_code\": \"CA\",\n        \"state_code\": \"BC\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Saskatchewan\",\n        \"rate\": \"5.0000\",\n        \"name\": \"PST\",\n        \"shipping\": false,\n        \"priority\": 2,\n        \"country_code\": \"CA\",\n        \"state_code\": \"SK\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Manitoba\",\n        \"rate\": \"8.0000\",\n        \"name\": \"PST\",\n        \"shipping\": false,\n        \"priority\": 2,\n        \"country_code\": \"CA\",\n        \"state_code\": \"MB\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Quebec\",\n        \"rate\": \"9.975\",\n        \"name\": \"QST\",\n        \"shipping\": false,\n        \"priority\": 2,\n        \"country_code\": \"CA\",\n        \"state_code\": \"QC\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Ontario\",\n        \"rate\": \"13.0000\",\n        \"name\": \"HST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"ON\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Newfoundland and Labrador\",\n        \"rate\": \"13.0000\",\n        \"name\": \"HST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"NL\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"New Brunswick\",\n        \"rate\": \"13.0000\",\n        \"name\": \"HST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"NB\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Prince Edward Island\",\n        \"rate\": \"14.0000\",\n        \"name\": \"HST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"PE\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Nova Scotia\",\n        \"rate\": \"15.0000\",\n        \"name\": \"HST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"NS\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Alberta\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"AB\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"British Columbia\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"BC\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Northwest Territories\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"NT\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Nunavut\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"NU\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Yukon\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"YT\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Saskatchewan\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"SK\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Manitoba\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"MB\"\n      }, {\n        \"country\": \"Canada\",\n        \"state\": \"Quebec\",\n        \"rate\": \"5.0000\",\n        \"name\": \"GST\",\n        \"shipping\": true,\n        \"country_code\": \"CA\",\n        \"state_code\": \"QC\"\n      }, {\n        \"country\": \"Finland\",\n        \"state\": \"*\",\n        \"rate\": \"24.0000\",\n        \"name\": \"ALV\",\n        \"shipping\": true,\n        \"country_code\": \"FI\"\n      }, {\n        \"country\": \"France\",\n        \"state\": \"*\",\n        \"rate\": \"20.0000\",\n        \"name\": \"TVA\",\n        \"shipping\": true,\n        \"country_code\": \"FR\"\n      }, {\n        \"country\": \"Germany\",\n        \"state\": \"*\",\n        \"rate\": \"19.0000\",\n        \"name\": \"Mwst.\",\n        \"shipping\": true,\n        \"country_code\": \"DE\"\n      }, {\n        \"country\": \"Hungary\",\n        \"state\": \"*\",\n        \"rate\": \"27.0000\",\n        \"name\": \"FA\",\n        \"shipping\": true,\n        \"country_code\": \"HU\"\n      }, {\n        \"country\": \"Italy\",\n        \"state\": \"*\",\n        \"rate\": \"22.0000\",\n        \"name\": \"IVA\",\n        \"shipping\": true,\n        \"country_code\": \"IT\"\n      }, {\n        \"country\": \"Japan\",\n        \"state\": \"*\",\n        \"rate\": \"8.0000\",\n        \"name\": \"Consumption tax\",\n        \"shipping\": true,\n        \"country_code\": \"JP\"\n      }, {\n        \"country\": \"Nepal\",\n        \"state\": \"*\",\n        \"rate\": \"13.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"NP\"\n      }, {\n        \"country\": \"Netherlands\",\n        \"state\": \"*\",\n        \"rate\": \"21.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"NL\"\n      }, {\n        \"country\": \"Norway\",\n        \"state\": \"*\",\n        \"rate\": \"25.0000\",\n        \"name\": \"MVA\",\n        \"shipping\": true,\n        \"country_code\": \"NO\"\n      }, {\n        \"country\": \"Poland\",\n        \"state\": \"*\",\n        \"rate\": \"23.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"PL\"\n      }, {\n        \"country\": \"Romania\",\n        \"state\": \"*\",\n        \"rate\": \"19.0000\",\n        \"name\": \"TVA\",\n        \"shipping\": true,\n        \"country_code\": \"RO\"\n      }, {\n        \"country\": \"South Africa\",\n        \"state\": \"*\",\n        \"rate\": \"14.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"ZA\"\n      }, {\n        \"country\": \"Spain\",\n        \"state\": \"*\",\n        \"rate\": \"21.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"ES\"\n      }, {\n        \"country\": \"Thailand\",\n        \"state\": \"*\",\n        \"rate\": \"7.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"TH\"\n      }, {\n        \"country\": \"Turkey\",\n        \"state\": \"*\",\n        \"rate\": \"18.0000\",\n        \"name\": \"KDV\",\n        \"shipping\": true,\n        \"country_code\": \"TR\"\n      }, {\n        \"country\": \"United Kingdom\",\n        \"state\": \"*\",\n        \"rate\": \"20.0000\",\n        \"name\": \"VAT\",\n        \"shipping\": true,\n        \"country_code\": \"GB\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Alabama\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"AL\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Arizona\",\n        \"rate\": \"5.6000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"AZ\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Arkansas\",\n        \"rate\": \"6.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"AR\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"California\",\n        \"rate\": \"7.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"CA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Colorado\",\n        \"rate\": \"2.9000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"CO\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Connecticut\",\n        \"rate\": \"6.3500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"CT\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"District of Columbia\",\n        \"rate\": \"5.7500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"DC\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Florida\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"FL\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Georgia\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"GA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Guam\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"GU\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Hawaii\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"HI\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Idaho\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"ID\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Illinois\",\n        \"rate\": \"6.2500\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"IL\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Indiana\",\n        \"rate\": \"7.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"IN\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Iowa\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"IA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Kansas\",\n        \"rate\": \"6.1500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"KS\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Kentucky\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"KY\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Louisiana\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"LA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Maine\",\n        \"rate\": \"5.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"ME\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Maryland\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"MD\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Massachusetts\",\n        \"rate\": \"6.2500\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"MA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Michigan\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"MI\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Minnesota\",\n        \"rate\": \"6.8750\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"MN\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Mississippi\",\n        \"rate\": \"7.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"MS\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Missouri\",\n        \"rate\": \"4.225\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"MO\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Nebraska\",\n        \"rate\": \"5.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"NE\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Nevada\",\n        \"rate\": \"6.8500\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"NV\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"New Jersey\",\n        \"rate\": \"7.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"NJ\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"New Mexico\",\n        \"rate\": \"5.1250\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"NM\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"New York\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"NY\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"North Carolina\",\n        \"rate\": \"4.7500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"NC\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"North Dakota\",\n        \"rate\": \"5.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"ND\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Ohio\",\n        \"rate\": \"5.7500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"OH\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Oklahoma\",\n        \"rate\": \"4.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"OK\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Pennsylvania\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"PA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Puerto Rico\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"PR\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Rhode Island\",\n        \"rate\": \"7.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"RI\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"South Carolina\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"SC\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"South Dakota\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"SD\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Tennessee\",\n        \"rate\": \"7.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"TN\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Texas\",\n        \"rate\": \"6.2500\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"TX\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Utah\",\n        \"rate\": \"5.9500\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"UT\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Vermont\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"VT\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Virginia\",\n        \"rate\": \"5.3000\",\n        \"name\": \"State Tax\",\n        \"shipping\": false,\n        \"country_code\": \"US\",\n        \"state_code\": \"VA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Washington\",\n        \"rate\": \"6.5000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"WA\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"West Virginia\",\n        \"rate\": \"6.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"WV\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Wisconsin\",\n        \"rate\": \"5.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"WI\"\n      }, {\n        \"country\": \"United States\",\n        \"state\": \"Wyoming\",\n        \"rate\": \"4.0000\",\n        \"name\": \"State Tax\",\n        \"shipping\": true,\n        \"country_code\": \"US\",\n        \"state_code\": \"WY\"\n      }]\n    });\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/taxrates.factory.js","(function() {\n  'use strict';\n\n  angular.module('DataDashboard')\n    .factory('$utils', UtilsFactory);\n\n\n\n  /*\n   *   AngularJS Factory that handles the pagination object\n   *   \n   */\n  function UtilsFactory() {\n\n\n    // Container object we will return\n    var Factory = {};\n\n\n\n    var flatten = function(data) {\n      var result = {};\n\n      function recurse(cur, prop) {\n        if (Object(cur) !== cur) {\n          result[prop] = cur;\n        } else if (Array.isArray(cur)) {\n          for (var i = 0, l = cur.length; i < l; i++)\n            recurse(cur[i], prop + \"[\" + i + \"]\");\n          if (l === 0)\n            result[prop] = [];\n        } else {\n          var isEmpty = true;\n          for (var p in cur) {\n            isEmpty = false;\n            recurse(cur[p], prop ? prop + \".\" + p : p);\n          }\n          if (isEmpty && prop)\n            result[prop] = {};\n        }\n      }\n      recurse(data, \"\");\n      return result;\n    }\n\n    var unflatten = function(data) {\n      \"use strict\";\n      if (Object(data) !== data || Array.isArray(data)) return data;\n      var regex = /\\,?([^.\\[\\]]+)|\\[(\\d+)\\]/g,\n        resultholder = {};\n      for (var p in data) {\n        var cur = resultholder,\n          prop = \"\",\n          m;\n        while (m = regex.exec(p)) {\n          cur = cur[prop] || (cur[prop] = (m[2] ? [] : {}));\n          prop = m[2] || m[1];\n        }\n        cur[prop] = data[p];\n      }\n      return resultholder[\"\"] || resultholder;\n    }\n\n    Factory.flatten = flatten;\n    Factory.unflatten = unflatten;\n\n\n\n    /*\n     * @param {String} str The input string\n     * @return {String} The slug--ified version of the string\n     */\n    Factory.getSlugFromString = function(str) {\n      return str\n        .split(' ')\n        .map(function(item) {\n          return item.replace(/\\W/g, '')\n        })\n        .map(function(item) {\n          return item.toLowerCase()\n        })\n        .join('-')\n    }\n\n\n\n    /*\n     * @param {HTTPResponse} httpResponse The response object\n     */\n    Factory.getPaginationFromHTTPResponse = function(httpResponse) {\n      return {\n        currentPage: httpResponse.data.page,\n        numberOfPages: httpResponse.data.pages,\n        nextPage: httpResponse.data._links.next || null,\n        previousPage: httpResponse.data._links.prev || null,\n        count: httpResponse.data.count\n      }\n    }\n\n\n    // Exports an array of objects or an object to a JSON file\n    function JSONExport(data, title) {\n      if (!title)\n        title = 'Marketcloud_export_' + String(Date.now()) + '.json';\n\n      var encodedUri = encodeURI('data:application/json;charset=utf-8,' + JSON.stringify(data))\n      var link = document.createElement('a')\n      link.setAttribute('href', encodedUri)\n      link.setAttribute('download', title)\n      document.body.appendChild(link) // Required for FF\n\n      link.click() // This will download the data file named \"my_data.csv\".\n    }\n\n    Factory.exportAsJSON = JSONExport;\n\n\n    // Exports an array of objects or an object to a JSON file\n    function CSVExport(data, title) {\n      if (!title)\n        title = 'Marketcloud_export_' + String(Date.now()) + '.csv';\n\n      var encodedUri = encodeURI('data:text/csv;charset=utf-8,' + data )\n      var link = document.createElement('a')\n      link.setAttribute('href', encodedUri)\n      link.setAttribute('download', title)\n      document.body.appendChild(link) // Required for FF\n\n      link.click() // This will download the data file named \"my_data.csv\".\n    }\n\n    Factory.exportAsCSV = CSVExport;\n\n\n    /*\n     * Simple and UN-SAFE hash function\n     *\n     * @param {String} str the input string\n     * @return {String} the hashed string\n     */\n    function strhash(str) {\n      if (str.length % 32 > 0) {\n        str += Array(33 - str.length % 32).join(\"z\");\n      }\n      var hash = ''\n      var bytes = []\n      var i = 0;\n      var j = 0;\n      var k = 0;\n      var a = 0;\n      var dict = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n\n      for (i = 0; i < str.length; i++) {\n        var ch = str.charCodeAt(i);\n        bytes[j++] = (ch < 127) ? ch & 0xFF : 127;\n      }\n\n      var chunk_len = Math.ceil(bytes.length / 32);\n      for (i = 0; i < bytes.length; i++) {\n        j += bytes[i];\n        k++;\n        if ((k == chunk_len) || (i == bytes.length - 1)) {\n          a = Math.floor(j / k);\n          if (a < 32)\n            hash += '0';\n          else if (a > 126)\n            hash += 'z';\n          else\n            hash += dict[Math.floor((a - 32) / 2.76)];\n          j = k = 0;\n        }\n      }\n      return hash;\n    }\n\n    Factory.hash = strhash;\n\n\n    // Given a csv file (in string form)\n    // returns an array of objects\n    Factory.CSVToJSON = function(csv) {\n      var rows = csv.split(\"\\n\");\n\n      var header = rows[0];\n      var header_fields = header.split(\",\");\n\n      var objects = []\n\n      for (var i = 1; i < rows.length; i++) {\n        var o = {};\n        var row_fields = rows[i].split(\",\");\n\n        for (var k = 0; k < header_fields.length; k++) {\n          if (row_fields[k] !== \"\"){\n            o[header_fields[k]] = row_fields[k];\n            \n            if (\"true\" === o[header_fields[k]] || \"false\" === o[header_fields[k]])\n              o[header_fields[k]] = Boolean(o[header_fields[k]]);\n            else if (!isNaN(o[header_fields[k]]) ){\n              // Keeping the else-if otherwise\n              // test will fail converting a boolean to number\n              o[header_fields[k]] = Number(o[header_fields[k]]);\n            }\n\n\n          }\n        }\n\n        objects.push(o)\n      }\n\n      return objects;\n    }\n\n\n    Factory.JSONToCSV = function(json) {\n      if (!Array.isArray(json))\n        json = [json];\n\n      var fields = [];\n\n      json.forEach(function(row) {\n        for (var k in row) {\n          if (fields.indexOf(k) < 0)\n            fields.push(k)\n        }\n      })\n\n      var firstRow = fields.join(',');\n\n      var buf = firstRow + \"\\n\";\n\n      json.forEach(function(row) {\n        fields.forEach(function(field) {\n          if (row.hasOwnProperty(field) && row[field] !== null)\n            buf += row[field] + \",\";\n          else\n            buf += \",\";\n        })\n        buf += \"\\n\";\n      })\n\n      // lets remove the last newline\n      buf = buf.replace(/\\n$/, \"\");\n\n      return buf;\n\n\n\n    }\n\n\n    return Factory;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/utils.factory.js","(function() {\n  'use strict';\n\n  angular.module('DataDashboard')\n    .factory('$validation', ValidationService);\n\n\n\n  /*\n   *   AngularJS Service that handles the pagination object\n   *   \n   */\n  function ValidationService() {\n\n\n    // Container object we will return\n    var Service = {};\n\n\n    Service.showErrorMessage = function(validation,schema,  selector) {\n\n      Service.hideErrors();\n\n      selector = selector || '[ng-model=\"'+validation.invalidPropertyName+'\"]'\n\n      if (0 === angular.element(selector).length) {\n        console.log(\"COuld now match selector \"+selector+\" to show error message, exiting\");\n        return;\n      }    \n\n      var element = angular.element(selector);\n\n      var errorMessage = Service.getErrorMessage(validation,schema);\n\n      var parent = element.parent();\n\n      if (parent.hasClass('input-group'))\n        parent = parent.parent();\n\n      parent.append('<div class=\"error-message\">'+errorMessage+'</div>')\n      parent.addClass(\"has-error\")\n\n      $('html, body').animate({\n        scrollTop: element.offset().top - 200\n      }, 500);\n      \n    }\n\n    Service.getErrorMessage = function(validation, schema) {\n\n\n      switch (validation.failedValidator) {\n        case \"required\":\n          return \"This field is required\";\n\n        case \"type\":\n          return \"This field must be a \"+schema[validation.invalidPropertyName].type;\n\n        case \"min\":\n          if (\"number\" === schema[validation.invalidPropertyName].type)\n            return \"Minimum value is \"+schema[validation.invalidPropertyName].min;\n          else if (\"string\" === schema[validation.invalidPropertyName].type)\n            return \"Minimum length is \"+schema[validation.invalidPropertyName].min;\n          else if (\"array\" === schema[validation.invalidPropertyName].type)\n            return \"Minimum number of elements is is \"+schema[validation.invalidPropertyName].min;\n          else\n            return \"Minimum is \"+schema[validation.invalidPropertyName].min;\n\n        case \"max\":\n          if (\"number\" === schema[validation.invalidPropertyName].type)\n            return \"Maxiumum value is \"+schema[validation.invalidPropertyName].max;\n          else if (\"string\" === schema[validation.invalidPropertyName].type)\n            return \"Maxiumum length is \"+schema[validation.invalidPropertyName].max;\n          else if (\"array\" === schema[validation.invalidPropertyName].type)\n            return \"Maxiumum number of elements is is \"+schema[validation.invalidPropertyName].max;\n          else\n            return \"Maxiumum is \"+schema[validation.invalidPropertyName].max;\n        break;\n\n        default :\n          return \"This field is invalid\";\n        break;\n      }\n    }\n\n\n    Service.hideErrors = function(){\n      angular.element('.error-message').remove()\n      angular.element('.has-error').removeClass('has-error')\n    }\n\n    \n\n    \n\n\n    return Service;\n  }\n})();\n\n\n// WEBPACK FOOTER //\n// ./public/modules/data_dashboard/src/factories/validation.service.js"],"sourceRoot":""}